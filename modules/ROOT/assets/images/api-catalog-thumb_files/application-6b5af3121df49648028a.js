/*! For license information please see application-6b5af3121df49648028a.js.LICENSE.txt */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["application"],{"+hMj":function(e,t){e.exports="function categoriesTagSetup (existing_tags) {\n  existing_tags = JSON.parse(existing_tags);\n  var TagCollection = new TagSet.init();\n\n  TagCollection.setup({\n    $input_container: $(\"#input-tags\"),\n    $tag_field_container: $(\"#category-valid-tags\"),\n    preset_tags: existing_tags,\n    max_characters: 30,\n    sorting_options: {\n      alphabetical_sort: true\n    },\n    show_suggestions: true,\n    tagSuggestionsURL: \"/api/v1/tags/names?query=%QUERY\",\n    onAdd: function(tag_model) {\n      $(\"div[data-tag-id='\" + tag_model.id + \"']\").addClass('grey');\n      self.$(\"div[data-tag-id='\" + tag_model.id + \"']\").click(function() {\n        $(\"#category-tag-assign\").slideDown('fast');\n        $(\"div[data-tag-id='\" + tag_model.id + \"']\").appendTo('#category-tag-assign');\n        // toggle the element, remove its input if clicked on twice\n        if ($(\"div[data-tag-id='\" + tag_model.id + \"']\").hasClass('grey')) {\n          $(\"div[data-tag-id='\" + tag_model.id + \"']\").removeClass('grey');\n          //adds tags to a hidden form that gets submitted when page is saved\n          $('#category-tag-area').append('<input type=\\'hidden\\' name=\\'category[distinct_tag_names][]\\' class=\"tag-id-' + tag_model.id + '\" value=\\''+ tag_model.value +'\\'/>');\n        } else {\n          $(\"div[data-tag-id='\" + tag_model.id + \"']\").addClass('grey');\n          $(\"div[data-tag-id='\" + tag_model.id + \"']\").appendTo('#category-valid-tags');\n          $(\".tag-id-\" + tag_model.id).remove();\n\n          // Hide the tag container if no tags are selected.\n          if ($(\"#category-tag-assign .tag-container\").length == 0) {\n            $(\"#category-tag-assign\").slideUp('fast');\n          }\n        }\n      });\n    },\n    onValidationSuccess: function(tag_model) {\n      $(\"#error-box\").removeClass('alert-warning');\n      $(\"#error-box\").addClass('display-none');\n    }\n  });\n}\n"},"/Su4":function(e,t){(function(e,t){"use strict";if(e.rails!==t){e.error("jquery-ujs has already been loaded!")}var n;var i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();if(t)e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,i){var r=e.Event(n);t.trigger(r,i);return r.result!==false},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==false},handleRemote:function(i){var r,o,s,a,l,c;if(n.fire(i,"ajax:before")){a=i.data("with-credentials")||null;l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(i.is("form")){r=i.data("ujs:submit-button-formmethod")||i.attr("method");o=i.data("ujs:submit-button-formaction")||i.attr("action");s=e(i[0]).serializeArray();var u=i.data("ujs:submit-button");if(u){s.push(u);i.data("ujs:submit-button",null)}i.data("ujs:submit-button-formmethod",null);i.data("ujs:submit-button-formaction",null)}else if(i.is(n.inputChangeSelector)){r=i.data("method");o=i.data("url");s=i.serialize();if(i.data("params"))s=s+"&"+i.data("params")}else if(i.is(n.buttonClickSelector)){r=i.data("method")||"get";o=i.data("url");s=i.serialize();if(i.data("params"))s=s+"&"+i.data("params")}else{r=i.data("method");o=n.href(i);s=i.data("params")||null}c={type:r||"GET",data:s,dataType:l,beforeSend:function(e,r){if(r.dataType===t){e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script)}if(n.fire(i,"ajax:beforeSend",[e,r])){i.trigger("ajax:send",e)}else{return false}},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(o)};if(a){c.xhrFields={withCredentials:a}}if(o){c.url=o}return n.ajax(c)}else{return false}},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{n.href=e;n.href=n.href;return!((!n.protocol||n.protocol===":")&&!n.host||t.protocol+"//"+t.host===n.protocol+"//"+n.host)}catch(e){return true}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),s=i.attr("target"),a=n.csrfToken(),l=n.csrfParam(),c=e('<form method="post" action="'+r+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';if(l!==t&&a!==t&&!n.isCrossDomain(r)){u+='<input name="'+l+'" value="'+a+'" type="hidden" />'}if(s){c.attr("target",s)}c.hide().append(u).appendTo("body");c.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each((function(){n.disableFormElement(e(this))}))},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val";i=e.data("disable-with");if(i!==t){e.data("ujs:enable-with",e[n]());e[n](i)}e.prop("disabled",true);e.data("ujs:disabled",true)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each((function(){n.enableFormElement(e(this))}))},enableFormElement:function(e){var n=e.is("button")?"html":"val";if(e.data("ujs:enable-with")!==t){e[n](e.data("ujs:enable-with"));e.removeData("ujs:enable-with")}e.prop("disabled",false);e.removeData("ujs:disabled")},allowAction:function(e){var t=e.data("confirm"),i=false,r;if(!t){return true}if(n.fire(e,"confirm")){try{i=n.confirm(t)}catch(e){(console.error||console.log).call(console,e.stack||e)}r=n.fire(e,"confirm:complete",[i])}return i&&r},blankInputs:function(t,n,i){var r=e(),o,s,a,l,c=n||"input,textarea",u=t.find(c),d={};u.each((function(){o=e(this);if(o.is("input[type=radio]")){l=o.attr("name");if(!d[l]){if(t.find('input[type=radio]:checked[name="'+l+'"]').length===0){a=t.find('input[type=radio][name="'+l+'"]');r=r.add(a)}d[l]=l}}else{s=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val();if(s===i){r=r.add(o)}}}));return r.length?r:false},nonBlankInputs:function(e,t){return n.blankInputs(e,t,true)},stopEverything:function(t){e(t.target).trigger("ujs:everythingStopped");t.stopImmediatePropagation();return false},disableElement:function(e){var i=e.data("disable-with");if(i!==t){e.data("ujs:enable-with",e.html());e.html(i)}e.bind("click.railsDisable",(function(e){return n.stopEverything(e)}));e.data("ujs:disabled",true)},enableElement:function(e){if(e.data("ujs:enable-with")!==t){e.html(e.data("ujs:enable-with"));e.removeData("ujs:enable-with")}e.unbind("click.railsDisable");e.removeData("ujs:disabled")}};if(n.fire(i,"rails:attachBindings")){e.ajaxPrefilter((function(e,t,i){if(!e.crossDomain){n.CSRFProtection(i)}}));e(window).on("pageshow.rails",(function(){e(e.rails.enableSelector).each((function(){var t=e(this);if(t.data("ujs:disabled")){e.rails.enableFormElement(t)}}));e(e.rails.linkDisableSelector).each((function(){var t=e(this);if(t.data("ujs:disabled")){e.rails.enableElement(t)}}))}));i.on("ajax:complete",n.linkDisableSelector,(function(){n.enableElement(e(this))}));i.on("ajax:complete",n.buttonDisableSelector,(function(){n.enableFormElement(e(this))}));i.on("click.rails",n.linkClickSelector,(function(t){var i=e(this),r=i.data("method"),o=i.data("params"),s=t.metaKey||t.ctrlKey;if(!n.allowAction(i))return n.stopEverything(t);if(!s&&i.is(n.linkDisableSelector))n.disableElement(i);if(n.isRemote(i)){if(s&&(!r||r==="GET")&&!o){return true}var a=n.handleRemote(i);if(a===false){n.enableElement(i)}else{a.fail((function(){n.enableElement(i)}))}return false}else if(r){n.handleMethod(i);return false}}));i.on("click.rails",n.buttonClickSelector,(function(t){var i=e(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(t);if(i.is(n.buttonDisableSelector))n.disableFormElement(i);var r=n.handleRemote(i);if(r===false){n.enableFormElement(i)}else{r.fail((function(){n.enableFormElement(i)}))}return false}));i.on("change.rails",n.inputChangeSelector,(function(t){var i=e(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(t);n.handleRemote(i);return false}));i.on("submit.rails",n.formSubmitSelector,(function(i){var r=e(this),o=n.isRemote(r),s,a;if(!n.allowAction(r))return n.stopEverything(i);if(r.attr("novalidate")===t){if(r.data("ujs:formnovalidate-button")===t){s=n.blankInputs(r,n.requiredInputSelector,false);if(s&&n.fire(r,"ajax:aborted:required",[s])){return n.stopEverything(i)}}else{r.data("ujs:formnovalidate-button",t)}}if(o){a=n.nonBlankInputs(r,n.fileInputSelector);if(a){setTimeout((function(){n.disableFormElements(r)}),13);var l=n.fire(r,"ajax:aborted:file",[a]);if(!l){setTimeout((function(){n.enableFormElements(r)}),13)}return l}n.handleRemote(r);return false}else{setTimeout((function(){n.disableFormElements(r)}),13)}}));i.on("click.rails",n.formInputClickSelector,(function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;var s=i.closest("form");if(s.length===0){s=e("#"+i.attr("form"))}s.data("ujs:submit-button",o);s.data("ujs:formnovalidate-button",i.attr("formnovalidate"));s.data("ujs:submit-button-formaction",i.attr("formaction"));s.data("ujs:submit-button-formmethod",i.attr("formmethod"))}));i.on("ajax:send.rails",n.formSubmitSelector,(function(t){if(this===t.target)n.disableFormElements(e(this))}));i.on("ajax:complete.rails",n.formSubmitSelector,(function(t){if(this===t.target)n.enableFormElements(e(this))}));e((function(){n.refreshCSRFTokens()}))}})(jQuery)},"/pCv":function(e,t,n){n("8rVx")(n("547O"))},"0WdF":function(e,t,n){var i;(function(r,o){if(true){!(i=function(){return o(r)}.call(t,n,t,e),i!==undefined&&(e.exports=i))}else{}})(this,(function(e){"use strict";var t=e&&e.I18n||{};var n=Array.prototype.slice;var i=function(e){return("0"+e.toString()).substr(-2)};var r=function(e,t){return h("round",e,-t).toFixed(t)};var o=function(e){var t=typeof e;return t==="function"||t==="object"};var s=function(e){var t=typeof e;return t==="function"};var a=function(e){return typeof e!=="undefined"&&e!==null};var l=function(e){if(Array.isArray){return Array.isArray(e)}return Object.prototype.toString.call(e)==="[object Array]"};var c=function(e){return typeof e==="string"||Object.prototype.toString.call(e)==="[object String]"};var u=function(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"};var d=function(e){return e===true||e===false};var p=function(e){return e===null};var h=function(e,t,n){if(typeof n==="undefined"||+n===0){return Math[e](t)}t=+t;n=+n;if(isNaN(t)||!(typeof n==="number"&&n%1===0)){return NaN}t=t.toString().split("e");t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)));t=t.toString().split("e");return+(t[0]+"e"+(t[1]?+t[1]+n:n))};var f=function(e,t){if(s(e)){return e(t)}else{return e}};var m=function(e,t){var n,i;for(n in t)if(t.hasOwnProperty(n)){i=t[n];if(c(i)||u(i)||d(i)||l(i)||p(i)){e[n]=i}else{if(e[n]==null)e[n]={};m(e[n],i)}}return e};var g={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]};var v={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:false};var y={unit:"$",precision:2,format:"%u%n",sign_first:true,delimiter:",",separator:"."};var b={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""};var _=[null,"kb","mb","gb","tb"];var x={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:false,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};t.reset=function(){var e;for(e in x){this[e]=x[e]}};t.initializeOptions=function(){var e;for(e in x)if(!a(this[e])){this[e]=x[e]}};t.initializeOptions();t.locales={};t.locales.get=function(e){var n=this[e]||this[t.locale]||this["default"];if(s(n)){n=n(e)}if(l(n)===false){n=[n]}return n};t.locales["default"]=function(e){var n=[],i=[];if(e){n.push(e)}if(!e&&t.locale){n.push(t.locale)}if(t.fallbacks&&t.defaultLocale){n.push(t.defaultLocale)}n.forEach((function(e){var n=e.split("-");var r=null;var o=null;if(n.length===3){r=[n[0],n[1]].join("-");o=n[0]}else if(n.length===2){r=n[0]}if(i.indexOf(e)===-1){i.push(e)}if(!t.fallbacks){return}[r,o].forEach((function(t){if(typeof t==="undefined"){return}if(t===null){return}if(t===e){return}if(i.indexOf(t)!==-1){return}i.push(t)}))}));if(!n.length){n.push("en")}return i};t.pluralization={};t.pluralization.get=function(e){return this[e]||this[t.locale]||this["default"]};t.pluralization["default"]=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}};t.currentLocale=function(){return this.locale||this.defaultLocale};t.isSet=a;t.lookup=function(e,t){t=t||{};var n=this.locales.get(t.locale).slice(),i,r,o,s;o=this.getFullScope(e,t);while(n.length){i=n.shift();r=o.split(this.defaultSeparator);s=this.translations[i];if(!s){continue}while(r.length){s=s[r.shift()];if(s===undefined||s===null){break}}if(s!==undefined&&s!==null){return s}}if(a(t.defaultValue)){return f(t.defaultValue,e)}};t.pluralizationLookupWithoutFallback=function(e,t,n){var i=this.pluralization.get(t),r=i(e),s,l;if(o(n)){while(r.length){s=r.shift();if(a(n[s])){l=n[s];break}}}return l};t.pluralizationLookup=function(e,t,n){n=n||{};var i=this.locales.get(n.locale).slice(),r,s,l,c;t=this.getFullScope(t,n);while(i.length){r=i.shift();s=t.split(this.defaultSeparator);l=this.translations[r];if(!l){continue}while(s.length){l=l[s.shift()];if(!o(l)){break}if(s.length===0){c=this.pluralizationLookupWithoutFallback(e,r,l)}}if(typeof c!=="undefined"&&c!==null){break}}if(typeof c==="undefined"||c===null){if(a(n.defaultValue)){if(o(n.defaultValue)){c=this.pluralizationLookupWithoutFallback(e,n.locale,n.defaultValue)}else{c=n.defaultValue}l=n.defaultValue}}return{message:c,translations:l}};t.meridian=function(){var e=this.lookup("time");var t=this.lookup("date");if(e&&e.am&&e.pm){return[e.am,e.pm]}else if(t&&t.meridian){return t.meridian}else{return g.meridian}};t.prepareOptions=function(){var e=n.call(arguments),t={},i;while(e.length){i=e.shift();if(typeof i!="object"){continue}for(var r in i){if(!i.hasOwnProperty(r)){continue}if(a(t[r])){continue}t[r]=i[r]}}return t};t.createTranslationOptions=function(e,t){var n=[{scope:e}];if(a(t.defaults)){n=n.concat(t.defaults)}if(a(t.defaultValue)){n.push({message:t.defaultValue})}return n};t.translate=function(e,t){t=t||{};var n=this.createTranslationOptions(e,t);var i;var r=e;var s=this.prepareOptions(t);delete s.defaultValue;var c=n.some((function(t){if(a(t.scope)){r=t.scope;i=this.lookup(r,s)}else if(a(t.message)){i=f(t.message,e)}if(i!==undefined&&i!==null){return true}}),this);if(!c){return this.missingTranslation(e,t)}if(typeof i==="string"){i=this.interpolate(i,t)}else if(l(i)){i=i.map((function(e){return typeof e==="string"?this.interpolate(e,t):e}),this)}else if(o(i)&&a(t.count)){i=this.pluralize(t.count,r,t)}return i};t.interpolate=function(e,t){if(e===null){return e}t=t||{};var n=e.match(this.placeholder),i,r,o,s;if(!n){return e}while(n.length){i=n.shift();o=i.replace(this.placeholder,"$1");if(a(t[o])){r=t[o].toString().replace(/\$/gm,"_#$#_")}else if(o in t){r=this.nullPlaceholder(i,e,t)}else{r=this.missingPlaceholder(i,e,t)}s=new RegExp(i.replace(/{/gm,"\\{").replace(/}/gm,"\\}"));e=e.replace(s,r)}return e.replace(/_#\$#_/g,"$")};t.pluralize=function(e,t,n){n=this.prepareOptions({count:String(e)},n);var i,r;r=this.pluralizationLookup(e,t,n);if(typeof r.translations==="undefined"||r.translations==null){return this.missingTranslation(t,n)}if(typeof r.message!=="undefined"&&r.message!=null){return this.interpolate(r.message,n)}else{i=this.pluralization.get(n.locale);return this.missingTranslation(t+"."+i(e)[0],n)}};t.missingTranslation=function(e,t){if(this.missingBehaviour==="guess"){var n=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+n.replace("_"," ").replace(/([a-z])([A-Z])/g,(function(e,t,n){return t+" "+n.toLowerCase()}))}var i=t!=null&&t.locale!=null?t.locale:this.currentLocale();var r=this.getFullScope(e,t);var o=[i,r].join(this.defaultSeparator);return'[missing "'+o+'" translation]'};t.missingPlaceholder=function(e,t,n){return"[missing "+e+" value]"};t.nullPlaceholder=function(){return t.missingPlaceholder.apply(t,arguments)};t.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),v);var n=e<0,i=r(Math.abs(e),t.precision).toString(),o=i.split("."),s,a=[],l,c=t.format||"%n",u=n?"-":"";e=o[0];s=o[1];while(e.length>0){a.unshift(e.substr(Math.max(0,e.length-3),3));e=e.substr(0,e.length-3)}l=a.join(t.delimiter);if(t.strip_insignificant_zeros&&s){s=s.replace(/0+$/,"")}if(t.precision>0&&s){l+=t.separator+s}if(t.sign_first){c="%s"+c}else{c=c.replace("%n","%s%n")}l=c.replace("%u",t.unit).replace("%n",l).replace("%s",u);return l};t.toCurrency=function(e,t){t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),y);return this.toNumber(e,t)};t.localize=function(e,t,n){n||(n={});switch(e){case"currency":return this.toCurrency(t);case"number":e=this.lookup("number.format");return this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:var i;if(e.match(/^(date|time)/)){i=this.toTime(e,t)}else{i=t.toString()}return this.interpolate(i,n)}};t.parseDate=function(e){var t,n,i;if(typeof e=="object"){return e}t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/);if(t){for(var r=1;r<=6;r++){t[r]=parseInt(t[r],10)||0}t[2]-=1;i=t[7]?1e3*("0"+t[7]):null;if(t[8]){n=new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],i))}else{n=new Date(t[1],t[2],t[3],t[4],t[5],t[6],i)}}else if(typeof e=="number"){n=new Date;n.setTime(e)}else if(e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)){n=new Date;n.setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")))}else if(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)){n=new Date;n.setTime(Date.parse(e))}else{n=new Date;n.setTime(Date.parse(e))}return n};t.strftime=function(e,n){var r=this.lookup("date"),o=t.meridian();if(!r){r={}}r=this.prepareOptions(r,g);if(isNaN(e.getTime())){throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.")}var s=e.getDay(),a=e.getDate(),l=e.getFullYear(),c=e.getMonth()+1,u=e.getHours(),d=u,p=u>11?1:0,h=e.getSeconds(),f=e.getMinutes(),m=e.getTimezoneOffset(),v=Math.floor(Math.abs(m/60)),y=Math.abs(m)-v*60,b=(m>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(y.toString().length<2?"0"+y:y);if(d>12){d=d-12}else if(d===0){d=12}n=n.replace("%a",r.abbr_day_names[s]);n=n.replace("%A",r.day_names[s]);n=n.replace("%b",r.abbr_month_names[c]);n=n.replace("%B",r.month_names[c]);n=n.replace("%d",i(a));n=n.replace("%e",a);n=n.replace("%-d",a);n=n.replace("%H",i(u));n=n.replace("%-H",u);n=n.replace("%I",i(d));n=n.replace("%-I",d);n=n.replace("%m",i(c));n=n.replace("%-m",c);n=n.replace("%M",i(f));n=n.replace("%-M",f);n=n.replace("%p",o[p]);n=n.replace("%S",i(h));n=n.replace("%-S",h);n=n.replace("%w",s);n=n.replace("%y",i(l));n=n.replace("%-y",i(l).replace(/^0+/,""));n=n.replace("%Y",l);n=n.replace("%z",b);return n};t.toTime=function(e,t){var n=this.parseDate(t),i=this.lookup(e);if(n.toString().match(/invalid/i)){return n.toString()}if(!i){return n.toString()}return this.strftime(n,i)};t.toPercentage=function(e,t){t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),b);return this.toNumber(e,t)};t.toHumanSize=function(e,t){var n=1024,i=e,r=0,o,s;while(i>=n&&r<4){i=i/n;r+=1}if(r===0){o=this.t("number.human.storage_units.units.byte",{count:i});s=0}else{o=this.t("number.human.storage_units.units."+_[r]);s=i-Math.floor(i)===0?0:1}t=this.prepareOptions(t,{unit:o,precision:s,format:"%n%u",delimiter:""});return this.toNumber(i,t)};t.getFullScope=function(e,t){t=t||{};if(l(e)){e=e.join(this.defaultSeparator)}if(t.scope){e=[t.scope,e].join(this.defaultSeparator)}return e};t.extend=function(e,t){if(typeof e==="undefined"&&typeof t==="undefined"){return{}}return m(e,t)};t.t=t.translate;t.l=t.localize;t.p=t.pluralize;return t}))},"0X7h":function(e,t,n){n("8rVx")(n("Kn0B"))},"0oRM":function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);n=i(n);var r=!n?-1:t.indexOf(n);return~r?t.slice(0,r):t}},"0xFr":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(global){(function(e){"use strict";var t,n=["uploaderType","endpointType"];function i(e){var n=c(e||{}),i=r(n);s(i);l(n,i);return t}function r(e){var t=a("uploaderType"),n=a("endpointType");if(t){t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();if(n){return new qq[n]["FineUploader"+t](e)}return new qq["FineUploader"+t](e)}else{if(n){return new qq[n].FineUploader(e)}return new qq.FineUploader(e)}}function o(e,n){var i=t.data("fineuploader");if(n){if(i===undefined){i={}}i[e]=n;t.data("fineuploader",i)}else{if(i===undefined){return null}return i[e]}}function s(e){return o("uploader",e)}function a(e,t){return o(e,t)}function l(n,i){var r=n.callbacks={};e.each(i._options.callbacks,(function(n,i){var o,s;o=/^on(\w+)/.exec(n)[1];o=o.substring(0,1).toLowerCase()+o.substring(1);s=t;r[n]=function(){var t=Array.prototype.slice.call(arguments),n=[],r,a;e.each(t,(function(e,t){n.push(p(t))}));r=i.apply(this,t);try{a=s.triggerHandler(o,n)}catch(e){qq.log("Caught error in Fine Uploader jQuery event handler: "+e.message,"error")}if(r!=null){return r}return a}}));i._options.callbacks=r}function c(i,r){var o,s;if(r===undefined){if(i.uploaderType!=="basic"){o={element:t[0]}}else{o={}}}else{o=r}e.each(i,(function(t,i){if(e.inArray(t,n)>=0){a(t,i)}else if(i instanceof e){o[t]=i[0]}else if(e.isPlainObject(i)){o[t]={};c(i,o[t])}else if(e.isArray(i)){s=[];e.each(i,(function(t,n){var i={};if(n instanceof e){e.merge(s,n)}else if(e.isPlainObject(n)){c(n,i);s.push(i)}else{s.push(n)}}));o[t]=s}else{o[t]=i}}));if(r===undefined){return o}}function u(t){return e.type(t)==="string"&&!t.match(/^_/)&&s()[t]!==undefined}function d(e){var t=[],n=Array.prototype.slice.call(arguments,1),i;c(n,t);i=s()[e].apply(s(),t);return p(i)}function p(t){var n=t;if(t!=null&&typeof t==="object"&&(t.nodeType===1||t.nodeType===9)&&t.cloneNode){n=e(t)}return n}e.fn.fineUploader=function(n){var r=this,o=arguments,a=[];this.each((function(l,c){t=e(c);if(s()&&u(n)){a.push(d.apply(r,o));if(r.length===1){return false}}else if(typeof n==="object"||!n){i.apply(r,o)}else{e.error("Method "+n+" does not exist on jQuery.fineUploader")}}));if(a.length===1){return a[0]}else if(a.length>1){return a}return this}})(jQuery);(function(e){"use strict";var t="fineUploaderDnd",n;function i(e){if(!e){e={}}e.dropZoneElements=[n];var t=a(e);s(t);o(new qq.DragAndDrop(t));return n}function r(e,i){var r=n.data(t);if(i){if(r===undefined){r={}}r[e]=i;n.data(t,r)}else{if(r===undefined){return null}return r[e]}}function o(e){return r("dndInstance",e)}function s(t){var i=t.callbacks={};e.each(new qq.DragAndDrop.callbacks,(function(e,t){var r=e,o;o=n;i[e]=function(){var e=Array.prototype.slice.call(arguments),t=o.triggerHandler(r,e);return t}}))}function a(t,n){var i,r;if(n===undefined){i={}}else{i=n}e.each(t,(function(t,n){if(n instanceof e){i[t]=n[0]}else if(e.isPlainObject(n)){i[t]={};a(n,i[t])}else if(e.isArray(n)){r=[];e.each(n,(function(t,n){if(n instanceof e){e.merge(r,n)}else{r.push(n)}}));i[t]=r}else{i[t]=n}}));if(n===undefined){return i}}function l(t){return e.type(t)==="string"&&t==="dispose"&&o()[t]!==undefined}function c(e){var t=[],n=Array.prototype.slice.call(arguments,1);a(n,t);return o()[e].apply(o(),t)}e.fn.fineUploaderDnd=function(t){var r=this,s=arguments,a=[];this.each((function(u,d){n=e(d);if(o()&&l(t)){a.push(c.apply(r,s));if(r.length===1){return false}}else if(typeof t==="object"||!t){i.apply(r,s)}else{e.error("Method "+t+" does not exist in Fine Uploader's DnD module.")}}));if(a.length===1){return a[0]}else if(a.length>1){return a}return this}})(jQuery);(function(e){"use strict";e.fn.fineUploaderS3=function(t){if(typeof t==="object"){t.endpointType="s3"}return e.fn.fineUploader.apply(this,arguments)}})(jQuery);var qq=function(e){"use strict";return{hide:function(){e.style.display="none";return this},attach:function(t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}return function(){qq(e).detach(t,n)}},detach:function(t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else if(e.attachEvent){e.detachEvent("on"+t,n)}return this},contains:function(t){if(!t){return false}if(e===t){return true}if(e.contains){return e.contains(t)}else{return!!(t.compareDocumentPosition(e)&8)}},insertBefore:function(t){t.parentNode.insertBefore(e,t);return this},remove:function(){e.parentNode.removeChild(e);return this},css:function(t){if(e.style==null){throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!")}if(t.opacity!=null){if(typeof e.style.opacity!=="string"&&typeof e.filters!=="undefined"){t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"}}qq.extend(e.style,t);return this},hasClass:function(t,n){var i=new RegExp("(^| )"+t+"( |$)");return i.test(e.className)||!!(n&&i.test(e.parentNode.className))},addClass:function(t){if(!qq(e).hasClass(t)){e.className+=" "+t}return this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(t,n){var i,r=[];if(n&&e.querySelector){return e.querySelector("."+t)}else if(e.querySelectorAll){return e.querySelectorAll("."+t)}i=e.getElementsByTagName("*");qq.each(i,(function(e,n){if(qq(n).hasClass(t)){r.push(n)}}));return n?r[0]:r},getFirstByClass:function(t){return qq(e).getByClass(t,true)},children:function(){var t=[],n=e.firstChild;while(n){if(n.nodeType===1){t.push(n)}n=n.nextSibling}return t},setText:function(t){e.innerText=t;e.textContent=t;return this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var n;if(e.hasAttribute){if(!e.hasAttribute(t)){return false}return/^false$/i.exec(e.getAttribute(t))==null}else{n=e[t];if(n===undefined){return false}return/^false$/i.exec(n)==null}}}};(function(){"use strict";qq.canvasToBlob=function(e,t,n){return qq.dataUriToBlob(e.toDataURL(t,n))};qq.dataUriToBlob=function(e){var t,n,i=function(e,t){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=n&&new n;if(i){i.append(e);return i.getBlob(t)}else{return new Blob([e],{type:t})}},r,o;if(e.split(",")[0].indexOf("base64")>=0){n=atob(e.split(",")[1])}else{n=decodeURI(e.split(",")[1])}o=e.split(",")[0].split(":")[1].split(";")[0];t=new ArrayBuffer(n.length);r=new Uint8Array(t);qq.each(n,(function(e,t){r[e]=t.charCodeAt(0)}));return i(t,o)};qq.log=function(e,t){if(window.console){if(!t||t==="info"){window.console.log(e)}else{if(window.console[t]){window.console[t](e)}else{window.console.log("<"+t+"> "+e)}}}};qq.isObject=function(e){return e&&!e.nodeType&&Object.prototype.toString.call(e)==="[object Object]"};qq.isFunction=function(e){return typeof e==="function"};qq.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"||e&&window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer};qq.isItemList=function(e){return Object.prototype.toString.call(e)==="[object DataTransferItemList]"};qq.isNodeList=function(e){return Object.prototype.toString.call(e)==="[object NodeList]"||e.item&&e.namedItem};qq.isString=function(e){return Object.prototype.toString.call(e)==="[object String]"};qq.trimStr=function(e){if(String.prototype.trim){return e.trim()}return e.replace(/^\s+|\s+$/g,"")};qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e,i=n.indexOf("{}");qq.each(t,(function(e,t){var r=n.substring(0,i),o=n.substring(i+2);n=r+t+o;i=n.indexOf("{}",i+t.length);if(i<0){return false}}));return n};qq.isFile=function(e){return window.File&&Object.prototype.toString.call(e)==="[object File]"};qq.isFileList=function(e){return window.FileList&&Object.prototype.toString.call(e)==="[object FileList]"};qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)};qq.isInput=function(e,t){var n=function(e){var n=e.toLowerCase();if(t){return n!=="file"}return n==="file"};if(window.HTMLInputElement){if(Object.prototype.toString.call(e)==="[object HTMLInputElement]"){if(e.type&&n(e.type)){return true}}}if(e.tagName){if(e.tagName.toLowerCase()==="input"){if(e.type&&n(e.type)){return true}}}return false};qq.isBlob=function(e){if(window.Blob&&Object.prototype.toString.call(e)==="[object Blob]"){return true}};qq.isXhrUploadSupported=function(){var e=document.createElement("input");e.type="file";return e.multiple!==undefined&&typeof File!=="undefined"&&typeof FormData!=="undefined"&&typeof qq.createXhrInstance().upload!=="undefined"};qq.createXhrInstance=function(){if(window.XMLHttpRequest){return new XMLHttpRequest}try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){qq.log("Neither XHR or ActiveX are supported!","error");return null}};qq.isFolderDropSupported=function(e){return e.items&&e.items.length>0&&e.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(File.prototype.slice!==undefined||File.prototype.webkitSlice!==undefined||File.prototype.mozSlice!==undefined)};qq.sliceBlob=function(e,t,n){var i=e.slice||e.mozSlice||e.webkitSlice;return i.call(e,t,n)};qq.arrayBufferToHex=function(e){var t="",n=new Uint8Array(e);qq.each(n,(function(e,n){var i=n.toString(16);if(i.length<2){i="0"+i}t+=i}));return t};qq.readBlobToHex=function(e,t,n){var i=qq.sliceBlob(e,t,t+n),r=new FileReader,o=new qq.Promise;r.onload=function(){o.success(qq.arrayBufferToHex(r.result))};r.onerror=o.failure;r.readAsArrayBuffer(i);return o};qq.extend=function(e,t,n){qq.each(t,(function(t,i){if(n&&qq.isObject(i)){if(e[t]===undefined){e[t]={}}qq.extend(e[t],i,true)}else{e[t]=i}}));return e};qq.override=function(e,t){var n={},i=t(n);qq.each(i,(function(t,i){if(e[t]!==undefined){n[t]=e[t]}e[t]=i}));return e};qq.indexOf=function(e,t,n){if(e.indexOf){return e.indexOf(t,n)}n=n||0;var i=e.length;if(n<0){n+=i}for(;n<i;n+=1){if(e.hasOwnProperty(n)&&e[n]===t){return n}}return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}))};qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.indexOf("Trident")!==-1};qq.ie7=function(){return navigator.userAgent.indexOf("MSIE 7")!==-1};qq.ie8=function(){return navigator.userAgent.indexOf("MSIE 8")!==-1};qq.ie10=function(){return navigator.userAgent.indexOf("MSIE 10")!==-1};qq.ie11=function(){return qq.ie()&&navigator.userAgent.indexOf("rv:11")!==-1};qq.edge=function(){return navigator.userAgent.indexOf("Edge")>=0};qq.safari=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1};qq.chrome=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1};qq.opera=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Opera")!==-1};qq.firefox=function(){return!qq.edge()&&!qq.ie11()&&navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor===""};qq.windows=function(){return navigator.platform==="Win32"};qq.android=function(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1};qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0};qq.ios6=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 6_")!==-1};qq.ios7=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 7_")!==-1};qq.ios8=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 8_")!==-1};qq.ios800=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 8_0 ")!==-1};qq.ios=function(){return navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPhone")!==-1};qq.iosChrome=function(){return qq.ios()&&navigator.userAgent.indexOf("CriOS")!==-1};qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&navigator.userAgent.indexOf("Safari")!==-1};qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()};qq.preventDefault=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;e.removeChild(n);return n}}();qq.each=function(e,t){var n,i;if(e){if(window.Storage&&e.constructor===window.Storage){for(n=0;n<e.length;n++){i=t(e.key(n),e.getItem(e.key(n)));if(i===false){break}}}else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e)){for(n=0;n<e.length;n++){i=t(n,e[n]);if(i===false){break}}}else if(qq.isString(e)){for(n=0;n<e.length;n++){i=t(n,e.charAt(n));if(i===false){break}}}else{for(n in e){if(Object.prototype.hasOwnProperty.call(e,n)){i=t(n,e[n]);if(i===false){break}}}}}};qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var i=qq.extend([],n);if(arguments.length){i=i.concat(Array.prototype.slice.call(arguments))}return e.apply(t,i)}}throw new Error("first parameter must be a function!")};qq.obj2url=function(e,t,n){var i=[],r="&",o=function(e,n){var r=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;if(r!=="undefined"&&n!=="undefined"){i.push(typeof e==="object"?qq.obj2url(e,r,true):Object.prototype.toString.call(e)==="[object Function]"?encodeURIComponent(r)+"="+encodeURIComponent(e()):encodeURIComponent(r)+"="+encodeURIComponent(e))}};if(!n&&t){r=/\?/.test(t)?/\?$/.test(t)?"":"&":"?";i.push(t);i.push(qq.obj2url(e))}else if(Object.prototype.toString.call(e)==="[object Array]"&&typeof e!=="undefined"){qq.each(e,(function(e,t){o(t,e)}))}else if(typeof e!=="undefined"&&e!==null&&typeof e==="object"){qq.each(e,(function(e,t){o(t,e)}))}else{i.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}if(t){return i.join(r)}else{return i.join(r).replace(/^&/,"").replace(/%20/g,"+")}};qq.obj2FormData=function(e,t,n){if(!t){t=new FormData}qq.each(e,(function(e,i){e=n?n+"["+e+"]":e;if(qq.isObject(i)){qq.obj2FormData(i,t,e)}else if(qq.isFunction(i)){t.append(e,i())}else{t.append(e,i)}}));return t};qq.obj2Inputs=function(e,t){var n;if(!t){t=document.createElement("form")}qq.obj2FormData(e,{append:function(e,i){n=document.createElement("input");n.setAttribute("name",e);n.setAttribute("value",i);t.appendChild(n)}});return t};qq.parseJson=function(json){if(window.JSON&&qq.isFunction(JSON.parse)){return JSON.parse(json)}else{return eval("("+json+")")}};qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;if(t>0){return e.substr(t,e.length-t)}};qq.getFilename=function(e){if(qq.isInput(e)){return e.value.replace(/.*(\/|\\)/,"")}else if(qq.isFile(e)){if(e.fileName!==null&&e.fileName!==undefined){return e.fileName}}return e.name};qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do{t=e.shift();if(t){t()}}while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}})();(function(){"use strict";if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return qq}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})();(function(){"use strict";qq.Error=function(e){this.message="[Fine Uploader "+qq.version+"] "+e};qq.Error.prototype=new Error})();qq.version="5.14.5";qq.supportedFeatures=function(){"use strict";var e,t,n,i,r,o,s,a,l,c,u,d,p,h,f;function m(){var e=true,t;try{t=document.createElement("input");t.type="file";qq(t).hide();if(t.disabled){e=false}}catch(t){e=false}return e}function g(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)!==undefined}function v(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)!==undefined}function y(){if(window.XMLHttpRequest){var e=qq.createXhrInstance();return e.withCredentials!==undefined}return false}function b(){return window.XDomainRequest!==undefined}function _(){if(y()){return true}return b()}function x(){return document.createElement("input").webkitdirectory!==undefined}function w(){try{return!!window.localStorage&&qq.isFunction(window.localStorage.setItem)}catch(e){return false}}function k(){var e=document.createElement("span");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!qq.android()&&!qq.ios()}e=m();i=e&&qq.isXhrUploadSupported();t=i&&!qq.androidStock();n=i&&k();r=n&&g();o=i&&qq.isFileChunkingSupported();s=i&&o&&w();a=i&&v();l=e&&(window.postMessage!==undefined||i);u=y();c=b();d=_();p=x();h=i&&window.FileReader!==undefined;f=function(){if(i){return!qq.androidStock()&&!qq.iosChrome()}return false}();return{ajaxUploading:i,blobUploading:t,canDetermineSize:i,chunking:o,deleteFileCors:d,deleteFileCorsXdr:c,deleteFileCorsXhr:u,dialogElement:!!window.HTMLDialogElement,fileDrop:n,folderDrop:r,folderSelection:p,imagePreviews:h,imageValidation:h,itemSizeValidation:i,pause:o,progressBar:f,resume:s,scaling:h&&t,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:e,uploadCors:l,uploadCustomHeaders:i,uploadNonMultipart:i,uploadViaPaste:a}}();qq.isGenericPromise=function(e){"use strict";return!!(e&&e.then&&qq.isFunction(e.then))};qq.Promise=function(){"use strict";var e,t,n=[],i=[],r=[],o=0;qq.extend(this,{then:function(r,s){if(o===0){if(r){n.push(r)}if(s){i.push(s)}}else if(o===-1){s&&s.apply(null,t)}else if(r){r.apply(null,e)}return this},done:function(n){if(o===0){r.push(n)}else{n.apply(null,t===undefined?e:t)}return this},success:function(){o=1;e=arguments;if(n.length){qq.each(n,(function(t,n){n.apply(null,e)}))}if(r.length){qq.each(r,(function(t,n){n.apply(null,e)}))}return this},failure:function(){o=-1;t=arguments;if(i.length){qq.each(i,(function(e,n){n.apply(null,t)}))}if(r.length){qq.each(r,(function(e,n){n.apply(null,t)}))}return this}})};qq.BlobProxy=function(e,t){"use strict";qq.extend(this,{referenceBlob:e,create:function(){return t(e)}})};qq.UploadButton=function(e){"use strict";var t=this,n=new qq.DisposeSupport,i={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:false,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:false,multiple:false,name:"qqfile",onChange:function(e){},title:null},r,o;qq.extend(i,e);o=qq.getUniqueId();function s(){var e=document.createElement("input");e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,o);e.setAttribute("title",i.title);t.setMultiple(i.multiple,e);if(i.folders&&qq.supportedFeatures.folderSelection){e.setAttribute("webkitdirectory","")}if(i.acceptFiles){e.setAttribute("accept",i.acceptFiles)}e.setAttribute("type","file");e.setAttribute("name",i.name);qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0});!qq.ie7()&&qq(e).css({height:"100%"});i.element.appendChild(e);n.attach(e,"change",(function(){i.onChange(e)}));n.attach(e,"mouseover",(function(){qq(i.element).addClass(i.hoverClass)}));n.attach(e,"mouseout",(function(){qq(i.element).removeClass(i.hoverClass)}));n.attach(e,"focus",(function(){qq(i.element).addClass(i.focusClass)}));n.attach(e,"blur",(function(){qq(i.element).removeClass(i.focusClass)}));return e}qq(i.element).css({position:"relative",overflow:"hidden",direction:"ltr"});qq.extend(this,{getInput:function(){return r},getButtonId:function(){return o},setMultiple:function(e,t){var n=t||this.getInput();if(i.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())){n.setAttribute("multiple","")}else{if(e){n.setAttribute("multiple","")}else{n.removeAttribute("multiple")}}},setAcceptFiles:function(e){if(e!==i.acceptFiles){r.setAttribute("accept",e)}},reset:function(){if(r.parentNode){qq(r).remove()}qq(i.element).removeClass(i.focusClass);r=null;r=s()}});r=s()};qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";qq.UploadData=function(e){"use strict";var t=[],n={},i={},r={},o={};function s(e){if(qq.isArray(e)){var n=[];qq.each(e,(function(e,i){n.push(t[i])}));return n}return t[e]}function a(e){if(qq.isArray(e)){var i=[];qq.each(e,(function(e,r){i.push(t[n[r]])}));return i}return t[n[e]]}function l(e){var n=[],r=[].concat(e);qq.each(r,(function(e,r){var o=i[r];if(o!==undefined){qq.each(o,(function(e,i){n.push(t[i])}))}}));return n}qq.extend(this,{addFile:function(s){var a=s.status||qq.status.SUBMITTING,l=t.push({name:s.name,originalName:s.name,uuid:s.uuid,size:s.size==null?-1:s.size,status:a})-1;if(s.batchId){t[l].batchId=s.batchId;if(o[s.batchId]===undefined){o[s.batchId]=[]}o[s.batchId].push(l)}if(s.proxyGroupId){t[l].proxyGroupId=s.proxyGroupId;if(r[s.proxyGroupId]===undefined){r[s.proxyGroupId]=[]}r[s.proxyGroupId].push(l)}t[l].id=l;n[s.uuid]=l;if(i[a]===undefined){i[a]=[]}i[a].push(l);s.onBeforeStatusChange&&s.onBeforeStatusChange(l);e.onStatusChange(l,null,a);return l},retrieve:function(e){if(qq.isObject(e)&&t.length){if(e.id!==undefined){return s(e.id)}else if(e.uuid!==undefined){return a(e.uuid)}else if(e.status){return l(e.status)}}else{return qq.extend([],t,true)}},reset:function(){t=[];n={};i={};o={}},setStatus:function(n,r){var o=t[n].status,s=qq.indexOf(i[o],n);i[o].splice(s,1);t[n].status=r;if(i[r]===undefined){i[r]=[]}i[r].push(n);e.onStatusChange(n,o,r)},uuidChanged:function(e,i){var r=t[e].uuid;t[e].uuid=i;n[i]=e;delete n[r]},updateName:function(e,n){t[e].name=n},updateSize:function(e,n){t[e].size=n},setParentId:function(e,n){t[e].parentId=n},getIdsInProxyGroup:function(e){var n=t[e].proxyGroupId;if(n){return r[n]}return[]},getIdsInBatch:function(e){var n=t[e].batchId;return o[n]}})};qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){"use strict";qq.basePublicApi={addBlobs:function(e,t,n){this.addFiles(e,t,n)},addInitialFiles:function(e){var t=this;qq.each(e,(function(e,n){t._addCannedFile(n)}))},addFiles:function(e,t,n){this._maybeHandleIos8SafariWorkaround();var i=this._storedIds.length===0?qq.getUniqueId():this._currentBatchId,r=qq.bind((function(e){this._handleNewFile({blob:e,name:this._options.blobs.defaultName},i,d)}),this),o=qq.bind((function(e){this._handleNewFile(e,i,d)}),this),s=qq.bind((function(e){var t=qq.canvasToBlob(e);this._handleNewFile({blob:t,name:this._options.blobs.defaultName+".png"},i,d)}),this),a=qq.bind((function(e){var t=e.quality&&e.quality/100,n=qq.canvasToBlob(e.canvas,e.type,t);this._handleNewFile({blob:n,name:e.name},i,d)}),this),l=qq.bind((function(e){if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading){var t=Array.prototype.slice.call(e.files),n=this;qq.each(t,(function(e,t){n._handleNewFile(t,i,d)}))}else{this._handleNewFile(e,i,d)}}),this),c=function(){if(qq.isFileList(e)){e=Array.prototype.slice.call(e)}e=[].concat(e)},u=this,d=[];this._currentBatchId=i;if(e){c();qq.each(e,(function(e,t){if(qq.isFileOrInput(t)){l(t)}else if(qq.isBlob(t)){r(t)}else if(qq.isObject(t)){if(t.blob&&t.name){o(t)}else if(t.canvas&&t.name){a(t)}}else if(t.tagName&&t.tagName.toLowerCase()==="canvas"){s(t)}else{u.log(t+" is not a valid file container!  Ignoring!","warn")}}));this.log("Received "+d.length+" files.");this._prepareItemsForUpload(d,t,n)}},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds);qq.each(e,(function(e,n){t.cancel(n)}));this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false}if(t.status===qq.status.PAUSED){this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e)));this._uploadFile(e);return true}else{this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error")}return false},deleteFile:function(e){return this._onSubmitDelete(e)},doesExist:function(e){return this._handler.isValid(e)},drawThumbnail:function(e,t,n,i,r){var o=new qq.Promise,s,a;if(this._imageGenerator){s=this._thumbnailUrls[e];a={customResizeFunction:r,maxSize:n>0?n:null,scale:n>0};if(!i&&qq.supportedFeatures.imagePreviews){s=this.getFile(e)}if(s==null){o.failure({container:t,error:"File or URL not found."})}else{this._imageGenerator.generate(s,t,a).then((function e(t){o.success(t)}),(function e(t,n){o.failure({container:t,error:n||"Problem generating thumbnail"})}))}}else{o.failure({container:t,error:"Missing image generator module"})}return o},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},getEndpoint:function(e){return this._endpointStore.get(e)},getFile:function(e){return this._handler.getFile(e)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(e){return this._uploadData.retrieve({id:e}).name},getParentId:function(e){var t=this.getUploads({id:e}),n=null;if(t){if(t.parentId!==undefined){n=t.parentId}}return n},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._uploadData.retrieve({id:e}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var e=this._currentItemLimit;if(e>0){return e-this._netUploadedOrQueued}return null},getUploads:function(e){return this._uploadData.retrieve(e)},getUuid:function(e){return this._uploadData.retrieve({id:e}).uuid},log:function(e,t){if(this._options.debug&&(!t||t==="info")){qq.log("[Fine Uploader "+qq.version+"] "+e)}else if(t&&t!=="info"){qq.log("[Fine Uploader "+qq.version+"] "+e,t)}},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false}if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e)){this._uploadData.setStatus(e,qq.status.PAUSED);return true}else{this.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}}else{this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error")}return false},removeFileRef:function(e){this._handler.expunge(e)},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];qq.each(this._buttons,(function(e,t){t.reset()}));this._paramsStore.reset();this._endpointStore.reset();this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._totalProgress&&this._totalProgress.reset()},retry:function(e){return this._manualRetry(e)},scaleImage:function(e,t){var n=this;return qq.Scaler.prototype.scaleImage(e,t,{log:qq.bind(n.log,n),getFile:qq.bind(n.getFile,n),uploadData:n._uploadData})},setCustomHeaders:function(e,t){this._customHeadersStore.set(e,t)},setDeleteFileCustomHeaders:function(e,t){this._deleteFileCustomHeadersStore.set(e,t)},setDeleteFileEndpoint:function(e,t){this._deleteFileEndpointStore.set(e,t)},setDeleteFileParams:function(e,t){this._deleteFileParamsStore.set(e,t)},setEndpoint:function(e,t){this._endpointStore.set(e,t)},setForm:function(e){this._updateFormSupportAndParams(e)},setItemLimit:function(e){this._currentItemLimit=e},setName:function(e,t){this._uploadData.updateName(e,t)},setParams:function(e,t){this._paramsStore.set(e,t)},setUuid:function(e,t){return this._uploadData.uuidChanged(e,t)},setStatus:function(e,t){var n=this.getUploads({id:e});if(!n){throw new qq.Error(e+" is not a valid file ID.")}switch(t){case qq.status.DELETED:this._onDeleteComplete(e,null,false);break;case qq.status.DELETE_FAILED:this._onDeleteComplete(e,null,true);break;default:var i="Method setStatus called on '"+name+"' not implemented yet for "+t;this.log(i);throw new qq.Error(i)}},uploadStoredFiles:function(){if(this._storedIds.length===0){this._itemError("noFilesError")}else{this._uploadStoredFiles()}}};qq.basePrivateApi={_addCannedFile:function(e){var t=this;return this._uploadData.addFile({uuid:e.uuid,name:e.name,size:e.size,status:qq.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(n){e.deleteFileEndpoint&&t.setDeleteFileEndpoint(e.deleteFileEndpoint,n);e.deleteFileParams&&t.setDeleteFileParams(e.deleteFileParams,n);if(e.thumbnailUrl){t._thumbnailUrls[n]=e.thumbnailUrl}t._netUploaded++;t._netUploadedOrQueued++}})},_annotateWithButtonId:function(e,t){if(qq.isFile(e)){e.qqButtonId=this._getButtonId(t)}},_batchError:function(e){this._options.callbacks.onError(null,null,e,undefined)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t);e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,i){e._onDeleteComplete(t,n,i);e._options.callbacks.onDeleteComplete(t,n,i)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createStore:function(e,t){var n={},i=e,r={},o=t,s=function(e){if(qq.isObject(e)){return qq.extend({},e)}return e},a=function(){if(qq.isFunction(o)){return o()}return o},l=function(e,t){if(o&&qq.isObject(t)){qq.extend(t,a())}if(r[e]){qq.extend(t,r[e])}};return{set:function(e,t){if(t==null){n={};i=s(e)}else{n[t]=s(e)}},get:function(e){var t;if(e!=null&&n[e]){t=n[e]}else{t=s(i)}l(e,t);return s(t)},addReadOnly:function(e,t){if(qq.isObject(n)){if(e===null){if(qq.isFunction(t)){o=t}else{o=o||{};qq.extend(o,t)}}else{r[e]=r[e]||{};qq.extend(r[e],t)}}},remove:function(e){return delete n[e]},reset:function(){n={};r={};i=e}}},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,i){e._onUploadStatusChange(t,n,i);e._options.callbacks.onStatusChange(t,n,i);e._maybeAllComplete(t,i);if(e._totalProgress){setTimeout((function(){e._totalProgress.onStatusChange(t,n,i)}),0)}}})},_createUploadButton:function(e){var t=this,n=e.accept||this._options.validation.acceptFiles,i=e.allowedExtensions||this._options.validation.allowedExtensions,r;function o(){if(qq.supportedFeatures.ajaxUploading){if(t._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&t._isAllowedExtension(i,".mov")){return false}if(e.multiple===undefined){return t._options.multiple}return e.multiple}return false}r=new qq.UploadButton({acceptFiles:n,element:e.element,focusClass:this._options.classes.buttonFocus,folders:e.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,multiple:o(),name:this._options.request.inputName,onChange:function(e){t._onInputChange(e)},title:e.title==null?this._options.text.fileInputTitle:e.title});this._disposeSupport.addDisposer((function(){r.dispose()}));t._buttons.push(r);return r},_createUploadHandler:function(e,t){var n=this,i={},r={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(n.log,n),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(e,t,r,o){if(r<0||o<0){return}if(i[e]){if(i[e].loaded!==r||i[e].total!==o){n._onProgress(e,t,r,o);n._options.callbacks.onProgress(e,t,r,o)}}else{n._onProgress(e,t,r,o);n._options.callbacks.onProgress(e,t,r,o)}i[e]={loaded:r,total:o}},onComplete:function(e,t,r,o){delete i[e];var s=n.getUploads({id:e}).status,a;if(s===qq.status.UPLOAD_SUCCESSFUL||s===qq.status.UPLOAD_FAILED){return}a=n._onComplete(e,t,r,o);if(a instanceof qq.Promise){a.done((function(){n._options.callbacks.onComplete(e,t,r,o)}))}else{n._options.callbacks.onComplete(e,t,r,o)}},onCancel:function(e,t,i){var r=new qq.Promise;n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onFailure:r.failure,onSuccess:function(){i.then((function(){n._onCancel(e,t)}));r.success()},identifier:e});return r},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(e,t){n._onUpload(e,t);n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,i){n._onUploadChunk(e,i);n._options.callbacks.onUploadChunk(e,t,i)},onUploadChunkSuccess:function(e,t,i,r){n._options.callbacks.onUploadChunkSuccess.apply(n,arguments)},onResume:function(e,t,i){return n._options.callbacks.onResume(e,t,i)},onAutoRetry:function(e,t,i,r){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n.log("Server requested UUID change from '"+n.getUuid(e)+"' to '"+t+"'");n.setUuid(e,t)},getName:qq.bind(n.getName,n),getUuid:qq.bind(n.getUuid,n),getSize:qq.bind(n.getSize,n),setSize:qq.bind(n._setSize,n),getDataByUuid:function(e){return n.getUploads({uuid:e})},isQueued:function(e){var t=n.getUploads({id:e}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:n._uploadData.getIdsInProxyGroup,getIdsInBatch:n._uploadData.getIdsInBatch};qq.each(this._options.request,(function(e,t){r[e]=t}));r.customHeaders=this._customHeadersStore;if(e){qq.each(e,(function(e,t){r[e]=t}))}return new qq.UploadHandlerController(r,t)},_fileOrBlobRejected:function(e){this._netUploadedOrQueued--;this._uploadData.setStatus(e,qq.status.REJECTED)},_formatSize:function(e){if(e===0){return e+this._options.text.sizeSymbols[0]}var t=-1;do{e=e/1e3;t++}while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={};qq.each(this._options.extraButtons,(function(t,n){var i=n.multiple,r=qq.extend({},e._options.validation,true),o=qq.extend({},n);if(i===undefined){i=e._options.multiple}if(o.validation){qq.extend(r,n.validation,true)}qq.extend(o,{multiple:i,validation:r},true);e._initExtraButton(o)}))},_getButton:function(e){var t=this._extraButtonSpecs[e];if(t){return t.element}else if(e===this._defaultButtonId){return this._options.button}},_getButtonId:function(e){var t,n,i=e;if(i instanceof qq.BlobProxy){i=i.referenceBlob}if(i&&!qq.isBlob(i)){if(qq.isFile(i)){return i.qqButtonId}else if(i.tagName.toLowerCase()==="input"&&i.type.toLowerCase()==="file"){return i.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}t=i.getElementsByTagName("input");qq.each(t,(function(e,t){if(t.getAttribute("type")==="file"){n=t;return false}}));if(n){return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation},_getValidationDescriptor:function(e){if(e.file instanceof qq.BlobProxy){return{name:qq.getFilename(e.file.referenceBlob),size:e.file.referenceBlob.size}}return{name:this.getUploads({id:e.id}).name,size:this.getUploads({id:e.id}).size}},_getValidationDescriptors:function(e){var t=this,n=[];qq.each(e,(function(e,i){n.push(t._getValidationDescriptor(i))}));return n},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,n=t?this._getButtonId(t):this._defaultButtonId,i=this._options;if(n&&n!==this._defaultButtonId){i=this._extraButtonSpecs[n]}i.multiple=false;if(i.validation.acceptFiles===null){i.validation.acceptFiles=e}else{i.validation.acceptFiles+=","+e}qq.each(this._buttons,(function(e,t){if(t.getButtonId()===n){t.setMultiple(i.multiple);t.setAcceptFiles(i.acceptFiles);return false}}))}},_handleCheckedCallback:function(e){var t=this,n=e.callback();if(qq.isGenericPromise(n)){this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier);return n.then((function(n){t.log(e.name+" promise success for "+e.identifier);e.onSuccess(n)}),(function(){if(e.onFailure){t.log(e.name+" promise failure for "+e.identifier);e.onFailure()}else{t.log(e.name+" promise failure for "+e.identifier)}}))}if(n!==false){e.onSuccess(n)}else{if(e.onFailure){this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback.");e.onFailure()}else{this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed.")}}return n},_handleNewFile:function(e,t,n){var i=this,r=qq.getUniqueId(),o=-1,s=qq.getFilename(e),a=e.blob||e,l=this._customNewFileHandler?this._customNewFileHandler:qq.bind(i._handleNewFileGeneric,i);if(!qq.isInput(a)&&a.size>=0){o=a.size}l(a,s,r,o,n,t,this._options.request.uuidName,{uploadData:i._uploadData,paramsStore:i._paramsStore,addFileToHandler:function(e,t){i._handler.add(e,t);i._netUploadedOrQueued++;i._trackButton(e)}})},_handleNewFileGeneric:function(e,t,n,i,r,o){var s=this._uploadData.addFile({uuid:n,name:t,size:i,batchId:o});this._handler.add(s,e);this._trackButton(s);this._netUploadedOrQueued++;r.push({id:s,file:e})},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],i=t;if(i==null){i=this._options.paste.defaultName}i+="."+n;this.addFiles({name:i,blob:e})},_handleDeleteSuccess:function(e){if(this.getUploads({id:e}).status!==qq.status.DELETED){var t=this.getName(e);this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(e);this._uploadData.setStatus(e,qq.status.DELETED);this.log("Delete request for '"+t+"' has succeeded.")}},_handleDeleteFailed:function(e,t){var n=this.getName(e);this._uploadData.setStatus(e,qq.status.DELETE_FAILED);this.log("Delete request for '"+n+"' has failed.","error");if(!t||t.withCredentials===undefined){this._options.callbacks.onError(e,n,"Delete request failed",t)}else{this._options.callbacks.onError(e,n,"Delete request failed with response code "+t.status,t)}},_initExtraButton:function(e){var t=this._createUploadButton({accept:e.validation.acceptFiles,allowedExtensions:e.validation.allowedExtensions,element:e.element,folders:e.folders,multiple:e.multiple,title:e.fileInputTitle});this._extraButtonSpecs[t.getButtonId()]=e},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));if(this._formSupport&&this._formSupport.attachedToForm){this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject);this._options.autoUpload=this._formSupport.newAutoUpload;if(this._formSupport.newEndpoint){this._options.request.endpoint=this._formSupport.newEndpoint}}else{this._paramsStore=this._createStore(this._options.request.params)}},_isDeletePossible:function(){if(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled){return false}if(this._options.cors.expected){if(qq.supportedFeatures.deleteFileCorsXhr){return true}if(qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr){return true}return false}return true},_isAllowedExtension:function(e,t){var n=false;if(!e.length){return true}qq.each(e,(function(e,i){if(qq.isString(i)){var r=new RegExp("\\."+i+"$","i");if(t.match(r)!=null){n=true;return false}}}));return n},_itemError:function(e,t,n){var i=this._options.messages[e],r=[],o=[].concat(t),s=o[0],a=this._getButtonId(n),l=this._getValidationBase(a),c,u;function d(e,t){i=i.replace(e,t)}qq.each(l.allowedExtensions,(function(e,t){if(qq.isString(t)){r.push(t)}}));c=r.join(", ").toLowerCase();d("{file}",this._options.formatFileName(s));d("{extensions}",c);d("{sizeLimit}",this._formatSize(l.sizeLimit));d("{minSizeLimit}",this._formatSize(l.minSizeLimit));u=i.match(/(\{\w+\})/g);if(u!==null){qq.each(u,(function(e,t){d(t,o[e])}))}this._options.callbacks.onError(null,s,i,undefined);return i},_manualRetry:function(e,t){if(this._onBeforeManualRetry(e)){this._netUploadedOrQueued++;this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING);if(t){t(e)}else{this._handler.retry(e)}return true}},_maybeAllComplete:function(e,t){var n=this,i=this._getNotFinished();if(t===qq.status.UPLOAD_SUCCESSFUL){this._succeededSinceLastAllComplete.push(e)}else if(t===qq.status.UPLOAD_FAILED){this._failedSinceLastAllComplete.push(e)}if(i===0&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)){setTimeout((function(){n._onAllComplete(n._succeededSinceLastAllComplete,n._failedSinceLastAllComplete)}),0)}},_maybeHandleIos8SafariWorkaround:function(){var e=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){setTimeout((function(){window.alert(e._options.messages.unsupportedBrowserIos8Safari)}),0);throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)}},_maybeParseAndSendUploadError:function(e,t,n,i){if(!n.success){if(i&&i.status!==200&&!n.error){this._options.callbacks.onError(e,t,"XHR returned response code "+i.status,i)}else{var r=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,r,i)}}},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,i,r){var o=this;if(t.length>n){if(e||!this._options.validation.stopOnFirstInvalidFile){setTimeout((function(){var e=o._getValidationDescriptor(t[n]),s=o._getButtonId(t[n].file),a=o._getButton(s);o._handleCheckedCallback({name:"onValidate",callback:qq.bind(o._options.callbacks.onValidate,o,e,a),onSuccess:qq.bind(o._onValidateCallbackSuccess,o,t,n,i,r),onFailure:qq.bind(o._onValidateCallbackFailure,o,t,n,i,r),identifier:"Item '"+e.name+"', size: "+e.size})}),0)}else if(!e){for(;n<t.length;n++){o._fileOrBlobRejected(t[n].id)}}}},_onAllComplete:function(e,t){this._totalProgress&&this._totalProgress.onAllComplete(e,t,this._preventRetries);this._options.callbacks.onAllComplete(qq.extend([],e),qq.extend([],t));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onAutoRetry:function(e,t,n,i,r){var o=this;o._preventRetries[e]=n[o._options.retry.preventRetryResponseProperty];if(o._shouldAutoRetry(e,t,n)){var s=o._options.retry.autoAttemptDelay*1e3;o._maybeParseAndSendUploadError.apply(o,arguments);o._options.callbacks.onAutoRetry(e,t,o._autoRetries[e]);o._onBeforeAutoRetry(e,t);o._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING);o._retryTimeouts[e]=setTimeout((function(){o.log("Starting retry for "+t+"...");if(r){r(e)}else{o._handler.retry(e)}}),s);return true}},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(e){var t=this._currentItemLimit,n;if(this._preventRetries[e]){this.log("Retries are forbidden for id "+e,"warn");return false}else if(this._handler.isValid(e)){n=this.getName(e);if(this._options.callbacks.onManualRetry(e,n)===false){return false}if(t>0&&this._netUploadedOrQueued+1>t){this._itemError("retryFailTooManyItems");return false}this.log("Retrying upload for '"+n+"' (id: "+e+")...");return true}else{this.log("'"+e+"' is not a valid file ID","error");return false}},_onCancel:function(e,t){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[e]);var n=qq.indexOf(this._storedIds,e);if(!this._options.autoUpload&&n>=0){this._storedIds.splice(n,1)}this._uploadData.setStatus(e,qq.status.CANCELED)},_onComplete:function(e,t,n,i){if(!n.success){this._netUploadedOrQueued--;this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED);if(n[this._options.retry.preventRetryResponseProperty]===true){this._preventRetries[e]=true}}else{if(n.thumbnailUrl){this._thumbnailUrls[e]=n.thumbnailUrl}this._netUploaded++;this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)}this._maybeParseAndSendUploadError(e,t,n,i);return n.success?true:false},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){var i=this.getName(e);if(n){this._handleDeleteFailed(e,t)}else{this._handleDeleteSuccess(e)}},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++){this._annotateWithButtonId(e.files[t],e)}this.addFiles(e.files)}else if(e.value.length>0){this.addFiles(e)}qq.each(this._buttons,(function(e,t){t.reset()}))},_onProgress:function(e,t,n,i){this._totalProgress&&this._totalProgress.onIndividualProgress(e,n,i)},_onSubmit:function(e,t){},_onSubmitCallbackSuccess:function(e,t){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(e,qq.status.SUBMITTED);this._onSubmitted.apply(this,arguments);if(this._options.autoUpload){this._options.callbacks.onSubmitted.apply(this,arguments);this._uploadFile(e)}else{this._storeForLater(e);this._options.callbacks.onSubmitted.apply(this,arguments)}},_onSubmitDelete:function(e,t,n){var i=this.getUuid(e),r;if(t){r=qq.bind(t,this,e,i,n)}if(this._isDeletePossible()){this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:r||qq.bind(this._deleteHandler.sendDelete,this,e,i,n),identifier:e});return true}else{this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn");return false}},_onSubmitted:function(e){},_onTotalProgress:function(e,t){this._options.callbacks.onTotalProgress(e,t)},_onUploadPrep:function(e){},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(e,t){},_onUploadStatusChange:function(e,t,n){if(n===qq.status.PAUSED){clearTimeout(this._retryTimeouts[e])}},_onValidateBatchCallbackFailure:function(e){var t=this;qq.each(e,(function(e,n){t._fileOrBlobRejected(n.id)}))},_onValidateBatchCallbackSuccess:function(e,t,n,i,r){var o,s=this._currentItemLimit,a=this._netUploadedOrQueued;if(s===0||a<=s){if(t.length>0){this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],r),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,i),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,i),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size})}else{this._itemError("noFilesError")}}else{this._onValidateBatchCallbackFailure(t);o=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,a).replace(/\{itemLimit\}/g,s);this._batchError(o)}},_onValidateCallbackFailure:function(e,t,n,i){var r=t+1;this._fileOrBlobRejected(e[t].id,e[t].file.name);this._maybeProcessNextItemAfterOnValidateCallback(false,e,r,n,i)},_onValidateCallbackSuccess:function(e,t,n,i){var r=this,o=t+1,s=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],s).then((function(){r._upload(e[t].id,n,i);r._maybeProcessNextItemAfterOnValidateCallback(true,e,o,n,i)}),(function(){r._maybeProcessNextItemAfterOnValidateCallback(false,e,o,n,i)}))},_prepareItemsForUpload:function(e,t,n){if(e.length===0){this._itemError("noFilesError");return}var i=this._getValidationDescriptors(e),r=this._getButtonId(e[0].file),o=this._getButton(r);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,i,o),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,i,e,t,n,o),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,e),identifier:"batch validation"})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",(function(t){if(e.getInProgress()){t=t||window.event;t.returnValue=e._options.messages.onLeave;return e._options.messages.onLeave}}))},_refreshSessionData:function(){var e=this,t=this._options.session;if(qq.Session&&this._options.session.endpoint!=null){if(!this._session){qq.extend(t,{cors:this._options.cors});t.log=qq.bind(this.log,this);t.addFileRecord=qq.bind(this._addCannedFile,this);this._session=new qq.Session(t)}setTimeout((function(){e._session.refresh().then((function(t,n){e._sessionRequestComplete();e._options.callbacks.onSessionRequestComplete(t,true,n)}),(function(t,n){e._options.callbacks.onSessionRequestComplete(t,false,n)}))}),0)}},_sessionRequestComplete:function(){},_setSize:function(e,t){this._uploadData.updateSize(e,t);this._totalProgress&&this._totalProgress.onNewSize(e)},_shouldAutoRetry:function(e,t,n){var i=this._uploadData.retrieve({id:e});if(!this._preventRetries[e]&&this._options.retry.enableAuto&&i.status!==qq.status.PAUSED){if(this._autoRetries[e]===undefined){this._autoRetries[e]=0}if(this._autoRetries[e]<this._options.retry.maxAutoAttempts){this._autoRetries[e]+=1;return true}}return false},_storeForLater:function(e){this._storedIds.push(e)},_trackButton:function(e){var t;if(qq.supportedFeatures.ajaxUploading){t=this._handler.getFile(e).qqButtonId}else{t=this._getButtonId(this._handler.getInput(e))}if(t){this._buttonIdsForFileIds[e]=t}},_updateFormSupportAndParams:function(e){this._options.form.element=e;this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));if(this._formSupport&&this._formSupport.attachedToForm){this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject);this._options.autoUpload=this._formSupport.newAutoUpload;if(this._formSupport.newEndpoint){this.setEndpoint(this._formSupport.newEndpoint)}}},_upload:function(e,t,n){var i=this.getName(e);if(t){this.setParams(t,e)}if(n){this.setEndpoint(n,e)}this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,e,i),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,e,i),onFailure:qq.bind(this._fileOrBlobRejected,this,e,i),identifier:e})},_uploadFile:function(e){if(!this._handler.upload(e)){this._uploadData.setStatus(e,qq.status.QUEUED)}},_uploadStoredFiles:function(){var e,t,n=this;while(this._storedIds.length){e=this._storedIds.shift();this._uploadFile(e)}t=this.getUploads({status:qq.status.SUBMITTING}).length;if(t){qq.log("Still waiting for "+t+" files to clear submit queue. Will re-parse stored IDs array shortly.");setTimeout((function(){n._uploadStoredFiles()}),1e3)}},_validateFileOrBlobData:function(e,t){var n=this,i=function(){if(e.file instanceof qq.BlobProxy){return e.file.referenceBlob}return e.file}(),r=t.name,o=t.size,s=this._getButtonId(e.file),a=this._getValidationBase(s),l=new qq.Promise;l.then((function(){}),(function(){n._fileOrBlobRejected(e.id,r)}));if(qq.isFileOrInput(i)&&!this._isAllowedExtension(a.allowedExtensions,r)){this._itemError("typeError",r,i);return l.failure()}if(!this._options.validation.allowEmpty&&o===0){this._itemError("emptyError",r,i);return l.failure()}if(o>0&&a.sizeLimit&&o>a.sizeLimit){this._itemError("sizeError",r,i);return l.failure()}if(o>0&&o<a.minSizeLimit){this._itemError("minSizeError",r,i);return l.failure()}if(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(i)){new qq.ImageValidation(i,qq.bind(n.log,n)).validate(a.image).then(l.success,(function(e){n._itemError(e+"ImageError",r,i);l.failure()}))}else{l.success()}return l},_wrapCallbacks:function(){var e,t,n;e=this;t=function(t,n,i){var r;try{return n.apply(e,i)}catch(n){r=n.message||n.toString();e.log("Caught exception in '"+t+"' callback - "+r,"error")}};for(n in this._options.callbacks){(function(){var i,r;i=n;r=e._options.callbacks[i];e._options.callbacks[i]=function(){return t(i,r,arguments)}})()}}}})();(function(){"use strict";qq.FineUploaderBasic=function(e){var t=this;this._options={debug:false,button:null,multiple:true,maxConnections:3,disableCancelForFormUploads:false,autoUpload:true,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:true,inputName:"qqfile",method:"POST",params:{},paramsInBody:true,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:true,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:false},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,n,i){},onAllComplete:function(e,t){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,i){},onResume:function(e,t,n){},onProgress:function(e,t,n,i){},onTotalProgress:function(e,t){},onError:function(e,t,n,i){},onAutoRetry:function(e,t,n){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,n){},onPasteReceived:function(e){},onStatusChange:function(e,t,n){},onSessionRequestComplete:function(e,t,n){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:false,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:false,concurrent:{enabled:false},mandatory:false,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2e6,success:{endpoint:null}},resume:{enabled:false,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return e},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:false,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:false,sendCredentials:false,allowXdr:false},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:false,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:true},form:{element:"qq-form",autoUpload:false,interceptSubmit:true},scaling:{customResizer:null,sendOriginal:true,orient:true,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:false,sizes:[]},workarounds:{iosEmptyVideos:true,ios8SafariUploads:true,ios8BrowserCrash:false}};qq.extend(this._options,e,true);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler();if(this._options.button){this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId()}this._generateExtraButtonSpecs();this._handleCameraAccess();if(this._options.paste.targetElement){if(qq.PasteSupport){this._pasteHandler=this._createPasteHandler()}else{this.log("Paste support module not found","error")}}this._preventLeaveInProgress();this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{};if(this._scaler.enabled){this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)}if(qq.TotalProgress&&qq.supportedFeatures.progressBar){this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),(function(e){var n=t._uploadData.retrieve({id:e});return n&&n.size||0}))}this._currentItemLimit=this._options.validation.itemLimit};qq.FineUploaderBasic.prototype=qq.basePublicApi;qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)})();qq.AjaxRequester=function(e){"use strict";var t,n,i=[],r={},o={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:true,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:false,sendCredentials:false},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,n){},onProgress:null};qq.extend(o,e);t=o.log;if(qq.indexOf(o.validMethods,o.method)<0){throw new Error("'"+o.method+"' is not a supported method for this type of request!")}function s(){return qq.indexOf(["GET","POST","HEAD"],o.method)>=0}function a(e){var t=false;qq.each(t,(function(e,n){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0){t=true;return false}}));return t}function l(e){return o.cors.expected&&e.withCredentials===undefined}function c(){var e;if(window.XMLHttpRequest||window.ActiveXObject){e=qq.createXhrInstance();if(e.withCredentials===undefined){e=new XDomainRequest;e.onload=function(){};e.onerror=function(){};e.ontimeout=function(){};e.onprogress=function(){}}}return e}function u(e,t){var n=r[e].xhr;if(!n){if(t){n=t}else{if(o.cors.expected){n=c()}else{n=qq.createXhrInstance()}}r[e].xhr=n}return n}function d(e){var t=qq.indexOf(i,e),n=o.maxConnections,s;delete r[e];i.splice(t,1);if(i.length>=n&&t<n){s=i[n-1];f(s)}}function p(e,n){var i=u(e),r=o.method,s=n===true;d(e);if(s){t(r+" request for "+e+" has failed","error")}else if(!l(i)&&!x(i.status)){s=true;t(r+" request for "+e+" has failed - response code "+i.status,"error")}o.onComplete(e,i,s)}function h(e){var t=r[e].additionalParams,n=o.mandatedParams,i;if(o.paramsStore.get){i=o.paramsStore.get(e)}if(t){qq.each(t,(function(e,t){i=i||{};i[e]=t}))}if(n){qq.each(n,(function(e,t){i=i||{};i[e]=t}))}return i}function f(e,i){var s=u(e,i),a=o.method,c=h(e),d=r[e].payload,p;o.onSend(e);p=m(e,c,r[e].additionalQueryParams);if(l(s)){s.onload=y(e);s.onerror=b(e)}else{s.onreadystatechange=g(e)}v(e);s.open(a,p,true);if(o.cors.expected&&o.cors.sendCredentials&&!l(s)){s.withCredentials=true}_(e);t("Sending "+a+" request for "+e);if(d){s.send(d)}else if(n||!c){s.send()}else if(c&&o.contentType&&o.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0){s.send(qq.obj2url(c,""))}else if(c&&o.contentType&&o.contentType.toLowerCase().indexOf("application/json")>=0){s.send(JSON.stringify(c))}else{s.send(c)}return s}function m(e,t,i){var s=o.endpointStore.get(e),a=r[e].addToPath;if(a!=undefined){s+="/"+a}if(n&&t){s=qq.obj2url(t,s)}if(i){s=qq.obj2url(i,s)}return s}function g(e){return function(){if(u(e).readyState===4){p(e)}}}function v(e){var t=o.onProgress;if(t){u(e).upload.onprogress=function(n){if(n.lengthComputable){t(e,n.loaded,n.total)}}}}function y(e){return function(){p(e)}}function b(e){return function(){p(e,true)}}function _(e){var t=u(e),n=o.customHeaders,i=r[e].additionalHeaders||{},c=o.method,d={};if(!l(t)){o.acceptHeader&&t.setRequestHeader("Accept",o.acceptHeader);if(o.allowXRequestedWithAndCacheControl){if(!o.cors.expected||(!s()||a(n))){t.setRequestHeader("X-Requested-With","XMLHttpRequest");t.setRequestHeader("Cache-Control","no-cache")}}if(o.contentType&&(c==="POST"||c==="PUT")){t.setRequestHeader("Content-Type",o.contentType)}qq.extend(d,qq.isFunction(n)?n(e):n);qq.extend(d,i);qq.each(d,(function(e,n){t.setRequestHeader(e,n)}))}}function x(e){return qq.indexOf(o.successfulResponseCodes[o.method],e)>=0}function w(e,t,n,s,a,l,c){r[e]={addToPath:n,additionalParams:s,additionalQueryParams:a,additionalHeaders:l,payload:c};var u=i.push(e);if(u<=o.maxConnections){return f(e,t)}}n=o.method==="GET"||o.method==="DELETE";qq.extend(this,{initTransport:function(e){var t,n,i,r,s,a;return{withPath:function(e){t=e;return this},withParams:function(e){n=e;return this},withQueryParams:function(e){a=e;return this},withHeaders:function(e){i=e;return this},withPayload:function(e){r=e;return this},withCacheBuster:function(){s=true;return this},send:function(l){if(s&&qq.indexOf(["GET","DELETE"],o.method)>=0){n.qqtimestamp=(new Date).getTime()}return w(e,l,t,n,a,i,r)}}},canceled:function(e){d(e)}})};qq.UploadHandler=function(e){"use strict";var t=e.proxy,n={},i=t.onCancel,r=t.getName;qq.extend(this,{add:function(e,t){n[e]=t;n[e].temp={}},cancel:function(e){var t=this,o=new qq.Promise,s=i(e,r(e),o);s.then((function(){if(t.isValid(e)){n[e].canceled=true;t.expunge(e)}o.success()}))},expunge:function(e){delete n[e]},getThirdPartyFileId:function(e){return n[e].key},isValid:function(e){return n[e]!==undefined},reset:function(){n={}},_getFileState:function(e){return n[e]},_setThirdPartyFileId:function(e,t){n[e].key=t},_wasCanceled:function(e){return!!n[e].canceled}})};qq.UploadHandlerController=function(e,t){"use strict";var n=this,i=false,r=false,o,s,a,l,c={paramsStore:{},maxConnections:3,chunking:{enabled:false,multiple:{enabled:false}},log:function(e,t){},onProgress:function(e,t,n,i){},onComplete:function(e,t,n,i){},onCancel:function(e,t){},onUploadPrep:function(e){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,i){},onAutoRetry:function(e,t,n,i){},onResume:function(e,t,n){},onUuidChanged:function(e,t){},getName:function(e){},setSize:function(e,t){},isQueued:function(e){},getIdsInProxyGroup:function(e){},getIdsInBatch:function(e){}},u={done:function(e,t,n,i){var r=l._getChunkData(e,t);l._getFileState(e).attemptingResume=false;delete l._getFileState(e).temp.chunkProgress[t];l._getFileState(e).loaded+=r.size;c.onUploadChunkSuccess(e,l._getChunkDataForCallback(r),n,i)},finalize:function(e){var t=c.getSize(e),n=c.getName(e);a("All chunks have been uploaded for "+e+" - finalizing....");l.finalizeChunks(e).then((function(i,r){a("Finalize successful for "+e);var o=h.normalizeResponse(i,true);c.onProgress(e,n,t,t);l._maybeDeletePersistedChunkData(e);h.cleanup(e,o,r)}),(function(t,i){var r=h.normalizeResponse(t,false);a("Problem finalizing chunks for file ID "+e+" - "+r.error,"error");if(r.reset){u.reset(e)}if(!c.onAutoRetry(e,n,r,i)){h.cleanup(e,r,i)}}))},handleFailure:function(e,t,n,i){var o=c.getName(t);a("Chunked upload request failed for "+t+", chunk "+e);l.clearCachedChunk(t,e);var s=h.normalizeResponse(n,false),p;if(s.reset){u.reset(t)}else{p=qq.indexOf(l._getFileState(t).chunking.inProgress,e);if(p>=0){l._getFileState(t).chunking.inProgress.splice(p,1);l._getFileState(t).chunking.remaining.unshift(e)}}if(!l._getFileState(t).temp.ignoreFailure){if(r){l._getFileState(t).temp.ignoreFailure=true;a(qq.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(l._getXhrs(t))),JSON.stringify(l._getFileState(t).chunking.inProgress)));qq.each(l._getXhrs(t),(function(e,n){a(qq.format("Attempting to abort file {}.{}. XHR readyState {}. ",t,e,n.readyState));n.abort();n._cancelled=true}));l.moveInProgressToRemaining(t);d.free(t,true)}if(!c.onAutoRetry(t,o,s,i)){h.cleanup(t,s,i)}}},hasMoreParts:function(e){return!!l._getFileState(e).chunking.remaining.length},nextPart:function(e){var t=l._getFileState(e).chunking.remaining.shift();if(t>=l._getTotalChunks(e)){t=null}return t},reset:function(e){a("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+e,"error");l._maybeDeletePersistedChunkData(e);l.reevaluateChunking(e);l._getFileState(e).loaded=0},sendNext:function(e){var t=c.getSize(e),n=c.getName(e),i=u.nextPart(e),o=l._getChunkData(e,i),s=l._getFileState(e).attemptingResume,p=l._getFileState(e).chunking.inProgress||[];if(l._getFileState(e).loaded==null){l._getFileState(e).loaded=0}if(s&&c.onResume(e,n,o)===false){u.reset(e);i=u.nextPart(e);o=l._getChunkData(e,i);s=false}if(i==null&&p.length===0){u.finalize(e)}else{a(qq.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",e,i,o.start+1,o.end,t));c.onUploadChunk(e,n,l._getChunkDataForCallback(o));p.push(i);l._getFileState(e).chunking.inProgress=p;if(r){d.open(e,i)}if(r&&d.available()&&l._getFileState(e).chunking.remaining.length){u.sendNext(e)}if(o.blob.size===0){a(qq.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",i,e),"error");u.handleFailure(i,e,"File is no longer available",null)}else{l.uploadChunk(e,i,s).then((function t(n,r){a("Chunked upload request succeeded for "+e+", chunk "+i);l.clearCachedChunk(e,i);var o=l._getFileState(e).chunking.inProgress||[],s=h.normalizeResponse(n,true),c=qq.indexOf(o,i);a(qq.format("Chunk {} for file {} uploaded successfully.",i,e));u.done(e,i,s,r);if(c>=0){o.splice(c,1)}l._maybePersistChunkedState(e);if(!u.hasMoreParts(e)&&o.length===0){u.finalize(e)}else if(u.hasMoreParts(e)){u.sendNext(e)}else{a(qq.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",e,JSON.stringify(o)))}}),(function t(n,r){u.handleFailure(i,e,n,r)})).done((function(){l.clearXhr(e,i)}))}}}},d={_open:[],_openChunks:{},_waiting:[],available:function(){var e=c.maxConnections,t=0,n=0;qq.each(d._openChunks,(function(e,i){t++;n+=i.length}));return e-(d._open.length-t+n)},free:function(e,t){var n=!t,i=qq.indexOf(d._waiting,e),r=qq.indexOf(d._open,e),o;delete d._openChunks[e];if(h.getProxyOrBlob(e)instanceof qq.BlobProxy){a("Generated blob upload has ended for "+e+", disposing generated blob.");delete l._getFileState(e).file}if(i>=0){d._waiting.splice(i,1)}else if(n&&r>=0){d._open.splice(r,1);o=d._waiting.shift();if(o>=0){d._open.push(o);h.start(o)}}},getWaitingOrConnected:function(){var e=[];qq.each(d._openChunks,(function(t,n){if(n&&n.length){e.push(parseInt(t))}}));qq.each(d._open,(function(t,n){if(!d._openChunks[n]){e.push(parseInt(n))}}));e=e.concat(d._waiting);return e},isUsingConnection:function(e){return qq.indexOf(d._open,e)>=0},open:function(e,t){if(t==null){d._waiting.push(e)}if(d.available()){if(t==null){d._waiting.pop();d._open.push(e)}else{(function(){var n=d._openChunks[e]||[];n.push(t);d._openChunks[e]=n})()}return true}return false},reset:function(){d._waiting=[];d._open=[]}},p={send:function(e,t){l._getFileState(e).loaded=0;a("Sending simple upload request for "+e);l.uploadFile(e).then((function(n,i){a("Simple upload request succeeded for "+e);var r=h.normalizeResponse(n,true),o=c.getSize(e);c.onProgress(e,t,o,o);h.maybeNewUuid(e,r);h.cleanup(e,r,i)}),(function(n,i){a("Simple upload request failed for "+e);var r=h.normalizeResponse(n,false);if(!c.onAutoRetry(e,t,r,i)){h.cleanup(e,r,i)}}))}},h={cancel:function(e){a("Cancelling "+e);c.paramsStore.remove(e);d.free(e)},cleanup:function(e,t,n){var i=c.getName(e);c.onComplete(e,i,t,n);if(l._getFileState(e)){l._clearXhrs&&l._clearXhrs(e)}d.free(e)},getProxyOrBlob:function(e){return l.getProxy&&l.getProxy(e)||l.getFile&&l.getFile(e)},initHandler:function(){var e=t?qq[t]:qq.traditional,n=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";l=new e[n+"UploadHandler"](c,{getDataByUuid:c.getDataByUuid,getName:c.getName,getSize:c.getSize,getUuid:c.getUuid,log:a,onCancel:c.onCancel,onProgress:c.onProgress,onUuidChanged:c.onUuidChanged});if(l._removeExpiredChunkingRecords){l._removeExpiredChunkingRecords()}},isDeferredEligibleForUpload:function(e){return c.isQueued(e)},maybeDefer:function(e,t){if(t&&!l.getFile(e)&&t instanceof qq.BlobProxy){c.onUploadPrep(e);a("Attempting to generate a blob on-demand for "+e);t.create().then((function(t){a("Generated an on-demand blob for "+e);l.updateBlob(e,t);c.setSize(e,t.size);l.reevaluateChunking(e);h.maybeSendDeferredFiles(e)}),(function(t){var n={};if(t){n.error=t}a(qq.format("Failed to generate blob for ID {}.  Error message: {}.",e,t),"error");c.onComplete(e,c.getName(e),qq.extend(n,s),null);h.maybeSendDeferredFiles(e);d.free(e)}))}else{return h.maybeSendDeferredFiles(e)}return false},maybeSendDeferredFiles:function(e){var t=c.getIdsInProxyGroup(e),n=false;if(t&&t.length){a("Maybe ready to upload proxy group file "+e);qq.each(t,(function(t,i){if(h.isDeferredEligibleForUpload(i)&&!!l.getFile(i)){n=i===e;h.now(i)}else if(h.isDeferredEligibleForUpload(i)){return false}}))}else{n=true;h.now(e)}return n},maybeNewUuid:function(e,t){if(t.newUuid!==undefined){c.onUuidChanged(e,t.newUuid)}},normalizeResponse:function(e,t){var n=e;if(!qq.isObject(e)){n={};if(qq.isString(e)&&!t){n.error=e}}n.success=t;return n},now:function(e){var t=c.getName(e);if(!n.isValid(e)){throw new qq.Error(e+" is not a valid file ID to upload!")}c.onUpload(e,t);if(i&&l._shouldChunkThisFile(e)){u.sendNext(e)}else{p.send(e,t)}},start:function(e){var t=h.getProxyOrBlob(e);if(t){return h.maybeDefer(e,t)}else{h.now(e);return true}}};qq.extend(this,{add:function(e,t){l.add.apply(this,arguments)},upload:function(e){if(d.open(e)){return h.start(e)}return false},retry:function(e){if(r){l._getFileState(e).temp.ignoreFailure=false}if(d.isUsingConnection(e)){return h.start(e)}else{return n.upload(e)}},cancel:function(e){var t=l.cancel(e);if(qq.isGenericPromise(t)){t.then((function(){h.cancel(e)}))}else if(t!==false){h.cancel(e)}},cancelAll:function(){var e=d.getWaitingOrConnected(),t;if(e.length){for(t=e.length-1;t>=0;t--){n.cancel(e[t])}}d.reset()},getFile:function(e){if(l.getProxy&&l.getProxy(e)){return l.getProxy(e).referenceBlob}return l.getFile&&l.getFile(e)},isProxied:function(e){return!!(l.getProxy&&l.getProxy(e))},getInput:function(e){if(l.getInput){return l.getInput(e)}},reset:function(){a("Resetting upload handler");n.cancelAll();d.reset();l.reset()},expunge:function(e){if(n.isValid(e)){return l.expunge(e)}},isValid:function(e){return l.isValid(e)},getResumableFilesData:function(){if(l.getResumableFilesData){return l.getResumableFilesData()}return[]},getThirdPartyFileId:function(e){if(n.isValid(e)){return l.getThirdPartyFileId(e)}},pause:function(e){if(n.isResumable(e)&&l.pause&&n.isValid(e)&&l.pause(e)){d.free(e);l.moveInProgressToRemaining(e);return true}return false},isResumable:function(e){return!!l.isResumable&&l.isResumable(e)}});qq.extend(c,e);a=c.log;i=c.chunking.enabled&&qq.supportedFeatures.chunking;r=i&&c.chunking.concurrent.enabled;s=function(){var e={};e[c.preventRetryParam]=true;return e}();h.initHandler()};qq.WindowReceiveMessage=function(e){"use strict";var t={log:function(e,t){}},n={};qq.extend(t,e);qq.extend(this,{receiveMessage:function(e,t){var i=function(e){t(e.data)};if(window.postMessage){n[e]=qq(window).attach("message",i)}else{log("iframe message passing not supported in this browser!","error")}},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];if(t){t()}}}})};qq.FormUploadHandler=function(e){"use strict";var t=e.options,n=this,i=e.proxy,r=qq.getUniqueId(),o={},s={},a={},l=t.isCors,c=t.inputName,u=i.getUuid,d=i.log,p=new qq.WindowReceiveMessage({log:d});function h(e){delete s[e];if(l){clearTimeout(a[e]);delete a[e];p.stopReceivingMessages(e)}var t=document.getElementById(n._getIframeName(e));if(t){t.setAttribute("src","javascript:false;");qq(t).remove()}}function f(e){return e.split("_")[0]}function m(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");t.setAttribute("id",e);t.style.display="none";document.body.appendChild(t);return t}function g(e,t){var i=e.id,r=f(i),l=u(r);o[l]=t;s[r]=qq(e).attach("load",(function(){if(n.getInput(r)){d("Received iframe load event for CORS upload request (iframe name "+i+")");a[i]=setTimeout((function(){var e="No valid message received from loaded iframe for iframe name "+i;d(e,"error");t({error:e})}),1e3)}}));p.receiveMessage(i,(function(e){d("Received the following window message: '"+e+"'");var t=f(i),r=n._parseJsonResponse(e),s=r.uuid,l;if(s&&o[s]){d("Handling response for iframe name "+i);clearTimeout(a[i]);delete a[i];n._detachLoadEvent(i);l=o[s];delete o[s];p.stopReceivingMessages(i);l(r)}else if(!s){d("'"+e+"' does not contain a UUID - ignoring.")}}))}qq.extend(this,new qq.UploadHandler(e));qq.override(this,(function(e){return{add:function(t,n){e.add(t,{input:n});n.setAttribute("name",c);if(n.parentNode){qq(n).remove()}},expunge:function(t){h(t);e.expunge(t)},isValid:function(t){return e.isValid(t)&&n._getFileState(t).input!==undefined}}}));qq.extend(this,{getInput:function(e){return n._getFileState(e).input},_attachLoadEvent:function(e,t){var n;if(l){g(e,t)}else{s[e.id]=qq(e).attach("load",(function(){d("Received response for "+e.id);if(!e.parentNode){return}try{if(e.contentDocument&&e.contentDocument.body&&e.contentDocument.body.innerHTML=="false"){return}}catch(e){d("Error when attempting to access iframe during handling of upload response ("+e.message+")","error");n={success:false}}t(n)}))}},_createIframe:function(e){var t=n._getIframeName(e);return m(t)},_detachLoadEvent:function(e){if(s[e]!==undefined){s[e]();delete s[e]}},_getIframeName:function(e){return e+"_"+r},_initFormForUpload:function(e){var t=e.method,n=e.endpoint,i=e.params,r=e.paramsInBody,o=e.targetName,s=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),a=n;if(r){qq.obj2Inputs(i,s)}else{a=qq.obj2url(i,n)}s.setAttribute("action",a);s.setAttribute("target",o);s.style.display="none";document.body.appendChild(s);return s},_parseJsonResponse:function(e){var t={};try{t=qq.parseJson(e)}catch(e){d("Error when attempting to parse iframe upload response ("+e.message+")","error")}return t}})};qq.XhrUploadHandler=function(e){"use strict";var t=this,n=e.options.namespace,i=e.proxy,r=e.options.chunking,o=e.options.resume,s=r&&e.options.chunking.enabled&&qq.supportedFeatures.chunking,a=o&&e.options.resume.enabled&&s&&qq.supportedFeatures.resume,l=i.getName,c=i.getSize,u=i.getUuid,d=i.getEndpoint,p=i.getDataByUuid,h=i.onUuidChanged,f=i.onProgress,m=i.log;function g(e){qq.each(t._getXhrs(e),(function(n,i){var r=t._getAjaxRequester(e,n);i.onreadystatechange=null;i.upload.onprogress=null;i.abort();r&&r.canceled&&r.canceled(e)}))}qq.extend(this,new qq.UploadHandler(e));qq.override(this,(function(e){return{add:function(n,i){if(qq.isFile(i)||qq.isBlob(i)){e.add(n,{file:i})}else if(i instanceof qq.BlobProxy){e.add(n,{proxy:i})}else{throw new Error("Passed obj is not a File, Blob, or proxy")}t._initTempState(n);a&&t._maybePrepareForResume(n)},expunge:function(n){g(n);t._maybeDeletePersistedChunkData(n);t._clearXhrs(n);e.expunge(n)}}}));qq.extend(this,{clearCachedChunk:function(e,n){delete t._getFileState(e).temp.cachedChunks[n]},clearXhr:function(e,n){var i=t._getFileState(e).temp;if(i.xhrs){delete i.xhrs[n]}if(i.ajaxRequesters){delete i.ajaxRequesters[n]}},finalizeChunks:function(e,n){var i=t._getTotalChunks(e)-1,r=t._getXhr(e,i);if(n){return(new qq.Promise).success(n(r),r)}return(new qq.Promise).success({},r)},getFile:function(e){return t.isValid(e)&&t._getFileState(e).file},getProxy:function(e){return t.isValid(e)&&t._getFileState(e).proxy},getResumableFilesData:function(){var e=[];t._iterateResumeRecords((function(n,i){t.moveInProgressToRemaining(null,i.chunking.inProgress,i.chunking.remaining);var r={name:i.name,remaining:i.chunking.remaining,size:i.size,uuid:i.uuid};if(i.key){r.key=i.key}e.push(r)}));return e},isResumable:function(e){return!!r&&t.isValid(e)&&!t._getFileState(e).notResumable},moveInProgressToRemaining:function(e,n,i){var r=n||t._getFileState(e).chunking.inProgress,o=i||t._getFileState(e).chunking.remaining;if(r){m(qq.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(r)));r.reverse();qq.each(r,(function(e,t){o.unshift(t)}));r.length=0}},pause:function(e){if(t.isValid(e)){m(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,l(e)));t._getFileState(e).paused=true;g(e);return true}},reevaluateChunking:function(e){if(r&&t.isValid(e)){var n=t._getFileState(e),i,o;delete n.chunking;n.chunking={};i=t._getTotalChunks(e);if(i>1||r.mandatory){n.chunking.enabled=true;n.chunking.parts=i;n.chunking.remaining=[];for(o=0;o<i;o++){n.chunking.remaining.push(o)}t._initTempState(e)}else{n.chunking.enabled=false}}},updateBlob:function(e,n){if(t.isValid(e)){t._getFileState(e).file=n}},_clearXhrs:function(e){var n=t._getFileState(e).temp;qq.each(n.ajaxRequesters,(function(e){delete n.ajaxRequesters[e]}));qq.each(n.xhrs,(function(e){delete n.xhrs[e]}))},_createXhr:function(e,n){return t._registerXhr(e,n,qq.createXhrInstance())},_getAjaxRequester:function(e,n){var i=n==null?-1:n;return t._getFileState(e).temp.ajaxRequesters[i]},_getChunkData:function(e,n){var i=r.partSize,o=c(e),s=t.getFile(e),a=i*n,l=a+i>=o?o:a+i,u=t._getTotalChunks(e),d=this._getFileState(e).temp.cachedChunks,p=d[n]||qq.sliceBlob(s,a,l);d[n]=p;return{part:n,start:a,end:l,count:u,blob:p,size:l-a}},_getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}},_getLocalStorageId:function(e){var t="5.0",i=l(e),o=c(e),s=r.partSize,a=d(e);return qq.format("qq{}resume{}-{}-{}-{}-{}",n,t,i,o,s,a)},_getMimeType:function(e){return t.getFile(e).type},_getPersistableData:function(e){return t._getFileState(e).chunking},_getTotalChunks:function(e){if(r){var t=c(e),n=r.partSize;return Math.ceil(t/n)}},_getXhr:function(e,n){var i=n==null?-1:n;return t._getFileState(e).temp.xhrs[i]},_getXhrs:function(e){return t._getFileState(e).temp.xhrs},_iterateResumeRecords:function(e){if(a){qq.each(localStorage,(function(t,i){if(t.indexOf(qq.format("qq{}resume",n))===0){var r=JSON.parse(i);e(t,r)}}))}},_initTempState:function(e){t._getFileState(e).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(e){t._getFileState(e).notResumable=true},_maybeDeletePersistedChunkData:function(e){var n;if(a&&t.isResumable(e)){n=t._getLocalStorageId(e);if(n&&localStorage.getItem(n)){localStorage.removeItem(n);return true}}return false},_maybePrepareForResume:function(e){var n=t._getFileState(e),i,r;if(a&&n.key===undefined){i=t._getLocalStorageId(e);r=localStorage.getItem(i);if(r){r=JSON.parse(r);if(p(r.uuid)){t._markNotResumable(e)}else{m(qq.format("Identified file with ID {} and name of {} as resumable.",e,l(e)));h(e,r.uuid);n.key=r.key;n.chunking=r.chunking;n.loaded=r.loaded;n.attemptingResume=true;t.moveInProgressToRemaining(e)}}}},_maybePersistChunkedState:function(e){var n=t._getFileState(e),i,r;if(a&&t.isResumable(e)){i=t._getLocalStorageId(e);r={name:l(e),size:c(e),uuid:u(e),key:n.key,chunking:n.chunking,loaded:n.loaded,lastUpdated:Date.now()};try{localStorage.setItem(i,JSON.stringify(r))}catch(t){m(qq.format("Unable to save resume data for '{}' due to error: '{}'.",e,t.toString()),"warn")}}},_registerProgressHandler:function(e,n,i){var r=t._getXhr(e,n),o=l(e),s={simple:function(t,n){var i=c(e);if(t===n){f(e,o,i,i)}else{f(e,o,t>=i?i-1:t,i)}},chunked:function(r,s){var a=t._getFileState(e).temp.chunkProgress,l=t._getFileState(e).loaded,u=r,d=s,p=c(e),h=u-(d-i),m=l;a[n]=h;qq.each(a,(function(e,t){m+=t}));f(e,o,m,p)}};r.upload.onprogress=function(e){if(e.lengthComputable){var t=i==null?"simple":"chunked";s[t](e.loaded,e.total)}}},_registerXhr:function(e,n,i,r){var o=n==null?-1:n,s=t._getFileState(e).temp;s.xhrs=s.xhrs||{};s.ajaxRequesters=s.ajaxRequesters||{};s.xhrs[o]=i;if(r){s.ajaxRequesters[o]=r}return i},_removeExpiredChunkingRecords:function(){var e=o.recordsExpireIn;t._iterateResumeRecords((function(t,n){var i=new Date(n.lastUpdated);i.setDate(i.getDate()+e);if(i.getTime()<=Date.now()){m("Removing expired resume record with key "+t);localStorage.removeItem(t)}}))},_shouldChunkThisFile:function(e){var n=t._getFileState(e);if(!n.chunking){t.reevaluateChunking(e)}return n.chunking.enabled}})};qq.DeleteFileAjaxRequester=function(e){"use strict";var t,n={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(e){return{}},paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,n){}};qq.extend(n,e);function i(){if(n.method.toUpperCase()==="POST"){return{_method:"DELETE"}}return{}}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:n.method,endpointStore:n.endpointStore,paramsStore:n.paramsStore,mandatedParams:i(),maxConnections:n.maxConnections,customHeaders:function(e){return n.customHeaders.get(e)},log:n.log,onSend:n.onDelete,onComplete:n.onDeleteComplete,cors:n.cors}));qq.extend(this,{sendDelete:function(e,i,r){var o=r||{};n.log("Submitting delete file request for "+e);if(n.method==="DELETE"){t.initTransport(e).withPath(i).withParams(o).send()}else{o[n.uuidParamName]=i;t.initTransport(e).withParams(o).send()}}})};(function(){function e(e){var t=e.naturalWidth,n=e.naturalHeight,i=document.createElement("canvas"),r;if(t*n>1024*1024){i.width=i.height=1;r=i.getContext("2d");r.drawImage(e,-t+1,0);return r.getImageData(0,0,1,1).data[3]===0}else{return false}}function t(e,t,n){var i=document.createElement("canvas"),r=0,o=n,s=n,a,l,c,u;i.width=1;i.height=n;a=i.getContext("2d");a.drawImage(e,0,0);l=a.getImageData(0,0,1,n).data;while(s>r){c=l[(s-1)*4+3];if(c===0){o=s}else{r=s}s=o+r>>1}u=s/n;return u===0?1:u}function n(e,t,n,i){var o=document.createElement("canvas"),s=n.mime||"image/jpeg",a=new qq.Promise;r(e,t,o,n,i).then((function(){a.success(o.toDataURL(s,n.quality||.8))}));return a}function i(e){var t=5241e3;if(!qq.ios()){throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!")}if(e.origHeight*e.origWidth>t){return{newHeight:Math.round(Math.sqrt(t*(e.origHeight/e.origWidth))),newWidth:Math.round(Math.sqrt(t*(e.origWidth/e.origHeight)))}}}function r(n,r,a,l,c){var u=n.naturalWidth,d=n.naturalHeight,p=l.width,h=l.height,f=a.getContext("2d"),m=new qq.Promise,g;f.save();if(l.resize){return o({blob:r,canvas:a,image:n,imageHeight:d,imageWidth:u,orientation:l.orientation,resize:l.resize,targetHeight:h,targetWidth:p})}if(!qq.supportedFeatures.unlimitedScaledImageSize){g=i({origWidth:p,origHeight:h});if(g){qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",p,h,g.newWidth,g.newHeight),"warn");p=g.newWidth;h=g.newHeight}}s(a,p,h,l.orientation);if(qq.ios()){(function(){if(e(n)){u/=2;d/=2}var i=1024,r=document.createElement("canvas"),o=c?t(n,u,d):1,s=Math.ceil(i*p/u),a=Math.ceil(i*h/d/o),l=0,m=0,g,v,y;r.width=r.height=i;g=r.getContext("2d");while(l<d){v=0;y=0;while(v<u){g.clearRect(0,0,i,i);g.drawImage(n,-v,-l);f.drawImage(r,0,0,i,i,y,m,s,a);v+=i;y+=s}l+=i;m+=a}f.restore();r=g=null})()}else{f.drawImage(n,0,0,p,h)}a.qqImageRendered&&a.qqImageRendered();m.success();return m}function o(e){var t=e.blob,n=e.image,i=e.imageHeight,r=e.imageWidth,o=e.orientation,a=new qq.Promise,l=e.resize,c=document.createElement("canvas"),u=c.getContext("2d"),d=e.canvas,p=e.targetHeight,h=e.targetWidth;s(c,r,i,o);d.height=p;d.width=h;u.drawImage(n,0,0);l({blob:t,height:p,image:n,sourceCanvas:c,targetCanvas:d,width:h}).then((function e(){d.qqImageRendered&&d.qqImageRendered();a.success()}),a.failure);return a}function s(e,t,n,i){switch(i){case 5:case 6:case 7:case 8:e.width=n;e.height=t;break;default:e.width=t;e.height=n}var r=e.getContext("2d");switch(i){case 2:r.translate(t,0);r.scale(-1,1);break;case 3:r.translate(t,n);r.rotate(Math.PI);break;case 4:r.translate(0,n);r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI);r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI);r.translate(0,-n);break;case 7:r.rotate(.5*Math.PI);r.translate(t,-n);r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI);r.translate(-t,0);break;default:break}}function a(e,t){var n=this;if(window.Blob&&e instanceof Blob){(function(){var t=new Image,i=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!i){throw Error("No createObjectURL function found to create blob url")}t.src=i.createObjectURL(e);n.blob=e;e=t})()}if(!e.naturalWidth&&!e.naturalHeight){e.onload=function(){var e=n.imageLoadListeners;if(e){n.imageLoadListeners=null;setTimeout((function(){for(var t=0,n=e.length;t<n;t++){e[t]()}}),0)}};e.onerror=t;this.imageLoadListeners=[]}this.srcImage=e}a.prototype.render=function(e,t){t=t||{};var i=this,o=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,a=t.width,l=t.height,c=t.maxWidth,u=t.maxHeight,d=!this.blob||this.blob.type==="image/jpeg",p=e.tagName.toLowerCase(),h;if(this.imageLoadListeners){this.imageLoadListeners.push((function(){i.render(e,t)}));return}if(a&&!l){l=s*a/o<<0}else if(l&&!a){a=o*l/s<<0}else{a=o;l=s}if(c&&a>c){a=c;l=s*a/o<<0}if(u&&l>u){l=u;a=o*l/s<<0}h={width:a,height:l},qq.each(t,(function(e,t){h[e]=t}));if(p==="img"){(function(){var t=e.src;n(i.srcImage,i.blob,h,d).then((function(n){e.src=n;t===e.src&&e.onload()}))})()}else if(p==="canvas"){r(this.srcImage,this.blob,e,h,d)}if(typeof this.onrender==="function"){this.onrender(e)}};qq.MegaPixImage=a})();qq.ImageGenerator=function(e){"use strict";function t(e){return e.tagName.toLowerCase()==="img"}function n(e){return e.tagName.toLowerCase()==="canvas"}function i(){return(new Image).crossOrigin!==undefined}function r(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}function o(e){var t=e.split("/"),n=t[t.length-1].split("?")[0],i=qq.getExtension(n);i=i&&i.toLowerCase();switch(i){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function s(e){var t=document.createElement("a"),n,i,r;t.href=e;n=t.protocol;r=t.port;i=t.hostname;if(n.toLowerCase()!==window.location.protocol.toLowerCase()){return true}if(i.toLowerCase()!==window.location.hostname.toLowerCase()){return true}if(r!==window.location.port&&!qq.ie()){return true}return false}function a(t,n){t.onload=function(){t.onload=null;t.onerror=null;n.success(t)};t.onerror=function(){t.onload=null;t.onerror=null;e("Problem drawing thumbnail!","error");n.failure(t,"Problem drawing thumbnail!")}}function l(e,t){e.qqImageRendered=function(){t.success(e)}}function c(i,r){var o=t(i)||n(i);if(t(i)){a(i,r)}else if(n(i)){l(i,r)}else{r.failure(i);e(qq.format("Element container of type {} is not supported!",i.tagName),"error")}return o}function u(t,n,i){var r=new qq.Promise,o=new qq.Identify(t,e),s=i.maxSize,a=i.orient==null?true:i.orient,l=function(){n.onerror=null;n.onload=null;e("Could not render preview, file may be too large!","error");r.failure(n,"Browser cannot render image!")};o.isPreviewable().then((function(o){var u={parse:function(){return(new qq.Promise).success()}},d=a?new qq.Exif(t,e):u,p=new qq.MegaPixImage(t,l);if(c(n,r)){d.parse().then((function(e){var t=e&&e.Orientation;p.render(n,{maxWidth:s,maxHeight:s,orientation:t,mime:o,resize:i.customResizeFunction})}),(function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t));p.render(n,{maxWidth:s,maxHeight:s,mime:o,resize:i.customResizeFunction})}))}}),(function(){e("Not previewable");r.failure(n,"Not previewable")}));return r}function d(e,t,n,i,r){var a=new Image,l=new qq.Promise;c(a,l);if(s(e)){a.crossOrigin="anonymous"}a.src=e;l.then((function s(){c(t,n);var l=new qq.MegaPixImage(a);l.render(t,{maxWidth:i,maxHeight:i,mime:o(e),resize:r})}),n.failure)}function p(e,t,n,i){c(t,n);qq(t).css({maxWidth:i+"px",maxHeight:i+"px"});t.src=e}function h(e,o,a){var l=new qq.Promise,u=a.scale,h=u?a.maxSize:null;if(u&&t(o)){if(r()){if(s(e)&&!i()){p(e,o,l,h)}else{d(e,o,l,h)}}else{p(e,o,l,h)}}else if(n(o)){d(e,o,l,h)}else if(c(o,l)){o.src=e}return l}qq.extend(this,{generate:function(t,n,i){if(qq.isString(t)){e("Attempting to update thumbnail based on server response.");return h(t,n,i||{})}else{e("Attempting to draw client-side image preview.");return u(t,n,i||{})}}});this._testing={};this._testing.isImg=t;this._testing.isCanvas=n;this._testing.isCrossOrigin=s;this._testing.determineMimeOfFileName=o};qq.Exif=function(e,t){"use strict";var n=[274],i={274:{name:"Orientation",bytes:2}};function r(e){var t=0,n=0;while(e.length>0){t+=parseInt(e.substring(0,2),16)*Math.pow(2,n);e=e.substring(2,e.length);n+=8}return t}function o(t,n){var i=t,r=n;if(i===undefined){i=2;r=new qq.Promise}qq.readBlobToHex(e,i,4).then((function(e){var t=/^ffe([0-9])/.exec(e),n;if(t){if(t[1]!=="1"){n=parseInt(e.slice(4,8),16);o(i+n+2,r)}else{r.success(i)}}else{r.failure("No EXIF header to be found!")}}));return r}function s(){var t=new qq.Promise;qq.readBlobToHex(e,0,6).then((function(e){if(e.indexOf("ffd8")!==0){t.failure("Not a valid JPEG!")}else{o().then((function(e){t.success(e)}),(function(e){t.failure(e)}))}}));return t}function a(t){var n=new qq.Promise;qq.readBlobToHex(e,t+10,2).then((function(e){n.success(e==="4949")}));return n}function l(t,n){var i=new qq.Promise;qq.readBlobToHex(e,t+18,2).then((function(e){if(n){return i.success(r(e))}else{i.success(parseInt(e,16))}}));return i}function c(t,n){var i=t+20,r=n*12;return qq.readBlobToHex(e,i,r)}function u(e){var t=[],n=0;while(n+24<=e.length){t.push(e.slice(n,n+24));n+=24}return t}function d(e,t){var o=16,s=qq.extend([],n),a={};qq.each(t,(function(t,n){var l=n.slice(0,4),c=e?r(l):parseInt(l,16),u=s.indexOf(c),d,p,h;if(u>=0){p=i[c].name;h=i[c].bytes;d=n.slice(o,o+h*2);a[p]=e?r(d):parseInt(d,16);s.splice(u,1)}if(s.length===0){return false}}));return a}qq.extend(this,{parse:function(){var n=new qq.Promise,i=function(e){t(qq.format("EXIF header parse failed: '{}' ",e));n.failure(e)};s().then((function(r){t(qq.format("Moving forward with EXIF header parsing for '{}'",e.name===undefined?"blob":e.name));a(r).then((function(e){t(qq.format("EXIF Byte order is {} endian",e?"little":"big"));l(r,e).then((function(o){t(qq.format("Found {} APP1 directory entries",o));c(r,o).then((function(i){var r=u(i),o=d(e,r);t("Successfully parsed some EXIF tags");n.success(o)}),i)}),i)}),i)}),i);return n}});this._testing={};this._testing.parseLittleEndian=r};qq.Identify=function(e,t){"use strict";function n(e,t){var n=false,i=[].concat(e);qq.each(i,(function(e,i){if(t.indexOf(i)===0){n=true;return false}}));return n}qq.extend(this,{isPreviewable:function(){var i=this,r=new qq.Promise,o=false,s=e.name===undefined?"blob":e.name;t(qq.format("Attempting to determine if {} can be rendered in this browser",s));t("First pass: check type attribute of blob object.");if(this.isPreviewableSync()){t("Second pass: check for magic bytes in file header.");qq.readBlobToHex(e,0,4).then((function(e){qq.each(i.PREVIEWABLE_MIME_TYPES,(function(t,i){if(n(i,e)){if(t!=="image/tiff"||qq.supportedFeatures.tiffPreviews){o=true;r.success(t)}return false}}));t(qq.format("'{}' is {} able to be rendered in this browser",s,o?"":"NOT"));if(!o){r.failure()}}),(function(){t("Error reading file w/ name '"+s+"'.  Not able to be rendered in this browser.");r.failure()}))}else{r.failure()}return r},isPreviewableSync:function(){var n=e.type,i=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),n)>=0,r=false,o=e.name===undefined?"blob":e.name;if(i){if(n==="image/tiff"){r=qq.supportedFeatures.tiffPreviews}else{r=true}}!r&&t(o+" is not previewable in this browser per the blob's type attr");return r}})};qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};qq.ImageValidation=function(e,t){"use strict";function n(e){var t=false;qq.each(e,(function(e,n){if(n>0){t=true;return false}}));return t}function i(){var n=new qq.Promise;new qq.Identify(e,t).isPreviewable().then((function(){var i=new Image,r=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(r){i.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error");n.failure()};i.onload=function(){n.success({width:this.width,height:this.height})};i.src=r.createObjectURL(e)}else{t("No createObjectURL function available to generate image URL!","error");n.failure()}}),n.failure);return n}function r(e,t){var n;qq.each(e,(function(e,i){if(i>0){var r=/(max|min)(Width|Height)/.exec(e),o=r[2].charAt(0).toLowerCase()+r[2].slice(1),s=t[o];switch(r[1]){case"min":if(s<i){n=e;return false}break;case"max":if(s>i){n=e;return false}break}}}));return n}this.validate=function(e){var o=new qq.Promise;t("Attempting to validate image.");if(n(e)){i().then((function(t){var n=r(e,t);if(n){o.failure(n)}else{o.success()}}),o.success)}else{o.success()}return o}};qq.Session=function(e){"use strict";var t={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(e){},log:function(e,t){}};qq.extend(t,e,true);function n(e){if(qq.isArray(e)){return true}t.log("Session response is not an array.","error")}function i(e,i,r,o){var s=false;i=i&&n(e);if(i){qq.each(e,(function(e,n){if(n.uuid==null){s=true;t.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",e),"error")}else if(n.name==null){s=true;t.log(qq.format("Session response item {} did not include a valid name - ignoring.",e),"error")}else{try{t.addFileRecord(n);return true}catch(e){s=true;t.log(e.message,"error")}}return false}))}o[i&&!s?"success":"failure"](e,r)}this.refresh=function(){var e=new qq.Promise,n=function(t,n,r){i(t,n,r,e)},r=qq.extend({},t),o=new qq.SessionAjaxRequester(qq.extend(r,{onComplete:n}));o.queryServer();return e}};qq.SessionAjaxRequester=function(e){"use strict";var t,n={endpoint:null,customHeaders:{},params:{},cors:{expected:false,sendCredentials:false},onComplete:function(e,t,n){},log:function(e,t){}};qq.extend(n,e);function i(e,t,i){var r=null;if(t.responseText!=null){try{r=qq.parseJson(t.responseText)}catch(e){n.log("Problem parsing session response: "+e.message,"error");i=true}}n.onComplete(r,!i,t)}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return n.endpoint}},customHeaders:n.customHeaders,log:n.log,onComplete:i,cors:n.cors}));qq.extend(this,{queryServer:function(){var e=qq.extend({},n.params);n.log("Session query request.");t.initTransport("sessionRefresh").withParams(e).withCacheBuster().send()}})};qq.Scaler=function(e,t){"use strict";var n=this,i=e.customResizer,r=e.sendOriginal,o=e.orient,s=e.defaultType,a=e.defaultQuality/100,l=e.failureText,c=e.includeExif,u=this._getSortedSizes(e.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&u.length>0,getFileRecords:function(e,n,d){var p=this,h=[],f=d.blob?d.blob:d,m=new qq.Identify(f,t);if(m.isPreviewableSync()){qq.each(u,(function(e,r){var u=p._determineOutputType({defaultType:s,requestedType:r.type,refType:f.type});h.push({uuid:qq.getUniqueId(),name:p._getName(n,{name:r.name,type:u,refType:f.type}),blob:new qq.BlobProxy(f,qq.bind(p._generateScaledImage,p,{customResizeFunction:i,maxSize:r.maxSize,orient:o,type:u,quality:a,failedText:l,includeExif:c,log:t}))})}));h.push({uuid:e,name:n,size:f.size,blob:r?f:null})}else{h.push({uuid:e,name:n,size:f.size,blob:f})}return h},handleNewFile:function(e,t,n,i,r,o,s,a){var l=this,c=e.qqButtonId||e.blob&&e.blob.qqButtonId,u=[],d=null,p=a.addFileToHandler,h=a.uploadData,f=a.paramsStore,m=qq.getUniqueId();qq.each(l.getFileRecords(n,t,e),(function(e,t){var n=t.size,i;if(t.blob instanceof qq.BlobProxy){n=-1}i=h.addFile({uuid:t.uuid,name:t.name,size:n,batchId:o,proxyGroupId:m});if(t.blob instanceof qq.BlobProxy){u.push(i)}else{d=i}if(t.blob){p(i,t.blob);r.push({id:i,file:t.blob})}else{h.setStatus(i,qq.status.REJECTED)}}));if(d!==null){qq.each(u,(function(e,t){var n={qqparentuuid:h.retrieve({id:d}).uuid,qqparentsize:h.retrieve({id:d}).size};n[s]=h.retrieve({id:t}).uuid;h.setParentId(t,d);f.addReadOnly(t,n)}));if(u.length){(function(){var e={};e[s]=h.retrieve({id:d}).uuid;f.addReadOnly(d,e)})()}}}})};qq.extend(qq.Scaler.prototype,{scaleImage:function(e,t,n){"use strict";if(!qq.supportedFeatures.scaling){throw new qq.Error("Scaling is not supported in this browser!")}var i=new qq.Promise,r=n.log,o=n.getFile(e),s=n.uploadData.retrieve({id:e}),a=s&&s.name,l=s&&s.uuid,c={customResizer:t.customResizer,sendOriginal:false,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},u=new qq.Scaler(c,r);if(!qq.Scaler||!qq.supportedFeatures.imagePreviews||!o){i.failure();r("Could not generate requested scaled image for "+e+".  "+"Scaling is either not possible in this browser, or the file could not be located.","error")}else{qq.bind((function(){var t=u.getFileRecords(l,a,o)[0];if(t&&t.blob instanceof qq.BlobProxy){t.blob.create().then(i.success,i.failure)}else{r(e+" is not a scalable image!","error");i.failure()}}),this)()}return i},_determineOutputType:function(e){"use strict";var t=e.requestedType,n=e.defaultType,i=e.refType;if(!n&&!t){if(i!=="image/jpeg"){return"image/png"}return i}if(!t){return n}if(qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0){if(t==="image/tiff"){return qq.supportedFeatures.tiffPreviews?t:n}return t}return n},_getName:function(e,t){"use strict";var n=e.lastIndexOf("."),i=t.type||"image/png",r=t.refType,o="",s=qq.getExtension(e),a="";if(t.name&&t.name.trim().length){a=" ("+t.name+")"}if(n>=0){o=e.substr(0,n);if(r!==i){s=i.split("/")[1]}o+=a+"."+s}else{o=e+a}return o},_getSortedSizes:function(e){"use strict";e=qq.extend([],e);return e.sort((function(e,t){if(e.maxSize>t.maxSize){return 1}if(e.maxSize<t.maxSize){return-1}return 0}))},_generateScaledImage:function(e,t){"use strict";var n=this,i=e.customResizeFunction,r=e.log,o=e.maxSize,s=e.orient,a=e.type,l=e.quality,c=e.failedText,u=e.includeExif&&t.type==="image/jpeg"&&a==="image/jpeg",d=new qq.Promise,p=new qq.ImageGenerator(r),h=document.createElement("canvas");r("Attempting to generate scaled version for "+t.name);p.generate(t,h,{maxSize:o,orient:s,customResizeFunction:i}).then((function(){var e=h.toDataURL(a,l),i=function(){r("Success generating scaled version for "+t.name);var n=qq.dataUriToBlob(e);d.success(n)};if(u){n._insertExifHeader(t,e,r).then((function(t){e=t;i()}),(function(){r("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error");i()}))}else{i()}}),(function(){r("Failed attempt to generate scaled version for "+t.name,"error");d.failure(c)}));return d},_insertExifHeader:function(e,t,n){"use strict";var i=new FileReader,r=new qq.Promise,o="";i.onload=function(){o=i.result;r.success(qq.ExifRestorer.restore(o,t))};i.onerror=function(){n("Problem reading "+e.name+" during attempt to transfer EXIF data to scaled version.","error");r.failure()};i.readAsDataURL(e);return r},_dataUriToBlob:function(e){"use strict";var t,n,i,r;if(e.split(",")[0].indexOf("base64")>=0){t=atob(e.split(",")[1])}else{t=decodeURI(e.split(",")[1])}n=e.split(",")[0].split(":")[1].split(";")[0];i=new ArrayBuffer(t.length);r=new Uint8Array(i);qq.each(t,(function(e,t){r[e]=t.charCodeAt(0)}));return this._createBlob(i,n)},_createBlob:function(e,t){"use strict";var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=n&&new n;if(i){i.append(e);return i.getBlob(t)}else{return new Blob([e],{type:t})}}});qq.ExifRestorer=function(){var e={};e.KEY_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";e.encode64=function(e){var t="",n,i,r="",o,s,a,l="",c=0;do{n=e[c++];i=e[c++];r=e[c++];o=n>>2;s=(n&3)<<4|i>>4;a=(i&15)<<2|r>>6;l=r&63;if(isNaN(i)){a=l=64}else if(isNaN(r)){l=64}t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l);n=i=r="";o=s=a=l=""}while(c<e.length);return t};e.restore=function(e,t){var n="data:image/jpeg;base64,";if(!e.match(n)){return t}var i=this.decode64(e.replace(n,""));var r=this.slice2Segments(i);var o=this.exifManipulation(t,r);return n+this.encode64(o)};e.exifManipulation=function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n),r=new Uint8Array(i);return r};e.getExifArray=function(e){var t;for(var n=0;n<e.length;n++){t=e[n];if(t[0]==255&t[1]==225){return t}}return[]};e.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),s=i.slice(r),a=o;a=a.concat(t);a=a.concat(s);return a};e.slice2Segments=function(e){var t=0,n=[];while(1){if(e[t]==255&e[t+1]==218){break}if(e[t]==255&e[t+1]==216){t+=2}else{var i=e[t+2]*256+e[t+3],r=t+i+2,o=e.slice(t,r);n.push(o);t=r}if(t>e.length){break}}return n};e.decode64=function(e){var t="",n,i,r="",o,s,a,l="",c=0,u=[];var d=/[^A-Za-z0-9\+\/\=]/g;if(d.exec(e)){throw new Error("There were invalid base64 characters in the input text.  "+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='")}e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=this.KEY_STR.indexOf(e.charAt(c++));s=this.KEY_STR.indexOf(e.charAt(c++));a=this.KEY_STR.indexOf(e.charAt(c++));l=this.KEY_STR.indexOf(e.charAt(c++));n=o<<2|s>>4;i=(s&15)<<4|a>>2;r=(a&3)<<6|l;u.push(n);if(a!=64){u.push(i)}if(l!=64){u.push(r)}n=i=r="";o=s=a=l=""}while(c<e.length);return u};return e}();qq.TotalProgress=function(e,t){"use strict";var n={},i=0,r=0,o=-1,s=-1,a=function(t,n){if(t!==o||n!==s){e(t,n)}o=t;s=n},l=function(e,t){var n=true;qq.each(e,(function(e,i){if(qq.indexOf(t,i)>=0){n=false;return false}}));return n},c=function(e){p(e,-1,-1);delete n[e]},u=function(e,t,n){if(t.length===0||l(t,n)){a(r,r);this.reset()}},d=function(e){var i=t(e);if(i>0){p(e,0,i);n[e]={loaded:0,total:i}}},p=function(e,t,o){var s=n[e]?n[e].loaded:0,l=n[e]?n[e].total:0;if(t===-1&&o===-1){i-=s;r-=l}else{if(t){i+=t-s}if(o){r+=o-l}}a(i,r)};qq.extend(this,{onAllComplete:u,onStatusChange:function(e,t,n){if(n===qq.status.CANCELED||n===qq.status.REJECTED){c(e)}else if(n===qq.status.SUBMITTING){d(e)}},onIndividualProgress:function(e,t,i){p(e,t,i);n[e]={loaded:t,total:i}},onNewSize:function(e){d(e)},reset:function(){n={};i=0;r=0}})};qq.PasteSupport=function(e){"use strict";var t,n;t={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}};function i(e){return e.type&&e.type.indexOf("image/")===0}function r(){n=qq(t.targetElement).attach("paste",(function(e){var n=e.clipboardData;if(n){qq.each(n.items,(function(e,n){if(i(n)){var r=n.getAsFile();t.callbacks.pasteReceived(r)}}))}}))}function o(){if(n){n()}}qq.extend(t,e);r();qq.extend(this,{reset:function(){o()}})};qq.FormSupport=function(e,t,n){"use strict";var i=this,r=e.interceptSubmit,o=e.element,s=e.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:s,attachedToForm:false,getFormInputsAsObject:function(){if(o==null){return null}return i._form2Obj(o)}});function a(e){if(e.getAttribute("action")){i.newEndpoint=e.getAttribute("action")}}function l(e,t){if(e.checkValidity&&!e.checkValidity()){n("Form did not pass validation checks - will not upload.","error");t()}else{return true}}function c(e){var n=e.submit;qq(e).attach("submit",(function(i){i=i||window.event;if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}l(e,n)&&t()}));e.submit=function(){l(e,n)&&t()}}function u(e){if(e){if(qq.isString(e)){e=document.getElementById(e)}if(e){n("Attaching to form element.");a(e);r&&c(e)}}return e}o=u(o);this.attachedToForm=!!o};qq.extend(qq.FormSupport.prototype,{_form2Obj:function(e){"use strict";var t={},n=function(e){var t=["button","image","reset","submit"];return qq.indexOf(t,e.toLowerCase())<0},i=function(e){return qq.indexOf(["checkbox","radio"],e.toLowerCase())>=0},r=function(e){if(i(e.type)&&!e.checked){return true}return e.disabled&&e.type.toLowerCase()!=="hidden"},o=function(e){var t=null;qq.each(qq(e).children(),(function(e,n){if(n.tagName.toLowerCase()==="option"&&n.selected){t=n.value;return false}}));return t};qq.each(e.elements,(function(e,i){if((qq.isInput(i,true)||i.tagName.toLowerCase()==="textarea")&&n(i.type)&&!r(i)){t[i.name]=i.value}else if(i.tagName.toLowerCase()==="select"&&!r(i)){var s=o(i);if(s!==null){t[i.name]=s}}}));return t}});qq.CryptoJS=function(e,t){var n={};var i=n.lib={};var r=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;if(t){n.mixIn(t)}if(!n.hasOwnProperty("init")){n.init=function(){n.$super.init.apply(this,arguments)}}n.init.prototype=n;n.$super=this;return n},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}if(e.hasOwnProperty("toString")){this.toString=e.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var o=i.WordArray=r.extend({init:function(e,n){e=this.words=e||[];if(n!=t){this.sigBytes=n}else{this.sigBytes=e.length*4}},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words;var n=e.words;var i=this.sigBytes;var r=e.sigBytes;this.clamp();if(i%4){for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}}else if(n.length>65535){for(var o=0;o<r;o+=4){t[i+o>>>2]=n[o>>>2]}}else{t.push.apply(t,n)}this.sigBytes+=r;return this},clamp:function(){var t=this.words;var n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8;t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){var n=[];for(var i=0;i<t;i+=4){n.push(e.random()*4294967296|0)}return new o.init(n,t)}});var s=n.enc={};var a=s.Hex={stringify:function(e){var t=e.words;var n=e.sigBytes;var i=[];for(var r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16));i.push((o&15).toString(16))}return i.join("")},parse:function(e){var t=e.length;var n=[];for(var i=0;i<t;i+=2){n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4}return new o.init(n,t/2)}};var l=s.Latin1={stringify:function(e){var t=e.words;var n=e.sigBytes;var i=[];for(var r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){var t=e.length;var n=[];for(var i=0;i<t;i++){n[i>>>2]|=(e.charCodeAt(i)&255)<<24-i%4*8}return new o.init(n,t)}};var c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}};var u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init;this._nDataBytes=0},_append:function(e){if(typeof e=="string"){e=c.parse(e)}this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data;var i=n.words;var r=n.sigBytes;var s=this.blockSize;var a=s*4;var l=r/a;if(t){l=e.ceil(l)}else{l=e.max((l|0)-this._minBufferSize,0)}var c=l*s;var u=e.min(c*4,r);if(c){for(var d=0;d<c;d+=s){this._doProcessBlock(i,d)}var p=i.splice(0,c);n.sigBytes-=u}return new o.init(p,u)},clone:function(){var e=r.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0});var d=i.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){if(e){this._append(e)}var t=this._doFinalize();return t},blockSize:512/32,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);(function(){var e=qq.CryptoJS;var t=e.lib;var n=t.WordArray;var i=e.enc;var r=i.Base64={stringify:function(e){var t=e.words;var n=e.sigBytes;var i=this._map;e.clamp();var r=[];for(var o=0;o<n;o+=3){var s=t[o>>>2]>>>24-o%4*8&255;var a=t[o+1>>>2]>>>24-(o+1)%4*8&255;var l=t[o+2>>>2]>>>24-(o+2)%4*8&255;var c=s<<16|a<<8|l;for(var u=0;u<4&&o+u*.75<n;u++){r.push(i.charAt(c>>>6*(3-u)&63))}}var d=i.charAt(64);if(d){while(r.length%4){r.push(d)}}return r.join("")},parse:function(e){var t=e.length;var i=this._map;var r=i.charAt(64);if(r){var o=e.indexOf(r);if(o!=-1){t=o}}var s=[];var a=0;for(var l=0;l<t;l++){if(l%4){var c=i.indexOf(e.charAt(l-1))<<l%4*2;var u=i.indexOf(e.charAt(l))>>>6-l%4*2;s[a>>>2]|=(c|u)<<24-a%4*8;a++}}return n.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var e=qq.CryptoJS;var t=e.lib;var n=t.Base;var i=e.enc;var r=i.Utf8;var o=e.algo;var s=o.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init;if(typeof t=="string"){t=r.parse(t)}var n=e.blockSize;var i=n*4;if(t.sigBytes>i){t=e.finalize(t)}t.clamp();var o=this._oKey=t.clone();var s=this._iKey=t.clone();var a=o.words;var l=s.words;for(var c=0;c<n;c++){a[c]^=1549556828;l[c]^=909522486}o.sigBytes=s.sigBytes=i;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var t=this._hasher;var n=t.finalize(e);t.reset();var i=t.finalize(this._oKey.clone().concat(n));return i}})})();(function(){var e=qq.CryptoJS;var t=e.lib;var n=t.WordArray;var i=t.Hasher;var r=e.algo;var o=[];var s=r.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){var n=this._hash.words;var i=n[0];var r=n[1];var s=n[2];var a=n[3];var l=n[4];for(var c=0;c<80;c++){if(c<16){o[c]=e[t+c]|0}else{var u=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=u<<1|u>>>31}var d=(i<<5|i>>>27)+l+o[c];if(c<20){d+=(r&s|~r&a)+1518500249}else if(c<40){d+=(r^s^a)+1859775393}else if(c<60){d+=(r&s|r&a|s&a)-1894007588}else{d+=(r^s^a)-899497514}l=a;a=s;s=r<<30|r>>>2;r=i;i=d}n[0]=n[0]+i|0;n[1]=n[1]+r|0;n[2]=n[2]+s|0;n[3]=n[3]+a|0;n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data;var t=e.words;var n=this._nDataBytes*8;var i=e.sigBytes*8;t[i>>>5]|=128<<24-i%32;t[(i+64>>>9<<4)+14]=Math.floor(n/4294967296);t[(i+64>>>9<<4)+15]=n;e.sigBytes=t.length*4;this._process();return this._hash},clone:function(){var e=i.clone.call(this);e._hash=this._hash.clone();return e}});e.SHA1=i._createHelper(s);e.HmacSHA1=i._createHmacHelper(s)})();(function(e){var t=qq.CryptoJS;var n=t.lib;var i=n.WordArray;var r=n.Hasher;var o=t.algo;var s=[];var a=[];(function(){function t(t){var n=e.sqrt(t);for(var i=2;i<=n;i++){if(!(t%i)){return false}}return true}function n(e){return(e-(e|0))*4294967296|0}var i=2;var r=0;while(r<64){if(t(i)){if(r<8){s[r]=n(e.pow(i,1/2))}a[r]=n(e.pow(i,1/3));r++}i++}})();var l=[];var c=o.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){var n=this._hash.words;var i=n[0];var r=n[1];var o=n[2];var s=n[3];var c=n[4];var u=n[5];var d=n[6];var p=n[7];for(var h=0;h<64;h++){if(h<16){l[h]=e[t+h]|0}else{var f=l[h-15];var m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3;var g=l[h-2];var v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=m+l[h-7]+v+l[h-16]}var y=c&u^~c&d;var b=i&r^i&o^r&o;var _=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22);var x=(c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25);var w=p+x+y+a[h]+l[h];var k=_+b;p=d;d=u;u=c;c=s+w|0;s=o;o=r;r=i;i=w+k|0}n[0]=n[0]+i|0;n[1]=n[1]+r|0;n[2]=n[2]+o|0;n[3]=n[3]+s|0;n[4]=n[4]+c|0;n[5]=n[5]+u|0;n[6]=n[6]+d|0;n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data;var n=t.words;var i=this._nDataBytes*8;var r=t.sigBytes*8;n[r>>>5]|=128<<24-r%32;n[(r+64>>>9<<4)+14]=e.floor(i/4294967296);n[(r+64>>>9<<4)+15]=i;t.sigBytes=n.length*4;this._process();return this._hash},clone:function(){var e=r.clone.call(this);e._hash=this._hash.clone();return e}});t.SHA256=r._createHelper(c);t.HmacSHA256=r._createHmacHelper(c)})(Math);(function(){if(typeof ArrayBuffer!="function"){return}var e=qq.CryptoJS;var t=e.lib;var n=t.WordArray;var i=n.init;var r=n.init=function(e){if(e instanceof ArrayBuffer){e=new Uint8Array(e)}if(e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array){e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(e instanceof Uint8Array){var t=e.byteLength;var n=[];for(var r=0;r<t;r++){n[r>>>2]|=e[r]<<24-r%4*8}i.call(this,n,t)}else{i.apply(this,arguments)}};r.prototype=n})();qq.s3=qq.s3||{};qq.s3.util=qq.s3.util||function(){"use strict";return{ALGORITHM_PARAM_NAME:"x-amz-algorithm",AWS_PARAM_PREFIX:"x-amz-meta-",CREDENTIAL_PARAM_NAME:"x-amz-credential",DATE_PARAM_NAME:"x-amz-date",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",V4_ALGORITHM_PARAM_VALUE:"AWS4-HMAC-SHA256",V4_SIGNATURE_PARAM_NAME:"x-amz-signature",CASE_SENSITIVE_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNSIGNABLE_REST_HEADER_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNPREFIXED_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5","x-amz-server-side-encryption-customer-algorithm","x-amz-server-side-encryption-customer-key","x-amz-server-side-encryption-customer-key-MD5"],getBucket:function(e){var t=[/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],n;qq.each(t,(function(t,i){var r=i.exec(e);if(r){n=r[1];return false}}));return n},_getPrefixedParamName:function(e){if(qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,e)>=0){return e}return qq.s3.util.AWS_PARAM_PREFIX+e},getPolicy:function(e){var t={},n=[],i=e.bucket,r=e.date,o=e.clockDrift,s=e.key,a=e.accessKey,l=e.acl,c=e.type,u=e.expectedStatus,d=e.sessionToken,p=e.params,h=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),f=e.minFileSize,m=e.maxFileSize,g=e.reducedRedundancy,v=e.region,y=e.serverSideEncryption,b=e.signatureVersion;t.expiration=qq.s3.util.getPolicyExpirationDate(r,o);n.push({acl:l});n.push({bucket:i});if(c){n.push({"Content-Type":c})}if(u){n.push({success_action_status:u.toString()})}if(h){n.push({success_action_redirect:h})}if(g){n.push({});n[n.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(d){n.push({});n[n.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=d}if(y){n.push({});n[n.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}if(b===2){n.push({key:s})}else if(b===4){n.push({});n[n.length-1][qq.s3.util.ALGORITHM_PARAM_NAME]=qq.s3.util.V4_ALGORITHM_PARAM_VALUE;n.push({});n[n.length-1].key=s;n.push({});n[n.length-1][qq.s3.util.CREDENTIAL_PARAM_NAME]=qq.s3.util.getV4CredentialsString({date:r,key:a,region:v});n.push({});n[n.length-1][qq.s3.util.DATE_PARAM_NAME]=qq.s3.util.getV4PolicyDate(r,o)}qq.each(p,(function(e,t){var i=qq.s3.util._getPrefixedParamName(e),r={};if(qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,i)>=0){r[i]=t}else{r[i]=encodeURIComponent(t)}n.push(r)}));t.conditions=n;qq.s3.util.enforceSizeLimits(t,f,m);return t},refreshPolicyCredentials:function(e,t){var n=false;qq.each(e.conditions,(function(e,i){qq.each(i,(function(e,r){if(e===qq.s3.util.SESSION_TOKEN_PARAM_NAME){i[e]=t;n=true}}))}));if(!n){e.conditions.push({});e.conditions[e.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=t}},generateAwsParams:function(e,t){var n={},i=e.params,r=new qq.Promise,o=e.sessionToken,s=e.clockDrift,a=e.type,l=e.key,c=e.accessKey,u=e.acl,d=e.expectedStatus,p=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),h=e.reducedRedundancy,f=e.region,m=e.serverSideEncryption,g=e.signatureVersion,v=new Date,y=e.log,b;e.date=v;b=qq.s3.util.getPolicy(e);n.key=l;if(a){n["Content-Type"]=a}if(d){n.success_action_status=d}if(p){n.success_action_redirect=p}if(h){n[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(m){n[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}if(o){n[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=o}n.acl=u;qq.each(i,(function(e,t){var i=qq.s3.util._getPrefixedParamName(e);if(qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,i)>=0){n[i]=t}else{n[i]=encodeURIComponent(t)}}));if(g===2){n.AWSAccessKeyId=c}else if(g===4){n[qq.s3.util.ALGORITHM_PARAM_NAME]=qq.s3.util.V4_ALGORITHM_PARAM_VALUE;n[qq.s3.util.CREDENTIAL_PARAM_NAME]=qq.s3.util.getV4CredentialsString({date:v,key:c,region:f});n[qq.s3.util.DATE_PARAM_NAME]=qq.s3.util.getV4PolicyDate(v,s)}t(b).then((function(t,i,o){n.policy=t.policy;if(e.signatureVersion===2){n.signature=t.signature;if(i){n.AWSAccessKeyId=i}}else if(e.signatureVersion===4){n[qq.s3.util.V4_SIGNATURE_PARAM_NAME]=t.signature}if(o){n[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=o}r.success(n)}),(function(e){e=e||"Can't continue further with request to S3 as we did not receive "+"a valid signature and policy from the server.";y("Policy signing failed.  "+e,"error");r.failure(e)}));return r},enforceSizeLimits:function(e,t,n){var i=t<0?0:t,r=n<=0?9007199254740992:n;if(t>0||n>0){e.conditions.push(["content-length-range",i.toString(),r.toString()])}},getPolicyExpirationDate:function(e,t){var n=new Date(e.getTime()+t);return qq.s3.util.getPolicyDate(n,5)},getCredentialsDate:function(e){return e.getUTCFullYear()+""+("0"+(e.getUTCMonth()+1)).slice(-2)+("0"+e.getUTCDate()).slice(-2)},getPolicyDate:function(e,t){var n=t||0,i,r;e.setMinutes(e.getMinutes()+(n||0));if(Date.prototype.toISOString){return e.toISOString()}else{i=function(e){r=String(e);if(r.length===1){r="0"+r}return r};return e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},parseIframeResponse:function(e){var t=e.contentDocument||e.contentWindow.document,n=t.location.search,i=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(n);if(i){return{bucket:i[1],key:i[2],etag:i[3].replace(/%22/g,"")}}},getSuccessRedirectAbsoluteUrl:function(e){if(e){var t=document.createElement("div"),n;if(qq.ie7()){t.innerHTML="<a href='"+e+"'></a>";n=t.firstChild;return n.href}else{n=document.createElement("a");n.href=e;n.href=n.href;return n.href}}},getV4CredentialsString:function(e){return e.key+"/"+qq.s3.util.getCredentialsDate(e.date)+"/"+e.region+"/s3/aws4_request"},getV4PolicyDate:function(e,t){var n=new Date(e.getTime()+t);return qq.s3.util.getCredentialsDate(n)+"T"+("0"+n.getUTCHours()).slice(-2)+("0"+n.getUTCMinutes()).slice(-2)+("0"+n.getUTCSeconds()).slice(-2)+"Z"},encodeQueryStringParam:function(e){var t=encodeURIComponent(e);t=t.replace(/[!'()]/g,escape);t=t.replace(/\*/g,"%2A");return t.replace(/%20/g,"+")},uriEscape:function(e){var t=encodeURIComponent(e);t=t.replace(/[^A-Za-z0-9_.~\-%]+/g,escape);t=t.replace(/[*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t},uriEscapePath:function(e){var t=[];qq.each(e.split("/"),(function(e,n){t.push(qq.s3.util.uriEscape(n))}));return t.join("/")}}}();(function(){"use strict";qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(e,t){this._uploadSuccessParamsStore.set(e,t)},setUploadSuccessEndpoint:function(e,t){this._uploadSuccessEndpointStore.set(e,t)}};qq.nonTraditionalBasePrivateApi={_onComplete:function(e,t,n,i){var r=n.success?true:false,o=this,s=arguments,a=this._uploadSuccessEndpointStore.get(e),l=this._options.uploadSuccess.customHeaders,c=this._options.uploadSuccess.method,u=this._options.cors,d=new qq.Promise,p=this._uploadSuccessParamsStore.get(e),h=this._paramsStore.get(e),f=function(t){delete o._failedSuccessRequestCallbacks[e];qq.extend(n,t);qq.FineUploaderBasic.prototype._onComplete.apply(o,s);d.success(t)},m=function(r){var a=g;qq.extend(n,r);if(n&&n.reset){a=null}if(!a){delete o._failedSuccessRequestCallbacks[e]}else{o._failedSuccessRequestCallbacks[e]=a}if(!o._onAutoRetry(e,t,n,i,a)){qq.FineUploaderBasic.prototype._onComplete.apply(o,s);d.failure(r)}},g,v;if(r&&a){v=new qq.UploadSuccessAjaxRequester({endpoint:a,method:c,customHeaders:l,cors:u,log:qq.bind(this.log,this)});qq.extend(p,o._getEndpointSpecificParams(e,n,i),true);h&&qq.extend(p,h,true);g=qq.bind((function(){v.sendSuccessRequest(e,p).then(f,m)}),o);g();return d}return qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(e){var t=this._failedSuccessRequestCallbacks[e];return qq.FineUploaderBasic.prototype._manualRetry.call(this,e,t)}}})();(function(){"use strict";qq.s3.FineUploaderBasic=function(e){var t={request:{accessKey:null,clockDrift:0},objectProperties:{acl:"private",bucket:qq.bind((function(e){return qq.s3.util.getBucket(this.getEndpoint(e))}),this),host:qq.bind((function(e){return/(?:http|https):\/\/(.+)(?:\/.+)?/.exec(this._endpointStore.get(e))[1]}),this),key:"uuid",reducedRedundancy:false,region:"us-east-1",serverSideEncryption:false},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{customHeaders:{},endpoint:null,version:2},uploadSuccess:{endpoint:null,method:"POST",params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:true},callbacks:{onCredentialsExpired:function(){}}};qq.extend(t,e,true);if(!this.setCredentials(t.credentials,true)){this._currentCredentials.accessKey=t.request.accessKey}this._aclStore=this._createStore(t.objectProperties.acl);qq.FineUploaderBasic.call(this,t);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._uploadSuccessEndpointStore=this._createStore(this._options.uploadSuccess.endpoint);this._failedSuccessRequestCallbacks={};this._cannedKeys={};this._cannedBuckets={};this._buckets={};this._hosts={}};qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,{getBucket:function(e){if(this._cannedBuckets[e]==null){return this._buckets[e]}return this._cannedBuckets[e]},getKey:function(e){if(this._cannedKeys[e]==null){return this._handler.getThirdPartyFileId(e)}return this._cannedKeys[e]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=[];this._buckets={};this._hosts={}},setCredentials:function(e,t){if(e&&e.secretKey){if(!e.accessKey){throw new qq.Error("Invalid credentials: no accessKey")}else if(!e.expiration){throw new qq.Error("Invalid credentials: no expiration")}else{this._currentCredentials=qq.extend({},e);if(qq.isString(e.expiration)){this._currentCredentials.expiration=new Date(e.expiration)}}return true}else if(!t){throw new qq.Error("Invalid credentials parameter!")}else{this._currentCredentials={}}},setAcl:function(e,t){this._aclStore.set(e,t)},_createUploadHandler:function(){var e=this,t={aclStore:this._aclStore,getBucket:qq.bind(this._determineBucket,this),getHost:qq.bind(this._determineHost,this),getKeyName:qq.bind(this._determineKeyName,this),iframeSupport:this._options.iframeSupport,objectProperties:this._options.objectProperties,signature:this._options.signature,clockDrift:this._options.request.clockDrift,validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};qq.override(this._endpointStore,(function(e){return{get:function(t){var n=e.get(t);if(n.indexOf("http")<0){return"http://"+n}return n}}}));qq.override(this._paramsStore,(function(e){return{get:function(t){var n=e.get(t),i={};qq.each(n,(function(e,t){var n=e;if(qq.indexOf(qq.s3.util.CASE_SENSITIVE_PARAM_NAMES,n)<0){n=n.toLowerCase()}i[n]=qq.isFunction(t)?t():t}));return i}}}));t.signature.credentialsProvider={get:function(){return e._currentCredentials},onExpired:function(){var t=new qq.Promise,n=e._options.callbacks.onCredentialsExpired();if(qq.isGenericPromise(n)){n.then((function(n){try{e.setCredentials(n);t.success()}catch(n){e.log("Invalid credentials returned from onCredentialsExpired callback! ("+n.message+")","error");t.failure("onCredentialsExpired did not return valid credentials.")}}),(function(n){e.log("onCredentialsExpired callback indicated failure! ("+n+")","error");t.failure("onCredentialsExpired callback failed.")}))}else{e.log("onCredentialsExpired callback did not return a promise!","error");t.failure("Unexpected return value for onCredentialsExpired.")}return t}};return qq.FineUploaderBasic.prototype._createUploadHandler.call(this,t,"s3")},_determineObjectPropertyValue:function(e,t){var n=this._options.objectProperties[t],i=new qq.Promise,r=this;if(qq.isFunction(n)){n=n(e);if(qq.isGenericPromise(n)){i=n}else{i.success(n)}}else if(qq.isString(n)){i.success(n)}i.then((function n(i){r["_"+t+"s"][e]=i}),(function n(i){qq.log("Problem determining "+t+" for ID "+e+" ("+i+")","error")}));return i},_determineBucket:function(e){return this._determineObjectPropertyValue(e,"bucket")},_determineHost:function(e){return this._determineObjectPropertyValue(e,"host")},_determineKeyName:function(e,t){var n=new qq.Promise,i=this._options.objectProperties.key,r=qq.getExtension(t),o=n.failure,s=function(e,t){var i=e;if(t!==undefined){i+="."+t}n.success(i)};switch(i){case"uuid":s(this.getUuid(e),r);break;case"filename":s(t);break;default:if(qq.isFunction(i)){this._handleKeynameFunction(i,e,s,o)}else{this.log(i+" is not a valid value for the s3.keyname option!","error");o()}}return n},_handleKeynameFunction:function(e,t,n,i){var r=this,o=function(e){n(e)},s=function(e){r.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",t,e||"null"),"error");i(e)},a=e.call(this,t);if(qq.isGenericPromise(a)){a.then(o,s)}else if(a==null){s()}else{o(a)}},_getEndpointSpecificParams:function(e,t,n){var i={key:this.getKey(e),uuid:this.getUuid(e),name:this.getName(e),bucket:this.getBucket(e)};if(n&&n.getResponseHeader("ETag")){i.etag=n.getResponseHeader("ETag")}else if(t.etag){i.etag=t.etag}return i},_onSubmitDelete:function(e,t){var n={key:this.getKey(e),bucket:this.getBucket(e)};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,t,n)},_addCannedFile:function(e){var t;if(e.s3Key==null){throw new qq.Error("Did not find s3Key property in server session response.  This is required!")}else{t=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments);this._cannedKeys[t]=e.s3Key;this._cannedBuckets[t]=e.s3Bucket}return t}})})();if(!window.Uint8ClampedArray){window.Uint8ClampedArray=function(){}}qq.s3.RequestSigner=function(e){"use strict";var t,n=this,i={},r={expectingPolicy:false,method:"POST",signatureSpec:{drift:0,credentialsProvider:{},endpoint:null,customHeaders:{},version:2},maxConnections:3,endpointStore:{},paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(e,t){}},o,s=function(e,t,n){var i=e.getHeaders();if(r.signatureSpec.version===4){i.Authorization=qq.s3.util.V4_ALGORITHM_PARAM_VALUE+" Credential="+r.signatureSpec.credentialsProvider.get().accessKey+"/"+qq.s3.util.getCredentialsDate(e.getRequestDate())+"/"+r.signatureSpec.region+"/"+"s3/aws4_request,"+"SignedHeaders="+e.getSignedHeaders()+","+"Signature="+t}else{i.Authorization="AWS "+r.signatureSpec.credentialsProvider.get().accessKey+":"+t}n.success(i,e.getEndOfUrl())},a={getStringToSign:function(e){return qq.format("{}\n{}\n{}\n\n{}/{}/{}",e.method,e.contentMd5||"",e.contentType||"",e.headersStr||"\n",e.bucket,e.endOfUrl)},signApiRequest:function(e,t,n){var i=qq.CryptoJS.enc.Utf8.parse(t),r=qq.CryptoJS.HmacSHA1(i,o.get().secretKey),a=qq.CryptoJS.enc.Base64.stringify(r);s(e,a,n)},signPolicy:function(e,t,n,i){var r=JSON.stringify(e),s=qq.CryptoJS.enc.Utf8.parse(r),a=qq.CryptoJS.enc.Base64.stringify(s),l=qq.CryptoJS.HmacSHA1(a,o.get().secretKey),c=qq.CryptoJS.enc.Base64.stringify(l);t.success({policy:a,signature:c},n,i)}},l={getCanonicalQueryString:function(e){var t=e.indexOf("?"),n="",i,r,o;if(t>=0){i={};o=e.substr(t+1).split("&");qq.each(o,(function(e,t){var n=t.split("="),r=n[1];if(r==null){r=""}i[encodeURIComponent(n[0])]=encodeURIComponent(r)}));r=Object.keys(i).sort();r.forEach((function(e,t){n+=e+"="+i[e];if(t<r.length-1){n+="&"}}))}return n},getCanonicalRequest:function(e){return qq.format("{}\n{}\n{}\n{}\n{}\n{}",e.method,l.getCanonicalUri(e.endOfUrl),l.getCanonicalQueryString(e.endOfUrl),e.headersStr||"\n",l.getSignedHeaders(e.headerNames),e.hashedContent)},getCanonicalUri:function(e){var t=e,n=e.indexOf("?");if(n>0){t=e.substr(0,n)}return"/"+t},getEncodedHashedPayload:function(e){var t=new qq.Promise,n;if(qq.isBlob(e)){n=new FileReader;n.onloadend=function(e){if(e.target.readyState===FileReader.DONE){if(e.target.error){t.failure(e.target.error)}else{var n=qq.CryptoJS.lib.WordArray.create(e.target.result);t.success(qq.CryptoJS.SHA256(n).toString())}}};n.readAsArrayBuffer(e)}else{e=e||"";t.success(qq.CryptoJS.SHA256(e).toString())}return t},getScope:function(e,t){return qq.s3.util.getCredentialsDate(e)+"/"+t+"/s3/aws4_request"},getStringToSign:function(e){var t=l.getCanonicalRequest(e),n=qq.s3.util.getV4PolicyDate(e.date,e.drift),i=qq.CryptoJS.SHA256(t).toString(),o=l.getScope(e.date,r.signatureSpec.region),s="AWS4-HMAC-SHA256\n{}\n{}\n{}";return{hashed:qq.format(s,n,o,i),raw:qq.format(s,n,o,t)}},getSignedHeaders:function(e){var t="";e.forEach((function(n,i){t+=n.toLowerCase();if(i<e.length-1){t+=";"}}));return t},signApiRequest:function(e,t,n){var i=o.get().secretKey,r=/.+\n.+\n(\d+)\/(.+)\/s3\/.+\n(.+)/,a=r.exec(t),l,c,u,d;l=qq.CryptoJS.HmacSHA256(a[1],"AWS4"+i);c=qq.CryptoJS.HmacSHA256(a[2],l);u=qq.CryptoJS.HmacSHA256("s3",c);d=qq.CryptoJS.HmacSHA256("aws4_request",u);s(e,qq.CryptoJS.HmacSHA256(t,d),n)},signPolicy:function(e,t,n,i){var r=JSON.stringify(e),s=qq.CryptoJS.enc.Utf8.parse(r),a=qq.CryptoJS.enc.Base64.stringify(s),l=o.get().secretKey,c=/.+\/(.+)\/(.+)\/s3\/aws4_request/,u=function(){var t=null;qq.each(e.conditions,(function(e,n){var i=n["x-amz-credential"];if(i){t=i;return false}}));return t}(),d,p,h,f,m;d=c.exec(u);p=qq.CryptoJS.HmacSHA256(d[1],"AWS4"+l);h=qq.CryptoJS.HmacSHA256(d[2],p);f=qq.CryptoJS.HmacSHA256("s3",h);m=qq.CryptoJS.HmacSHA256("aws4_request",f);t.success({policy:a,signature:qq.CryptoJS.HmacSHA256(a,m).toString()},n,i)}};qq.extend(r,e,true);o=r.signatureSpec.credentialsProvider;function c(e,t,n){var o=t.responseText,a=i[e],l=a.promise,c=a.signatureConstructor,u,d;delete i[e];if(o){try{d=qq.parseJson(o)}catch(e){r.log("Error attempting to parse signature response: "+e,"error")}}if(d&&d.error){n=true;u=d.error}else if(d&&d.invalid){n=true;u="Invalid policy document or request headers!"}else if(d){if(r.expectingPolicy&&!d.policy){n=true;u="Response does not include the base64 encoded policy!"}else if(!d.signature){n=true;u="Response does not include the signature!"}}else{n=true;u="Received an empty or invalid response from the server!"}if(n){if(u){r.log(u,"error")}l.failure(u)}else if(c){s(c,d.signature,l)}else{l.success(d)}}function u(e,t,i){var o=new qq.Promise,s="POST",c=[],u="",d=new Date,p,h,f,m=function(e){var n,i=[];qq.each(e.headers,(function(e){c.push(e)}));c.sort();qq.each(c,(function(t,r){if(qq.indexOf(qq.s3.util.UNSIGNABLE_REST_HEADER_NAMES,r)<0){u+=r.toLowerCase()+":"+e.headers[r].trim()+"\n"}else if(r==="Content-MD5"){n=e.headers[r]}else{i.unshift(t)}}));qq.each(i,(function(e,t){c.splice(t,1)}));h={bucket:e.bucket,contentMd5:n,contentType:e.contentType,date:d,drift:r.signatureSpec.drift,endOfUrl:p,hashedContent:e.hashedContent,headerNames:c,headersStr:u,method:s};f=t===2?a.getStringToSign(h):l.getStringToSign(h);return{date:d,endOfUrl:p,signedHeaders:t===4?l.getSignedHeaders(h.headerNames):null,toSign:t===4?f.hashed:f,toSignRaw:t===4?f.raw:f}};switch(i.type){case n.REQUEST_TYPE.MULTIPART_ABORT:s="DELETE";p=qq.format("uploadId={}",i.uploadId);break;case n.REQUEST_TYPE.MULTIPART_INITIATE:p="uploads";break;case n.REQUEST_TYPE.MULTIPART_COMPLETE:p=qq.format("uploadId={}",i.uploadId);break;case n.REQUEST_TYPE.MULTIPART_UPLOAD:s="PUT";p=qq.format("partNumber={}&uploadId={}",i.partNum,i.uploadId);break}p=i.key+"?"+p;if(t===4){l.getEncodedHashedPayload(i.content).then((function(e){i.headers["x-amz-content-sha256"]=e;i.headers.Host=i.host;i.headers["x-amz-date"]=qq.s3.util.getV4PolicyDate(d,r.signatureSpec.drift);i.hashedContent=e;o.success(m(i))}),(function(e){o.failure(e)}))}else{o.success(m(i))}return o}function d(e,t,n,i,r){var o;if(t.signatureConstructor){if(r){o=t.signatureConstructor.getHeaders();o[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=r;t.signatureConstructor.withHeaders(o)}t.signatureConstructor.getToSign(e).then((function(e){h(t.signatureConstructor,e.stringToSign,n)}),(function(e){n.failure(e)}))}else{r&&qq.s3.util.refreshPolicyCredentials(t,r);p(t,n,i,r)}}function p(e,t,n,i){if(r.signatureSpec.version===4){l.signPolicy(e,t,n,i)}else{a.signPolicy(e,t,n,i)}}function h(e,t,n){if(r.signatureSpec.version===4){l.signApiRequest(e,t,n)}else{a.signApiRequest(e,t,n)}}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:r.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return r.signatureSpec.endpoint}},paramsStore:r.paramsStore,maxConnections:r.maxConnections,customHeaders:r.signatureSpec.customHeaders,log:r.log,onComplete:c,cors:r.cors}));qq.extend(this,{getSignature:function(e,n){var s=n,a=n.signatureConstructor,l=new qq.Promise,c;if(r.signatureSpec.version===4){c={v4:true}}if(o.get().secretKey&&qq.CryptoJS){if(o.get().expiration.getTime()>Date.now()){d(e,n,l)}else{o.onExpired().then((function(){d(e,n,l,o.get().accessKey,o.get().sessionToken)}),(function(e){r.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error");l.failure("Unable to sign request - expired credentials.")}))}}else{r.log("Submitting S3 signature request for "+e);if(a){a.getToSign(e).then((function(n){s={headers:n.stringToSignRaw};t.initTransport(e).withParams(s).withQueryParams(c).send()}),(function(e){r.log("Failed to construct signature. ","error");l.failure("Failed to construct signature.")}))}else{t.initTransport(e).withParams(s).withQueryParams(c).send()}i[e]={promise:l,signatureConstructor:a}}return l},constructStringToSign:function(e,t,n,i){var s={},a,l,c,d,p;return{withHeaders:function(e){s=e;return this},withUploadId:function(e){a=e;return this},withContent:function(e){l=e;return this},withContentType:function(e){c=e;return this},withPartNum:function(e){d=e;return this},getToSign:function(h){var f=o.get().sessionToken,m=new qq.Promise,g=new Date(Date.now()+r.signatureSpec.drift);s["x-amz-date"]=g.toUTCString();if(f){s[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=f}u(h,r.signatureSpec.version,{bucket:t,content:l,contentType:c,headers:s,host:n,key:i,partNum:d,type:e,uploadId:a}).then((function(e){p=e;m.success({headers:function(){if(c){s["Content-Type"]=c}delete s.Host;return s}(),date:p.date,endOfUrl:p.endOfUrl,signedHeaders:p.signedHeaders,stringToSign:p.toSign,stringToSignRaw:p.toSignRaw})}),(function(e){m.failure(e)}));return m},getHeaders:function(){return qq.extend({},s)},getEndOfUrl:function(){return p&&p.endOfUrl},getRequestDate:function(){return p&&p.date},getSignedHeaders:function(){return p&&p.signedHeaders}}}})};qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};qq.UploadSuccessAjaxRequester=function(e){"use strict";var t,n=[],i={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(e,t){}};qq.extend(i,e);function r(e,t,r){var o=n[e],s=t.responseText,a={success:true},l={success:false},c;delete n[e];i.log(qq.format("Received the following response body to an upload success request for id {}: {}",e,s));try{c=qq.parseJson(s);if(r||c&&(c.error||c.success===false)){i.log("Upload success request was rejected by the server.","error");o.failure(qq.extend(c,l))}else{i.log("Upload success was acknowledged by the server.");o.success(qq.extend(c,a))}}catch(t){if(r){i.log(qq.format("Your server indicated failure in its upload success request response for id {}!",e),"error");o.failure(l)}else{i.log("Upload success was acknowledged by the server.");o.success(a)}}}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:i.method,endpointStore:{get:function(){return i.endpoint}},paramsStore:i.paramsStore,maxConnections:i.maxConnections,customHeaders:i.customHeaders,log:i.log,onComplete:r,cors:i.cors}));qq.extend(this,{sendSuccessRequest:function(e,r){var o=new qq.Promise;i.log("Submitting upload success request/notification for "+e);t.initTransport(e).withParams(r).send();n[e]=o;return o}})};qq.s3.InitiateMultipartAjaxRequester=function(e){"use strict";var t,n={},i={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:false,serverSideEncryption:false,maxConnections:3,getContentType:function(e){},getBucket:function(e){},getHost:function(e){},getKey:function(e){},getName:function(e){},log:function(e,t){}},r;qq.extend(i,e);r=new qq.s3.RequestSigner({endpointStore:i.endpointStore,signatureSpec:i.signatureSpec,cors:i.cors,log:i.log});function o(e){var t=i.getBucket(e),n=i.getHost(e),o={},s=new qq.Promise,a=i.getKey(e),l;o["x-amz-acl"]=i.aclStore.get(e);if(i.reducedRedundancy){o[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(i.serverSideEncryption){o[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}o[qq.s3.util.AWS_PARAM_PREFIX+i.filenameParam]=encodeURIComponent(i.getName(e));qq.each(i.paramsStore.get(e),(function(e,t){if(qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,e)>=0){o[e]=t}else{o[qq.s3.util.AWS_PARAM_PREFIX+e]=encodeURIComponent(t)}}));l=r.constructStringToSign(r.REQUEST_TYPE.MULTIPART_INITIATE,t,n,a).withContentType(i.getContentType(e)).withHeaders(o);r.getSignature(e,{signatureConstructor:l}).then(s.success,s.failure);return s}function s(e,t,r){var o=n[e],s=new DOMParser,a=s.parseFromString(t.responseText,"application/xml"),l,c,u,d,p;delete n[e];if(r){p=t.status;c=a.getElementsByTagName("Message");if(c.length>0){d=c[0].textContent}}else{l=a.getElementsByTagName("UploadId");if(l.length>0){u=l[0].textContent}else{d="Upload ID missing from request"}}if(u===undefined){if(d){i.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",e,d),"error")}else{i.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",e,p),"error")}o.failure("Problem initiating upload request.",t)}else{i.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",e,u));o.success(u,t)}}t=qq.extend(this,new qq.AjaxRequester({method:i.method,contentType:null,endpointStore:i.endpointStore,maxConnections:i.maxConnections,allowXRequestedWithAndCacheControl:false,log:i.log,onComplete:s,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{send:function(e){var r=new qq.Promise;o(e).then((function(o,s){i.log("Submitting S3 initiate multipart upload request for "+e);n[e]=r;t.initTransport(e).withPath(s).withHeaders(o).send()}),r.failure);return r}})};qq.s3.CompleteMultipartAjaxRequester=function(e){"use strict";var t,n={},i={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(e){},getHost:function(e){},getKey:function(e){},log:function(e,t){}},r;qq.extend(i,e);r=new qq.s3.RequestSigner({endpointStore:i.endpointStore,signatureSpec:i.signatureSpec,cors:i.cors,log:i.log});function o(e,t,n){var o={},s=new qq.Promise,a=i.getBucket(e),l=i.getHost(e),c=r.constructStringToSign(r.REQUEST_TYPE.MULTIPART_COMPLETE,a,l,i.getKey(e)).withUploadId(t).withContent(n).withContentType("application/xml; charset=UTF-8");r.getSignature(e,{signatureConstructor:c}).then(s.success,s.failure);return s}function s(e,t,r){var o=n[e],s=new DOMParser,a=i.getBucket(e),l=i.getKey(e),c=s.parseFromString(t.responseText,"application/xml"),u=c.getElementsByTagName("Bucket"),d=c.getElementsByTagName("Key");delete n[e];i.log(qq.format("Complete response status {}, body = {}",t.status,t.responseText));if(r){i.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",e,t.status),"error")}else{if(u.length&&d.length){if(u[0].textContent!==a){r=true;i.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",e),"error")}}else{r=true;i.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",e),"error")}}if(r){o.failure("Problem combining the file parts!",t)}else{o.success({},t)}}function a(e){var t=document.implementation.createDocument(null,"CompleteMultipartUpload",null);e.sort((function(e,t){return e.part-t.part}));qq.each(e,(function(e,n){var i=n.part,r=n.etag,o=t.createElement("Part"),s=t.createElement("PartNumber"),a=t.createTextNode(i),l=t.createTextNode(r),c=t.createElement("ETag");c.appendChild(l);s.appendChild(a);o.appendChild(s);o.appendChild(c);qq(t).children()[0].appendChild(o)}));return(new XMLSerializer).serializeToString(t)}t=qq.extend(this,new qq.AjaxRequester({method:i.method,contentType:"application/xml; charset=UTF-8",endpointStore:i.endpointStore,maxConnections:i.maxConnections,allowXRequestedWithAndCacheControl:false,log:i.log,onComplete:s,successfulResponseCodes:{POST:[200]}}));qq.extend(this,{send:function(e,r,s){var l=new qq.Promise,c=a(s);o(e,r,c).then((function(r,o){i.log("Submitting S3 complete multipart upload request for "+e);n[e]=l;delete r["Content-Type"];t.initTransport(e).withPath(o).withHeaders(r).withPayload(c).send()}),l.failure);return l}})};qq.s3.AbortMultipartAjaxRequester=function(e){"use strict";var t,n={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(e){},getHost:function(e){},getKey:function(e){},log:function(e,t){}},i;qq.extend(n,e);i=new qq.s3.RequestSigner({endpointStore:n.endpointStore,signatureSpec:n.signatureSpec,cors:n.cors,log:n.log});function r(e,t){var r={},o=new qq.Promise,s=n.getBucket(e),a=n.getHost(e),l=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_ABORT,s,a,n.getKey(e)).withUploadId(t);i.getSignature(e,{signatureConstructor:l}).then(o.success,o.failure);return o}function o(e,t,i){var r=new DOMParser,o=r.parseFromString(t.responseText,"application/xml"),s=o.getElementsByTagName("Error"),a;n.log(qq.format("Abort response status {}, body = {}",t.status,t.responseText));if(i){n.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",e,t.status),"error")}else{if(s.length){i=true;a=o.getElementsByTagName("Message")[0].textContent;n.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",e,a),"error")}else{n.log(qq.format("Abort MPU request succeeded for file ID {}.",e))}}}t=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:n.method,contentType:null,endpointStore:n.endpointStore,maxConnections:n.maxConnections,allowXRequestedWithAndCacheControl:false,log:n.log,onComplete:o,successfulResponseCodes:{DELETE:[204]}}));qq.extend(this,{send:function(e,i){r(e,i).then((function(i,r){n.log("Submitting S3 Abort multipart upload request for "+e);t.initTransport(e).withPath(r).withHeaders(i).send()}))}})};qq.s3.XhrUploadHandler=function(e,t){"use strict";var n=t.getName,i=t.log,r=e.clockDrift,o=200,s=e.getBucket,a=e.getHost,l=e.getKeyName,c=e.filenameParam,u=e.paramsStore,d=e.endpointStore,p=e.aclStore,h=e.objectProperties.reducedRedundancy,f=e.objectProperties.region,m=e.objectProperties.serverSideEncryption,g=e.validation,v=qq.extend({region:f,drift:r},e.signature),y=this,b=e.signature.credentialsProvider,_={combine:function(e){var t=y._getPersistableData(e).uploadId,n=y._getPersistableData(e).etags,i=new qq.Promise;x.completeMultipart.send(e,t,n).then(i.success,(function t(n,r){i.failure(k.done(e,r).response,r)}));return i},done:function(e,t,n){var i=k.response.parse(e,t),r;if(i.success){r=t.getResponseHeader("ETag");if(!y._getPersistableData(e).etags){y._getPersistableData(e).etags=[]}y._getPersistableData(e).etags.push({part:n+1,etag:r})}},initHeaders:function(e,t,n){var i={},r=k.bucket.getName(e),o=k.host.getName(e),s=k.key.urlSafe(e),a=new qq.Promise,l=x.restSignature.constructStringToSign(x.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,r,o,s).withPartNum(t+1).withContent(n).withUploadId(y._getPersistableData(e).uploadId);x.restSignature.getSignature(e+"."+t,{signatureConstructor:l}).then(a.success,a.failure);return a},put:function(t,n){var r=y._createXhr(t,n),o=y._getChunkData(t,n),s=e.endpointStore.get(t),a=new qq.Promise;_.initHeaders(t,n,o.blob).then((function(e,l){if(r._cancelled){i(qq.format("Upload of item {}.{} cancelled. Upload will not start after successful signature request.",t,n));a.failure({error:"Chunk upload cancelled"})}else{var c=s+"/"+l;y._registerProgressHandler(t,n,o.size);k.track(t,r,n).then(a.success,a.failure);r.open("PUT",c,true);var u=false;qq.each(e,(function(e,t){if(e==="Content-Type"){u=true}r.setRequestHeader(e,t)}));if(!u){r.setRequestHeader("Content-Type","")}r.send(o.blob)}}),(function(){a.failure({error:"Problem signing the chunk!"},r)}));return a},send:function(e,t){var n=new qq.Promise;_.setup(e).then((function(){_.put(e,t).then(n.success,n.failure)}),(function(e,t){n.failure({error:e},t)}));return n},setup:function(e){var t=new qq.Promise,n=y._getPersistableData(e).uploadId,i=new qq.Promise;if(!n){y._getPersistableData(e).uploadId=i;x.initiateMultipart.send(e).then((function(n){y._getPersistableData(e).uploadId=n;i.success(n);t.success(n)}),(function(n,r){y._getPersistableData(e).uploadId=null;t.failure(n,r);i.failure(n,r)}))}else if(n instanceof qq.Promise){n.then((function(e){t.success(e)}))}else{t.success(n)}return t}},x={abortMultipart:new qq.s3.AbortMultipartAjaxRequester({endpointStore:d,signatureSpec:v,cors:e.cors,log:i,getBucket:function(e){return k.bucket.getName(e)},getHost:function(e){return k.host.getName(e)},getKey:function(e){return k.key.urlSafe(e)}}),completeMultipart:new qq.s3.CompleteMultipartAjaxRequester({endpointStore:d,signatureSpec:v,cors:e.cors,log:i,getBucket:function(e){return k.bucket.getName(e)},getHost:function(e){return k.host.getName(e)},getKey:function(e){return k.key.urlSafe(e)}}),initiateMultipart:new qq.s3.InitiateMultipartAjaxRequester({filenameParam:c,endpointStore:d,paramsStore:u,signatureSpec:v,aclStore:p,reducedRedundancy:h,serverSideEncryption:m,cors:e.cors,log:i,getContentType:function(e){return y._getMimeType(e)},getBucket:function(e){return k.bucket.getName(e)},getHost:function(e){return k.host.getName(e)},getKey:function(e){return k.key.urlSafe(e)},getName:function(e){return n(e)}}),policySignature:new qq.s3.RequestSigner({expectingPolicy:true,signatureSpec:v,cors:e.cors,log:i}),restSignature:new qq.s3.RequestSigner({endpointStore:d,signatureSpec:v,cors:e.cors,log:i})},w={initParams:function(e){var t=u.get(e);t[c]=n(e);return qq.s3.util.generateAwsParams({endpoint:d.get(e),clockDrift:r,params:t,type:y._getMimeType(e),bucket:k.bucket.getName(e),key:y.getThirdPartyFileId(e),accessKey:b.get().accessKey,sessionToken:b.get().sessionToken,acl:p.get(e),expectedStatus:o,minFileSize:g.minSizeLimit,maxFileSize:g.maxSizeLimit,reducedRedundancy:h,region:f,serverSideEncryption:m,signatureVersion:v.version,log:i},qq.bind(x.policySignature.getSignature,this,e))},send:function(e){var t=new qq.Promise,n=y._createXhr(e),r=y.getFile(e);y._registerProgressHandler(e);k.track(e,n).then(t.success,t.failure);w.setup(e,n,r).then((function(t){i("Sending upload request for "+e);n.send(t)}),t.failure);return t},setup:function(e,t,n){var i=new FormData,r=d.get(e),o=r,s=new qq.Promise;w.initParams(e).then((function(e){t.open("POST",o,true);qq.obj2FormData(e,i);i.append("file",n);s.success(i)}),(function(e){s.failure({error:e})}));return s}},k={bucket:{promise:function(e){var t=new qq.Promise,n=y._getFileState(e).bucket;if(n){t.success(n)}else{s(e).then((function(n){y._getFileState(e).bucket=n;t.success(n)}),t.failure)}return t},getName:function(e){return y._getFileState(e).bucket}},host:{promise:function(e){var t=new qq.Promise,n=y._getFileState(e).host;if(n){t.success(n)}else{a(e).then((function(n){y._getFileState(e).host=n;t.success(n)}),t.failure)}return t},getName:function(e){return y._getFileState(e).host}},done:function(e,t){var n=k.response.parse(e,t),r=n.success!==true;if(r&&k.response.shouldReset(n.code)){i("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error");n.reset=true}return{success:!r,response:n}},key:{promise:function(e){var t=new qq.Promise,i=y.getThirdPartyFileId(e);if(i==null){y._setThirdPartyFileId(e,t);l(e,n(e)).then((function(n){y._setThirdPartyFileId(e,n);t.success(n)}),(function(n){y._setThirdPartyFileId(e,null);t.failure(n)}))}else if(qq.isGenericPromise(i)){i.then(t.success,t.failure)}else{t.success(i)}return t},urlSafe:function(e){var t=y.getThirdPartyFileId(e);return qq.s3.util.uriEscapePath(t)}},response:{parse:function(e,t){var n={},r;try{i(qq.format("Received response status {} with body: {}",t.status,t.responseText));if(t.status===o){n.success=true}else{r=k.response.parseError(t.responseText);if(r){n.error=r.message;n.code=r.code}}}catch(e){i("Error when attempting to parse xhr response text ("+e.message+")","error")}return n},parseError:function(e){var t=new DOMParser,n=t.parseFromString(e,"application/xml"),i=n.getElementsByTagName("Error"),r={},o,s;if(i.length){o=n.getElementsByTagName("Code");s=n.getElementsByTagName("Message");if(s.length){r.message=s[0].textContent}if(o.length){r.code=o[0].textContent}return r}},shouldReset:function(e){return e==="EntityTooSmall"||e==="InvalidPart"||e==="InvalidPartOrder"||e==="NoSuchUpload"}},start:function(e,t){var n=new qq.Promise;k.key.promise(e).then((function(){k.bucket.promise(e).then((function(){k.host.promise(e).then((function(){if(t==null){w.send(e).then(n.success,n.failure)}else{_.send(e,t).then(n.success,n.failure)}}))}))}),(function(e){n.failure({error:e})}));return n},track:function(e,t,n){var i=new qq.Promise;t.onreadystatechange=function(){if(t.readyState===4){var r;if(n==null){r=k.done(e,t);i[r.success?"success":"failure"](r.response,t)}else{_.done(e,t,n);r=k.done(e,t);i[r.success?"success":"failure"](r.response,t)}}};return i}};qq.extend(this,{uploadChunk:k.start,uploadFile:k.start});qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"s3"},e),proxy:qq.extend({getEndpoint:e.endpointStore.get},t)}));qq.override(this,(function(e){return{expunge:function(t){var n=y._getPersistableData(t)&&y._getPersistableData(t).uploadId,i=y._maybeDeletePersistedChunkData(t);if(n!==undefined&&i){x.abortMultipart.send(t,n)}e.expunge(t)},finalizeChunks:function(e){return _.combine(e)},_getLocalStorageId:function(t){var n=e._getLocalStorageId(t),i=k.bucket.getName(t);return n+"-"+i}}}))};qq.s3.FormUploadHandler=function(e,t){"use strict";var n=this,i=e.clockDrift,r=t.onUuidChanged,o=t.getName,s=t.getUuid,a=t.log,l=e.getBucket,c=e.getKeyName,u=e.filenameParam,d=e.paramsStore,p=e.endpointStore,h=e.aclStore,f=e.objectProperties.reducedRedundancy,m=e.objectProperties.region,g=e.objectProperties.serverSideEncryption,v=e.validation,y=e.signature,b=e.iframeSupport.localBlankPagePath,_=e.signature.credentialsProvider,x=new qq.s3.RequestSigner({signatureSpec:y,cors:e.cors,log:a});if(b===undefined){throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!")}function w(t,i){var r,o=e.endpointStore.get(t),s=n._getFileState(t).bucket,l,c,u;try{l=i.contentDocument||i.contentWindow.document;c=l.body.innerHTML;u=qq.s3.util.parseIframeResponse(i);if(u.bucket===s&&u.key===qq.s3.util.encodeQueryStringParam(n.getThirdPartyFileId(t))){return true}a("Response from AWS included an unexpected bucket or key name.","error")}catch(e){a("Error when attempting to parse form upload response ("+e.message+")","error")}return false}function k(e){var t=d.get(e);t[u]=o(e);return qq.s3.util.generateAwsParams({endpoint:p.get(e),clockDrift:i,params:t,bucket:n._getFileState(e).bucket,key:n.getThirdPartyFileId(e),accessKey:_.get().accessKey,sessionToken:_.get().sessionToken,acl:h.get(e),minFileSize:v.minSizeLimit,maxFileSize:v.maxSizeLimit,successRedirectUrl:b,reducedRedundancy:f,region:m,serverSideEncryption:g,signatureVersion:y.version,log:a},qq.bind(x.getSignature,this,e))}function C(t,i){var r=new qq.Promise,s="POST",a=e.endpointStore.get(t),l=o(t);k(t).then((function(e){var t=n._initFormForUpload({method:s,endpoint:a,params:e,paramsInBody:true,targetName:i.name});r.success(t)}),(function(e){r.failure(e);T(t,i,l,{error:e})}));return r}function S(e){var t=n._createIframe(e),i=n.getInput(e),r=new qq.Promise;C(e,t).then((function(o){o.appendChild(i);n._attachLoadEvent(t,(function(n){a("iframe loaded");if(n){if(n.success===false){a("Amazon likely rejected the upload request","error");r.failure(n)}}else{n={};n.success=w(e,t);if(n.success===false){a("A success response was received by Amazon, but it was invalid in some way.","error");r.failure(n)}else{qq.extend(n,qq.s3.util.parseIframeResponse(t));r.success(n)}}T(e,t)}));a("Sending upload request for "+e);o.submit();qq(o).remove()}),r.failure);return r}function T(e,t){n._detachLoadEvent(e);t&&qq(t).remove()}qq.extend(this,new qq.FormUploadHandler({options:{isCors:false,inputName:"file"},proxy:{onCancel:e.onCancel,onUuidChanged:r,getName:o,getUuid:s,log:a}}));qq.extend(this,{uploadFile:function(e){var t=o(e),i=new qq.Promise;if(n.getThirdPartyFileId(e)){if(n._getFileState(e).bucket){S(e).then(i.success,i.failure)}else{l(e).then((function(t){n._getFileState(e).bucket=t;S(e).then(i.success,i.failure)}))}}else{c(e,t).then((function(t){l(e).then((function(r){n._getFileState(e).bucket=r;n._setThirdPartyFileId(e,t);S(e).then(i.success,i.failure)}),(function(e){i.failure({error:e})}))}),(function(e){i.failure({error:e})}))}return i}})};qq.DragAndDrop=function(e){"use strict";var t,n="qq-hidezones",i="qq-hide-dropzone",r=[],o=[],s=new qq.DisposeSupport;t={dropZoneElements:[],allowMultipleItems:true,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(t,e,true);function a(e,n){var i=Array.prototype.slice.call(e);t.callbacks.dropLog("Grabbed "+e.length+" dropped files.");n.dropDisabled(false);t.callbacks.processingDroppedFilesComplete(i,n.getElement())}function l(e){var n=new qq.Promise;if(e.isFile){e.file((function(t){var i=e.name,r=e.fullPath,s=r.indexOf(i);r=r.substr(0,s);if(r.charAt(0)==="/"){r=r.substr(1)}t.qqPath=r;o.push(t);n.success()}),(function(i){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+i.code+".","error");n.failure()}))}else if(e.isDirectory){c(e).then((function e(t){var i=t.length;qq.each(t,(function(e,t){l(t).done((function(){i-=1;if(i===0){n.success()}}))}));if(!t.length){n.success()}}),(function i(r){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+r.code+".","error");n.failure()}))}return n}function c(e,t,n,i){var r=i||new qq.Promise,o=t||e.createReader();o.readEntries((function t(i){var s=n?n.concat(i):i;if(i.length){setTimeout((function(){c(e,o,s,r)}),0)}else{r.success(s)}}),r.failure);return r}function u(e,n){var i=[],r=new qq.Promise;t.callbacks.processingDroppedFiles();n.dropDisabled(true);if(e.files.length>1&&!t.allowMultipleItems){t.callbacks.processingDroppedFilesComplete([]);t.callbacks.dropError("tooManyFilesError","");n.dropDisabled(false);r.failure()}else{o=[];if(qq.isFolderDropSupported(e)){qq.each(e.items,(function(e,t){var n=t.webkitGetAsEntry();if(n){if(n.isFile){o.push(t.getAsFile())}else{i.push(l(n).done((function(){i.pop();if(i.length===0){r.success()}})))}}}))}else{o=e.files}if(i.length===0){r.success()}}return r}function d(e){var l=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:n,element:e,onEnter:function(n){qq(e).addClass(t.classes.dropActive);n.stopPropagation()},onLeaveNotDescendants:function(n){qq(e).removeClass(t.classes.dropActive)},onDrop:function(e){u(e.dataTransfer,l).then((function(){a(o,l)}),(function(){t.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")}))}});s.addDisposer((function(){l.dispose()}));qq(e).hasAttribute(i)&&qq(e).hide();r.push(l);return l}function p(e){var t;qq.each(e.dataTransfer.types,(function(e,n){if(n==="Files"){t=true;return false}}));return t}function h(e){if(qq.firefox()){return!e.relatedTarget}if(qq.safari()){return e.x<0||e.y<0}return e.x===0&&e.y===0}function f(){var e=t.dropZoneElements,r=function(){setTimeout((function(){qq.each(e,(function(e,n){qq(n).hasAttribute(i)&&qq(n).hide();qq(n).removeClass(t.classes.dropActive)}))}),10)};qq.each(e,(function(t,n){var r=d(n);if(e.length&&qq.supportedFeatures.fileDrop){s.attach(document,"dragenter",(function(t){if(!r.dropDisabled()&&p(t)){qq.each(e,(function(e,t){if(t instanceof HTMLElement&&qq(t).hasAttribute(i)){qq(t).css({display:"block"})}}))}}))}}));s.attach(document,"dragleave",(function(e){if(h(e)){r()}}));s.attach(qq(document).children()[0],"mouseenter",(function(e){r()}));s.attach(document,"drop",(function(e){e.preventDefault();r()}));s.attach(document,n,r)}f();qq.extend(this,{setupExtraDropzone:function(e){t.dropZoneElements.push(e);d(e)},removeDropzone:function(e){var n,i=t.dropZoneElements;for(n in i){if(i[n]===e){return i.splice(n,1)}}},dispose:function(){s.dispose();qq.each(r,(function(e,t){t.dispose()}))}})};qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(e,t){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}};qq.UploadDropZone=function(e){"use strict";var t=new qq.DisposeSupport,n,i,r,o;n={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}};qq.extend(n,e);i=n.element;function s(){return qq.safari()||qq.firefox()&&qq.windows()}function a(e){if(!o){if(s){t.attach(document,"dragover",(function(e){e.preventDefault()}))}else{t.attach(document,"dragover",(function(e){if(e.dataTransfer){e.dataTransfer.dropEffect="none";e.preventDefault()}}))}o=true}}function l(e){if(!qq.supportedFeatures.fileDrop){return false}var t,n=e.dataTransfer,i=qq.safari();t=qq.ie()&&qq.supportedFeatures.fileDrop?true:n.effectAllowed!=="none";return n&&t&&(n.files||!i&&n.types.contains&&n.types.contains("Files"))}function c(e){if(e!==undefined){r=e}return r}function u(){var e;function t(){e=document.createEvent("Event");e.initEvent(n.HIDE_ZONES_EVENT_NAME,true,true)}if(window.CustomEvent){try{e=new CustomEvent(n.HIDE_ZONES_EVENT_NAME)}catch(e){t()}}else{t()}document.dispatchEvent(e)}function d(){t.attach(i,"dragover",(function(e){if(!l(e)){return}var t=qq.ie()&&qq.supportedFeatures.fileDrop?null:e.dataTransfer.effectAllowed;if(t==="move"||t==="linkMove"){e.dataTransfer.dropEffect="move"}else{e.dataTransfer.dropEffect="copy"}e.stopPropagation();e.preventDefault()}));t.attach(i,"dragenter",(function(e){if(!c()){if(!l(e)){return}n.onEnter(e)}}));t.attach(i,"dragleave",(function(e){if(!l(e)){return}n.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);if(qq(this).contains(t)){return}n.onLeaveNotDescendants(e)}));t.attach(i,"drop",(function(e){if(!c()){if(!l(e)){return}e.preventDefault();e.stopPropagation();n.onDrop(e);u()}}))}a();d();qq.extend(this,{dropDisabled:function(e){return c(e)},dispose:function(){t.dispose()},getElement:function(){return i}})};(function(){"use strict";qq.uiPublicApi={addInitialFiles:function(e){this._parent.prototype.addInitialFiles.apply(this,arguments);this._templating.addCacheToDom()},clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},addExtraDropzone:function(e){this._dnd&&this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){if(this._dnd){return this._dnd.removeDropzone(e)}},getItemByFileId:function(e){if(!this._templating.isHiddenForever(e)){return this._templating.getFileContainer(e)}},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()}if(this._dnd){this._dnd.dispose();this._dnd=this._setupDragAndDrop()}this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0;this._setupClickAndEditEventHandlers()},setName:function(e,t){var n=this._options.formatFileName(t);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(e,n)},pauseUpload:function(e){var t=this._parent.prototype.pauseUpload.apply(this,arguments);t&&this._templating.uploadPaused(e);return t},continueUpload:function(e){var t=this._parent.prototype.continueUpload.apply(this,arguments);t&&this._templating.uploadContinued(e);return t},getId:function(e){return this._templating.getFileId(e)},getDropTarget:function(e){var t=this.getFile(e);return t.qqDropTarget}};qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);if(!t){if(e===this._defaultButtonId){t=this._templating.getButton()}}return t},_removeFileItem:function(e){this._templating.removeFile(e)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent();this._focusinEventSupported=!qq.firefox();if(this._isEditFilenameEnabled()){this._filenameClickHandler=this._bindFilenameClickEvent();this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent();this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent()}},_setupDragAndDrop:function(){var e=this,t=this._options.dragAndDrop.extraDropzones,n=this._templating,i=n.getDropZone();i&&t.push(i);return new qq.DragAndDrop({dropZoneElements:t,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){n.showDropProcessing()},processingDroppedFilesComplete:function(t,i){n.hideDropProcessing();qq.each(t,(function(e,t){t.qqDropTarget=i}));if(t.length){e.addFiles(t,null,null)}},dropError:function(t,n){e._itemError(t,n)},dropLog:function(t,n){e.log(t,n)}}})},_bindFileButtonsClickEvent:function(){var e=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(t,n){e.log(t,n)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){e.retry(t)},onPause:function(t){e.pauseUpload(t)},onContinue:function(t){e.continueUpload(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var e=this,t=this._templating;return{templating:t,log:function(t,n){e.log(t,n)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(t,n){e.setName(t,n)},onEditingStatusChange:function(e,n){var i=qq(t.getEditInput(e)),r=qq(t.getFileContainer(e));if(n){i.addClass("qq-editing");t.hideFilename(e);t.hideEditIcon(e)}else{i.removeClass("qq-editing");t.showFilename(e);t.showEditIcon(e)}r.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,n){this._parent.prototype._onUploadStatusChange.apply(this,arguments);if(this._isEditFilenameEnabled()){if(this._templating.getFileContainer(e)&&n!==qq.status.SUBMITTED){this._templating.markFilenameEditable(e);this._templating.hideEditIcon(e)}}if(t===qq.status.UPLOAD_RETRYING&&n===qq.status.UPLOADING){this._templating.hideRetry(e);this._templating.setStatusText(e);qq(this._templating.getFileContainer(e)).removeClass(this._classes.retrying)}else if(n===qq.status.UPLOAD_FAILED){this._templating.hidePause(e)}},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(e)},_onAllComplete:function(e,t){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(e,t){var n=this.getFile(e);if(n&&n.qqPath&&this._options.dragAndDrop.reportDirectoryPaths){this._paramsStore.addReadOnly(e,{qqpath:n.qqPath})}this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(e,t)},_onSubmitted:function(e){if(this._isEditFilenameEnabled()){this._templating.markFilenameEditable(e);this._templating.showEditIcon(e);if(!this._focusinEventSupported){this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(e))}}},_onProgress:function(e,t,n,i){this._parent.prototype._onProgress.apply(this,arguments);this._templating.updateProgress(e,n,i);if(i===0||Math.round(n/i*100)===100){this._templating.hideCancel(e);this._templating.hidePause(e);this._templating.hideProgress(e);this._templating.setStatusText(e,this._options.text.waitingForResponse);this._displayFileSize(e)}else{this._displayFileSize(e,n,i)}},_onTotalProgress:function(e,t){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(e,t)},_onComplete:function(e,t,n,i){var r=this._parent.prototype._onComplete.apply(this,arguments),o=this._templating,s=o.getFileContainer(e),a=this;function l(t){if(!s){return}o.setStatusText(e);qq(s).removeClass(a._classes.retrying);o.hideProgress(e);if(a.getUploads({id:e}).status!==qq.status.UPLOAD_FAILED){o.hideCancel(e)}o.hideSpinner(e);if(t.success){a._markFileAsSuccessful(e)}else{qq(s).addClass(a._classes.fail);o.showCancel(e);if(o.isRetryPossible()&&!a._preventRetries[e]){qq(s).addClass(a._classes.retryable);o.showRetry(e)}a._controlFailureTextDisplay(e,t)}}if(r instanceof qq.Promise){r.done((function(e){l(e)}))}else{l(n)}return r},_markFileAsSuccessful:function(e){var t=this._templating;if(this._isDeletePossible()){t.showDeleteButton(e)}qq(t.getFileContainer(e)).addClass(this._classes.success);this._maybeUpdateThumbnail(e)},_onUploadPrep:function(e){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(e)},_onUpload:function(e,t){var n=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(e);return n},_onUploadChunk:function(e,t){this._parent.prototype._onUploadChunk.apply(this,arguments);if(t.partIndex>0&&this._handler.isResumable(e)){this._templating.allowPause(e)}},_onCancel:function(e,t){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(e);if(this._getNotFinished()===0){this._templating.resetTotalProgress()}},_onBeforeAutoRetry:function(e){var t,n,i;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(e);if(this._options.retry.showAutoRetryNote){t=this._autoRetries[e];n=this._options.retry.maxAutoAttempts;i=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,t);i=i.replace(/\{maxAuto\}/g,n);this._templating.setStatusText(e,i);qq(this._templating.getFileContainer(e)).addClass(this._classes.retrying)}},_onBeforeManualRetry:function(e){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments)){this._templating.resetProgress(e);qq(this._templating.getFileContainer(e)).removeClass(this._classes.fail);this._templating.setStatusText(e);this._templating.showSpinner(e);this._showCancelLink(e);return true}else{qq(this._templating.getFileContainer(e)).addClass(this._classes.retryable);this._templating.showRetry(e);return false}},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(e,t,n){if(this._options.deleteFile.forceConfirm){this._showDeleteConfirm.apply(this,arguments)}else{this._sendDeleteRequest.apply(this,arguments)}},_onDeleteComplete:function(e,t,n){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(e);if(n){this._templating.setStatusText(e,this._options.deleteFile.deletingFailedText);this._templating.showDeleteButton(e)}else{this._removeFileItem(e)}},_sendDeleteRequest:function(e,t,n){this._templating.hideDeleteButton(e);this._templating.showSpinner(e);this._templating.setStatusText(e,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e,t,n){var i=this.getName(e),r=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,i),t=this.getUuid(e),o=arguments,s=this,a;a=this._options.showConfirm(r);if(qq.isGenericPromise(a)){a.then((function(){s._sendDeleteRequest.apply(s,o)}))}else if(a!==false){s._sendDeleteRequest.apply(s,o)}},_addToList:function(e,t,n){var i,r=0,o=this._handler.isProxied(e)&&this._options.scaling.hideScaled,s;if(this._options.display.prependFiles){if(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0){r=this._filesInBatchAddedToUi-1}i={index:r}}if(!n){if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){this._templating.disableCancel()}if(!this._options.multiple){s=this.getUploads({id:e});this._handledProxyGroup=this._handledProxyGroup||s.proxyGroupId;if(s.proxyGroupId!==this._handledProxyGroup||!s.proxyGroupId){this._handler.cancelAll();this._clearList();this._handledProxyGroup=null}}}if(n){this._templating.addFileToCache(e,this._options.formatFileName(t),i,o);this._templating.updateThumbnail(e,this._thumbnailUrls[e],true,this._options.thumbnails.customResizer)}else{this._templating.addFile(e,this._options.formatFileName(t),i,o);this._templating.generatePreview(e,this.getFile(e),this._options.thumbnails.customResizer)}this._filesInBatchAddedToUi+=1;if(n||this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading){this._displayFileSize(e)}},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(e,t,n){var i=this.getSize(e),r=this._formatSize(i);if(i>=0){if(t!==undefined&&n!==undefined){r=this._formatProgress(t,n)}this._templating.updateSize(e,r)}},_formatProgress:function(e,t){var n=this._options.text.formatProgress;function i(e,t){n=n.replace(e,t)}i("{percent}",Math.round(e/t*100));i("{total_size}",this._formatSize(t));return n},_controlFailureTextDisplay:function(e,t){var n,i,r;n=this._options.failedUploadTextDisplay.mode;i=this._options.failedUploadTextDisplay.responseProperty;if(n==="custom"){r=t[i];if(!r){r=this._options.text.failUpload}this._templating.setStatusText(e,r);if(this._options.failedUploadTextDisplay.enableTooltip){this._showTooltip(e,r)}}else if(n==="default"){this._templating.setStatusText(e,this._options.text.failUpload)}else if(n!=="none"){this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")}},_showTooltip:function(e,t){this._templating.getFileContainer(e).title=t},_showCancelLink:function(e){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){this._templating.showCancel(e)}},_itemError:function(e,t,n){var i=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(i)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments);this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(e,t){this._totalFilesInBatch-=1;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e,t,n){this._totalFilesInBatch=e.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(e){var t=this._thumbnailUrls[e],n=this.getUploads({id:e}).status;if(n!==qq.status.DELETED&&(t||this._options.thumbnails.placeholders.waitUntilResponse||!qq.supportedFeatures.imagePreviews)){this._templating.updateThumbnail(e,t,this._options.thumbnails.customResizer)}},_addCannedFile:function(e){var t=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(t,this.getName(t),true);this._templating.hideSpinner(t);this._templating.hideCancel(t);this._markFileAsSuccessful(t);return t},_setSize:function(e,t){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(e,this._formatSize(t))},_sessionRequestComplete:function(){this._templating.addCacheToDom();this._parent.prototype._sessionRequestComplete.apply(this,arguments)}}})();qq.FineUploader=function(e,t){"use strict";var n=this;this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic;this._parent.apply(this,arguments);qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:false},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:true},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:true,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:false,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:false,prependFiles:false},paste:{promptForName:false,namePromptMessage:"Please name this image"},thumbnails:{customResizer:null,maxCount:0,placeholders:{waitUntilResponse:false,notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:false},showMessage:function(e){if(n._templating.hasDialog("alert")){return n._templating.showDialog("alert",e)}else{setTimeout((function(){window.alert(e)}),0)}},showConfirm:function(e){if(n._templating.hasDialog("confirm")){return n._templating.showDialog("confirm",e)}else{return window.confirm(e)}},showPrompt:function(e,t){if(n._templating.hasDialog("prompt")){return n._templating.showDialog("prompt",e,t)}else{return window.prompt(e,t)}}},true);qq.extend(this._options,e,true);this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari)}else if(!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors){this._templating.renderFailure(this._options.messages.unsupportedBrowser)}else{this._wrapCallbacks();this._templating.render();this._classes=this._options.classes;if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()}this._setupClickAndEditEventHandlers();if(qq.DragAndDrop&&qq.supportedFeatures.fileDrop){this._dnd=this._setupDragAndDrop()}if(this._options.paste.targetElement&&this._options.paste.promptForName){if(qq.PasteSupport){this._setupPastePrompt()}else{this.log("Paste support module not found.","error")}}this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0}};qq.extend(qq.FineUploader.prototype,qq.basePublicApi);qq.extend(qq.FineUploader.prototype,qq.basePrivateApi);qq.extend(qq.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi);qq.Templating=function(e){"use strict";var t="qq-file-id",n="qq-file-id-",i="qq-max-size",r="qq-server-scale",o="qq-hide-dropzone",s="qq-drop-area-text",a="qq-in-progress",l="qq-hidden-forever",c={content:document.createDocumentFragment(),map:{}},u=false,d=0,p=false,h=[],f=-1,m={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:false,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},g={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},v={},y=new qq.Promise,b=new qq.Promise,_,x,w,k,C,S,T,E,q=function(){var e=m.placeholders.thumbnailNotAvailable,t=m.placeholders.waitingForThumbnail,n={maxSize:f,scale:E};if(T){if(e){m.imageGenerator.generate(e,new Image,n).then((function(e){y.success(e)}),(function(){y.failure();_("Problem loading 'not available' placeholder image at "+e,"error")}))}else{y.failure()}if(t){m.imageGenerator.generate(t,new Image,n).then((function(e){b.success(e)}),(function(){b.failure();_("Problem loading 'waiting for thumbnail' placeholder image at "+t,"error")}))}else{b.failure()}}},j=function(e){var t=new qq.Promise;b.then((function(n){G(n,e);if(!e.src){e.src=n.src;e.onload=function(){e.onload=null;te(e);t.success()}}else{t.success()}}),(function(){Y(e);t.success()}));return t},P=function(e,t,n){var i=W(e);_("Generating new thumbnail for "+e);t.qqThumbnailId=e;return m.imageGenerator.generate(t,i,n).then((function(){d++;te(i);v[e].success()}),(function(){v[e].failure();if(!m.placeholders.waitUntilUpdate){K(e,i)}}))},F=function(){if(h.length){p=true;var e=h.shift();if(e.update){Z(e)}else{J(e)}}else{p=false}},A=function(e){return V(R(e),g.cancel)},I=function(e){return V(R(e),g.continueButton)},D=function(e){return V(C,g[e+"Dialog"])},O=function(e){return V(R(e),g.deleteButton)},B=function(){return V(C,g.dropProcessing)},$=function(e){return V(R(e),g.editNameIcon)},R=function(e){return c.map[e]||qq(S).getFirstByClass(n+e)},M=function(e){return V(R(e),g.file)},L=function(e){return V(R(e),g.pause)},N=function(e){if(e==null){return V(C,g.totalProgressBarContainer)||V(C,g.totalProgressBar)}return V(R(e),g.progressBarContainer)||V(R(e),g.progressBar)},U=function(e){return V(R(e),g.retry)},H=function(e){return V(R(e),g.size)},z=function(e){return V(R(e),g.spinner)},V=function(e,t){return e&&qq(e).getFirstByClass(t)},W=function(e){return T&&V(R(e),g.thumbnail)},Y=function(e){e&&qq(e).addClass(m.classes.hide)},G=function(e,t){var n=e.style.maxWidth,i=e.style.maxHeight;if(i&&n&&!t.style.maxWidth&&!t.style.maxHeight){qq(t).css({maxWidth:n,maxHeight:i})}},K=function(e,t){var n=v[e]||(new qq.Promise).failure(),i=new qq.Promise;y.then((function(e){n.then((function(){i.success()}),(function(){G(e,t);t.onload=function(){t.onload=null;i.success()};t.src=e.src;te(t)}))}));return i},Q=function(){var e,t,n,a,l,c,u,d,p,h,v;_("Parsing template");if(m.templateIdOrEl==null){throw new Error("You MUST specify either a template element or ID!")}if(qq.isString(m.templateIdOrEl)){e=document.getElementById(m.templateIdOrEl);if(e===null){throw new Error(qq.format("Cannot find template script at ID '{}'!",m.templateIdOrEl))}t=e.innerHTML}else{if(m.templateIdOrEl.innerHTML===undefined){throw new Error("You have specified an invalid value for the template option!  "+"It must be an ID or an Element.")}t=m.templateIdOrEl.innerHTML}t=qq.trimStr(t);a=document.createElement("div");a.appendChild(qq.toElement(t));v=qq(a).getFirstByClass(g.uploader);if(m.button){c=qq(a).getFirstByClass(g.button);if(c){qq(c).remove()}}if(!qq.DragAndDrop||!qq.supportedFeatures.fileDrop){p=qq(a).getFirstByClass(g.dropProcessing);if(p){qq(p).remove()}}u=qq(a).getFirstByClass(g.drop);if(u&&!qq.DragAndDrop){_("DnD module unavailable.","info");qq(u).remove()}if(!qq.supportedFeatures.fileDrop){v.removeAttribute(s);if(u&&qq(u).hasAttribute(o)){qq(u).css({display:"none"})}}else if(qq(v).hasAttribute(s)&&u){h=qq(u).getFirstByClass(g.dropText);h&&qq(h).remove()}d=qq(a).getFirstByClass(g.thumbnail);if(!T){d&&qq(d).remove()}else if(d){f=parseInt(d.getAttribute(i));f=f>0?f:null;E=qq(d).hasAttribute(r)}T=T&&d;x=qq(a).getByClass(g.editFilenameInput).length>0;w=qq(a).getByClass(g.retry).length>0;n=qq(a).getFirstByClass(g.list);if(n==null){throw new Error("Could not find the file list container in the template!")}l=n.innerHTML;n.innerHTML="";if(a.getElementsByTagName("DIALOG").length){document.createElement("dialog")}_("Template parsing complete");return{template:qq.trimStr(a.innerHTML),fileTemplate:qq.trimStr(l)}},X=function(e,t,n){var i=n,r=i.firstChild;if(t>0){r=qq(i).children()[t].nextSibling}i.insertBefore(e,r)},J=function(e){var t=e.id,n=e.optFileOrBlob,i=n&&n.qqThumbnailId,r=W(t),o={customResizeFunction:e.customResizeFunction,maxSize:f,orient:true,scale:true};if(qq.supportedFeatures.imagePreviews){if(r){if(m.limits.maxThumbs&&m.limits.maxThumbs<=d){K(t,r);F()}else{j(r).done((function(){v[t]=new qq.Promise;v[t].done((function(){setTimeout(F,m.limits.timeBetweenThumbs)}));if(i!=null){ne(t,i)}else{P(t,n,o)}}))}}else{F()}}else if(r){j(r);F()}},Z=function(e){var t=e.id,n=e.thumbnailUrl,i=e.showWaitingImg,r=W(t),o={customResizeFunction:e.customResizeFunction,scale:E,maxSize:f};if(r){if(n){if(m.limits.maxThumbs&&m.limits.maxThumbs<=d){K(t,r);F()}else{if(i){j(r)}return m.imageGenerator.generate(n,r,o).then((function(){te(r);d++;setTimeout(F,m.limits.timeBetweenThumbs)}),(function(){K(t,r);setTimeout(F,m.limits.timeBetweenThumbs)}))}}else{K(t,r);F()}}},ee=function(e,t){var n=N(e),i=e==null?g.totalProgressBar:g.progressBar;if(n&&!qq(n).hasClass(i)){n=qq(n).getFirstByClass(i)}if(n){qq(n).css({width:t+"%"});n.setAttribute("aria-valuenow",t)}},te=function(e){e&&qq(e).removeClass(m.classes.hide)},ne=function(e,t){var n=W(e),i=W(t);_(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",e,t,t));v[t].then((function(){d++;v[e].success();_(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",t,e));n.src=i.src;te(n)}),(function(){v[e].failure();if(!m.placeholders.waitUntilUpdate){K(e,n)}}))};qq.extend(m,e);_=m.log;if(!qq.supportedFeatures.imagePreviews){m.limits.timeBetweenThumbs=0;m.limits.maxThumbs=0}C=m.containerEl;T=m.imageGenerator!==undefined;k=Q();q();qq.extend(this,{render:function(){_("Rendering template in DOM.");d=0;C.innerHTML=k.template;Y(B());this.hideTotalProgress();S=m.fileContainerEl||V(C,g.list);_("Template rendering complete")},renderFailure:function(e){var t=qq.toElement(e);C.innerHTML="";C.appendChild(t)},reset:function(){this.render()},clearFiles:function(){S.innerHTML=""},disableCancel:function(){u=true},addFile:function(e,i,r,o,a){var d=qq.toElement(k.fileTemplate),p=V(d,g.file),h=V(C,g.uploader),f=a?c.content:S,m;if(a){c.map[e]=d}qq(d).addClass(n+e);h.removeAttribute(s);if(p){qq(p).setText(i);p.setAttribute("title",i)}d.setAttribute(t,e);if(r){X(d,r.index,f)}else{f.appendChild(d)}if(o){d.style.display="none";qq(d).addClass(l)}else{Y(N(e));Y(H(e));Y(O(e));Y(U(e));Y(L(e));Y(I(e));if(u){this.hideCancel(e)}m=W(e);if(m&&!m.src){b.then((function(e){m.src=e.src;if(e.style.maxHeight&&e.style.maxWidth){qq(m).css({maxHeight:e.style.maxHeight,maxWidth:e.style.maxWidth})}te(m)}))}}},addFileToCache:function(e,t,n,i){this.addFile(e,t,n,i,true)},addCacheToDom:function(){S.appendChild(c.content);c.content=document.createDocumentFragment();c.map={}},removeFile:function(e){qq(R(e)).remove()},getFileId:function(e){var n=e;if(n){while(n.getAttribute(t)==null){n=n.parentNode}return parseInt(n.getAttribute(t))}},getFileList:function(){return S},markFilenameEditable:function(e){var t=M(e);t&&qq(t).addClass(m.classes.editable)},updateFilename:function(e,t){var n=M(e);if(n){qq(n).setText(t);n.setAttribute("title",t)}},hideFilename:function(e){Y(M(e))},showFilename:function(e){te(M(e))},isFileName:function(e){return qq(e).hasClass(g.file)},getButton:function(){return m.button||V(C,g.button)},hideDropProcessing:function(){Y(B())},showDropProcessing:function(){te(B())},getDropZone:function(){return V(C,g.drop)},isEditFilenamePossible:function(){return x},hideRetry:function(e){Y(U(e))},isRetryPossible:function(){return w},showRetry:function(e){te(U(e))},getFileContainer:function(e){return R(e)},showEditIcon:function(e){var t=$(e);t&&qq(t).addClass(m.classes.editable)},isHiddenForever:function(e){return qq(R(e)).hasClass(l)},hideEditIcon:function(e){var t=$(e);t&&qq(t).removeClass(m.classes.editable)},isEditIcon:function(e){return qq(e).hasClass(g.editNameIcon,true)},getEditInput:function(e){return V(R(e),g.editFilenameInput)},isEditInput:function(e){return qq(e).hasClass(g.editFilenameInput,true)},updateProgress:function(e,t,n){var i=N(e),r;if(i&&n>0){r=Math.round(t/n*100);if(r===100){Y(i)}else{te(i)}ee(e,r)}},updateTotalProgress:function(e,t){this.updateProgress(null,e,t)},hideProgress:function(e){var t=N(e);t&&Y(t)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(e){ee(e,0);this.hideTotalProgress(e)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(e){if(!u){var t=A(e);t&&qq(t).removeClass(m.classes.hide)}},hideCancel:function(e){Y(A(e))},isCancel:function(e){return qq(e).hasClass(g.cancel,true)},allowPause:function(e){te(L(e));Y(I(e))},uploadPaused:function(e){this.setStatusText(e,m.text.paused);this.allowContinueButton(e);Y(z(e))},hidePause:function(e){Y(L(e))},isPause:function(e){return qq(e).hasClass(g.pause,true)},isContinueButton:function(e){return qq(e).hasClass(g.continueButton,true)},allowContinueButton:function(e){te(I(e));Y(L(e))},uploadContinued:function(e){this.setStatusText(e,"");this.allowPause(e);te(z(e))},showDeleteButton:function(e){te(O(e))},hideDeleteButton:function(e){Y(O(e))},isDeleteButton:function(e){return qq(e).hasClass(g.deleteButton,true)},isRetry:function(e){return qq(e).hasClass(g.retry,true)},updateSize:function(e,t){var n=H(e);if(n){te(n);qq(n).setText(t)}},setStatusText:function(e,t){var n=V(R(e),g.statusText);if(n){if(t==null){qq(n).clearText()}else{qq(n).setText(t)}}},hideSpinner:function(e){qq(R(e)).removeClass(a);Y(z(e))},showSpinner:function(e){qq(R(e)).addClass(a);te(z(e))},generatePreview:function(e,t,n){if(!this.isHiddenForever(e)){h.push({id:e,customResizeFunction:n,optFileOrBlob:t});!p&&F()}},updateThumbnail:function(e,t,n,i){if(!this.isHiddenForever(e)){h.push({customResizeFunction:i,update:true,id:e,thumbnailUrl:t,showWaitingImg:n});!p&&F()}},hasDialog:function(e){return qq.supportedFeatures.dialogElement&&!!D(e)},showDialog:function(e,t,n){var i=D(e),r=V(i,g.dialogMessage),o=i.getElementsByTagName("INPUT")[0],s=V(i,g.dialogCancelButton),a=V(i,g.dialogOkButton),l=new qq.Promise,c=function(){s.removeEventListener("click",u);a&&a.removeEventListener("click",d);l.failure()},u=function(){s.removeEventListener("click",u);i.close()},d=function(){i.removeEventListener("close",c);a.removeEventListener("click",d);i.close();l.success(o&&o.value)};i.addEventListener("close",c);s.addEventListener("click",u);a&&a.addEventListener("click",d);if(o){o.value=n}r.textContent=t;i.showModal();return l}})};qq.UiEventHandler=function(e,t){"use strict";var n=new qq.DisposeSupport,i={eventType:"click",attachTo:null,onHandled:function(e,t){}};qq.extend(this,{addHandler:function(e){r(e)},dispose:function(){n.dispose()}});function r(e){n.attach(e,i.eventType,(function(e){e=e||window.event;var t=e.target||e.srcElement;i.onHandled(t,e)}))}qq.extend(t,{getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return n}});qq.extend(i,e);if(i.attachTo){r(i.attachTo)}};qq.FileButtonsClickHandler=function(e){"use strict";var t={},n={templating:null,log:function(e,t){},onDeleteFile:function(e){},onCancel:function(e){},onRetry:function(e){},onPause:function(e){},onContinue:function(e){},onGetName:function(e){}},i={cancel:function(e){n.onCancel(e)},retry:function(e){n.onRetry(e)},deleteButton:function(e){n.onDeleteFile(e)},pause:function(e){n.onPause(e)},continueButton:function(e){n.onContinue(e)}};function r(e,t){qq.each(i,(function(i,r){var o=i.charAt(0).toUpperCase()+i.slice(1),s;if(n.templating["is"+o](e)){s=n.templating.getFileId(e);qq.preventDefault(t);n.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",n.onGetName(s),s));r(s);return false}}))}qq.extend(n,e);n.eventType="click";n.onHandled=r;n.attachTo=n.templating.getFileList();qq.extend(this,new qq.UiEventHandler(n,t))};qq.FilenameClickHandler=function(e){"use strict";var t={},n={templating:null,log:function(e,t){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(e){},onGetName:function(e){}};qq.extend(n,e);function i(e,i){if(n.templating.isFileName(e)||n.templating.isEditIcon(e)){var r=n.templating.getFileId(e),o=n.onGetUploadStatus(r);if(o===qq.status.SUBMITTED){n.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",n.onGetName(r),r));qq.preventDefault(i);t.handleFilenameEdit(r,e,true)}}}n.eventType="click";n.onHandled=i;qq.extend(this,new qq.FilenameEditHandler(n,t))};qq.FilenameInputFocusInHandler=function(e,t){"use strict";var n={templating:null,onGetUploadStatus:function(e){},log:function(e,t){}};if(!t){t={}}function i(e,i){if(n.templating.isEditInput(e)){var r=n.templating.getFileId(e),o=n.onGetUploadStatus(r);if(o===qq.status.SUBMITTED){n.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",n.onGetName(r),r));t.handleFilenameEdit(r,e)}}}n.eventType="focusin";n.onHandled=i;qq.extend(n,e);qq.extend(this,new qq.FilenameEditHandler(n,t))};qq.FilenameInputFocusHandler=function(e){"use strict";e.eventType="focus";e.attachTo=null;qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))};qq.FilenameEditHandler=function(e,t){"use strict";var n={templating:null,log:function(e,t){},onGetUploadStatus:function(e){},onGetName:function(e){},onSetName:function(e,t){},onEditingStatusChange:function(e,t){}};function i(e){var t=n.onGetName(e),i=t.lastIndexOf(".");if(i>0){t=t.substr(0,i)}return t}function r(e){var t=n.onGetName(e);return qq.getExtension(t)}function o(e,t){var i=e.value,o;if(i!==undefined&&qq.trimStr(i).length>0){o=r(t);if(o!==undefined){i=i+"."+o}n.onSetName(t,i)}n.onEditingStatusChange(t,false)}function s(e,n){t.getDisposeSupport().attach(e,"blur",(function(){o(e,n)}))}function a(e,n){t.getDisposeSupport().attach(e,"keyup",(function(t){var i=t.keyCode||t.which;if(i===13){o(e,n)}}))}qq.extend(n,e);n.attachTo=n.templating.getFileList();qq.extend(this,new qq.UiEventHandler(n,t));qq.extend(t,{handleFilenameEdit:function(e,t,r){var o=n.templating.getEditInput(e);n.onEditingStatusChange(e,true);o.value=i(e);if(r){o.focus()}s(o,e);a(o,e)}})};(function(){"use strict";qq.s3.FineUploader=function(e){var t={failedUploadTextDisplay:{mode:"custom"}};qq.extend(t,e,true);qq.FineUploader.call(this,t,"s3");if(!qq.supportedFeatures.ajaxUploading&&t.iframeSupport.localBlankPagePath===undefined){this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property "+"of the <code>iframeSupport</code> option since this browser does not support the File API!</div>"}};qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype);qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi)})()})(window)},"1BID":function(e,t,n){n("8rVx")(n("SiEt"))},"1I5f":function(e,t,n){n("8rVx")(n("IO0x"))},"1rIv":function(e,t){e.exports='var SavePopup = {\n  activePopups: [],\n  visiblePopup: null,\n\n  create: function (targetSelector, options) {\n    options = options || {};\n    var newPopup = new SavePopup.popup(targetSelector, options);\n    newPopup.initListeners();\n    SavePopup.activePopups.push(newPopup);\n\n    return newPopup;\n  },\n\n  popup: function (targetSelector, options) {\n    var thisPopup = this;\n    var $currentPopup = null;\n    var $targetForm = null;\n    var defaultOptions = {\n      buttonText: "Save Changes",\n      buttonKlass: "btn btn-primary",\n      popupTmplSelector: "#tmpl-save-popup",\n      indicatorOnSave: true,\n      showPopupOnUnload: false\n    };\n    defaultOptions = $.extend(defaultOptions, options);\n\n    thisPopup.$targetForm = $(targetSelector);\n    thisPopup.popupTmpl = $(defaultOptions.popupTmplSelector).html();\n\n    this.initListeners = function () {\n\n      // Using a timeout to make sure that other JS that modifies form fields is finished before areyousure starts counting\n      setTimeout(function() {\n        thisPopup.$targetForm.areYouSure({\n          \'silent\': true,\n          \'addRemoveFieldsMarksDirty\': true,\n          \'fieldSelector\': options.customFieldSelector || ":input:not(input[type=submit]):not(input[type=button]):not(button[type=button]):not(button[type=submit])"\n        });\n      }, 0);\n\n      // bootstrap-select creates a form element that isn\'t detected until\n      // after AreYouSure has been initialized\n      thisPopup.$targetForm.find(\'select\').on(\'loaded.bs.select\', function() {\n        thisPopup.$targetForm.trigger(\'reinitialize.areYouSure\');\n      });\n\n      thisPopup.$targetForm.on(\'dirty.areYouSure\', function() {\n        thisPopup.safelyShow();\n      });\n\n      thisPopup.$targetForm.on(\'clean.areYouSure\', function() {\n        thisPopup.down();\n      });\n\n      thisPopup.$targetForm.on(\'switchChange.bootstrapSwitch\', function(event, state) {\n        // Since Bootstrap switch is changing things without user input, get areyousure to recheck the form\n        thisPopup.$targetForm.trigger(\'checkform.areYouSure\');\n      });\n\n      // If enabled, show a popup warning the user on navigation\n      // The custom message here is not supported on Chrome >50\n      if (defaultOptions.showPopupOnUnload) {\n        $(window).on(\'beforeunload\', function(e) {\n          if (thisPopup.$targetForm.hasClass(\'dirty\')) {\n            return "You have unsaved changes. Are you sure you\'d like to leave this page?"\n          }\n        });\n      }\n    };\n\n    this.checkform = function() {\n      thisPopup.$targetForm.trigger(\'checkform.areYouSure\');\n    };\n\n    this.triggerPopup = function (form) {\n      var compiledPopup = _.template(thisPopup.popupTmpl)(defaultOptions);\n      thisPopup.$currentPopup = $(compiledPopup);\n\n      if (SavePopup.visiblePopup !== null && SavePopup.visiblePopup !== thisPopup) {\n        SavePopup.visiblePopup.down();\n      }\n\n      SavePopup.visiblePopup = thisPopup;\n      thisPopup.$currentPopup.on("click", ".save-button", function () {\n        thisPopup.triggerSave(form);\n      });\n\n      $("body").append(thisPopup.$currentPopup);\n\n      // Appending html and calling addClass seems to short circuit the CSS tranisition duration to 0s. setTimeout fixes this\n      setTimeout(function () {\n        thisPopup.up();\n      },0);\n    };\n\n    this.down = function () {\n      thisPopup.$currentPopup.removeClass("up");\n    };\n\n    this.up = function () {\n      thisPopup.$currentPopup.addClass("up");\n    };\n\n    this.safelyShow = function() {\n      // If the save bar markup hasn\'t been created yet then generate it\n      if (typeof(thisPopup.$currentPopup) === \'undefined\') {\n        thisPopup.triggerPopup(thisPopup.$targetForm);\n      } else {\n        if (SavePopup.visiblePopup != thisPopup) {\n          SavePopup.down();\n          SavePopup.visiblePopup = thisPopup;\n        }\n        thisPopup.up();\n      }\n    };\n\n    this.safelyHide = function() {\n      if (typeof(thisPopup.$currentPopup) !== \'undefined\') {\n        thisPopup.down();\n      }\n    };\n\n    this.reset = function () {\n      if (defaultOptions.indicatorOnSave) {\n        thisPopup.$currentPopup.find(".in-progress").removeClass("in");\n        thisPopup.$currentPopup.find(".save-button").removeClass("disabled");\n      }\n\n      thisPopup.down();\n    }\n\n    this.triggerSave = function (form) {\n      form = form || {}; // Allows to exeture this without an actual form on the page for XHR requests\n\n      // If the browser supports checkValidity and is using HTML5 inputs with validations then its hack time\n      // to support HTML5 validations with savePopup\n      if (( typeof(form.checkValidity) === "function" ) && !form.checkValidity()) {\n        // This looks terrible and it is. HTML5 form validation is only done upon clicking the submit button\n        // and not when the form is submitted using JS. This terrible code simulates a click.\n        $(\'<input type="submit" class="collapse">\').appendTo(form).click().remove();\n        return;\n      }\n\n      // indicatorOnSave will show a fontawesome spinner and disable the save button\n      // This is useful for forms posting directly but may be disabled if doing AJAX work\n      if (defaultOptions.indicatorOnSave) {\n        thisPopup.$currentPopup.find(".in-progress").addClass("in");\n        thisPopup.$currentPopup.find(".save-button").addClass("disabled");\n      } else {\n        thisPopup.down();\n      }\n\n      setTimeout(function() {\n        thisPopup.$targetForm.removeClass("dirty");\n        defaultOptions.saveHandler ? defaultOptions.saveHandler() : form.submit();\n      }, 0);\n\n    };\n  }\n};\n'},"1wJT":function(e,t,n){var i=n("qqu+");e.exports=function e(t){if(t==null)return"\\s";else if(t.source)return t.source;else return"["+i(t)+"]"}},2:function(e,t,n){n("FgMM");e.exports=n("YUyz")},"2Muo":function(e,t){e.exports=function e(t){return t<0?0:+t||0}},"3Jg+":function(e,t,n){n("8rVx")(n("yg6D"))},"4JrT":function(e,t){e.exports='var HelpPopoverAdmin = {\n  dialog_exists: undefined,\n  submit_path: undefined,\n  delete_path: undefined,\n  togglePreview: function () {\n    var $popover_form = $(".popover form");\n\n    var title = $("#help_popover_title_text").val();\n    var text = $popover_form.find("#help_popover_text").val();\n    var support_link = $popover_form.find("#help_popover_support_link").val();\n\n    $("#help_popover_preview_title_text").text(title);\n    $("#help_popover_preview_text").text(text);\n    if (support_link) {\n      $("#help_popover_preview_support_link").html("<a href=\'" + support_link + "\' class=\'btn btn-default btn-xs\' target=\'_blank\' id=\'help_popover_link\'>Learn more</a>");\n    } else {\n      $("#help_popover_preview_support_link").empty();\n    }\n\n    $("#help_popover_title_text, #help_popover_preview_title_text, #help_popover_content_inner, #help_popover_content_preview_inner").toggle();\n  },\n  submitForm: function () {\n    var $selector = $(".popover form");\n    var values = {};\n    var $delete_button = $(".popover #help_popover_delete_btn");\n    var $submit_button = $(".popover form button[type=\'submit\']");\n    $("#help_dialog_title").val($("#help_popover_title_text").val());\n\n    $submit_button.addClass("disabled").html("<i class=\'fal fa-circle-notch fa-spin\'></i> Saving");\n    $delete_button.addClass("disabled");\n\n    $selector.submit();\n  },\n  setupPopover: function () {\n    $("#help_popover_icon").popover({\n      html: true,\n      placement: "bottom",\n      trigger: "click",\n      title: $("#help_popover_title").remove().html(),\n      content: $("#help_popover_content").remove().html()\n    });\n  },\n  setupHandlers: function () {\n    $("#help_popover_icon").on(\'shown.bs.popover\', function () {\n      $(".popover form").one(\'submit\', function (e) {\n        HelpPopoverAdmin.submitForm();\n        e.preventDefault();\n      });\n      $(".toggle_preview").on(\'click\', function () {\n        HelpPopoverAdmin.togglePreview();\n      });\n    });\n  },\n  init: function (dialog_exists, submit_path) {\n    HelpPopoverAdmin.dialog_exists = dialog_exists;\n    HelpPopoverAdmin.submit_path = submit_path;\n    HelpPopoverAdmin.setupPopover();\n    HelpPopoverAdmin.setupHandlers();\n  }\n};\n'},"4Z/T":function(e,t,n){var i;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return a(c(e),arguments)}function s(e,t){return o.apply(null,[e].concat(t||[]))}function a(e,t){var n=1,i=e.length,s,a="",l,c,u,d,p,h,f,m;for(l=0;l<i;l++){if(typeof e[l]==="string"){a+=e[l]}else if(typeof e[l]==="object"){u=e[l];if(u.keys){s=t[n];for(c=0;c<u.keys.length;c++){if(s==undefined){throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',u.keys[c],u.keys[c-1]))}s=s[u.keys[c]]}}else if(u.param_no){s=t[u.param_no]}else{s=t[n++]}if(r.not_type.test(u.type)&&r.not_primitive.test(u.type)&&s instanceof Function){s=s()}if(r.numeric_arg.test(u.type)&&(typeof s!=="number"&&isNaN(s))){throw new TypeError(o("[sprintf] expecting number but found %T",s))}if(r.number.test(u.type)){f=s>=0}switch(u.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,u.width?parseInt(u.width):0);break;case"e":s=u.precision?parseFloat(s).toExponential(u.precision):parseFloat(s).toExponential();break;case"f":s=u.precision?parseFloat(s).toFixed(u.precision):parseFloat(s);break;case"g":s=u.precision?String(Number(s.toPrecision(u.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s);s=u.precision?s.substring(0,u.precision):s;break;case"t":s=String(!!s);s=u.precision?s.substring(0,u.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase();s=u.precision?s.substring(0,u.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf();s=u.precision?s.substring(0,u.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase();break}if(r.json.test(u.type)){a+=s}else{if(r.number.test(u.type)&&(!f||u.sign)){m=f?"+":"-";s=s.toString().replace(r.sign,"")}else{m=""}p=u.pad_char?u.pad_char==="0"?"0":u.pad_char.charAt(1):" ";h=u.width-(m+s).length;d=u.width?h>0?p.repeat(h):"":"";a+=u.align?m+s+d:p==="0"?m+d+s:d+m+s}}}return a}var l=Object.create(null);function c(e){if(l[e]){return l[e]}var t=e,n,i=[],o=0;while(t){if((n=r.text.exec(t))!==null){i.push(n[0])}else if((n=r.modulo.exec(t))!==null){i.push("%")}else if((n=r.placeholder.exec(t))!==null){if(n[2]){o|=1;var s=[],a=n[2],c=[];if((c=r.key.exec(a))!==null){s.push(c[1]);while((a=a.substring(c[0].length))!==""){if((c=r.key_access.exec(a))!==null){s.push(c[1])}else if((c=r.index_access.exec(a))!==null){s.push(c[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=s}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}i.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}t=t.substring(n[0].length)}return l[e]=i}if(true){t["sprintf"]=o;t["vsprintf"]=s}if(typeof window!=="undefined"){window["sprintf"]=o;window["vsprintf"]=s;if(true){!(i=function(){return{sprintf:o,vsprintf:s}}.call(t,n,t,e),i!==undefined&&(e.exports=i))}}}()},"4k9y":function(e,t,n){n("8rVx")(n("tvbo"))},"547O":function(e,t){e.exports='var HelpPopoverUser = {\n  init: function (title) {\n    $("#help_popover_icon").popover({\n      html: true,\n      placement: "bottom",\n      trigger: "click",\n      title: title,\n      content: $("#help_popover_content").remove().html()\n    });\n\n    // Close popover on "Learn More" click\n    $("#help_popover_icon").on(\'shown.bs.popover\', function () {\n      $("#help_popover_link").on(\'click\', function () {\n        $("#help_popover_icon").popover("hide");\n      });\n    });\n\n    // Remove the click listener so multiple events aren\'t fired\n    $("#help_popover_icon").on(\'hidden.bs.popover\', function () {\n      $("#help_popover_link").off(\'click\');\n    });\n  }\n};\n'},"5uzk":function(e,t){e.exports="/*\n     _ _      _       _\n ___| (_) ___| | __  (_)___\n/ __| | |/ __| |/ /  | / __|\n\\__ \\ | | (__|   < _ | \\__ \\\n|___/_|_|\\___|_|\\_(_)/ |___/\n                   |__/\n\n Version: 1.6.0\n  Author: Ken Wheeler\n Website: http://kenwheeler.github.io\n    Docs: http://kenwheeler.github.io/slick\n    Repo: http://github.com/kenwheeler/slick\n  Issues: http://github.com/kenwheeler/slick/issues\n\n */\n/* global window, document, define, jQuery, setInterval, clearInterval */\n(function(factory) {\n    'use strict';\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof exports !== 'undefined') {\n        module.exports = factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n\n}(function($) {\n    'use strict';\n    var Slick = window.Slick || {};\n\n    Slick = (function() {\n\n        var instanceUid = 0;\n\n        function Slick(element, settings) {\n\n            var _ = this, dataSettings;\n\n            _.defaults = {\n                accessibility: true,\n                adaptiveHeight: false,\n                appendArrows: $(element),\n                appendDots: $(element),\n                arrows: true,\n                asNavFor: null,\n                prevArrow: '<button type=\"button\" data-role=\"none\" class=\"slick-prev\" aria-label=\"Previous\" tabindex=\"0\" role=\"button\">Previous</button>',\n                nextArrow: '<button type=\"button\" data-role=\"none\" class=\"slick-next\" aria-label=\"Next\" tabindex=\"0\" role=\"button\">Next</button>',\n                autoplay: false,\n                autoplaySpeed: 3000,\n                centerMode: false,\n                centerPadding: '50px',\n                cssEase: 'ease',\n                customPaging: function(slider, i) {\n                    return $('<button type=\"button\" data-role=\"none\" role=\"button\" tabindex=\"0\" />').text(i + 1);\n                },\n                dots: false,\n                dotsClass: 'slick-dots',\n                draggable: true,\n                easing: 'linear',\n                edgeFriction: 0.35,\n                fade: false,\n                focusOnSelect: false,\n                infinite: true,\n                initialSlide: 0,\n                lazyLoad: 'ondemand',\n                mobileFirst: false,\n                pauseOnHover: true,\n                pauseOnFocus: true,\n                pauseOnDotsHover: false,\n                respondTo: 'window',\n                responsive: null,\n                rows: 1,\n                rtl: false,\n                slide: '',\n                slidesPerRow: 1,\n                slidesToShow: 1,\n                slidesToScroll: 1,\n                speed: 500,\n                swipe: true,\n                swipeToSlide: false,\n                touchMove: true,\n                touchThreshold: 5,\n                useCSS: true,\n                useTransform: true,\n                variableWidth: false,\n                vertical: false,\n                verticalSwiping: false,\n                waitForAnimate: true,\n                zIndex: 1000\n            };\n\n            _.initials = {\n                animating: false,\n                dragging: false,\n                autoPlayTimer: null,\n                currentDirection: 0,\n                currentLeft: null,\n                currentSlide: 0,\n                direction: 1,\n                $dots: null,\n                listWidth: null,\n                listHeight: null,\n                loadIndex: 0,\n                $nextArrow: null,\n                $prevArrow: null,\n                slideCount: null,\n                slideWidth: null,\n                $slideTrack: null,\n                $slides: null,\n                sliding: false,\n                slideOffset: 0,\n                swipeLeft: null,\n                $list: null,\n                touchObject: {},\n                transformsEnabled: false,\n                unslicked: false\n            };\n\n            $.extend(_, _.initials);\n\n            _.activeBreakpoint = null;\n            _.animType = null;\n            _.animProp = null;\n            _.breakpoints = [];\n            _.breakpointSettings = [];\n            _.cssTransitions = false;\n            _.focussed = false;\n            _.interrupted = false;\n            _.hidden = 'hidden';\n            _.paused = true;\n            _.positionProp = null;\n            _.respondTo = null;\n            _.rowCount = 1;\n            _.shouldClick = true;\n            _.$slider = $(element);\n            _.$slidesCache = null;\n            _.transformType = null;\n            _.transitionType = null;\n            _.visibilityChange = 'visibilitychange';\n            _.windowWidth = 0;\n            _.windowTimer = null;\n\n            dataSettings = $(element).data('slick') || {};\n\n            _.options = $.extend({}, _.defaults, settings, dataSettings);\n\n            _.currentSlide = _.options.initialSlide;\n\n            _.originalSettings = _.options;\n\n            if (typeof document.mozHidden !== 'undefined') {\n                _.hidden = 'mozHidden';\n                _.visibilityChange = 'mozvisibilitychange';\n            } else if (typeof document.webkitHidden !== 'undefined') {\n                _.hidden = 'webkitHidden';\n                _.visibilityChange = 'webkitvisibilitychange';\n            }\n\n            _.autoPlay = $.proxy(_.autoPlay, _);\n            _.autoPlayClear = $.proxy(_.autoPlayClear, _);\n            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);\n            _.changeSlide = $.proxy(_.changeSlide, _);\n            _.clickHandler = $.proxy(_.clickHandler, _);\n            _.selectHandler = $.proxy(_.selectHandler, _);\n            _.setPosition = $.proxy(_.setPosition, _);\n            _.swipeHandler = $.proxy(_.swipeHandler, _);\n            _.dragHandler = $.proxy(_.dragHandler, _);\n            _.keyHandler = $.proxy(_.keyHandler, _);\n\n            _.instanceUid = instanceUid++;\n\n            // A simple way to check for HTML strings\n            // Strict HTML recognition (must start with <)\n            // Extracted from jQuery v1.11 source\n            _.htmlExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*)$/;\n\n\n            _.registerBreakpoints();\n            _.init(true);\n\n        }\n\n        return Slick;\n\n    }());\n\n    Slick.prototype.activateADA = function() {\n        var _ = this;\n\n        _.$slideTrack.find('.slick-active').attr({\n            'aria-hidden': 'false'\n        }).find('a, input, button, select').attr({\n            'tabindex': '0'\n        });\n\n    };\n\n    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {\n\n        var _ = this;\n\n        if (typeof(index) === 'boolean') {\n            addBefore = index;\n            index = null;\n        } else if (index < 0 || (index >= _.slideCount)) {\n            return false;\n        }\n\n        _.unload();\n\n        if (typeof(index) === 'number') {\n            if (index === 0 && _.$slides.length === 0) {\n                $(markup).appendTo(_.$slideTrack);\n            } else if (addBefore) {\n                $(markup).insertBefore(_.$slides.eq(index));\n            } else {\n                $(markup).insertAfter(_.$slides.eq(index));\n            }\n        } else {\n            if (addBefore === true) {\n                $(markup).prependTo(_.$slideTrack);\n            } else {\n                $(markup).appendTo(_.$slideTrack);\n            }\n        }\n\n        _.$slides = _.$slideTrack.children(this.options.slide);\n\n        _.$slideTrack.children(this.options.slide).detach();\n\n        _.$slideTrack.append(_.$slides);\n\n        _.$slides.each(function(index, element) {\n            $(element).attr('data-slick-index', index);\n        });\n\n        _.$slidesCache = _.$slides;\n\n        _.reinit();\n\n    };\n\n    Slick.prototype.animateHeight = function() {\n        var _ = this;\n        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {\n            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);\n            _.$list.animate({\n                height: targetHeight\n            }, _.options.speed);\n        }\n    };\n\n    Slick.prototype.animateSlide = function(targetLeft, callback) {\n\n        var animProps = {},\n            _ = this;\n\n        _.animateHeight();\n\n        if (_.options.rtl === true && _.options.vertical === false) {\n            targetLeft = -targetLeft;\n        }\n        if (_.transformsEnabled === false) {\n            if (_.options.vertical === false) {\n                _.$slideTrack.animate({\n                    left: targetLeft\n                }, _.options.speed, _.options.easing, callback);\n            } else {\n                _.$slideTrack.animate({\n                    top: targetLeft\n                }, _.options.speed, _.options.easing, callback);\n            }\n\n        } else {\n\n            if (_.cssTransitions === false) {\n                if (_.options.rtl === true) {\n                    _.currentLeft = -(_.currentLeft);\n                }\n                $({\n                    animStart: _.currentLeft\n                }).animate({\n                    animStart: targetLeft\n                }, {\n                    duration: _.options.speed,\n                    easing: _.options.easing,\n                    step: function(now) {\n                        now = Math.ceil(now);\n                        if (_.options.vertical === false) {\n                            animProps[_.animType] = 'translate(' +\n                                now + 'px, 0px)';\n                            _.$slideTrack.css(animProps);\n                        } else {\n                            animProps[_.animType] = 'translate(0px,' +\n                                now + 'px)';\n                            _.$slideTrack.css(animProps);\n                        }\n                    },\n                    complete: function() {\n                        if (callback) {\n                            callback.call();\n                        }\n                    }\n                });\n\n            } else {\n\n                _.applyTransition();\n                targetLeft = Math.ceil(targetLeft);\n\n                if (_.options.vertical === false) {\n                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';\n                } else {\n                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';\n                }\n                _.$slideTrack.css(animProps);\n\n                if (callback) {\n                    setTimeout(function() {\n\n                        _.disableTransition();\n\n                        callback.call();\n                    }, _.options.speed);\n                }\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.getNavTarget = function() {\n\n        var _ = this,\n            asNavFor = _.options.asNavFor;\n\n        if ( asNavFor && asNavFor !== null ) {\n            asNavFor = $(asNavFor).not(_.$slider);\n        }\n\n        return asNavFor;\n\n    };\n\n    Slick.prototype.asNavFor = function(index) {\n\n        var _ = this,\n            asNavFor = _.getNavTarget();\n\n        if ( asNavFor !== null && typeof asNavFor === 'object' ) {\n            asNavFor.each(function() {\n                var target = $(this).slick('getSlick');\n                if(!target.unslicked) {\n                    target.slideHandler(index, true);\n                }\n            });\n        }\n\n    };\n\n    Slick.prototype.applyTransition = function(slide) {\n\n        var _ = this,\n            transition = {};\n\n        if (_.options.fade === false) {\n            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;\n        } else {\n            transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;\n        }\n\n        if (_.options.fade === false) {\n            _.$slideTrack.css(transition);\n        } else {\n            _.$slides.eq(slide).css(transition);\n        }\n\n    };\n\n    Slick.prototype.autoPlay = function() {\n\n        var _ = this;\n\n        _.autoPlayClear();\n\n        if ( _.slideCount > _.options.slidesToShow ) {\n            _.autoPlayTimer = setInterval( _.autoPlayIterator, _.options.autoplaySpeed );\n        }\n\n    };\n\n    Slick.prototype.autoPlayClear = function() {\n\n        var _ = this;\n\n        if (_.autoPlayTimer) {\n            clearInterval(_.autoPlayTimer);\n        }\n\n    };\n\n    Slick.prototype.autoPlayIterator = function() {\n\n        var _ = this,\n            slideTo = _.currentSlide + _.options.slidesToScroll;\n\n        if ( !_.paused && !_.interrupted && !_.focussed ) {\n\n            if ( _.options.infinite === false ) {\n\n                if ( _.direction === 1 && ( _.currentSlide + 1 ) === ( _.slideCount - 1 )) {\n                    _.direction = 0;\n                }\n\n                else if ( _.direction === 0 ) {\n\n                    slideTo = _.currentSlide - _.options.slidesToScroll;\n\n                    if ( _.currentSlide - 1 === 0 ) {\n                        _.direction = 1;\n                    }\n\n                }\n\n            }\n\n            _.slideHandler( slideTo );\n\n        }\n\n    };\n\n    Slick.prototype.buildArrows = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true ) {\n\n            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');\n            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');\n\n            if( _.slideCount > _.options.slidesToShow ) {\n\n                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');\n                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');\n\n                if (_.htmlExpr.test(_.options.prevArrow)) {\n                    _.$prevArrow.prependTo(_.options.appendArrows);\n                }\n\n                if (_.htmlExpr.test(_.options.nextArrow)) {\n                    _.$nextArrow.appendTo(_.options.appendArrows);\n                }\n\n                if (_.options.infinite !== true) {\n                    _.$prevArrow\n                        .addClass('slick-disabled')\n                        .attr('aria-disabled', 'true');\n                }\n\n            } else {\n\n                _.$prevArrow.add( _.$nextArrow )\n\n                    .addClass('slick-hidden')\n                    .attr({\n                        'aria-disabled': 'true',\n                        'tabindex': '-1'\n                    });\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.buildDots = function() {\n\n        var _ = this,\n            i, dot;\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$slider.addClass('slick-dotted');\n\n            dot = $('<ul />').addClass(_.options.dotsClass);\n\n            for (i = 0; i <= _.getDotCount(); i += 1) {\n                dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));\n            }\n\n            _.$dots = dot.appendTo(_.options.appendDots);\n\n            _.$dots.find('li').first().addClass('slick-active').attr('aria-hidden', 'false');\n\n        }\n\n    };\n\n    Slick.prototype.buildOut = function() {\n\n        var _ = this;\n\n        _.$slides =\n            _.$slider\n                .children( _.options.slide + ':not(.slick-cloned)')\n                .addClass('slick-slide');\n\n        _.slideCount = _.$slides.length;\n\n        _.$slides.each(function(index, element) {\n            $(element)\n                .attr('data-slick-index', index)\n                .data('originalStyling', $(element).attr('style') || '');\n        });\n\n        _.$slider.addClass('slick-slider');\n\n        _.$slideTrack = (_.slideCount === 0) ?\n            $('<div class=\"slick-track\"/>').appendTo(_.$slider) :\n            _.$slides.wrapAll('<div class=\"slick-track\"/>').parent();\n\n        _.$list = _.$slideTrack.wrap(\n            '<div aria-live=\"polite\" class=\"slick-list\"/>').parent();\n        _.$slideTrack.css('opacity', 0);\n\n        if (_.options.centerMode === true || _.options.swipeToSlide === true) {\n            _.options.slidesToScroll = 1;\n        }\n\n        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');\n\n        _.setupInfinite();\n\n        _.buildArrows();\n\n        _.buildDots();\n\n        _.updateDots();\n\n\n        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);\n\n        if (_.options.draggable === true) {\n            _.$list.addClass('draggable');\n        }\n\n    };\n\n    Slick.prototype.buildRows = function() {\n\n        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;\n\n        newSlides = document.createDocumentFragment();\n        originalSlides = _.$slider.children();\n\n        if(_.options.rows > 1) {\n\n            slidesPerSection = _.options.slidesPerRow * _.options.rows;\n            numOfSlides = Math.ceil(\n                originalSlides.length / slidesPerSection\n            );\n\n            for(a = 0; a < numOfSlides; a++){\n                var slide = document.createElement('div');\n                for(b = 0; b < _.options.rows; b++) {\n                    var row = document.createElement('div');\n                    for(c = 0; c < _.options.slidesPerRow; c++) {\n                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));\n                        if (originalSlides.get(target)) {\n                            row.appendChild(originalSlides.get(target));\n                        }\n                    }\n                    slide.appendChild(row);\n                }\n                newSlides.appendChild(slide);\n            }\n\n            _.$slider.empty().append(newSlides);\n            _.$slider.children().children().children()\n                .css({\n                    'width':(100 / _.options.slidesPerRow) + '%',\n                    'display': 'inline-block'\n                });\n\n        }\n\n    };\n\n    Slick.prototype.checkResponsive = function(initial, forceUpdate) {\n\n        var _ = this,\n            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;\n        var sliderWidth = _.$slider.width();\n        var windowWidth = window.innerWidth || $(window).width();\n\n        if (_.respondTo === 'window') {\n            respondToWidth = windowWidth;\n        } else if (_.respondTo === 'slider') {\n            respondToWidth = sliderWidth;\n        } else if (_.respondTo === 'min') {\n            respondToWidth = Math.min(windowWidth, sliderWidth);\n        }\n\n        if ( _.options.responsive &&\n            _.options.responsive.length &&\n            _.options.responsive !== null) {\n\n            targetBreakpoint = null;\n\n            for (breakpoint in _.breakpoints) {\n                if (_.breakpoints.hasOwnProperty(breakpoint)) {\n                    if (_.originalSettings.mobileFirst === false) {\n                        if (respondToWidth < _.breakpoints[breakpoint]) {\n                            targetBreakpoint = _.breakpoints[breakpoint];\n                        }\n                    } else {\n                        if (respondToWidth > _.breakpoints[breakpoint]) {\n                            targetBreakpoint = _.breakpoints[breakpoint];\n                        }\n                    }\n                }\n            }\n\n            if (targetBreakpoint !== null) {\n                if (_.activeBreakpoint !== null) {\n                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {\n                        _.activeBreakpoint =\n                            targetBreakpoint;\n                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {\n                            _.unslick(targetBreakpoint);\n                        } else {\n                            _.options = $.extend({}, _.originalSettings,\n                                _.breakpointSettings[\n                                    targetBreakpoint]);\n                            if (initial === true) {\n                                _.currentSlide = _.options.initialSlide;\n                            }\n                            _.refresh(initial);\n                        }\n                        triggerBreakpoint = targetBreakpoint;\n                    }\n                } else {\n                    _.activeBreakpoint = targetBreakpoint;\n                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {\n                        _.unslick(targetBreakpoint);\n                    } else {\n                        _.options = $.extend({}, _.originalSettings,\n                            _.breakpointSettings[\n                                targetBreakpoint]);\n                        if (initial === true) {\n                            _.currentSlide = _.options.initialSlide;\n                        }\n                        _.refresh(initial);\n                    }\n                    triggerBreakpoint = targetBreakpoint;\n                }\n            } else {\n                if (_.activeBreakpoint !== null) {\n                    _.activeBreakpoint = null;\n                    _.options = _.originalSettings;\n                    if (initial === true) {\n                        _.currentSlide = _.options.initialSlide;\n                    }\n                    _.refresh(initial);\n                    triggerBreakpoint = targetBreakpoint;\n                }\n            }\n\n            // only trigger breakpoints during an actual break. not on initialize.\n            if( !initial && triggerBreakpoint !== false ) {\n                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);\n            }\n        }\n\n    };\n\n    Slick.prototype.changeSlide = function(event, dontAnimate) {\n\n        var _ = this,\n            $target = $(event.currentTarget),\n            indexOffset, slideOffset, unevenOffset;\n\n        // If target is a link, prevent default action.\n        if($target.is('a')) {\n            event.preventDefault();\n        }\n\n        // If target is not the <li> element (ie: a child), find the <li>.\n        if(!$target.is('li')) {\n            $target = $target.closest('li');\n        }\n\n        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);\n        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;\n\n        switch (event.data.message) {\n\n            case 'previous':\n                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;\n                if (_.slideCount > _.options.slidesToShow) {\n                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);\n                }\n                break;\n\n            case 'next':\n                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;\n                if (_.slideCount > _.options.slidesToShow) {\n                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);\n                }\n                break;\n\n            case 'index':\n                var index = event.data.index === 0 ? 0 :\n                    event.data.index || $target.index() * _.options.slidesToScroll;\n\n                _.slideHandler(_.checkNavigable(index), false, dontAnimate);\n                $target.children().trigger('focus');\n                break;\n\n            default:\n                return;\n        }\n\n    };\n\n    Slick.prototype.checkNavigable = function(index) {\n\n        var _ = this,\n            navigables, prevNavigable;\n\n        navigables = _.getNavigableIndexes();\n        prevNavigable = 0;\n        if (index > navigables[navigables.length - 1]) {\n            index = navigables[navigables.length - 1];\n        } else {\n            for (var n in navigables) {\n                if (index < navigables[n]) {\n                    index = prevNavigable;\n                    break;\n                }\n                prevNavigable = navigables[n];\n            }\n        }\n\n        return index;\n    };\n\n    Slick.prototype.cleanUpEvents = function() {\n\n        var _ = this;\n\n        if (_.options.dots && _.$dots !== null) {\n\n            $('li', _.$dots)\n                .off('click.slick', _.changeSlide)\n                .off('mouseenter.slick', $.proxy(_.interrupt, _, true))\n                .off('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n        }\n\n        _.$slider.off('focus.slick blur.slick');\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);\n            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);\n        }\n\n        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);\n        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);\n        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);\n        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);\n\n        _.$list.off('click.slick', _.clickHandler);\n\n        $(document).off(_.visibilityChange, _.visibility);\n\n        _.cleanUpSlideEvents();\n\n        if (_.options.accessibility === true) {\n            _.$list.off('keydown.slick', _.keyHandler);\n        }\n\n        if (_.options.focusOnSelect === true) {\n            $(_.$slideTrack).children().off('click.slick', _.selectHandler);\n        }\n\n        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);\n\n        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);\n\n        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);\n\n        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);\n        $(document).off('ready.slick.slick-' + _.instanceUid, _.setPosition);\n\n    };\n\n    Slick.prototype.cleanUpSlideEvents = function() {\n\n        var _ = this;\n\n        _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));\n        _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n    };\n\n    Slick.prototype.cleanUpRows = function() {\n\n        var _ = this, originalSlides;\n\n        if(_.options.rows > 1) {\n            originalSlides = _.$slides.children().children();\n            originalSlides.removeAttr('style');\n            _.$slider.empty().append(originalSlides);\n        }\n\n    };\n\n    Slick.prototype.clickHandler = function(event) {\n\n        var _ = this;\n\n        if (_.shouldClick === false) {\n            event.stopImmediatePropagation();\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n    };\n\n    Slick.prototype.destroy = function(refresh) {\n\n        var _ = this;\n\n        _.autoPlayClear();\n\n        _.touchObject = {};\n\n        _.cleanUpEvents();\n\n        $('.slick-cloned', _.$slider).detach();\n\n        if (_.$dots) {\n            _.$dots.remove();\n        }\n\n\n        if ( _.$prevArrow && _.$prevArrow.length ) {\n\n            _.$prevArrow\n                .removeClass('slick-disabled slick-arrow slick-hidden')\n                .removeAttr('aria-hidden aria-disabled tabindex')\n                .css('display','');\n\n            if ( _.htmlExpr.test( _.options.prevArrow )) {\n                _.$prevArrow.remove();\n            }\n        }\n\n        if ( _.$nextArrow && _.$nextArrow.length ) {\n\n            _.$nextArrow\n                .removeClass('slick-disabled slick-arrow slick-hidden')\n                .removeAttr('aria-hidden aria-disabled tabindex')\n                .css('display','');\n\n            if ( _.htmlExpr.test( _.options.nextArrow )) {\n                _.$nextArrow.remove();\n            }\n\n        }\n\n\n        if (_.$slides) {\n\n            _.$slides\n                .removeClass('slick-slide slick-active slick-center slick-visible slick-current')\n                .removeAttr('aria-hidden')\n                .removeAttr('data-slick-index')\n                .each(function(){\n                    $(this).attr('style', $(this).data('originalStyling'));\n                });\n\n            _.$slideTrack.children(this.options.slide).detach();\n\n            _.$slideTrack.detach();\n\n            _.$list.detach();\n\n            _.$slider.append(_.$slides);\n        }\n\n        _.cleanUpRows();\n\n        _.$slider.removeClass('slick-slider');\n        _.$slider.removeClass('slick-initialized');\n        _.$slider.removeClass('slick-dotted');\n\n        _.unslicked = true;\n\n        if(!refresh) {\n            _.$slider.trigger('destroy', [_]);\n        }\n\n    };\n\n    Slick.prototype.disableTransition = function(slide) {\n\n        var _ = this,\n            transition = {};\n\n        transition[_.transitionType] = '';\n\n        if (_.options.fade === false) {\n            _.$slideTrack.css(transition);\n        } else {\n            _.$slides.eq(slide).css(transition);\n        }\n\n    };\n\n    Slick.prototype.fadeSlide = function(slideIndex, callback) {\n\n        var _ = this;\n\n        if (_.cssTransitions === false) {\n\n            _.$slides.eq(slideIndex).css({\n                zIndex: _.options.zIndex\n            });\n\n            _.$slides.eq(slideIndex).animate({\n                opacity: 1\n            }, _.options.speed, _.options.easing, callback);\n\n        } else {\n\n            _.applyTransition(slideIndex);\n\n            _.$slides.eq(slideIndex).css({\n                opacity: 1,\n                zIndex: _.options.zIndex\n            });\n\n            if (callback) {\n                setTimeout(function() {\n\n                    _.disableTransition(slideIndex);\n\n                    callback.call();\n                }, _.options.speed);\n            }\n\n        }\n\n    };\n\n    Slick.prototype.fadeSlideOut = function(slideIndex) {\n\n        var _ = this;\n\n        if (_.cssTransitions === false) {\n\n            _.$slides.eq(slideIndex).animate({\n                opacity: 0,\n                zIndex: _.options.zIndex - 2\n            }, _.options.speed, _.options.easing);\n\n        } else {\n\n            _.applyTransition(slideIndex);\n\n            _.$slides.eq(slideIndex).css({\n                opacity: 0,\n                zIndex: _.options.zIndex - 2\n            });\n\n        }\n\n    };\n\n    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {\n\n        var _ = this;\n\n        if (filter !== null) {\n\n            _.$slidesCache = _.$slides;\n\n            _.unload();\n\n            _.$slideTrack.children(this.options.slide).detach();\n\n            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);\n\n            _.reinit();\n\n        }\n\n    };\n\n    Slick.prototype.focusHandler = function() {\n\n        var _ = this;\n\n        _.$slider\n            .off('focus.slick blur.slick')\n            .on('focus.slick blur.slick',\n                '*:not(.slick-arrow)', function(event) {\n\n            event.stopImmediatePropagation();\n            var $sf = $(this);\n\n            setTimeout(function() {\n\n                if( _.options.pauseOnFocus ) {\n                    _.focussed = $sf.is(':focus');\n                    _.autoPlay();\n                }\n\n            }, 0);\n\n        });\n    };\n\n    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {\n\n        var _ = this;\n        return _.currentSlide;\n\n    };\n\n    Slick.prototype.getDotCount = function() {\n\n        var _ = this;\n\n        var breakPoint = 0;\n        var counter = 0;\n        var pagerQty = 0;\n\n        if (_.options.infinite === true) {\n            while (breakPoint < _.slideCount) {\n                ++pagerQty;\n                breakPoint = counter + _.options.slidesToScroll;\n                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\n            }\n        } else if (_.options.centerMode === true) {\n            pagerQty = _.slideCount;\n        } else if(!_.options.asNavFor) {\n            pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);\n        }else {\n            while (breakPoint < _.slideCount) {\n                ++pagerQty;\n                breakPoint = counter + _.options.slidesToScroll;\n                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\n            }\n        }\n\n        return pagerQty - 1;\n\n    };\n\n    Slick.prototype.getLeft = function(slideIndex) {\n\n        var _ = this,\n            targetLeft,\n            verticalHeight,\n            verticalOffset = 0,\n            targetSlide;\n\n        _.slideOffset = 0;\n        verticalHeight = _.$slides.first().outerHeight(true);\n\n        if (_.options.infinite === true) {\n            if (_.slideCount > _.options.slidesToShow) {\n                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;\n                verticalOffset = (verticalHeight * _.options.slidesToShow) * -1;\n            }\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\n                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {\n                    if (slideIndex > _.slideCount) {\n                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;\n                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;\n                    } else {\n                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;\n                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;\n                    }\n                }\n            }\n        } else {\n            if (slideIndex + _.options.slidesToShow > _.slideCount) {\n                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;\n                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;\n            }\n        }\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            _.slideOffset = 0;\n            verticalOffset = 0;\n        }\n\n        if (_.options.centerMode === true && _.options.infinite === true) {\n            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;\n        } else if (_.options.centerMode === true) {\n            _.slideOffset = 0;\n            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);\n        }\n\n        if (_.options.vertical === false) {\n            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;\n        } else {\n            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;\n        }\n\n        if (_.options.variableWidth === true) {\n\n            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {\n                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);\n            } else {\n                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);\n            }\n\n            if (_.options.rtl === true) {\n                if (targetSlide[0]) {\n                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;\n                } else {\n                    targetLeft =  0;\n                }\n            } else {\n                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;\n            }\n\n            if (_.options.centerMode === true) {\n                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {\n                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);\n                } else {\n                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);\n                }\n\n                if (_.options.rtl === true) {\n                    if (targetSlide[0]) {\n                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;\n                    } else {\n                        targetLeft =  0;\n                    }\n                } else {\n                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;\n                }\n\n                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;\n            }\n        }\n\n        return targetLeft;\n\n    };\n\n    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {\n\n        var _ = this;\n\n        return _.options[option];\n\n    };\n\n    Slick.prototype.getNavigableIndexes = function() {\n\n        var _ = this,\n            breakPoint = 0,\n            counter = 0,\n            indexes = [],\n            max;\n\n        if (_.options.infinite === false) {\n            max = _.slideCount;\n        } else {\n            breakPoint = _.options.slidesToScroll * -1;\n            counter = _.options.slidesToScroll * -1;\n            max = _.slideCount * 2;\n        }\n\n        while (breakPoint < max) {\n            indexes.push(breakPoint);\n            breakPoint = counter + _.options.slidesToScroll;\n            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\n        }\n\n        return indexes;\n\n    };\n\n    Slick.prototype.getSlick = function() {\n\n        return this;\n\n    };\n\n    Slick.prototype.getSlideCount = function() {\n\n        var _ = this,\n            slidesTraversed, swipedSlide, centerOffset;\n\n        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;\n\n        if (_.options.swipeToSlide === true) {\n            _.$slideTrack.find('.slick-slide').each(function(index, slide) {\n                if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {\n                    swipedSlide = slide;\n                    return false;\n                }\n            });\n\n            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;\n\n            return slidesTraversed;\n\n        } else {\n            return _.options.slidesToScroll;\n        }\n\n    };\n\n    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {\n\n        var _ = this;\n\n        _.changeSlide({\n            data: {\n                message: 'index',\n                index: parseInt(slide)\n            }\n        }, dontAnimate);\n\n    };\n\n    Slick.prototype.init = function(creation) {\n\n        var _ = this;\n\n        if (!$(_.$slider).hasClass('slick-initialized')) {\n\n            $(_.$slider).addClass('slick-initialized');\n\n            _.buildRows();\n            _.buildOut();\n            _.setProps();\n            _.startLoad();\n            _.loadSlider();\n            _.initializeEvents();\n            _.updateArrows();\n            _.updateDots();\n            _.checkResponsive(true);\n            _.focusHandler();\n\n        }\n\n        if (creation) {\n            _.$slider.trigger('init', [_]);\n        }\n\n        if (_.options.accessibility === true) {\n            _.initADA();\n        }\n\n        if ( _.options.autoplay ) {\n\n            _.paused = false;\n            _.autoPlay();\n\n        }\n\n    };\n\n    Slick.prototype.initADA = function() {\n        var _ = this;\n        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n        }).find('a, input, button, select').attr({\n            'tabindex': '-1'\n        });\n\n        _.$slideTrack.attr('role', 'listbox');\n\n        _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {\n            $(this).attr({\n                'role': 'option',\n                'aria-describedby': 'slick-slide' + _.instanceUid + i + ''\n            });\n        });\n\n        if (_.$dots !== null) {\n            _.$dots.attr('role', 'tablist').find('li').each(function(i) {\n                $(this).attr({\n                    'role': 'presentation',\n                    'aria-selected': 'false',\n                    'aria-controls': 'navigation' + _.instanceUid + i + '',\n                    'id': 'slick-slide' + _.instanceUid + i + ''\n                });\n            })\n                .first().attr('aria-selected', 'true').end()\n                .find('button').attr('role', 'button').end()\n                .closest('div').attr('role', 'toolbar');\n        }\n        _.activateADA();\n\n    };\n\n    Slick.prototype.initArrowEvents = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n            _.$prevArrow\n               .off('click.slick')\n               .on('click.slick', {\n                    message: 'previous'\n               }, _.changeSlide);\n            _.$nextArrow\n               .off('click.slick')\n               .on('click.slick', {\n                    message: 'next'\n               }, _.changeSlide);\n        }\n\n    };\n\n    Slick.prototype.initDotEvents = function() {\n\n        var _ = this;\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n            $('li', _.$dots).on('click.slick', {\n                message: 'index'\n            }, _.changeSlide);\n        }\n\n        if ( _.options.dots === true && _.options.pauseOnDotsHover === true ) {\n\n            $('li', _.$dots)\n                .on('mouseenter.slick', $.proxy(_.interrupt, _, true))\n                .on('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n        }\n\n    };\n\n    Slick.prototype.initSlideEvents = function() {\n\n        var _ = this;\n\n        if ( _.options.pauseOnHover ) {\n\n            _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));\n            _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n        }\n\n    };\n\n    Slick.prototype.initializeEvents = function() {\n\n        var _ = this;\n\n        _.initArrowEvents();\n\n        _.initDotEvents();\n        _.initSlideEvents();\n\n        _.$list.on('touchstart.slick mousedown.slick', {\n            action: 'start'\n        }, _.swipeHandler);\n        _.$list.on('touchmove.slick mousemove.slick', {\n            action: 'move'\n        }, _.swipeHandler);\n        _.$list.on('touchend.slick mouseup.slick', {\n            action: 'end'\n        }, _.swipeHandler);\n        _.$list.on('touchcancel.slick mouseleave.slick', {\n            action: 'end'\n        }, _.swipeHandler);\n\n        _.$list.on('click.slick', _.clickHandler);\n\n        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));\n\n        if (_.options.accessibility === true) {\n            _.$list.on('keydown.slick', _.keyHandler);\n        }\n\n        if (_.options.focusOnSelect === true) {\n            $(_.$slideTrack).children().on('click.slick', _.selectHandler);\n        }\n\n        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));\n\n        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));\n\n        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);\n\n        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);\n        $(document).on('ready.slick.slick-' + _.instanceUid, _.setPosition);\n\n    };\n\n    Slick.prototype.initUI = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$prevArrow.show();\n            _.$nextArrow.show();\n\n        }\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$dots.show();\n\n        }\n\n    };\n\n    Slick.prototype.keyHandler = function(event) {\n\n        var _ = this;\n         //Dont slide if the cursor is inside the form fields and arrow keys are pressed\n        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {\n            if (event.keyCode === 37 && _.options.accessibility === true) {\n                _.changeSlide({\n                    data: {\n                        message: _.options.rtl === true ? 'next' :  'previous'\n                    }\n                });\n            } else if (event.keyCode === 39 && _.options.accessibility === true) {\n                _.changeSlide({\n                    data: {\n                        message: _.options.rtl === true ? 'previous' : 'next'\n                    }\n                });\n            }\n        }\n\n    };\n\n    Slick.prototype.lazyLoad = function() {\n\n        var _ = this,\n            loadRange, cloneRange, rangeStart, rangeEnd;\n\n        function loadImages(imagesScope) {\n\n            $('img[data-lazy]', imagesScope).each(function() {\n\n                var image = $(this),\n                    imageSource = $(this).attr('data-lazy'),\n                    imageToLoad = document.createElement('img');\n\n                imageToLoad.onload = function() {\n\n                    image\n                        .animate({ opacity: 0 }, 100, function() {\n                            image\n                                .attr('src', imageSource)\n                                .animate({ opacity: 1 }, 200, function() {\n                                    image\n                                        .removeAttr('data-lazy')\n                                        .removeClass('slick-loading');\n                                });\n                            _.$slider.trigger('lazyLoaded', [_, image, imageSource]);\n                        });\n\n                };\n\n                imageToLoad.onerror = function() {\n\n                    image\n                        .removeAttr( 'data-lazy' )\n                        .removeClass( 'slick-loading' )\n                        .addClass( 'slick-lazyload-error' );\n\n                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);\n\n                };\n\n                imageToLoad.src = imageSource;\n\n            });\n\n        }\n\n        if (_.options.centerMode === true) {\n            if (_.options.infinite === true) {\n                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);\n                rangeEnd = rangeStart + _.options.slidesToShow + 2;\n            } else {\n                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));\n                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;\n            }\n        } else {\n            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;\n            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);\n            if (_.options.fade === true) {\n                if (rangeStart > 0) rangeStart--;\n                if (rangeEnd <= _.slideCount) rangeEnd++;\n            }\n        }\n\n        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);\n        loadImages(loadRange);\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            cloneRange = _.$slider.find('.slick-slide');\n            loadImages(cloneRange);\n        } else\n        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {\n            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);\n            loadImages(cloneRange);\n        } else if (_.currentSlide === 0) {\n            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);\n            loadImages(cloneRange);\n        }\n\n    };\n\n    Slick.prototype.loadSlider = function() {\n\n        var _ = this;\n\n        _.setPosition();\n\n        _.$slideTrack.css({\n            opacity: 1\n        });\n\n        _.$slider.removeClass('slick-loading');\n\n        _.initUI();\n\n        if (_.options.lazyLoad === 'progressive') {\n            _.progressiveLazyLoad();\n        }\n\n    };\n\n    Slick.prototype.next = Slick.prototype.slickNext = function() {\n\n        var _ = this;\n\n        _.changeSlide({\n            data: {\n                message: 'next'\n            }\n        });\n\n    };\n\n    Slick.prototype.orientationChange = function() {\n\n        var _ = this;\n\n        _.checkResponsive();\n        _.setPosition();\n\n    };\n\n    Slick.prototype.pause = Slick.prototype.slickPause = function() {\n\n        var _ = this;\n\n        _.autoPlayClear();\n        _.paused = true;\n\n    };\n\n    Slick.prototype.play = Slick.prototype.slickPlay = function() {\n\n        var _ = this;\n\n        _.autoPlay();\n        _.options.autoplay = true;\n        _.paused = false;\n        _.focussed = false;\n        _.interrupted = false;\n\n    };\n\n    Slick.prototype.postSlide = function(index) {\n\n        var _ = this;\n\n        if( !_.unslicked ) {\n\n            _.$slider.trigger('afterChange', [_, index]);\n\n            _.animating = false;\n\n            _.setPosition();\n\n            _.swipeLeft = null;\n\n            if ( _.options.autoplay ) {\n                _.autoPlay();\n            }\n\n            if (_.options.accessibility === true) {\n                _.initADA();\n            }\n\n        }\n\n    };\n\n    Slick.prototype.prev = Slick.prototype.slickPrev = function() {\n\n        var _ = this;\n\n        _.changeSlide({\n            data: {\n                message: 'previous'\n            }\n        });\n\n    };\n\n    Slick.prototype.preventDefault = function(event) {\n\n        event.preventDefault();\n\n    };\n\n    Slick.prototype.progressiveLazyLoad = function( tryCount ) {\n\n        tryCount = tryCount || 1;\n\n        var _ = this,\n            $imgsToLoad = $( 'img[data-lazy]', _.$slider ),\n            image,\n            imageSource,\n            imageToLoad;\n\n        if ( $imgsToLoad.length ) {\n\n            image = $imgsToLoad.first();\n            imageSource = image.attr('data-lazy');\n            imageToLoad = document.createElement('img');\n\n            imageToLoad.onload = function() {\n\n                image\n                    .attr( 'src', imageSource )\n                    .removeAttr('data-lazy')\n                    .removeClass('slick-loading');\n\n                if ( _.options.adaptiveHeight === true ) {\n                    _.setPosition();\n                }\n\n                _.$slider.trigger('lazyLoaded', [ _, image, imageSource ]);\n                _.progressiveLazyLoad();\n\n            };\n\n            imageToLoad.onerror = function() {\n\n                if ( tryCount < 3 ) {\n\n                    /**\n                     * try to load the image 3 times,\n                     * leave a slight delay so we don't get\n                     * servers blocking the request.\n                     */\n                    setTimeout( function() {\n                        _.progressiveLazyLoad( tryCount + 1 );\n                    }, 500 );\n\n                } else {\n\n                    image\n                        .removeAttr( 'data-lazy' )\n                        .removeClass( 'slick-loading' )\n                        .addClass( 'slick-lazyload-error' );\n\n                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);\n\n                    _.progressiveLazyLoad();\n\n                }\n\n            };\n\n            imageToLoad.src = imageSource;\n\n        } else {\n\n            _.$slider.trigger('allImagesLoaded', [ _ ]);\n\n        }\n\n    };\n\n    Slick.prototype.refresh = function( initializing ) {\n\n        var _ = this, currentSlide, lastVisibleIndex;\n\n        lastVisibleIndex = _.slideCount - _.options.slidesToShow;\n\n        // in non-infinite sliders, we don't want to go past the\n        // last visible index.\n        if( !_.options.infinite && ( _.currentSlide > lastVisibleIndex )) {\n            _.currentSlide = lastVisibleIndex;\n        }\n\n        // if less slides than to show, go to start.\n        if ( _.slideCount <= _.options.slidesToShow ) {\n            _.currentSlide = 0;\n\n        }\n\n        currentSlide = _.currentSlide;\n\n        _.destroy(true);\n\n        $.extend(_, _.initials, { currentSlide: currentSlide });\n\n        _.init();\n\n        if( !initializing ) {\n\n            _.changeSlide({\n                data: {\n                    message: 'index',\n                    index: currentSlide\n                }\n            }, false);\n\n        }\n\n    };\n\n    Slick.prototype.registerBreakpoints = function() {\n\n        var _ = this, breakpoint, currentBreakpoint, l,\n            responsiveSettings = _.options.responsive || null;\n\n        if ( $.type(responsiveSettings) === 'array' && responsiveSettings.length ) {\n\n            _.respondTo = _.options.respondTo || 'window';\n\n            for ( breakpoint in responsiveSettings ) {\n\n                l = _.breakpoints.length-1;\n                currentBreakpoint = responsiveSettings[breakpoint].breakpoint;\n\n                if (responsiveSettings.hasOwnProperty(breakpoint)) {\n\n                    // loop through the breakpoints and cut out any existing\n                    // ones with the same breakpoint number, we don't want dupes.\n                    while( l >= 0 ) {\n                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {\n                            _.breakpoints.splice(l,1);\n                        }\n                        l--;\n                    }\n\n                    _.breakpoints.push(currentBreakpoint);\n                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;\n\n                }\n\n            }\n\n            _.breakpoints.sort(function(a, b) {\n                return ( _.options.mobileFirst ) ? a-b : b-a;\n            });\n\n        }\n\n    };\n\n    Slick.prototype.reinit = function() {\n\n        var _ = this;\n\n        _.$slides =\n            _.$slideTrack\n                .children(_.options.slide)\n                .addClass('slick-slide');\n\n        _.slideCount = _.$slides.length;\n\n        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {\n            _.currentSlide = _.currentSlide - _.options.slidesToScroll;\n        }\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            _.currentSlide = 0;\n        }\n\n        _.registerBreakpoints();\n\n        _.setProps();\n        _.setupInfinite();\n        _.buildArrows();\n        _.updateArrows();\n        _.initArrowEvents();\n        _.buildDots();\n        _.updateDots();\n        _.initDotEvents();\n        _.cleanUpSlideEvents();\n        _.initSlideEvents();\n\n        _.checkResponsive(false, true);\n\n        if (_.options.focusOnSelect === true) {\n            $(_.$slideTrack).children().on('click.slick', _.selectHandler);\n        }\n\n        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);\n\n        _.setPosition();\n        _.focusHandler();\n\n        _.paused = !_.options.autoplay;\n        _.autoPlay();\n\n        _.$slider.trigger('reInit', [_]);\n\n    };\n\n    Slick.prototype.resize = function() {\n\n        var _ = this;\n\n        if ($(window).width() !== _.windowWidth) {\n            clearTimeout(_.windowDelay);\n            _.windowDelay = window.setTimeout(function() {\n                _.windowWidth = $(window).width();\n                _.checkResponsive();\n                if( !_.unslicked ) { _.setPosition(); }\n            }, 50);\n        }\n    };\n\n    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {\n\n        var _ = this;\n\n        if (typeof(index) === 'boolean') {\n            removeBefore = index;\n            index = removeBefore === true ? 0 : _.slideCount - 1;\n        } else {\n            index = removeBefore === true ? --index : index;\n        }\n\n        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {\n            return false;\n        }\n\n        _.unload();\n\n        if (removeAll === true) {\n            _.$slideTrack.children().remove();\n        } else {\n            _.$slideTrack.children(this.options.slide).eq(index).remove();\n        }\n\n        _.$slides = _.$slideTrack.children(this.options.slide);\n\n        _.$slideTrack.children(this.options.slide).detach();\n\n        _.$slideTrack.append(_.$slides);\n\n        _.$slidesCache = _.$slides;\n\n        _.reinit();\n\n    };\n\n    Slick.prototype.setCSS = function(position) {\n\n        var _ = this,\n            positionProps = {},\n            x, y;\n\n        if (_.options.rtl === true) {\n            position = -position;\n        }\n        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';\n        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';\n\n        positionProps[_.positionProp] = position;\n\n        if (_.transformsEnabled === false) {\n            _.$slideTrack.css(positionProps);\n        } else {\n            positionProps = {};\n            if (_.cssTransitions === false) {\n                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';\n                _.$slideTrack.css(positionProps);\n            } else {\n                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';\n                _.$slideTrack.css(positionProps);\n            }\n        }\n\n    };\n\n    Slick.prototype.setDimensions = function() {\n\n        var _ = this;\n\n        if (_.options.vertical === false) {\n            if (_.options.centerMode === true) {\n                _.$list.css({\n                    padding: ('0px ' + _.options.centerPadding)\n                });\n            }\n        } else {\n            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);\n            if (_.options.centerMode === true) {\n                _.$list.css({\n                    padding: (_.options.centerPadding + ' 0px')\n                });\n            }\n        }\n\n        _.listWidth = _.$list.width();\n        _.listHeight = _.$list.height();\n\n\n        if (_.options.vertical === false && _.options.variableWidth === false) {\n            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);\n            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));\n\n        } else if (_.options.variableWidth === true) {\n            _.$slideTrack.width(5000 * _.slideCount);\n        } else {\n            _.slideWidth = Math.ceil(_.listWidth);\n            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));\n        }\n\n        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();\n        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);\n\n    };\n\n    Slick.prototype.setFade = function() {\n\n        var _ = this,\n            targetLeft;\n\n        _.$slides.each(function(index, element) {\n            targetLeft = (_.slideWidth * index) * -1;\n            if (_.options.rtl === true) {\n                $(element).css({\n                    position: 'relative',\n                    right: targetLeft,\n                    top: 0,\n                    zIndex: _.options.zIndex - 2,\n                    opacity: 0\n                });\n            } else {\n                $(element).css({\n                    position: 'relative',\n                    left: targetLeft,\n                    top: 0,\n                    zIndex: _.options.zIndex - 2,\n                    opacity: 0\n                });\n            }\n        });\n\n        _.$slides.eq(_.currentSlide).css({\n            zIndex: _.options.zIndex - 1,\n            opacity: 1\n        });\n\n    };\n\n    Slick.prototype.setHeight = function() {\n\n        var _ = this;\n\n        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {\n            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);\n            _.$list.css('height', targetHeight);\n        }\n\n    };\n\n    Slick.prototype.setOption =\n    Slick.prototype.slickSetOption = function() {\n\n        /**\n         * accepts arguments in format of:\n         *\n         *  - for changing a single option's value:\n         *     .slick(\"setOption\", option, value, refresh )\n         *\n         *  - for changing a set of responsive options:\n         *     .slick(\"setOption\", 'responsive', [{}, ...], refresh )\n         *\n         *  - for updating multiple values at once (not responsive)\n         *     .slick(\"setOption\", { 'option': value, ... }, refresh )\n         */\n\n        var _ = this, l, item, option, value, refresh = false, type;\n\n        if( $.type( arguments[0] ) === 'object' ) {\n\n            option =  arguments[0];\n            refresh = arguments[1];\n            type = 'multiple';\n\n        } else if ( $.type( arguments[0] ) === 'string' ) {\n\n            option =  arguments[0];\n            value = arguments[1];\n            refresh = arguments[2];\n\n            if ( arguments[0] === 'responsive' && $.type( arguments[1] ) === 'array' ) {\n\n                type = 'responsive';\n\n            } else if ( typeof arguments[1] !== 'undefined' ) {\n\n                type = 'single';\n\n            }\n\n        }\n\n        if ( type === 'single' ) {\n\n            _.options[option] = value;\n\n\n        } else if ( type === 'multiple' ) {\n\n            $.each( option , function( opt, val ) {\n\n                _.options[opt] = val;\n\n            });\n\n\n        } else if ( type === 'responsive' ) {\n\n            for ( item in value ) {\n\n                if( $.type( _.options.responsive ) !== 'array' ) {\n\n                    _.options.responsive = [ value[item] ];\n\n                } else {\n\n                    l = _.options.responsive.length-1;\n\n                    // loop through the responsive object and splice out duplicates.\n                    while( l >= 0 ) {\n\n                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {\n\n                            _.options.responsive.splice(l,1);\n\n                        }\n\n                        l--;\n\n                    }\n\n                    _.options.responsive.push( value[item] );\n\n                }\n\n            }\n\n        }\n\n        if ( refresh ) {\n\n            _.unload();\n            _.reinit();\n\n        }\n\n    };\n\n    Slick.prototype.setPosition = function() {\n\n        var _ = this;\n\n        _.setDimensions();\n\n        _.setHeight();\n\n        if (_.options.fade === false) {\n            _.setCSS(_.getLeft(_.currentSlide));\n        } else {\n            _.setFade();\n        }\n\n        _.$slider.trigger('setPosition', [_]);\n\n    };\n\n    Slick.prototype.setProps = function() {\n\n        var _ = this,\n            bodyStyle = document.body.style;\n\n        _.positionProp = _.options.vertical === true ? 'top' : 'left';\n\n        if (_.positionProp === 'top') {\n            _.$slider.addClass('slick-vertical');\n        } else {\n            _.$slider.removeClass('slick-vertical');\n        }\n\n        if (bodyStyle.WebkitTransition !== undefined ||\n            bodyStyle.MozTransition !== undefined ||\n            bodyStyle.msTransition !== undefined) {\n            if (_.options.useCSS === true) {\n                _.cssTransitions = true;\n            }\n        }\n\n        if ( _.options.fade ) {\n            if ( typeof _.options.zIndex === 'number' ) {\n                if( _.options.zIndex < 3 ) {\n                    _.options.zIndex = 3;\n                }\n            } else {\n                _.options.zIndex = _.defaults.zIndex;\n            }\n        }\n\n        if (bodyStyle.OTransform !== undefined) {\n            _.animType = 'OTransform';\n            _.transformType = '-o-transform';\n            _.transitionType = 'OTransition';\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;\n        }\n        if (bodyStyle.MozTransform !== undefined) {\n            _.animType = 'MozTransform';\n            _.transformType = '-moz-transform';\n            _.transitionType = 'MozTransition';\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;\n        }\n        if (bodyStyle.webkitTransform !== undefined) {\n            _.animType = 'webkitTransform';\n            _.transformType = '-webkit-transform';\n            _.transitionType = 'webkitTransition';\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;\n        }\n        if (bodyStyle.msTransform !== undefined) {\n            _.animType = 'msTransform';\n            _.transformType = '-ms-transform';\n            _.transitionType = 'msTransition';\n            if (bodyStyle.msTransform === undefined) _.animType = false;\n        }\n        if (bodyStyle.transform !== undefined && _.animType !== false) {\n            _.animType = 'transform';\n            _.transformType = 'transform';\n            _.transitionType = 'transition';\n        }\n        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);\n    };\n\n\n    Slick.prototype.setSlideClasses = function(index) {\n\n        var _ = this,\n            centerOffset, allSlides, indexOffset, remainder;\n\n        allSlides = _.$slider\n            .find('.slick-slide')\n            .removeClass('slick-active slick-center slick-current')\n            .attr('aria-hidden', 'true');\n\n        _.$slides\n            .eq(index)\n            .addClass('slick-current');\n\n        if (_.options.centerMode === true) {\n\n            centerOffset = Math.floor(_.options.slidesToShow / 2);\n\n            if (_.options.infinite === true) {\n\n                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {\n\n                    _.$slides\n                        .slice(index - centerOffset, index + centerOffset + 1)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                } else {\n\n                    indexOffset = _.options.slidesToShow + index;\n                    allSlides\n                        .slice(indexOffset - centerOffset + 1, indexOffset + centerOffset + 2)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                }\n\n                if (index === 0) {\n\n                    allSlides\n                        .eq(allSlides.length - 1 - _.options.slidesToShow)\n                        .addClass('slick-center');\n\n                } else if (index === _.slideCount - 1) {\n\n                    allSlides\n                        .eq(_.options.slidesToShow)\n                        .addClass('slick-center');\n\n                }\n\n            }\n\n            _.$slides\n                .eq(index)\n                .addClass('slick-center');\n\n        } else {\n\n            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {\n\n                _.$slides\n                    .slice(index, index + _.options.slidesToShow)\n                    .addClass('slick-active')\n                    .attr('aria-hidden', 'false');\n\n            } else if (allSlides.length <= _.options.slidesToShow) {\n\n                allSlides\n                    .addClass('slick-active')\n                    .attr('aria-hidden', 'false');\n\n            } else {\n\n                remainder = _.slideCount % _.options.slidesToShow;\n                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;\n\n                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {\n\n                    allSlides\n                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                } else {\n\n                    allSlides\n                        .slice(indexOffset, indexOffset + _.options.slidesToShow)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                }\n\n            }\n\n        }\n\n        if (_.options.lazyLoad === 'ondemand') {\n            _.lazyLoad();\n        }\n\n    };\n\n    Slick.prototype.setupInfinite = function() {\n\n        var _ = this,\n            i, slideIndex, infiniteCount;\n\n        if (_.options.fade === true) {\n            _.options.centerMode = false;\n        }\n\n        if (_.options.infinite === true && _.options.fade === false) {\n\n            slideIndex = null;\n\n            if (_.slideCount > _.options.slidesToShow) {\n\n                if (_.options.centerMode === true) {\n                    infiniteCount = _.options.slidesToShow + 1;\n                } else {\n                    infiniteCount = _.options.slidesToShow;\n                }\n\n                for (i = _.slideCount; i > (_.slideCount -\n                        infiniteCount); i -= 1) {\n                    slideIndex = i - 1;\n                    $(_.$slides[slideIndex]).clone(true).attr('id', '')\n                        .attr('data-slick-index', slideIndex - _.slideCount)\n                        .prependTo(_.$slideTrack).addClass('slick-cloned');\n                }\n                for (i = 0; i < infiniteCount; i += 1) {\n                    slideIndex = i;\n                    $(_.$slides[slideIndex]).clone(true).attr('id', '')\n                        .attr('data-slick-index', slideIndex + _.slideCount)\n                        .appendTo(_.$slideTrack).addClass('slick-cloned');\n                }\n                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {\n                    $(this).attr('id', '');\n                });\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.interrupt = function( toggle ) {\n\n        var _ = this;\n\n        if( !toggle ) {\n            _.autoPlay();\n        }\n        _.interrupted = toggle;\n\n    };\n\n    Slick.prototype.selectHandler = function(event) {\n\n        var _ = this;\n\n        var targetElement =\n            $(event.target).is('.slick-slide') ?\n                $(event.target) :\n                $(event.target).parents('.slick-slide');\n\n        var index = parseInt(targetElement.attr('data-slick-index'));\n\n        if (!index) index = 0;\n\n        if (_.slideCount <= _.options.slidesToShow) {\n\n            _.setSlideClasses(index);\n            _.asNavFor(index);\n            return;\n\n        }\n\n        _.slideHandler(index);\n\n    };\n\n    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {\n\n        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,\n            _ = this, navTarget;\n\n        sync = sync || false;\n\n        if (_.animating === true && _.options.waitForAnimate === true) {\n            return;\n        }\n\n        if (_.options.fade === true && _.currentSlide === index) {\n            return;\n        }\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            return;\n        }\n\n        if (sync === false) {\n            _.asNavFor(index);\n        }\n\n        targetSlide = index;\n        targetLeft = _.getLeft(targetSlide);\n        slideLeft = _.getLeft(_.currentSlide);\n\n        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;\n\n        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {\n            if (_.options.fade === false) {\n                targetSlide = _.currentSlide;\n                if (dontAnimate !== true) {\n                    _.animateSlide(slideLeft, function() {\n                        _.postSlide(targetSlide);\n                    });\n                } else {\n                    _.postSlide(targetSlide);\n                }\n            }\n            return;\n        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {\n            if (_.options.fade === false) {\n                targetSlide = _.currentSlide;\n                if (dontAnimate !== true) {\n                    _.animateSlide(slideLeft, function() {\n                        _.postSlide(targetSlide);\n                    });\n                } else {\n                    _.postSlide(targetSlide);\n                }\n            }\n            return;\n        }\n\n        if ( _.options.autoplay ) {\n            clearInterval(_.autoPlayTimer);\n        }\n\n        if (targetSlide < 0) {\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\n                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);\n            } else {\n                animSlide = _.slideCount + targetSlide;\n            }\n        } else if (targetSlide >= _.slideCount) {\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\n                animSlide = 0;\n            } else {\n                animSlide = targetSlide - _.slideCount;\n            }\n        } else {\n            animSlide = targetSlide;\n        }\n\n        _.animating = true;\n\n        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);\n\n        oldSlide = _.currentSlide;\n        _.currentSlide = animSlide;\n\n        _.setSlideClasses(_.currentSlide);\n\n        if ( _.options.asNavFor ) {\n\n            navTarget = _.getNavTarget();\n            navTarget = navTarget.slick('getSlick');\n\n            if ( navTarget.slideCount <= navTarget.options.slidesToShow ) {\n                navTarget.setSlideClasses(_.currentSlide);\n            }\n\n        }\n\n        _.updateDots();\n        _.updateArrows();\n\n        if (_.options.fade === true) {\n            if (dontAnimate !== true) {\n\n                _.fadeSlideOut(oldSlide);\n\n                _.fadeSlide(animSlide, function() {\n                    _.postSlide(animSlide);\n                });\n\n            } else {\n                _.postSlide(animSlide);\n            }\n            _.animateHeight();\n            return;\n        }\n\n        if (dontAnimate !== true) {\n            _.animateSlide(targetLeft, function() {\n                _.postSlide(animSlide);\n            });\n        } else {\n            _.postSlide(animSlide);\n        }\n\n    };\n\n    Slick.prototype.startLoad = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$prevArrow.hide();\n            _.$nextArrow.hide();\n\n        }\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$dots.hide();\n\n        }\n\n        _.$slider.addClass('slick-loading');\n\n    };\n\n    Slick.prototype.swipeDirection = function() {\n\n        var xDist, yDist, r, swipeAngle, _ = this;\n\n        xDist = _.touchObject.startX - _.touchObject.curX;\n        yDist = _.touchObject.startY - _.touchObject.curY;\n        r = Math.atan2(yDist, xDist);\n\n        swipeAngle = Math.round(r * 180 / Math.PI);\n        if (swipeAngle < 0) {\n            swipeAngle = 360 - Math.abs(swipeAngle);\n        }\n\n        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {\n            return (_.options.rtl === false ? 'left' : 'right');\n        }\n        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {\n            return (_.options.rtl === false ? 'left' : 'right');\n        }\n        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {\n            return (_.options.rtl === false ? 'right' : 'left');\n        }\n        if (_.options.verticalSwiping === true) {\n            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {\n                return 'down';\n            } else {\n                return 'up';\n            }\n        }\n\n        return 'vertical';\n\n    };\n\n    Slick.prototype.swipeEnd = function(event) {\n\n        var _ = this,\n            slideCount,\n            direction;\n\n        _.dragging = false;\n        _.interrupted = false;\n        _.shouldClick = ( _.touchObject.swipeLength > 10 ) ? false : true;\n\n        if ( _.touchObject.curX === undefined ) {\n            return false;\n        }\n\n        if ( _.touchObject.edgeHit === true ) {\n            _.$slider.trigger('edge', [_, _.swipeDirection() ]);\n        }\n\n        if ( _.touchObject.swipeLength >= _.touchObject.minSwipe ) {\n\n            direction = _.swipeDirection();\n\n            switch ( direction ) {\n\n                case 'left':\n                case 'down':\n\n                    slideCount =\n                        _.options.swipeToSlide ?\n                            _.checkNavigable( _.currentSlide + _.getSlideCount() ) :\n                            _.currentSlide + _.getSlideCount();\n\n                    _.currentDirection = 0;\n\n                    break;\n\n                case 'right':\n                case 'up':\n\n                    slideCount =\n                        _.options.swipeToSlide ?\n                            _.checkNavigable( _.currentSlide - _.getSlideCount() ) :\n                            _.currentSlide - _.getSlideCount();\n\n                    _.currentDirection = 1;\n\n                    break;\n\n                default:\n\n\n            }\n\n            if( direction != 'vertical' ) {\n\n                _.slideHandler( slideCount );\n                _.touchObject = {};\n                _.$slider.trigger('swipe', [_, direction ]);\n\n            }\n\n        } else {\n\n            if ( _.touchObject.startX !== _.touchObject.curX ) {\n\n                _.slideHandler( _.currentSlide );\n                _.touchObject = {};\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.swipeHandler = function(event) {\n\n        var _ = this;\n\n        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {\n            return;\n        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {\n            return;\n        }\n\n        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?\n            event.originalEvent.touches.length : 1;\n\n        _.touchObject.minSwipe = _.listWidth / _.options\n            .touchThreshold;\n\n        if (_.options.verticalSwiping === true) {\n            _.touchObject.minSwipe = _.listHeight / _.options\n                .touchThreshold;\n        }\n\n        switch (event.data.action) {\n\n            case 'start':\n                _.swipeStart(event);\n                break;\n\n            case 'move':\n                _.swipeMove(event);\n                break;\n\n            case 'end':\n                _.swipeEnd(event);\n                break;\n\n        }\n\n    };\n\n    Slick.prototype.swipeMove = function(event) {\n\n        var _ = this,\n            edgeWasHit = false,\n            curLeft, swipeDirection, swipeLength, positionOffset, touches;\n\n        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;\n\n        if (!_.dragging || touches && touches.length !== 1) {\n            return false;\n        }\n\n        curLeft = _.getLeft(_.currentSlide);\n\n        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;\n        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;\n\n        _.touchObject.swipeLength = Math.round(Math.sqrt(\n            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));\n\n        if (_.options.verticalSwiping === true) {\n            _.touchObject.swipeLength = Math.round(Math.sqrt(\n                Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));\n        }\n\n        swipeDirection = _.swipeDirection();\n\n        if (swipeDirection === 'vertical') {\n            return;\n        }\n\n        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {\n            event.preventDefault();\n        }\n\n        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);\n        if (_.options.verticalSwiping === true) {\n            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;\n        }\n\n\n        swipeLength = _.touchObject.swipeLength;\n\n        _.touchObject.edgeHit = false;\n\n        if (_.options.infinite === false) {\n            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {\n                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;\n                _.touchObject.edgeHit = true;\n            }\n        }\n\n        if (_.options.vertical === false) {\n            _.swipeLeft = curLeft + swipeLength * positionOffset;\n        } else {\n            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;\n        }\n        if (_.options.verticalSwiping === true) {\n            _.swipeLeft = curLeft + swipeLength * positionOffset;\n        }\n\n        if (_.options.fade === true || _.options.touchMove === false) {\n            return false;\n        }\n\n        if (_.animating === true) {\n            _.swipeLeft = null;\n            return false;\n        }\n\n        _.setCSS(_.swipeLeft);\n\n    };\n\n    Slick.prototype.swipeStart = function(event) {\n\n        var _ = this,\n            touches;\n\n        _.interrupted = true;\n\n        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {\n            _.touchObject = {};\n            return false;\n        }\n\n        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {\n            touches = event.originalEvent.touches[0];\n        }\n\n        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;\n        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;\n\n        _.dragging = true;\n\n    };\n\n    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {\n\n        var _ = this;\n\n        if (_.$slidesCache !== null) {\n\n            _.unload();\n\n            _.$slideTrack.children(this.options.slide).detach();\n\n            _.$slidesCache.appendTo(_.$slideTrack);\n\n            _.reinit();\n\n        }\n\n    };\n\n    Slick.prototype.unload = function() {\n\n        var _ = this;\n\n        $('.slick-cloned', _.$slider).remove();\n\n        if (_.$dots) {\n            _.$dots.remove();\n        }\n\n        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {\n            _.$prevArrow.remove();\n        }\n\n        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {\n            _.$nextArrow.remove();\n        }\n\n        _.$slides\n            .removeClass('slick-slide slick-active slick-visible slick-current')\n            .attr('aria-hidden', 'true')\n            .css('width', '');\n\n    };\n\n    Slick.prototype.unslick = function(fromBreakpoint) {\n\n        var _ = this;\n        _.$slider.trigger('unslick', [_, fromBreakpoint]);\n        _.destroy();\n\n    };\n\n    Slick.prototype.updateArrows = function() {\n\n        var _ = this,\n            centerOffset;\n\n        centerOffset = Math.floor(_.options.slidesToShow / 2);\n\n        if ( _.options.arrows === true &&\n            _.slideCount > _.options.slidesToShow &&\n            !_.options.infinite ) {\n\n            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            if (_.currentSlide === 0) {\n\n                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\n                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {\n\n                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\n                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {\n\n                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\n                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.updateDots = function() {\n\n        var _ = this;\n\n        if (_.$dots !== null) {\n\n            _.$dots\n                .find('li')\n                .removeClass('slick-active')\n                .attr('aria-hidden', 'true');\n\n            _.$dots\n                .find('li')\n                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))\n                .addClass('slick-active')\n                .attr('aria-hidden', 'false');\n\n        }\n\n    };\n\n    Slick.prototype.visibility = function() {\n\n        var _ = this;\n\n        if ( _.options.autoplay ) {\n\n            if ( document[_.hidden] ) {\n\n                _.interrupted = true;\n\n            } else {\n\n                _.interrupted = false;\n\n            }\n\n        }\n\n    };\n\n    $.fn.slick = function() {\n        var _ = this,\n            opt = arguments[0],\n            args = Array.prototype.slice.call(arguments, 1),\n            l = _.length,\n            i,\n            ret;\n        for (i = 0; i < l; i++) {\n            if (typeof opt == 'object' || typeof opt == 'undefined')\n                _[i].slick = new Slick(_[i], opt);\n            else\n                ret = _[i].slick[opt].apply(_[i].slick, args);\n            if (typeof ret != 'undefined') return ret;\n        }\n        return _;\n    };\n\n}));\n"},"6MXy":function(e,t,n){n("8rVx")(n("B1G+"))},"73xv":function(e,t,n){var i,r;(function(o,s){if(true){!(i=[n("wd/R"),n("EVdn")],r=function(e,t){return o.daterangepicker=s(e,t)}.apply(t,i),r!==undefined&&(e.exports=r))}else{var a}})(this,(function(e,t){var n=function(n,i,r){this.parentEl="body";this.element=t(n);this.startDate=e().startOf("day");this.endDate=e().endOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.autoApply=false;this.singleDatePicker=false;this.showDropdowns=false;this.showWeekNumbers=false;this.showISOWeekNumbers=false;this.showCustomRangeLabel=true;this.timePicker=false;this.timePicker24Hour=false;this.timePickerIncrement=1;this.timePickerSeconds=false;this.linkedCalendars=true;this.autoUpdateInput=true;this.alwaysShowCalendars=false;this.ranges={};this.opens="right";if(this.element.hasClass("pull-right"))this.opens="left";this.drops="down";if(this.element.hasClass("dropup"))this.drops="up";this.buttonClasses="btn btn-sm";this.applyClass="btn-success";this.cancelClass="btn-default";this.locale={direction:"ltr",format:e.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e.weekdaysMin(),monthNames:e.monthsShort(),firstDay:e.localeData().firstDayOfWeek()};this.callback=function(){};this.isShowing=false;this.leftCalendar={};this.rightCalendar={};if(typeof i!=="object"||i===null)i={};i=t.extend(this.element.data(),i);if(typeof i.template!=="string"&&!(i.template instanceof t))i.template='<div class="daterangepicker dropdown-menu">'+'<div class="calendar left">'+'<div class="daterangepicker_input">'+'<input class="input-mini form-control" type="text" name="daterangepicker_start" value="" />'+'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+'<div class="calendar-time">'+"<div></div>"+'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+"</div>"+"</div>"+'<div class="calendar-table"></div>'+"</div>"+'<div class="calendar right">'+'<div class="daterangepicker_input">'+'<input class="input-mini form-control" type="text" name="daterangepicker_end" value="" />'+'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+'<div class="calendar-time">'+"<div></div>"+'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+"</div>"+"</div>"+'<div class="calendar-table"></div>'+"</div>"+'<div class="ranges">'+'<div class="range_inputs">'+'<button class="applyBtn" disabled="disabled" type="button"></button> '+'<button class="cancelBtn" type="button"></button>'+"</div>"+"</div>"+"</div>";this.parentEl=i.parentEl&&t(i.parentEl).length?t(i.parentEl):t(this.parentEl);this.container=t(i.template).appendTo(this.parentEl);if(typeof i.locale==="object"){if(typeof i.locale.direction==="string")this.locale.direction=i.locale.direction;if(typeof i.locale.format==="string")this.locale.format=i.locale.format;if(typeof i.locale.separator==="string")this.locale.separator=i.locale.separator;if(typeof i.locale.daysOfWeek==="object")this.locale.daysOfWeek=i.locale.daysOfWeek.slice();if(typeof i.locale.monthNames==="object")this.locale.monthNames=i.locale.monthNames.slice();if(typeof i.locale.firstDay==="number")this.locale.firstDay=i.locale.firstDay;if(typeof i.locale.applyLabel==="string")this.locale.applyLabel=i.locale.applyLabel;if(typeof i.locale.cancelLabel==="string")this.locale.cancelLabel=i.locale.cancelLabel;if(typeof i.locale.weekLabel==="string")this.locale.weekLabel=i.locale.weekLabel;if(typeof i.locale.customRangeLabel==="string"){var o=document.createElement("textarea");o.innerHTML=i.locale.customRangeLabel;var s=o.value;this.locale.customRangeLabel=s}}this.container.addClass(this.locale.direction);if(typeof i.startDate==="string")this.startDate=e(i.startDate,this.locale.format);if(typeof i.endDate==="string")this.endDate=e(i.endDate,this.locale.format);if(typeof i.minDate==="string")this.minDate=e(i.minDate,this.locale.format);if(typeof i.maxDate==="string")this.maxDate=e(i.maxDate,this.locale.format);if(typeof i.startDate==="object")this.startDate=e(i.startDate);if(typeof i.endDate==="object")this.endDate=e(i.endDate);if(typeof i.minDate==="object")this.minDate=e(i.minDate);if(typeof i.maxDate==="object")this.maxDate=e(i.maxDate);if(this.minDate&&this.startDate.isBefore(this.minDate))this.startDate=this.minDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))this.endDate=this.maxDate.clone();if(typeof i.applyClass==="string")this.applyClass=i.applyClass;if(typeof i.cancelClass==="string")this.cancelClass=i.cancelClass;if(typeof i.dateLimit==="object")this.dateLimit=i.dateLimit;if(typeof i.opens==="string")this.opens=i.opens;if(typeof i.drops==="string")this.drops=i.drops;if(typeof i.showWeekNumbers==="boolean")this.showWeekNumbers=i.showWeekNumbers;if(typeof i.showISOWeekNumbers==="boolean")this.showISOWeekNumbers=i.showISOWeekNumbers;if(typeof i.buttonClasses==="string")this.buttonClasses=i.buttonClasses;if(typeof i.buttonClasses==="object")this.buttonClasses=i.buttonClasses.join(" ");if(typeof i.showDropdowns==="boolean")this.showDropdowns=i.showDropdowns;if(typeof i.showCustomRangeLabel==="boolean")this.showCustomRangeLabel=i.showCustomRangeLabel;if(typeof i.singleDatePicker==="boolean"){this.singleDatePicker=i.singleDatePicker;if(this.singleDatePicker)this.endDate=this.startDate.clone()}if(typeof i.timePicker==="boolean")this.timePicker=i.timePicker;if(typeof i.timePickerSeconds==="boolean")this.timePickerSeconds=i.timePickerSeconds;if(typeof i.timePickerIncrement==="number")this.timePickerIncrement=i.timePickerIncrement;if(typeof i.timePicker24Hour==="boolean")this.timePicker24Hour=i.timePicker24Hour;if(typeof i.autoApply==="boolean")this.autoApply=i.autoApply;if(typeof i.autoUpdateInput==="boolean")this.autoUpdateInput=i.autoUpdateInput;if(typeof i.linkedCalendars==="boolean")this.linkedCalendars=i.linkedCalendars;if(typeof i.isInvalidDate==="function")this.isInvalidDate=i.isInvalidDate;if(typeof i.isCustomDate==="function")this.isCustomDate=i.isCustomDate;if(typeof i.alwaysShowCalendars==="boolean")this.alwaysShowCalendars=i.alwaysShowCalendars;if(this.locale.firstDay!=0){var a=this.locale.firstDay;while(a>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());a--}}var l,c,u;if(typeof i.startDate==="undefined"&&typeof i.endDate==="undefined"){if(t(this.element).is("input[type=text]")){var d=t(this.element).val(),p=d.split(this.locale.separator);l=c=null;if(p.length==2){l=e(p[0],this.locale.format);c=e(p[1],this.locale.format)}else if(this.singleDatePicker&&d!==""){l=e(d,this.locale.format);c=e(d,this.locale.format)}if(l!==null&&c!==null){this.setStartDate(l);this.setEndDate(c)}}}if(typeof i.ranges==="object"){for(u in i.ranges){if(typeof i.ranges[u][0]==="string")l=e(i.ranges[u][0],this.locale.format);else l=e(i.ranges[u][0]);if(typeof i.ranges[u][1]==="string")c=e(i.ranges[u][1],this.locale.format);else c=e(i.ranges[u][1]);if(this.minDate&&l.isBefore(this.minDate))l=this.minDate.clone();var h=this.maxDate;if(this.dateLimit&&h&&l.clone().add(this.dateLimit).isAfter(h))h=l.clone().add(this.dateLimit);if(h&&c.isAfter(h))c=h.clone();if(this.minDate&&c.isBefore(this.minDate,this.timepicker?"minute":"day")||h&&l.isAfter(h,this.timepicker?"minute":"day"))continue;var o=document.createElement("textarea");o.innerHTML=u;var s=o.value;this.ranges[s]=[l,c]}var f="<ul>";for(u in this.ranges){f+='<li data-range-key="'+u+'">'+u+"</li>"}if(this.showCustomRangeLabel){f+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"}f+="</ul>";this.container.find(".ranges").prepend(f)}if(typeof r==="function"){this.callback=r}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.endOf("day");this.container.find(".calendar-time").hide()}if(this.timePicker&&this.autoApply)this.autoApply=false;if(this.autoApply&&typeof i.ranges!=="object"){this.container.find(".ranges").hide()}else if(this.autoApply){this.container.find(".applyBtn, .cancelBtn").addClass("hide")}if(this.singleDatePicker){this.container.addClass("single");this.container.find(".calendar.left").addClass("single");this.container.find(".calendar.left").show();this.container.find(".calendar.right").hide();this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide();if(this.timePicker){this.container.find(".ranges ul").hide()}else{this.container.find(".ranges").hide()}}if(typeof i.ranges==="undefined"&&!this.singleDatePicker||this.alwaysShowCalendars){this.container.addClass("show-calendar")}this.container.addClass("opens"+this.opens);if(typeof i.ranges!=="undefined"&&this.opens=="right"){this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent())}this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);if(this.applyClass.length)this.container.find(".applyBtn").addClass(this.applyClass);if(this.cancelClass.length)this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",t.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",t.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",t.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",t.proxy(this.formInputsChanged,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this)).on("click.daterangepicker","li",t.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",t.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",t.proxy(this.updateFormInputs,this));if(this.element.is("input")||this.element.is("button")){this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.elementChanged,this),"keydown.daterangepicker":t.proxy(this.keydown,this)})}else{this.element.on("click.daterangepicker",t.proxy(this.toggle,this))}if(this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));this.element.trigger("change")}else if(this.element.is("input")&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger("change")}};n.prototype={constructor:n,setStartDate:function(t){if(typeof t==="string")this.startDate=e(t,this.locale.format);if(typeof t==="object")this.startDate=e(t);if(!this.timePicker)this.startDate=this.startDate.startOf("day");if(this.timePicker&&this.timePickerIncrement)this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.minDate&&this.startDate.isBefore(this.minDate)){this.startDate=this.minDate.clone();if(this.timePicker&&this.timePickerIncrement)this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)}if(this.maxDate&&this.startDate.isAfter(this.maxDate)){this.startDate=this.maxDate.clone();if(this.timePicker&&this.timePickerIncrement)this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)}if(!this.isShowing)this.updateElement();this.updateMonthsInView()},setEndDate:function(t){if(typeof t==="string")this.endDate=e(t,this.locale.format);if(typeof t==="object")this.endDate=e(t);if(!this.timePicker)this.endDate=this.endDate.endOf("day");if(this.timePicker&&this.timePickerIncrement)this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.endDate.isBefore(this.startDate))this.endDate=this.startDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))this.endDate=this.maxDate.clone();if(this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate))this.endDate=this.startDate.clone().add(this.dateLimit);this.previousRightTime=this.endDate.clone();if(!this.isShowing)this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return false},isCustomDate:function(){return false},updateView:function(){if(this.timePicker){this.renderTimePicker("left");this.renderTimePicker("right");if(!this.endDate){this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")}else{this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled")}}if(this.endDate){this.container.find('input[name="daterangepicker_end"]').removeClass("active");this.container.find('input[name="daterangepicker_start"]').addClass("active")}else{this.container.find('input[name="daterangepicker_end"]').addClass("active");this.container.find('input[name="daterangepicker_start"]').removeClass("active")}this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))){return}this.leftCalendar.month=this.startDate.clone().date(2);if(!this.linkedCalendars&&(this.endDate.month()!=this.startDate.month()||this.endDate.year()!=this.startDate.year())){this.rightCalendar.month=this.endDate.clone().date(2)}else{this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month")}}else{if(this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")){this.leftCalendar.month=this.startDate.clone().date(2);this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month")}}if(this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate){this.rightCalendar.month=this.maxDate.clone().date(2);this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month")}},updateCalendars:function(){if(this.timePicker){var e,t,n;if(this.endDate){e=parseInt(this.container.find(".left .hourselect").val(),10);t=parseInt(this.container.find(".left .minuteselect").val(),10);n=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;if(!this.timePicker24Hour){var i=this.container.find(".left .ampmselect").val();if(i==="PM"&&e<12)e+=12;if(i==="AM"&&e===12)e=0}}else{e=parseInt(this.container.find(".right .hourselect").val(),10);t=parseInt(this.container.find(".right .minuteselect").val(),10);n=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;if(!this.timePicker24Hour){var i=this.container.find(".right .ampmselect").val();if(i==="PM"&&e<12)e+=12;if(i==="AM"&&e===12)e=0}}this.leftCalendar.month.hour(e).minute(t).second(n);this.rightCalendar.month.hour(e).minute(t).second(n)}this.renderCalendar("left");this.renderCalendar("right");this.container.find(".ranges li").removeClass("active");if(this.endDate==null)return;this.calculateChosenLabel()},renderCalendar:function(n){var i=n=="left"?this.leftCalendar:this.rightCalendar;var r=i.month.month();var o=i.month.year();var s=i.month.hour();var a=i.month.minute();var l=i.month.second();var c=e([o,r]).daysInMonth();var u=e([o,r,1]);var d=e([o,r,c]);var p=e(u).subtract(1,"month").month();var h=e(u).subtract(1,"month").year();var f=e([h,p]).daysInMonth();var m=u.day();var i=[];i.firstDay=u;i.lastDay=d;for(var g=0;g<6;g++){i[g]=[]}var v=f-m+this.locale.firstDay+1;if(v>f)v-=7;if(m==this.locale.firstDay)v=f-6;var y=e([h,p,v,12,a,l]);var b,_;for(var g=0,b=0,_=0;g<42;g++,b++,y=e(y).add(24,"hour")){if(g>0&&b%7===0){b=0;_++}i[_][b]=y.clone().hour(s).minute(a).second(l);y.hour(12);if(this.minDate&&i[_][b].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&i[_][b].isBefore(this.minDate)&&n=="left"){i[_][b]=this.minDate.clone()}if(this.maxDate&&i[_][b].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&i[_][b].isAfter(this.maxDate)&&n=="right"){i[_][b]=this.maxDate.clone()}}if(n=="left"){this.leftCalendar.calendar=i}else{this.rightCalendar.calendar=i}var x=n=="left"?this.minDate:this.startDate;var w=this.maxDate;var k=n=="left"?this.startDate:this.endDate;var C=this.locale.direction=="ltr"?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"};var S='<table class="table-condensed">';S+="<thead>";S+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)S+="<th></th>";if((!x||x.isBefore(i.firstDay))&&(!this.linkedCalendars||n=="left")){S+='<th class="prev available"><i class="fa fa-'+C.left+" glyphicon glyphicon-"+C.left+'"></i></th>'}else{S+="<th></th>"}var T=this.locale.monthNames[i[1][1].month()]+i[1][1].format(" YYYY");if(this.showDropdowns){var E=i[1][1].month();var q=i[1][1].year();var j=w&&w.year()||q+5;var P=x&&x.year()||q-50;var F=q==P;var A=q==j;var I='<select class="monthselect">';for(var D=0;D<12;D++){if((!F||D>=x.month())&&(!A||D<=w.month())){I+="<option value='"+D+"'"+(D===E?" selected='selected'":"")+">"+this.locale.monthNames[D]+"</option>"}else{I+="<option value='"+D+"'"+(D===E?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[D]+"</option>"}}I+="</select>";var O='<select class="yearselect">';for(var B=P;B<=j;B++){O+='<option value="'+B+'"'+(B===q?' selected="selected"':"")+">"+B+"</option>"}O+="</select>";T=I+O}S+='<th colspan="5" class="month">'+T+"</th>";if((!w||w.isAfter(i.lastDay))&&(!this.linkedCalendars||n=="right"||this.singleDatePicker)){S+='<th class="next available"><i class="fa fa-'+C.right+" glyphicon glyphicon-"+C.right+'"></i></th>'}else{S+="<th></th>"}S+="</tr>";S+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)S+='<th class="week">'+this.locale.weekLabel+"</th>";t.each(this.locale.daysOfWeek,(function(e,t){S+="<th>"+t+"</th>"}));S+="</tr>";S+="</thead>";S+="<tbody>";if(this.endDate==null&&this.dateLimit){var $=this.startDate.clone().add(this.dateLimit).endOf("day");if(!w||$.isBefore(w)){w=$}}for(var _=0;_<6;_++){S+="<tr>";if(this.showWeekNumbers)S+='<td class="week">'+i[_][0].week()+"</td>";else if(this.showISOWeekNumbers)S+='<td class="week">'+i[_][0].isoWeek()+"</td>";for(var b=0;b<7;b++){var R=[];if(i[_][b].isSame(new Date,"day"))R.push("today");if(i[_][b].isoWeekday()>5)R.push("weekend");if(i[_][b].month()!=i[1][1].month())R.push("off");if(this.minDate&&i[_][b].isBefore(this.minDate,"day"))R.push("off","disabled");if(w&&i[_][b].isAfter(w,"day"))R.push("off","disabled");if(this.isInvalidDate(i[_][b]))R.push("off","disabled");if(i[_][b].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD"))R.push("active","start-date");if(this.endDate!=null&&i[_][b].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD"))R.push("active","end-date");if(this.endDate!=null&&i[_][b]>this.startDate&&i[_][b]<this.endDate)R.push("in-range");var M=this.isCustomDate(i[_][b]);if(M!==false){if(typeof M==="string")R.push(M);else Array.prototype.push.apply(R,M)}var L="",N=false;for(var g=0;g<R.length;g++){L+=R[g]+" ";if(R[g]=="disabled")N=true}if(!N)L+="available";S+='<td class="'+L.replace(/^\s+|\s+$/g,"")+'" data-title="'+"r"+_+"c"+b+'">'+i[_][b].date()+"</td>"}S+="</tr>"}S+="</tbody>";S+="</table>";this.container.find(".calendar."+n+" .calendar-table").html(S)},renderTimePicker:function(e){if(e=="right"&&!this.endDate)return;var t,n,i,r=this.maxDate;if(this.dateLimit&&(!this.maxDate||this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)))r=this.startDate.clone().add(this.dateLimit);if(e=="left"){n=this.startDate.clone();i=this.minDate}else if(e=="right"){n=this.endDate.clone();i=this.startDate;var o=this.container.find(".calendar.right .calendar-time div");if(o.html()!=""){n.hour(o.find(".hourselect option:selected").val()||n.hour());n.minute(o.find(".minuteselect option:selected").val()||n.minute());n.second(o.find(".secondselect option:selected").val()||n.second());if(!this.timePicker24Hour){var s=o.find(".ampmselect option:selected").val();if(s==="PM"&&n.hour()<12)n.hour(n.hour()+12);if(s==="AM"&&n.hour()===12)n.hour(0)}}if(n.isBefore(this.startDate))n=this.startDate.clone();if(r&&n.isAfter(r))n=r.clone()}t='<select class="hourselect">';var a=this.timePicker24Hour?0:1;var l=this.timePicker24Hour?23:12;for(var c=a;c<=l;c++){var u=c;if(!this.timePicker24Hour)u=n.hour()>=12?c==12?12:c+12:c==12?0:c;var d=n.clone().hour(u);var p=false;if(i&&d.minute(59).isBefore(i))p=true;if(r&&d.minute(0).isAfter(r))p=true;if(u==n.hour()&&!p){t+='<option value="'+c+'" selected="selected">'+c+"</option>"}else if(p){t+='<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>"}else{t+='<option value="'+c+'">'+c+"</option>"}}t+="</select> ";t+=': <select class="minuteselect">';for(var c=0;c<60;c+=this.timePickerIncrement){var h=c<10?"0"+c:c;var d=n.clone().minute(c);var p=false;if(i&&d.second(59).isBefore(i))p=true;if(r&&d.second(0).isAfter(r))p=true;if(n.minute()==c&&!p){t+='<option value="'+c+'" selected="selected">'+h+"</option>"}else if(p){t+='<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>"}else{t+='<option value="'+c+'">'+h+"</option>"}}t+="</select> ";if(this.timePickerSeconds){t+=': <select class="secondselect">';for(var c=0;c<60;c++){var h=c<10?"0"+c:c;var d=n.clone().second(c);var p=false;if(i&&d.isBefore(i))p=true;if(r&&d.isAfter(r))p=true;if(n.second()==c&&!p){t+='<option value="'+c+'" selected="selected">'+h+"</option>"}else if(p){t+='<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>"}else{t+='<option value="'+c+'">'+h+"</option>"}}t+="</select> "}if(!this.timePicker24Hour){t+='<select class="ampmselect">';var f="";var m="";if(i&&n.clone().hour(12).minute(0).second(0).isBefore(i))f=' disabled="disabled" class="disabled"';if(r&&n.clone().hour(0).minute(0).second(0).isAfter(r))m=' disabled="disabled" class="disabled"';if(n.hour()>=12){t+='<option value="AM"'+f+'>AM</option><option value="PM" selected="selected"'+m+">PM</option>"}else{t+='<option value="AM" selected="selected"'+f+'>AM</option><option value="PM"'+m+">PM</option>"}t+="</select>"}this.container.find(".calendar."+e+" .calendar-time div").html(t)},updateFormInputs:function(){if(this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus"))return;this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format));if(this.endDate)this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format));if(this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},move:function(){var e={top:0,left:0},n;var i=t(window).width();if(!this.parentEl.is("body")){e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};i=this.parentEl[0].clientWidth+this.parentEl.offset().left}if(this.drops=="up")n=this.element.offset().top-this.container.outerHeight()-e.top;else n=this.element.offset().top+this.element.outerHeight()-e.top;this.container[this.drops=="up"?"addClass":"removeClass"]("dropup");if(this.opens=="left"){this.container.css({top:n,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else if(this.opens=="center"){this.container.css({top:n,left:this.element.offset().left-e.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:n,left:this.element.offset().left-e.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>t(window).width()){this.container.css({left:"auto",right:0})}}},show:function(e){if(this.isShowing)return;this._outsideClickProxy=t.proxy((function(e){this.outsideClick(e)}),this);t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);t(window).on("resize.daterangepicker",t.proxy((function(e){this.move(e)}),this));this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.previousRightTime=this.endDate.clone();this.updateView();this.container.show();this.move();this.element.trigger("show.daterangepicker",this);this.isShowing=true},hide:function(e){if(!this.isShowing)return;if(!this.endDate){this.startDate=this.oldStartDate.clone();this.endDate=this.oldEndDate.clone()}if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))this.callback(this.startDate,this.endDate,this.chosenLabel);this.updateElement();t(document).off(".daterangepicker");t(window).off(".daterangepicker");this.container.hide();this.element.trigger("hide.daterangepicker",this);this.isShowing=false},toggle:function(e){if(this.isShowing){this.hide()}else{this.show()}},outsideClick:function(e){var n=t(e.target);if(e.type=="focusin"||n.closest(this.element).length||n.closest(this.container).length||n.closest(".calendar-table").length)return;this.hide();this.element.trigger("outsideClick.daterangepicker",this)},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(e){if(this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus"))return;var t=e.target.getAttribute("data-range-key");if(t==this.locale.customRangeLabel){this.updateView()}else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.locale.format));this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.locale.format))}},clickRange:function(e){var t=e.target.getAttribute("data-range-key");this.chosenLabel=t;if(t==this.locale.customRangeLabel){this.showCalendars()}else{var n=this.ranges[t];this.startDate=n[0];this.endDate=n[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.endOf("day")}if(!this.alwaysShowCalendars)this.hideCalendars();this.clickApply()}},clickPrev:function(e){var n=t(e.target).parents(".calendar");if(n.hasClass("left")){this.leftCalendar.month.subtract(1,"month");if(this.linkedCalendars)this.rightCalendar.month.subtract(1,"month")}else{this.rightCalendar.month.subtract(1,"month")}this.updateCalendars()},clickNext:function(e){var n=t(e.target).parents(".calendar");if(n.hasClass("left")){this.leftCalendar.month.add(1,"month")}else{this.rightCalendar.month.add(1,"month");if(this.linkedCalendars)this.leftCalendar.month.add(1,"month")}this.updateCalendars()},hoverDate:function(e){if(!t(e.target).hasClass("available"))return;var n=t(e.target).attr("data-title");var i=n.substr(1,1);var r=n.substr(3,1);var o=t(e.target).parents(".calendar");var s=o.hasClass("left")?this.leftCalendar.calendar[i][r]:this.rightCalendar.calendar[i][r];if(this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")){this.container.find("input[name=daterangepicker_start]").val(s.format(this.locale.format))}else if(!this.endDate&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){this.container.find("input[name=daterangepicker_end]").val(s.format(this.locale.format))}var a=this.leftCalendar;var l=this.rightCalendar;var c=this.startDate;if(!this.endDate){this.container.find(".calendar tbody td").each((function(e,n){if(t(n).hasClass("week"))return;var i=t(n).attr("data-title");var r=i.substr(1,1);var o=i.substr(3,1);var u=t(n).parents(".calendar");var d=u.hasClass("left")?a.calendar[r][o]:l.calendar[r][o];if(d.isAfter(c)&&d.isBefore(s)||d.isSame(s,"day")){t(n).addClass("in-range")}else{t(n).removeClass("in-range")}}))}},clickDate:function(e){if(!t(e.target).hasClass("available"))return;var n=t(e.target).attr("data-title");var i=n.substr(1,1);var r=n.substr(3,1);var o=t(e.target).parents(".calendar");var s=o.hasClass("left")?this.leftCalendar.calendar[i][r]:this.rightCalendar.calendar[i][r];if(this.endDate||s.isBefore(this.startDate,"day")){if(this.timePicker){var a=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".left .ampmselect").val();if(l==="PM"&&a<12)a+=12;if(l==="AM"&&a===12)a=0}var c=parseInt(this.container.find(".left .minuteselect").val(),10);var u=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;s=s.clone().hour(a).minute(c).second(u)}this.endDate=null;this.setStartDate(s.clone())}else if(!this.endDate&&s.isBefore(this.startDate)){this.setEndDate(this.startDate.clone())}else{if(this.timePicker){var a=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var l=this.container.find(".right .ampmselect").val();if(l==="PM"&&a<12)a+=12;if(l==="AM"&&a===12)a=0}var c=parseInt(this.container.find(".right .minuteselect").val(),10);var u=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;s=s.clone().hour(a).minute(c).second(u)}this.setEndDate(s.clone());if(this.autoApply){this.calculateChosenLabel();this.clickApply()}}if(this.singleDatePicker){this.setEndDate(this.startDate);if(!this.timePicker)this.clickApply()}this.updateView();e.stopPropagation()},calculateChosenLabel:function(){var e=true;var t=0;for(var n in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])){e=false;this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html();break}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){e=false;this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html();break}}t++}if(e){if(this.showCustomRangeLabel){this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html()}else{this.chosenLabel=null}this.showCalendars()}},clickApply:function(e){this.hide();this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var n=t(e.target).closest(".calendar").hasClass("left"),i=n?"left":"right",r=this.container.find(".calendar."+i);var o=parseInt(r.find(".monthselect").val(),10);var s=r.find(".yearselect").val();if(!n){if(s<this.startDate.year()||s==this.startDate.year()&&o<this.startDate.month()){o=this.startDate.month();s=this.startDate.year()}}if(this.minDate){if(s<this.minDate.year()||s==this.minDate.year()&&o<this.minDate.month()){o=this.minDate.month();s=this.minDate.year()}}if(this.maxDate){if(s>this.maxDate.year()||s==this.maxDate.year()&&o>this.maxDate.month()){o=this.maxDate.month();s=this.maxDate.year()}}if(n){this.leftCalendar.month.month(o).year(s);if(this.linkedCalendars)this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month")}else{this.rightCalendar.month.month(o).year(s);if(this.linkedCalendars)this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month")}this.updateCalendars()},timeChanged:function(e){var n=t(e.target).closest(".calendar"),i=n.hasClass("left");var r=parseInt(n.find(".hourselect").val(),10);var o=parseInt(n.find(".minuteselect").val(),10);var s=this.timePickerSeconds?parseInt(n.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var a=n.find(".ampmselect").val();if(a==="PM"&&r<12)r+=12;if(a==="AM"&&r===12)r=0}if(i){var l=this.startDate.clone();l.hour(r);l.minute(o);l.second(s);this.setStartDate(l);if(this.singleDatePicker){this.endDate=this.startDate.clone()}else if(this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)){this.setEndDate(l.clone())}}else if(this.endDate){var c=this.endDate.clone();c.hour(r);c.minute(o);c.second(s);this.setEndDate(c)}this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right")},formInputsChanged:function(n){var i=t(n.target).closest(".calendar").hasClass("right");var r=e(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format);var o=e(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);if(r.isValid()&&o.isValid()){if(i&&o.isBefore(r))r=o.clone();this.setStartDate(r);this.setEndDate(o);if(i){this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format))}else{this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))}}this.updateView()},formInputsFocused:function(e){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active");t(e.target).addClass("active");var n=t(e.target).closest(".calendar").hasClass("right");if(n){this.endDate=null;this.setStartDate(this.startDate.clone());this.updateView()}},formInputsBlurred:function(t){if(!this.endDate){var n=this.container.find('input[name="daterangepicker_end"]').val();var i=e(n,this.locale.format);if(i.isValid()){this.setEndDate(i);this.updateView()}}},elementChanged:function(){if(!this.element.is("input"))return;if(!this.element.val().length)return;if(this.element.val().length<this.locale.format.length)return;var t=this.element.val().split(this.locale.separator),n=null,i=null;if(t.length===2){n=e(t[0],this.locale.format);i=e(t[1],this.locale.format)}if(this.singleDatePicker||n===null||i===null){n=e(this.element.val(),this.locale.format);i=n}if(!n.isValid()||!i.isValid())return;this.setStartDate(n);this.setEndDate(i);this.updateView()},keydown:function(e){if(e.keyCode===9||e.keyCode===13){this.hide()}},updateElement:function(){if(this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));this.element.trigger("change")}else if(this.element.is("input")&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger("change")}},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData()}};t.fn.daterangepicker=function(e,i){this.each((function(){var r=t(this);if(r.data("daterangepicker"))r.data("daterangepicker").remove();r.data("daterangepicker",new n(r,e,i))}));return this};return n}))},"74Lb":function(e,t,n){n("8rVx")(n("m3UK"))},"7kpE":function(e,t,n){var i=n("qjYJ");e.exports=function e(t,n,r,o){var s=i(t);s.splice(~~n,~~r,o);return s.join("")}},"80Tu":function(e,t){e.exports='/*globals $, ParseQueryString*/\nvar UploaderWidget = {\n  container: null,\n  activeCamera: null,\n  activeCameraReady: false,\n  options: null,\n  totalUploads: 0,\n  completedUploads: [],\n\n  // Delay the other videos from finalizing their upload until the first one completes\n  // when sharing a player for all uploaded videos.\n  sharedPlayer: false,\n  sharedPlayerUUID: \'\',\n  waitingForSharedPlayer: false,\n\n  init: function (id, createSinglePlayerForAllVideos) {\n    UploaderWidget.container = $(\'#\' + id);\n    UploaderWidget.sharedPlayer = createSinglePlayerForAllVideos;\n\n    UploaderWidget.setupOptions();\n    UploaderWidget.initCamera();\n    UploaderWidget.initUploader();\n    UploaderWidget.setupDefaultListeners();\n  },\n\n  setupOptions: function () {\n    var params = ParseQueryString();\n\n    queryParams = {\n      tags: params.tags,\n      webhookUrl: params.webhook_url\n    }\n\n    if(queryParams.webhookUrl) {\n      queryParams.webhookUrl = decodeURIComponent(queryParams.webhookUrl);\n    }\n\n    UploaderWidget.options = $.extend({}, UploaderWidget.container.data(), queryParams);\n  },\n\n  updateVideoUpload: function (videoData) {\n    if (UploaderWidget.sharedPlayer) {\n      if (UploaderWidget.sharedPlayerUUID === \'\') {\n        UploaderWidget.waitingForSharedPlayer = true;\n      } else {\n        videoData.player_uuid = UploaderWidget.sharedPlayerUUID;\n      }\n    }\n\n    vidyardAjax({\n      url: "/uploader_widget/upload",\n      headers: {\'X-CSRF-Token\': $(\'meta[name="csrf-token"]\').attr(\'content\')},\n      type: "POST",\n      data: JSON.stringify(videoData),\n      dataType: "json",\n      contentType: \'application/json; charset=UTF-8\',\n      success: function (responseJSON) {\n        UploaderWidget.completedUploads.push(responseJSON);\n\n        if (UploaderWidget.sharedPlayer && UploaderWidget.waitingForSharedPlayer) {\n          UploaderWidget.sharedPlayerUUID = responseJSON.player_uuid;\n          UploaderWidget.waitingForSharedPlayer = false;\n        }\n\n        // If all uploads are complete then fire the event\n        if (UploaderWidget.completedUploads.length === UploaderWidget.totalUploads) {\n          UploaderWidget.container.trigger("allUploadsComplete", [UploaderWidget.completedUploads]);\n        }\n      },\n      error: function (response) {\n        UploaderWidget.errorHandler(\'Sorry, something went wrong while linking that video to your account. We have been notified and are working on it.\');\n      }\n    });\n  },\n\n  waitToUpdateVideoUpload: function (videoData) {\n    if (UploaderWidget.waitingForSharedPlayer) {\n      // Delay for half a second until we receive the player UUID from the first video upload.\n      setTimeout(function () {\n        UploaderWidget.waitToUpdateVideoUpload(videoData)\n      }, 500);\n    } else {\n      UploaderWidget.updateVideoUpload(videoData);\n    }\n  },\n\n  setupDefaultListeners: function () {\n    $(\'#upload-video-tab, #record-video-tab\').click(function () {\n      \'use strict\';\n      var link = $(this);\n      var id = link.attr(\'id\');\n      var selector =\n        id === \'upload-video-tab\' ?\n        \'.upload-options .qq-upload-button-selector input\' :\n        \'#cameratagrecorder-start-screen .cameratag_record\';\n\n      if (link.parent().hasClass(\'active\')) {\n        $(selector)[0].click();\n      }\n    });\n\n    // Default listener for a widget uploader completing from either cameratag or fineuploader\n    UploaderWidget.container.on("uploadComplete", function(event, videoData) {\n      if (UploaderWidget.sharedPlayer) {\n        UploaderWidget.waitToUpdateVideoUpload(videoData);\n      } else {\n        UploaderWidget.updateVideoUpload(videoData);\n      }\n    });\n\n    // Default listener for all widget uploads completing. Override to your taste\n    UploaderWidget.container.on("allUploadsComplete", function(event, uploads) {\n      var showUploadedUrl = "/uploader_widget/show_uploaded?uploader_widget_uuid=" + UploaderWidget.options.uuid + "&options[]=" + UploaderWidget.options.options;\n      if (UploaderWidget.sharedPlayer) {\n        showUploadedUrl += "&playlist_uuid=" + UploaderWidget.sharedPlayerUUID;\n      }\n\n      $.each(uploads, function() {\n        showUploadedUrl += "&secret_ids[]=" + this.video.secret_id;\n      });\n      // Redirect to completed videos page\n      window.location = showUploadedUrl;\n    });\n\n    // Listener for closing error message overlay\n    $("#error-message").on("click", "#btn-hide-message", function() {\n      $("#error-message").html("").addClass("collapse");\n    })\n  },\n\n  initUploader: function () {\n    var $uploader = Uploader.create($("#widget-uploader"));\n\n    $uploader.on("upload", function(event, id, name) {\n      $("#record-video-tab").addClass("disabled");\n      $("#record-video-tab").css(\'pointer-events\', \'none\');\n    });\n\n    $uploader.on("allComplete", function(event, succeeded, failed) {\n      UploaderWidget.totalUploads = succeeded.length;\n      $.each(succeeded, function () {\n        var bucket = $uploader.fineUploader(\'getBucket\', this);\n        var key = $uploader.fineUploader(\'getKey\', this);\n        var filename = $uploader.fineUploader(\'getName\', this);\n\n        var videoData = {\n          video: {\n            upload_url: "s3://" + bucket + "/" + key,\n            name: UploaderWidget.removeFileExtension(filename)\n          }\n        }\n        UploaderWidget.uploadCompleteHandler(videoData);\n      });\n    });\n\n    $uploader.on("cancel", function(event) {\n      $("#record-video-tab").removeClass("disabled");\n      $("#record-video-tab").css(\'pointer-events\', \'auto\');\n    });\n  },\n\n  initCamera: function () {\n    // Assign camertag to activeCamera when it\'s done initializing\n    CameraTag.observe("cameratagrecorder", "initialized", function(){\n      UploaderWidget.activeCamera = CameraTag.cameras["cameratagrecorder"];\n      if (UploaderWidget.activeCamera) {\n        UploaderWidget.activeCameraReady = true;\n      }\n    });\n\n    // Disable and re-enable tabs and buttons while recording as hiding Flash puts Cameratag in a bad state\n    CameraTag.observe("cameratagrecorder", "recordingStarted", function(){\n      $("#upload-video-tab").addClass("disabled");\n      $("#upload-video-tab").css(\'pointer-events\', \'none\');\n    });\n\n    // When recording is finished\n    CameraTag.observe("cameratagrecorder", \'published\', function(){\n      UploaderWidget.totalUploads++;\n      newRecordedVideo = UploaderWidget.activeCamera.getVideo();\n\n      var recordingData = {\n        video: {\n          name: "Untitled Video",\n          upload_url: \'https:\' + newRecordedVideo.medias["720p_mp4"],\n          cameratag_uuid: newRecordedVideo.uuid\n        }\n      }\n      UploaderWidget.uploadCompleteHandler(recordingData);\n    });\n  },\n\n  uploadCompleteHandler: function (videoData) {\n    // AJAX the video to put it into the right organization\n    if (UploaderWidget.options.tags) {\n      videoData.video.tag_list = UploaderWidget.options.tags;\n    }\n\n    if (UploaderWidget.options.webhookUrl) {\n      videoData.video.webhook_url = UploaderWidget.options.webhookUrl;\n    }\n\n    videoData.secret_code = UploaderWidget.options.uuid;\n\n    UploaderWidget.container.trigger("uploadComplete", [videoData]);\n  },\n\n  removeFileExtension: function(filename) {\n    // get rid of the last extension of a file name\n    // eg raw.mp3 --\x3e raw\n    //    raw.mp3.mp3 --\x3e raw.mp3\n    //    raw --\x3e raw\n    return filename.replace(/\\.\\w+$/, \'\');\n  },\n\n  errorHandler: function (error) {\n    $(\'#error-message\').html(error).append(\'<div id="btn-hide-message"><i class="fal fa-times-circle"></i></div>\').removeClass("collapse");\n  }\n\n};\n'},"8BLG":function(e,t,n){var i=n("PQmd");if(typeof i==="string")i=[[e.i,i,""]];if(i.locals)e.exports=i.locals;var r=n("SZ7m").default;var o=r("51185a27",i,false,{});if(false){}},"8EDg":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("Kw5r");var r=n("USoJ");function o(e,t){return new i["a"]({el:e,render:e=>e(r["a"],{props:t})})}},"8sX0":function(e,t,n){n("8rVx")(n("4JrT"))},"9pS/":function(e,t,n){n("8rVx")(n("t3ps"))},"9u9v":function(e,t,n){var i=n("t9FE");e.exports=i(n("4Z/T").sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},A1hn:function(e,t){e.exports="// Auto-polling for encoding VY thumbnails.\n// Create a thumbnail using 'vy_common/_thumbnail_tmpl.html.erb' in JS or 'vy_common/_thumbnail.html.erb' in Ruby.\n// Thumbnails are given a unique ID, which can be used to check their status using 'ThumbnailEncoding.status(thumbnailUuid)'\n\nvar ThumbnailEncoding = {\n  // An object of currently encoding thumbnails. Thumbnails are removed from the object\n  // when encoding completes or they cannot be found on the page.\n  encoding: null,\n\n  // The refresh rate for the encoding polling.\n  timeout: 2500,\n\n  // All thumbnails use the same shared interval\n  pollingInterval: null,\n\n  // Wait for existing AJAX calls to return before starting another\n  currentlyPolling: false,\n\n  init: function (thumbnailUuid, relatedElement) {\n    if (this.encoding === null) { this.encoding = {}; }\n    if (!thumbnailUuid) { return; }\n\n    // Add this thumbnail to the list.\n    this.encoding[thumbnailUuid] = {\n      polling: true,\n      thumbnailUuid: thumbnailUuid,\n      percentage: 0,\n      remainingSeconds: null,\n      pollingError: false,\n      relatedElement: relatedElement,\n      videoId: null\n    };\n\n    if(!this.pollingInterval) {\n      this.pollingInterval = setInterval(function () {\n        ThumbnailEncoding.pollStatus();\n      }, ThumbnailEncoding.timeout);\n    }\n  },\n\n  status: function (thumbnailUuid) {\n    return this.encoding[thumbnailUuid];\n  },\n\n  stop: function (thumbnailUuid) {\n    if (typeof(thumbnailUuid) === 'undefined') { return; }\n\n    this.encoding[thumbnailUuid].polling = false;\n\n    if(Object.keys(ThumbnailEncoding.encoding).filter(function(e){ return ThumbnailEncoding.encoding[e].polling; }).length === 0) {\n      clearInterval(this.pollingInterval);\n      this.pollingInterval = null;\n      this.currentlyPolling = false;\n    }\n  },\n\n  pollStatus: function () {\n    // If an AJAX call is already running, wait for it to finish\n    if(ThumbnailEncoding.currentlyPolling) { return; }\n    ThumbnailEncoding.currentlyPolling = true;\n\n    var encodingIds = '';\n\n    Object.keys(this.encoding).map(function(objectKey, index) {\n      var encodingVideo = ThumbnailEncoding.encoding[objectKey];\n      if(!encodingVideo.polling) { return };\n\n      // If the polling element is missing, stop polling for this thumbnail.\n      var $el = $('#vy-thumbnail-polling-' + encodingVideo['thumbnailUuid']);\n      if ($el.length === 0 || encodingVideo['percentage'] === 100) {\n        ThumbnailEncoding.stop(encodingVideo['thumbnailUuid']);\n        if($el.length === 0) { return; }\n      }\n\n      // Set Video ID in object for easy access if not set\n      encodingVideo.videoId = encodingVideo.videoId || $el.data('video-id');\n\n      // Append video ID to list for bulk checking\n      encodingIds += '&id[]=' + encodingVideo.videoId;\n    });\n\n    vidyardAjax({\n      url: '/videos/bulk_encoding_status?' + encodingIds,\n      type: 'GET',\n      success: function (data) {\n        // I'm sad that JS doesn't have an understanding of Object.forEach yet\n        Object.keys(ThumbnailEncoding.encoding).map(function(objectKey, index) {\n          var encodingVideo = ThumbnailEncoding.encoding[objectKey];\n          var encodingVideoData = data[encodingVideo.videoId];\n\n          // If new thumbnail is added while AJAX call already running, skip it\n          if(!encodingVideoData) { return };\n\n          var upload_done_or_failed = encodingVideoData.video.status === 'ready' || encodingVideoData.video.status === 'failed';\n          var upload_processing = encodingVideoData.progress.state === 'processing' || encodingVideoData.progress.state === 'finished';\n          if (upload_done_or_failed) {\n            // Set the percentage to 100 and hide the thumbnail\n            encodingVideo['percentage'] = 100;\n\n            var $el = $('#vy-thumbnail-polling-' + encodingVideo['thumbnailUuid']);\n            $el.hide();\n            ThumbnailEncoding.updateThumbnail($el, encodingVideoData);\n            ThumbnailEncoding.reloadRelatedElement(encodingVideo);\n          } else if (upload_processing) {\n            // Adjust percentage from alchemist to 90% of total, the last 10% is reserved for processing on our end\n            encodingVideo['percentage'] = Math.round(encodingVideoData.progress.progress * 0.9);\n            encodingVideo['remainingSeconds'] = encodingVideoData.progress.remaining !== 0 ? encodingVideoData.progress.remaining : null ;\n          }\n        });\n      },\n      error: function (error) {\n        Object.keys(ThumbnailEncoding.encoding).map(function(objectKey, index) {\n          var encodingVideo = ThumbnailEncoding.encoding[objectKey];\n\n          encodingVideo['percentage'] = 100;\n          encodingVideo['pollingError'] = true;\n        });\n      },\n      complete: function (data) {\n        Object.keys(ThumbnailEncoding.encoding).map(function(objectKey, index) {\n          var encodingVideo = ThumbnailEncoding.encoding[objectKey];\n          if(!encodingVideo) { return; }\n\n          var $el = $('#vy-thumbnail-polling-' + encodingVideo['thumbnailUuid']);\n          $el.parent().addClass(\"encoding-in-progress\");\n          $el.css('width', encodingVideo['percentage'] + '%');\n        });\n\n        ThumbnailEncoding.currentlyPolling = false;\n      }\n    });\n  },\n\n  updateThumbnail: function ($progressEl, data) {\n    $progressEl.closest(\".thumbnail-mask\").css(\"background-image\", \"url(\" + data.thumbnail_url + \")\");\n\n    var duration = moment.duration(data.video.seconds, \"seconds\");\n    $progressEl.siblings(\".time\").html(duration.minutes()+\":\"+(\"0\" + duration.seconds()).slice(-2));\n  },\n\n  reloadRelatedElement: function (encodingVideo) {\n    if (!encodingVideo['relatedElement'] || encodingVideo['relatedElement'].trim() === '') { return; }\n\n    var $el = $(encodingVideo['relatedElement'] + ' .vy-thumbnail');\n    $el.parent().removeClass(\"encoding-in-progress\");\n    if ($el.length) {\n      // Reload related element's thumbnail.\n      var pattern = /url\\([\\\"\\']?([^\\\"\\']*)[\\\"\\']?\\)/g;\n      var url = pattern.exec($el.css('background-image'))[1];\n      $el.css('background-image', 'url(' + url + 't=' + encodingVideo['thumbnailUuid'] + '&)');\n    }\n  }\n};\n"},AZ59:function(e,t,n){(function(t){e.exports=t["bootbox"]=n("JdwY")}).call(this,n("yLpj"))},Arg3:function(e,t){e.exports="/*!\n * jQuery Plugin: Are-You-Sure (Dirty Form Detection)\n * https://github.com/codedance/jquery.AreYouSure/\n *\n * Copyright (c) 2012-2014, Chris Dance and PaperCut Software http://www.papercut.com/\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n *\n * Author:  chris.dance@papercut.com\n * Version: 1.9.0\n * Date:    13th August 2014\n */\n(function($) {\n\n  $.fn.areYouSure = function(options) {\n\n    var settings = $.extend(\n      {\n        'message' : 'You have unsaved changes!',\n        'dirtyClass' : 'dirty',\n        'change' : null,\n        'silent' : false,\n        'addRemoveFieldsMarksDirty' : false,\n        'fieldEvents' : 'change keyup propertychange input',\n        'fieldSelector': \":input:not(input[type=submit]):not(input[type=button])\"\n      }, options);\n\n    var getValue = function($field) {\n      if ($field.hasClass('ays-ignore')\n          || $field.hasClass('aysIgnore')\n          || $field.attr('data-ays-ignore')\n          || $field.attr('name') === undefined) {\n        return null;\n      }\n\n      if ($field.is(':disabled')) {\n        return 'ays-disabled';\n      }\n\n      var val;\n      var type = $field.attr('type');\n      if ($field.is('select')) {\n        type = 'select';\n      }\n\n      switch (type) {\n        case 'checkbox':\n        case 'radio':\n          val = $field.is(':checked');\n          break;\n        case 'select':\n          val = '';\n          $field.find('option').each(function(o) {\n            var $option = $(this);\n            if ($option.is(':selected')) {\n              val += $option.val();\n            }\n          });\n          break;\n        default:\n          val = $field.val();\n      }\n\n      return val;\n    };\n\n    var storeOrigValue = function($field) {\n      $field.data('ays-orig', getValue($field));\n    };\n\n    var checkForm = function(evt) {\n\n      var isFieldDirty = function($field) {\n        var origValue = $field.data('ays-orig');\n        if (undefined === origValue) {\n          return false;\n        }\n        return (getValue($field) != origValue);\n      };\n\n      var $form = ($(this).is('form'))\n                    ? $(this)\n                    : $(this).parents('form');\n\n      // Test on the target first as it's the most likely to be dirty\n      if (isFieldDirty($(evt.target))) {\n        setDirtyStatus($form, true);\n        return;\n      }\n\n      $fields = $form.find(settings.fieldSelector);\n\n      if (settings.addRemoveFieldsMarksDirty) {\n        // Check if field count has changed\n        var origCount = $form.data(\"ays-orig-field-count\");\n        if (origCount != $fields.length) {\n          setDirtyStatus($form, true);\n          return;\n        }\n      }\n\n      // Brute force - check each field\n      var isDirty = false;\n      $fields.each(function() {\n        $field = $(this);\n        if (isFieldDirty($field)) {\n          isDirty = true;\n          return false; // break\n        }\n      });\n\n      setDirtyStatus($form, isDirty);\n    };\n\n    var initForm = function($form) {\n      var fields = $form.find(settings.fieldSelector);\n      $(fields).each(function() { storeOrigValue($(this)); });\n      $(fields).off(settings.fieldEvents, checkForm);\n      $(fields).on(settings.fieldEvents, checkForm);\n      $form.data(\"ays-orig-field-count\", $(fields).length);\n      setDirtyStatus($form, false);\n    };\n\n    var setDirtyStatus = function($form, isDirty) {\n      var changed = isDirty != $form.hasClass(settings.dirtyClass);\n      $form.toggleClass(settings.dirtyClass, isDirty);\n\n      // Fire change event if required\n      if (changed) {\n        if (settings.change) settings.change.call($form, $form);\n\n        if (isDirty) $form.trigger('dirty.areYouSure', [$form]);\n        if (!isDirty) $form.trigger('clean.areYouSure', [$form]);\n        $form.trigger('change.areYouSure', [$form]);\n      }\n    };\n\n    var rescan = function() {\n      var $form = $(this);\n      var fields = $form.find(settings.fieldSelector);\n      $(fields).each(function() {\n        var $field = $(this);\n        if (!$field.data('ays-orig')) {\n          storeOrigValue($field);\n          $field.on(settings.fieldEvents, checkForm);\n        }\n      });\n      // Check for changes while we're here\n      $form.trigger('checkform.areYouSure');\n    };\n\n    var reinitialize = function() {\n      initForm($(this));\n    }\n\n    if (!settings.silent && !window.aysUnloadSet) {\n      window.aysUnloadSet = true;\n      $(window).on('beforeunload', function() {\n        $dirtyForms = $(\"form\").filter('.' + settings.dirtyClass);\n        if ($dirtyForms.length == 0) {\n          return;\n        }\n        // Prevent multiple prompts - seen on Chrome and IE\n        if (navigator.userAgent.toLowerCase().match(/msie|chrome/)) {\n          if (window.aysHasPrompted) {\n            return;\n          }\n          window.aysHasPrompted = true;\n          window.setTimeout(function() {window.aysHasPrompted = false;}, 900);\n        }\n        return settings.message;\n      });\n    }\n\n    return this.each(function(elem) {\n      if (!$(this).is('form')) {\n        return;\n      }\n      var $form = $(this);\n\n      $form.submit(function() {\n        $form.removeClass(settings.dirtyClass);\n      });\n      $form.on('reset', function() { setDirtyStatus($form, false); });\n      // Add a custom events\n      $form.on('rescan.areYouSure', rescan);\n      $form.on('reinitialize.areYouSure', reinitialize);\n      $form.on('checkform.areYouSure', checkForm);\n      initForm($form);\n    });\n  };\n})(jQuery);\n"},AsHD:function(e,t){e.exports=function e(t,n){n=n||'"';if(t[0]===n&&t[t.length-1]===n)return t.slice(1,t.length-1);else return t}},Azts:function(e,t){e.exports="var VidyardClipboardInput = {\n  init: function () {\n    \"use strict\";\n    // Show copy tooltip if we are not on touchscreen\n    if (!('ontouchstart' in window)) {\n      var copyBtn = browser.isOS('macos') ? '&#8984;' : 'Ctrl';\n\n      $(\".clipboard-input\").tooltip({\n        title: '<b class=\"bolded-tooltip\">' + copyBtn + ' + C</b><br><i>(to copy text)</i>',\n        html: true,\n        trigger: 'hover'\n      });\n\n      $('.clipboard-input').mouseover(function (e) {\n        $(this).select();\n      });\n    }\n  },\n\n  rebind: function () {\n    // If a clipboard input does not exist on page load, this will need to be called to have the tooltip appear.\n    VidyardClipboardInput.init();\n  }\n};\n"},"B1G+":function(e,t){e.exports="/**\n * Video.js Resolution Selector\n * https://github.com/dominic-p/videojs-resolution-selector\n *\n * NOTE: Contains vidyard changes, ctrl+f for vidyard to find a comment about all of them\n *\n * This plugin for Video.js adds a resolution selector option\n * to the toolbar. Usage:\n *\n * <video>\n *  <source data-res=\"480\" src=\"...\" />\n *  <source data-res=\"240\" src=\"...\" />\n * </video>\n */\n\n(function( _V_ ) {\n\n  /***********************************************************************************\n   * Define some helper functions\n   ***********************************************************************************/\n  var methods = {\n\n    /**\n     * In a future version, this can be made more intelligent,\n     * but for now, we'll just add a \"p\" at the end if we are passed\n     * numbers.\n     *\n     * @param (string)  res The resolution to make a label for\n     *\n     * @returns (string)  The label text string\n     */\n    res_label : function( res ) {\n\n      return ( /^\\d+$/.test( res ) ) ? res + 'p' : res;\n    }\n  };\n\n  /***********************************************************************************\n   * Setup our resolution menu items\n   ***********************************************************************************/\n  _V_.ResolutionMenuItem = _V_.MenuItem.extend({\n\n    // Call variable to prevent the resolution change from being called twice\n    call_count : 0,\n\n    /** @constructor */\n    init : function( player, options ){\n\n      var touchstart = false;\n\n      // Modify options for parent MenuItem class's init.\n      options.label = methods.res_label( options.res );\n      options.selected = ( options.res.toString() === player.getCurrentRes().toString() );\n\n      // Call the parent constructor\n      _V_.MenuItem.call( this, player, options );\n\n      // Store the resolution as a property\n      this.resolution = options.res;\n\n      // Register our click and tap handlers\n      this.on( ['click', 'tap'], this.onClick );\n\n      // Toggle the selected class whenever the resolution changes\n      player.on( 'changeRes', _V_.bind( this, function() {\n\n        if ( this.resolution == player.getCurrentRes() ) {\n\n          this.selected( true );\n\n        } else {\n\n          this.selected( false );\n        }\n\n        // Reset the call count\n        this.call_count = 0;\n      }));\n    }\n  });\n\n  // Handle clicks on the menu items\n  _V_.ResolutionMenuItem.prototype.onClick = function() {\n\n    // Check if this has already been called\n    if ( this.call_count > 0 ) { return; }\n\n    // Call the player.changeRes method\n    this.player().changeRes( this.resolution );\n\n    // Increment the call counter\n    this.call_count++;\n  };\n\n  /***********************************************************************************\n   * Setup our resolution menu title item\n   ***********************************************************************************/\n  _V_.ResolutionTitleMenuItem = _V_.MenuItem.extend({\n\n    init : function( player, options ) {\n\n      // Call the parent constructor\n      _V_.MenuItem.call( this, player, options );\n\n      // No click handler for the menu title\n      this.off( 'click' );\n    }\n  });\n\n  /***********************************************************************************\n   * Define our resolution selector button\n   ***********************************************************************************/\n  _V_.ResolutionSelector = _V_.MenuButton.extend({\n\n    /** @constructor */\n    init : function( player, options ) {\n\n      // Add our list of available resolutions to the player object\n      player.availableRes = options.available_res;\n\n      // Call the parent constructor\n      _V_.MenuButton.call( this, player, options );\n\n      // Set the button text based on the option provided\n      this.el().firstChild.firstChild.innerHTML = options.buttonText;\n    }\n  });\n\n  // Set class for resolution selector button\n  _V_.ResolutionSelector.prototype.className = 'vjs-res-button';\n\n  // Create a menu item for each available resolution\n  _V_.ResolutionSelector.prototype.createItems = function() {\n\n    var player = this.player(),\n      items = [],\n      current_res;\n\n    // Add the menu title item\n    items.push( new _V_.ResolutionTitleMenuItem( player, {\n\n      el : _V_.Component.prototype.createEl( 'li', {\n\n        className : 'vjs-menu-title vjs-res-menu-title',\n        innerHTML : player.localize( 'Quality' )\n      })\n    }));\n\n    // Add an item for each available resolution\n    for ( current_res in player.availableRes ) {\n\n      // Don't add an item for the length attribute\n      if ( 'length' == current_res ) { continue; }\n\n      items.push( new _V_.ResolutionMenuItem( player, {\n        res : current_res\n      }));\n    }\n\n    // Sort the available resolutions in descending order\n    items.sort(function( a, b ) {\n\n      if ( typeof a.resolution == 'undefined' ) {\n\n        return -1;\n\n      } else {\n\n        return parseInt( b.resolution ) - parseInt( a.resolution );\n      }\n    });\n\n    return items;\n  };\n\n  /***********************************************************************************\n   * Register the plugin with videojs, main plugin function\n   ***********************************************************************************/\n  _V_.plugin( 'resolutionSelector', function( options ) {\n\n    // Only enable the plugin on HTML5 videos\n    // vidyard: disabled in our version as it does work with flash\n    // This is disabled regularly as it apparently doesn't work with streaming\n    // if ( ! this.el().firstChild.canPlayType  ) { return; }\n\n    /*******************************************************************\n     * Setup variables, parse settings\n     *******************************************************************/\n    var player = this,\n      sources = player.options().sources,\n      i = sources.length,\n      j,\n      found_type,\n\n      // Override default options with those provided\n      settings = _V_.util.mergeOptions({\n\n        default_res : '',   // (string) The resolution that should be selected by default ( '480' or  '480,1080,240' )\n        force_types : false   // (array)  List of media types. If passed, we need to have source for each type in each resolution or that resolution will not be an option\n\n      }, options || {} ),\n\n      available_res = { length : 0 },\n      current_res,\n      resolutionSelector,\n\n      // Split default resolutions if set and valid, otherwise default to an empty array\n      default_resolutions = ( settings.default_res && typeof settings.default_res == 'string' ) ? settings.default_res.split( ',' ) : [];\n\n    // Get all of the available resoloutions\n    while ( i > 0 ) {\n\n      i--;\n\n      // Skip sources that don't have data-res attributes\n      if ( ! sources[i]['data-res'] ) { continue; }\n\n      current_res = sources[i]['data-res'];\n\n      if ( typeof available_res[current_res] !== 'object' ) {\n\n        available_res[current_res] = [];\n        available_res.length++;\n      }\n\n      available_res[current_res].push( sources[i] );\n    }\n\n    // Check for forced types\n    if ( settings.force_types ) {\n\n      // Loop through all available resoultions\n      for ( current_res in available_res ) {\n\n        // Don't count the length property as a resolution\n        if ( 'length' == current_res ) { continue; }\n\n        i = settings.force_types.length;\n        found_types = 0;\n\n        // Loop through all required types\n        while ( i > 0 ) {\n\n          i--;\n\n          j = available_res[current_res].length;\n\n          // Loop through all available sources in current resolution\n          while ( j > 0 ) {\n\n            j--;\n\n            // Check if the current source matches the current type we're checking\n            if ( settings.force_types[i] === available_res[current_res][j].type ) {\n\n              found_types++;\n              break;\n            }\n          }\n        }\n\n        // If we didn't find sources for all of the required types in the current res, remove it\n        if ( found_types < settings.force_types.length ) {\n\n          delete available_res[current_res];\n          available_res.length--;\n        }\n      }\n    }\n\n    // Make sure we have at least 2 available resolutions before we add the button\n    if ( available_res.length < 2 ) { return; }\n\n    // Loop through the choosen default resolutions if there were any\n    for ( i = 0; i < default_resolutions.length; i++ ) {\n\n      // Set the video to start out with the first available default res\n      if ( available_res[default_resolutions[i]] ) {\n\n        player.src( available_res[default_resolutions[i]] );\n        player.currentRes = default_resolutions[i];\n        break;\n      }\n    }\n\n    /*******************************************************************\n     * Add methods to player object\n     *******************************************************************/\n\n    // Make sure we have player.localize() if it's not defined by Video.js\n    if ( typeof player.localize !== 'function' ) {\n\n      player.localize = function( string ) {\n\n        return string;\n      };\n    }\n\n    // Helper function to get the current resolution\n    player.getCurrentRes = function() {\n\n      if ( typeof player.currentRes !== 'undefined' ) {\n\n        return player.currentRes;\n\n      } else {\n\n        try {\n\n          return res = player.options().sources[0]['data-res'];\n\n        } catch(e) {\n\n          return '';\n        }\n      }\n    };\n\n    // Define the change res method\n    player.changeRes = function( target_resolution ) {\n\n      var video_el = player.el().firstChild,\n        is_paused = player.paused(),\n        current_time = player.currentTime(),\n        button_nodes,\n        button_node_count;\n\n      // Do nothing if we aren't changing resolutions or if the resolution isn't defined\n      if ( player.getCurrentRes() == target_resolution\n        || ! player.availableRes\n        || ! player.availableRes[target_resolution] ) { return; }\n\n      // Make sure the loadedmetadata event will fire\n      if ( 'none' == video_el.preload ) { video_el.preload = 'metadata'; }\n\n      // Change the source and make sure we don't start the video over\n      player.src( player.availableRes[target_resolution] ).one( 'loadedmetadata', function() {\n\n        player.currentTime( current_time );\n\n        // If the video was paused, don't show the poster image again\n        player.addClass( 'vjs-has-started' );\n\n        if ( ! is_paused ) { player.play(); }\n      });\n\n      // Save the newly selected resolution in our player options property\n      player.currentRes = target_resolution;\n\n      // Make sure the button has been added to the control bar\n      if ( player.controlBar.resolutionSelector ) {\n\n        button_nodes = player.controlBar.resolutionSelector.el().firstChild.children;\n        button_node_count = button_nodes.length;\n\n        // Update the button text\n        while ( button_node_count > 0 ) {\n\n          button_node_count--;\n\n          if ( 'vjs-control-text' == button_nodes[button_node_count].className ) {\n\n            button_nodes[button_node_count].innerHTML = methods.res_label( target_resolution );\n            break;\n          }\n        }\n      }\n\n      // Update the classes to reflect the currently selected resolution\n      player.trigger( 'changeRes' );\n    };\n\n    /*******************************************************************\n     * Add the resolution selector button\n     *******************************************************************/\n\n    // Get the starting resolution\n    current_res = player.getCurrentRes();\n\n    if ( current_res ) { current_res = methods.res_label( current_res ); }\n\n    // Add the resolution selector button\n    resolutionSelector = new _V_.ResolutionSelector( player, {\n      buttonText    : player.localize( current_res || 'Quality' ),\n      available_res : available_res\n    });\n\n    // Add the button to the control bar object and the DOM\n    player.controlBar.resolutionSelector = player.controlBar.addChild( resolutionSelector );\n  });\n\n})( videojs );\n"},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},BDL0:function(e,t,n){var i=n("Tzrs");e.exports=function e(t){return i(t,1)}},BxwS:function(e,t,n){n("8rVx")(n("+hMj"))},"CjW/":function(e,t,n){var i=n("OR4l");e.exports=function e(t,n,r,o){n=n||", ";r=r||" and ";var s=t.slice(),a=s.pop();if(t.length>2&&o)r=i(n)+r;return s.length?s.join(n)+r+a:a}},ClBP:function(e,t){e.exports="var VidyardCharCountInput = {\n  init: function (inputTag, maxLength, minBeforeVisible) {\n    \"use strict\";\n    var $charCount = $(\".help-block[for=\" + inputTag + \"]\");\n\n    $('#' + inputTag).on('change textInput input', function () {\n      var charsRemain = maxLength - $('#' + inputTag).val().length;\n\n      if (charsRemain <= minBeforeVisible) {\n        $charCount.html(charsRemain + \" characters remaining\");\n      } else {\n        $charCount.html(\"\");\n      }\n\n      if (charsRemain > 10 && charsRemain <= minBeforeVisible / 2) {\n        $charCount.addClass('c-red-bk');\n      } else {\n        $charCount.removeClass('c-red-bk');\n      }\n\n      if (charsRemain <= 10) {\n        $charCount.addClass('c-red-darker');\n      } else {\n        $charCount.removeClass('c-red-darker');\n      }\n    });\n  }\n};\n"},Cqhv:function(e,t,n){var i=n("qjYJ");e.exports=function e(t){return i(t).reverse().join("")}},D19G:function(e,t,n){n("8rVx")(n("we2A"))},DPhY:function(e,t,n){var i,r;(function(o,s){if(o===undefined&&window!==undefined)o=window;if(true){!(i=[n("EVdn")],r=function(e){return s(e)}.apply(t,i),r!==undefined&&(e.exports=r))}else{}})(this,(function(e){(function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"];var n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"];var i=/^aria-[\w-]*$/i;var r={"*":["class","dir","id","lang","role","tabindex","style",i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};var o=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;var s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function a(t,i){var r=t.nodeName.toLowerCase();if(e.inArray(r,i)!==-1){if(e.inArray(r,n)!==-1){return Boolean(t.nodeValue.match(o)||t.nodeValue.match(s))}return true}var a=e(i).filter((function(e,t){return t instanceof RegExp}));for(var l=0,c=a.length;l<c;l++){if(r.match(a[l])){return true}}return false}function l(e,t,n){if(n&&typeof n==="function"){return n(e)}var i=Object.keys(t);for(var r=0,o=e.length;r<o;r++){var s=e[r].querySelectorAll("*");for(var l=0,c=s.length;l<c;l++){var u=s[l];var d=u.nodeName.toLowerCase();if(i.indexOf(d)===-1){u.parentNode.removeChild(u);continue}var p=[].slice.call(u.attributes);var h=[].concat(t["*"]||[],t[d]||[]);for(var f=0,m=p.length;f<m;f++){var g=p[f];if(!a(g,h)){u.removeAttribute(g.nodeName)}}}}}if(!("classList"in document.createElement("_"))){(function(t){if(!("Element"in t))return;var n="classList",i="prototype",r=t.Element[i],o=Object,s=function(){var t=e(this);return{add:function(e){e=Array.prototype.slice.call(arguments).join(" ");return t.addClass(e)},remove:function(e){e=Array.prototype.slice.call(arguments).join(" ");return t.removeClass(e)},toggle:function(e,n){return t.toggleClass(e,n)},contains:function(e){return t.hasClass(e)}}};if(o.defineProperty){var a={get:s,enumerable:true,configurable:true};try{o.defineProperty(r,n,a)}catch(e){if(e.number===undefined||e.number===-2146823252){a.enumerable=false;o.defineProperty(r,n,a)}}}else if(o[i].__defineGetter__){r.__defineGetter__(n,s)}})(window)}var c=document.createElement("_");c.classList.add("c1","c2");if(!c.classList.contains("c2")){var u=DOMTokenList.prototype.add,d=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,u.bind(this))};DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,d.bind(this))}}c.classList.toggle("c3",false);if(c.classList.contains("c3")){var p=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){if(1 in arguments&&!this.contains(e)===!t){return t}else{return p.call(this,e)}}}c=null;function h(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}if(!String.prototype.startsWith){(function(){"use strict";var e=function(){try{var e={};var t=Object.defineProperty;var n=t(e,e,e)&&t}catch(e){}return n}();var t={}.toString;var n=function(e){if(this==null){throw new TypeError}var n=String(this);if(e&&t.call(e)=="[object RegExp]"){throw new TypeError}var i=n.length;var r=String(e);var o=r.length;var s=arguments.length>1?arguments[1]:undefined;var a=s?Number(s):0;if(a!=a){a=0}var l=Math.min(Math.max(a,0),i);if(o+l>i){return false}var c=-1;while(++c<o){if(n.charCodeAt(l+c)!=r.charCodeAt(c)){return false}}return true};if(e){e(String.prototype,"startsWith",{value:n,configurable:true,writable:true})}else{String.prototype.startsWith=n}})()}if(!Object.keys){Object.keys=function(e,t,n){n=[];for(t in e){n.hasOwnProperty.call(e,t)&&n.push(t)}return n}}if(HTMLSelectElement&&!HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")){Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}})}function f(e,t){var n=e.selectedOptions,i=[],r;if(t){for(var o=0,s=n.length;o<s;o++){r=n[o];if(!(r.disabled||r.parentNode.tagName==="OPTGROUP"&&r.parentNode.disabled)){i.push(r)}}return i}return n}function m(e,t){var n=[],i=t||e.selectedOptions,r;for(var o=0,s=i.length;o<s;o++){r=i[o];if(!(r.disabled||r.parentNode.tagName==="OPTGROUP"&&r.parentNode.disabled)){n.push(r.value)}}if(!e.multiple){return!n.length?null:n[0]}return n}var g={useDefault:false,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,n){if(n&&!g.useDefault)e(t).data("selected",true);return g._set.apply(this,arguments)};var v=null;var y=function(){try{new Event("change");return true}catch(e){return false}}();e.fn.triggerNative=function(e){var t=this[0],n;if(t.dispatchEvent){if(y){n=new Event(e,{bubbles:true})}else{n=document.createEvent("Event");n.initEvent(e,true,false)}t.dispatchEvent(n)}else if(t.fireEvent){n=document.createEventObject();n.eventType=e;t.fireEvent("on"+e,n)}else{this.trigger(e)}};function b(e,t,n,i){var r=["display","subtext","tokens"],o=false;for(var s=0;s<r.length;s++){var a=r[s],l=e[a];if(l){l=l.toString();if(a==="display"){l=l.replace(/<[^>]+>/g,"")}if(i)l=A(l);l=l.toUpperCase();if(n==="contains"){o=l.indexOf(t)>=0}else{o=l.startsWith(t)}if(o)break}}return o}function _(e){return parseInt(e,10)||0}var x={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"};var w=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var k="\\u0300-\\u036f",C="\\ufe20-\\ufe2f",S="\\u20d0-\\u20ff",T="\\u1ab0-\\u1aff",E="\\u1dc0-\\u1dff",q=k+C+S+T+E;var j="["+q+"]";var P=RegExp(j,"g");function F(e){return x[e]}function A(e){e=e.toString();return e&&e.replace(w,F).replace(P,"")}var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var D=function(e){var t=function(t){return e[t]};var n="(?:"+Object.keys(e).join("|")+")";var i=RegExp(n);var r=RegExp(n,"g");return function(e){e=e==null?"":""+e;return i.test(e)?e.replace(r,t):e}};var O=D(I);var B={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};var $={ESCAPE:27,ENTER:13,SPACE:32,TAB:9,ARROW_UP:38,ARROW_DOWN:40};var R={success:false,major:"3"};try{R.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".");R.major=R.full[0];R.success=true}catch(e){}var M=0;var L=".bs.select";var N={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"};var U={MENU:"."+N.MENU};var H={span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(""),fragment:document.createDocumentFragment()};H.a.setAttribute("role","option");if(R.major==="4")H.a.className="dropdown-item";H.subtext.className="text-muted";H.text=H.span.cloneNode(false);H.text.className="text";H.checkMark=H.span.cloneNode(false);var z=new RegExp($.ARROW_UP+"|"+$.ARROW_DOWN);var V=new RegExp("^"+$.TAB+"$|"+$.ESCAPE);var W={li:function(e,t,n){var i=H.li.cloneNode(false);if(e){if(e.nodeType===1||e.nodeType===11){i.appendChild(e)}else{i.innerHTML=e}}if(typeof t!=="undefined"&&t!=="")i.className=t;if(typeof n!=="undefined"&&n!==null)i.classList.add("optgroup-"+n);return i},a:function(e,t,n){var i=H.a.cloneNode(true);if(e){if(e.nodeType===11){i.appendChild(e)}else{i.insertAdjacentHTML("beforeend",e)}}if(typeof t!=="undefined"&&t!=="")i.classList.add.apply(i.classList,t.split(" "));if(n)i.setAttribute("style",n);return i},text:function(e,t){var n=H.text.cloneNode(false),i,r;if(e.content){n.innerHTML=e.content}else{n.textContent=e.text;if(e.icon){var o=H.whitespace.cloneNode(false);r=(t===true?H.i:H.span).cloneNode(false);r.className=this.options.iconBase+" "+e.icon;H.fragment.appendChild(r);H.fragment.appendChild(o)}if(e.subtext){i=H.subtext.cloneNode(false);i.textContent=e.subtext;n.appendChild(i)}}if(t===true){while(n.childNodes.length>0){H.fragment.appendChild(n.childNodes[0])}}else{H.fragment.appendChild(n)}return H.fragment},label:function(e){var t=H.text.cloneNode(false),n,i;t.innerHTML=e.display;if(e.icon){var r=H.whitespace.cloneNode(false);i=H.span.cloneNode(false);i.className=this.options.iconBase+" "+e.icon;H.fragment.appendChild(i);H.fragment.appendChild(r)}if(e.subtext){n=H.subtext.cloneNode(false);n.textContent=e.subtext;t.appendChild(n)}H.fragment.appendChild(t);return H.fragment}};var Y=function(t,n){var i=this;if(!g.useDefault){e.valHooks.select.set=g._set;g.useDefault=true}this.$element=e(t);this.$newElement=null;this.$button=null;this.$menu=null;this.options=n;this.selectpicker={main:{},search:{},current:{},view:{},isSearching:false,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout((function(){i.selectpicker.keydown.keyHistory=""}),800)}}}};this.sizeInfo={};if(this.options.title===null){this.options.title=this.$element.attr("title")}var r=this.options.windowPadding;if(typeof r==="number"){this.options.windowPadding=[r,r,r,r]}this.val=Y.prototype.val;this.render=Y.prototype.render;this.refresh=Y.prototype.refresh;this.setStyle=Y.prototype.setStyle;this.selectAll=Y.prototype.selectAll;this.deselectAll=Y.prototype.deselectAll;this.destroy=Y.prototype.destroy;this.remove=Y.prototype.remove;this.show=Y.prototype.show;this.hide=Y.prototype.hide;this.init()};Y.VERSION="1.13.14";Y.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return e==1?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[e==1?"Limit reached ({n} item max)":"Limit reached ({n} items max)",t==1?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:false,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:N.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,liveSearchPlaceholder:null,liveSearchNormalize:false,liveSearchStyle:"contains",actionsBox:false,iconBase:N.ICONBASE,tickIcon:N.TICKICON,showTick:false,template:{caret:'<span class="caret"></span>'},maxOptions:false,mobile:false,selectOnTab:false,dropdownAlignRight:false,windowPadding:0,virtualScroll:600,display:false,sanitize:true,sanitizeFn:null,whiteList:r};Y.prototype={constructor:Y,init:function(){var e=this,t=this.$element.attr("id");M++;this.selectId="bs-select-"+M;this.$element[0].classList.add("bs-select-hidden");this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");if(this.$element[0].classList.contains("show-tick")){this.options.showTick=true}this.$newElement=this.createDropdown();this.buildData();this.$element.after(this.$newElement).prependTo(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(U.MENU);this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");this.$element[0].classList.remove("bs-select-hidden");if(this.options.dropdownAlignRight===true)this.$menu[0].classList.add(N.MENURIGHT);if(typeof t!=="undefined"){this.$button.attr("data-id",t)}this.checkDisabled();this.clickListener();if(this.options.liveSearch){this.liveSearchListener();this.focusedParent=this.$searchbox[0]}else{this.focusedParent=this.$menuInner[0]}this.setStyle();this.render();this.setWidth();if(this.options.container){this.selectPosition()}else{this.$element.on("hide"+L,(function(){if(e.isVirtual()){var t=e.$menuInner[0],n=t.firstChild.cloneNode(false);t.replaceChild(n,t.firstChild);t.scrollTop=0}}))}this.$menu.data("this",this);this.$newElement.data("this",this);if(this.options.mobile)this.mobile();this.$newElement.on({"hide.bs.dropdown":function(t){e.$element.trigger("hide"+L,t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden"+L,t)},"show.bs.dropdown":function(t){e.$element.trigger("show"+L,t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown"+L,t)}});if(e.$element[0].hasAttribute("required")){this.$element.on("invalid"+L,(function(){e.$button[0].classList.add("bs-invalid");e.$element.on("shown"+L+".invalid",(function(){e.$element.val(e.$element.val()).off("shown"+L+".invalid")})).on("rendered"+L,(function(){if(this.validity.valid)e.$button[0].classList.remove("bs-invalid");e.$element.off("rendered"+L)}));e.$button.on("blur"+L,(function(){e.$element.trigger("focus").trigger("blur");e.$button.off("blur"+L)}))}))}setTimeout((function(){e.buildList();e.$element.trigger("loaded"+L)}))},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",n=this.multiple?' aria-multiselectable="true"':"",i="",r=this.autofocus?" autofocus":"";if(R.major<4&&this.$element.parent().hasClass("input-group")){i=" input-group-btn"}var o,s="",a="",l="",c="";if(this.options.header){s='<div class="'+N.POPOVERHEADER+'">'+'<button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"}if(this.options.liveSearch){a='<div class="bs-searchbox">'+'<input type="search" class="form-control" autocomplete="off"'+(this.options.liveSearchPlaceholder===null?"":' placeholder="'+O(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list">'+"</div>"}if(this.multiple&&this.options.actionsBox){l='<div class="bs-actionsbox">'+'<div class="btn-group btn-group-sm btn-block">'+'<button type="button" class="actions-btn bs-select-all btn '+N.BUTTONCLASS+'">'+this.options.selectAllText+"</button>"+'<button type="button" class="actions-btn bs-deselect-all btn '+N.BUTTONCLASS+'">'+this.options.deselectAllText+"</button>"+"</div>"+"</div>"}if(this.multiple&&this.options.doneButton){c='<div class="bs-donebutton">'+'<div class="btn-group btn-block">'+'<button type="button" class="btn btn-sm '+N.BUTTONCLASS+'">'+this.options.doneButtonText+"</button>"+"</div>"+"</div>"}o='<div class="dropdown bootstrap-select'+t+i+'">'+'<button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+(this.options.display==="static"?'data-display="static"':"")+'data-toggle="dropdown"'+r+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false">'+'<div class="filter-option">'+'<div class="filter-option-inner">'+'<div class="filter-option-inner-inner"></div>'+"</div> "+"</div>"+(R.major==="4"?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+"</button>"+'<div class="'+N.MENU+" "+(R.major==="4"?"":N.SHOW)+'">'+s+a+l+'<div class="inner '+N.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+n+">"+'<ul class="'+N.MENU+" inner "+(R.major==="4"?N.SHOW:"")+'" role="presentation">'+"</ul>"+"</div>"+c+"</div>"+"</div>";return e(o)},setPositionData:function(){this.selectpicker.view.canHighlight=[];this.selectpicker.view.size=0;for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],n=true;if(t.type==="divider"){n=false;t.height=this.sizeInfo.dividerHeight}else if(t.type==="optgroup-label"){n=false;t.height=this.sizeInfo.dropdownHeaderHeight}else{t.height=this.sizeInfo.liHeight}if(t.disabled)n=false;this.selectpicker.view.canHighlight.push(n);if(n){this.selectpicker.view.size++;t.posinset=this.selectpicker.view.size}t.position=(e===0?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return this.options.virtualScroll!==false&&this.selectpicker.main.elements.length>=this.options.virtualScroll||this.options.virtualScroll===true},createView:function(t,n,i){var r=this,o=0,s=[],a,c;this.selectpicker.isSearching=t;this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main;this.setPositionData();if(n){if(i){o=this.$menuInner[0].scrollTop}else if(!r.multiple){var u=r.$element[0],d=(u.options[u.selectedIndex]||{}).liIndex;if(typeof d==="number"&&r.options.size!==false){var p=r.selectpicker.main.data[d],f=p&&p.position;if(f){o=f-(r.sizeInfo.menuInnerHeight+r.sizeInfo.liHeight)/2}}}}m(o,true);this.$menuInner.off("scroll.createView").on("scroll.createView",(function(e,t){if(!r.noScroll)m(this.scrollTop,t);r.noScroll=false}));function m(e,n){var i=r.selectpicker.current.elements.length,o=[],u,d,p,f,m,g,v,y,b=true,_=r.isVirtual();r.selectpicker.view.scrollTop=e;u=Math.ceil(r.sizeInfo.menuInnerHeight/r.sizeInfo.liHeight*1.5);d=Math.round(i/u)||1;for(var x=0;x<d;x++){var w=(x+1)*u;if(x===d-1){w=i}o[x]=[x*u+(!x?0:1),w];if(!i)break;if(m===undefined&&e-1<=r.selectpicker.current.data[w-1].position-r.sizeInfo.menuInnerHeight){m=x}}if(m===undefined)m=0;g=[r.selectpicker.view.position0,r.selectpicker.view.position1];p=Math.max(0,m-1);f=Math.min(d-1,m+1);r.selectpicker.view.position0=_===false?0:Math.max(0,o[p][0])||0;r.selectpicker.view.position1=_===false?i:Math.min(i,o[f][1])||0;v=g[0]!==r.selectpicker.view.position0||g[1]!==r.selectpicker.view.position1;if(r.activeIndex!==undefined){c=r.selectpicker.main.elements[r.prevActiveIndex];s=r.selectpicker.main.elements[r.activeIndex];a=r.selectpicker.main.elements[r.selectedIndex];if(n){if(r.activeIndex!==r.selectedIndex){r.defocusItem(s)}r.activeIndex=undefined}if(r.activeIndex&&r.activeIndex!==r.selectedIndex){r.defocusItem(a)}}if(r.prevActiveIndex!==undefined&&r.prevActiveIndex!==r.activeIndex&&r.prevActiveIndex!==r.selectedIndex){r.defocusItem(c)}if(n||v){y=r.selectpicker.view.visibleElements?r.selectpicker.view.visibleElements.slice():[];if(_===false){r.selectpicker.view.visibleElements=r.selectpicker.current.elements}else{r.selectpicker.view.visibleElements=r.selectpicker.current.elements.slice(r.selectpicker.view.position0,r.selectpicker.view.position1)}r.setOptionStatus();if(t||_===false&&n)b=!h(y,r.selectpicker.view.visibleElements);if((n||_===true)&&b){var k=r.$menuInner[0],C=document.createDocumentFragment(),S=k.firstChild.cloneNode(false),T,E,q=r.selectpicker.view.visibleElements,j=[];k.replaceChild(S,k.firstChild);for(var x=0,P=q.length;x<P;x++){var F=q[x],A,I;if(r.options.sanitize){A=F.lastChild;if(A){I=r.selectpicker.current.data[x+r.selectpicker.view.position0];if(I&&I.content&&!I.sanitized){j.push(A);I.sanitized=true}}}C.appendChild(F)}if(r.options.sanitize&&j.length){l(j,r.options.whiteList,r.options.sanitizeFn)}if(_===true){T=r.selectpicker.view.position0===0?0:r.selectpicker.current.data[r.selectpicker.view.position0-1].position;E=r.selectpicker.view.position1>i-1?0:r.selectpicker.current.data[i-1].position-r.selectpicker.current.data[r.selectpicker.view.position1-1].position;k.firstChild.style.marginTop=T+"px";k.firstChild.style.marginBottom=E+"px"}else{k.firstChild.style.marginTop=0;k.firstChild.style.marginBottom=0}k.firstChild.appendChild(C);if(_===true&&r.sizeInfo.hasScrollBar){var D=k.firstChild.offsetWidth;if(n&&D<r.sizeInfo.menuInnerInnerWidth&&r.sizeInfo.totalMenuWidth>r.sizeInfo.selectWidth){k.firstChild.style.minWidth=r.sizeInfo.menuInnerInnerWidth+"px"}else if(D>r.sizeInfo.menuInnerInnerWidth){r.$menu[0].style.minWidth=0;var O=k.firstChild.offsetWidth;if(O>r.sizeInfo.menuInnerInnerWidth){r.sizeInfo.menuInnerInnerWidth=O;k.firstChild.style.minWidth=r.sizeInfo.menuInnerInnerWidth+"px"}r.$menu[0].style.minWidth=""}}}}r.prevActiveIndex=r.activeIndex;if(!r.options.liveSearch){r.$menuInner.trigger("focus")}else if(t&&n){var B=0,$;if(!r.selectpicker.view.canHighlight[B]){B=1+r.selectpicker.view.canHighlight.slice(1).indexOf(true)}$=r.selectpicker.view.visibleElements[B];r.defocusItem(r.selectpicker.view.currentActive);r.activeIndex=(r.selectpicker.current.data[B]||{}).index;r.focusItem($)}}e(window).off("resize"+L+"."+this.selectId+".createView").on("resize"+L+"."+this.selectId+".createView",(function(){var e=r.$newElement.hasClass(N.SHOW);if(e)m(r.$menuInner[0].scrollTop)}))},focusItem:function(e,t,n){if(e){t=t||this.selectpicker.main.data[this.activeIndex];var i=e.firstChild;if(i){i.setAttribute("aria-setsize",this.selectpicker.view.size);i.setAttribute("aria-posinset",t.posinset);if(n!==true){this.focusedParent.setAttribute("aria-activedescendant",i.id);e.classList.add("active");i.classList.add("active")}}}},defocusItem:function(e){if(e){e.classList.remove("active");if(e.firstChild)e.firstChild.classList.remove("active")}},setPlaceholder:function(){var t=false;if(this.options.title&&!this.multiple){if(!this.selectpicker.view.titleOption)this.selectpicker.view.titleOption=document.createElement("option");t=true;var n=this.$element[0],i=false,r=!this.selectpicker.view.titleOption.parentNode;if(r){this.selectpicker.view.titleOption.className="bs-title-option";this.selectpicker.view.titleOption.value="";var o=e(n.options[n.selectedIndex]);i=o.attr("selected")===undefined&&this.$element.data("selected")===undefined}if(r||this.selectpicker.view.titleOption.index!==0){n.insertBefore(this.selectpicker.view.titleOption,n.firstChild)}if(i)n.selectedIndex=0}return t},buildData:function(){var e=':not([hidden]):not([data-hidden="true"])',t=[],n=0,i=this.setPlaceholder()?1:0;if(this.options.hideDisabled)e+=":not(:disabled)";var r=this.$element[0].querySelectorAll("select > *"+e);function o(e){var n=t[t.length-1];if(n&&n.type==="divider"&&(n.optID||e.optID)){return}e=e||{};e.type="divider";t.push(e)}function s(e,n){n=n||{};n.divider=e.getAttribute("data-divider")==="true";if(n.divider){o({optID:n.optID})}else{var i=t.length,r=e.style.cssText,s=r?O(r):"",a=(e.className||"")+(n.optgroupClass||"");if(n.optID)a="opt "+a;n.optionClass=a.trim();n.inlineStyle=s;n.text=e.textContent;n.content=e.getAttribute("data-content");n.tokens=e.getAttribute("data-tokens");n.subtext=e.getAttribute("data-subtext");n.icon=e.getAttribute("data-icon");e.liIndex=i;n.display=n.content||n.text;n.type="option";n.index=i;n.option=e;n.selected=!!e.selected;n.disabled=n.disabled||!!e.disabled;t.push(n)}}function a(i,r){var a=r[i],l=r[i-1],c=r[i+1],u=a.querySelectorAll("option"+e);if(!u.length)return;var d={display:O(a.label),subtext:a.getAttribute("data-subtext"),icon:a.getAttribute("data-icon"),type:"optgroup-label",optgroupClass:" "+(a.className||"")},p,h;n++;if(l){o({optID:n})}d.optID=n;t.push(d);for(var f=0,m=u.length;f<m;f++){var g=u[f];if(f===0){p=t.length-1;h=p+m}s(g,{headerIndex:p,lastIndex:h,optID:d.optID,optgroupClass:d.optgroupClass,disabled:a.disabled})}if(c){o({optID:n})}}for(var l=r.length;i<l;i++){var c=r[i];if(c.tagName!=="OPTGROUP"){s(c,{})}else{a(i,r)}}this.selectpicker.main.data=this.selectpicker.current.data=t},buildList:function(){var e=this,t=this.selectpicker.main.data,n=[],i=0;if((e.options.showTick||e.multiple)&&!H.checkMark.parentNode){H.checkMark.className=this.options.iconBase+" "+e.options.tickIcon+" check-mark";H.a.appendChild(H.checkMark)}function r(t){var r,o=0;switch(t.type){case"divider":r=W.li(false,N.DIVIDER,t.optID?t.optID+"div":undefined);break;case"option":r=W.li(W.a(W.text.call(e,t),t.optionClass,t.inlineStyle),"",t.optID);if(r.firstChild){r.firstChild.id=e.selectId+"-"+t.index}break;case"optgroup-label":r=W.li(W.label.call(e,t),"dropdown-header"+t.optgroupClass,t.optID);break}n.push(r);if(t.display)o+=t.display.length;if(t.subtext)o+=t.subtext.length;if(t.icon)o+=1;if(o>i){i=o;e.selectpicker.view.widestOption=n[n.length-1]}}for(var o=t.length,s=0;s<o;s++){var a=t[s];r(a)}this.selectpicker.main.elements=this.selectpicker.current.elements=n},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var e=this,t=this.$element[0],n=this.setPlaceholder()&&t.selectedIndex===0,i=f(t,this.options.hideDisabled),r=i.length,o=this.$button[0],s=o.querySelector(".filter-option-inner-inner"),a=document.createTextNode(this.options.multipleSeparator),c=H.fragment.cloneNode(false),u,d,p=false;o.classList.toggle("bs-placeholder",e.multiple?!r:!m(t,i));this.tabIndex();if(this.options.selectedTextFormat==="static"){c=W.text.call(this,{text:this.options.title},true)}else{u=this.multiple&&this.options.selectedTextFormat.indexOf("count")!==-1&&r>1;if(u){d=this.options.selectedTextFormat.split(">");u=d.length>1&&r>d[1]||d.length===1&&r>=2}if(u===false){if(!n){for(var h=0;h<r;h++){if(h<50){var g=i[h],v=this.selectpicker.main.data[g.liIndex],y={};if(this.multiple&&h>0){c.appendChild(a.cloneNode(false))}if(g.title){y.text=g.title}else if(v){if(v.content&&e.options.showContent){y.content=v.content.toString();p=true}else{if(e.options.showIcon){y.icon=v.icon}if(e.options.showSubtext&&!e.multiple&&v.subtext)y.subtext=" "+v.subtext;y.text=g.textContent.trim()}}c.appendChild(W.text.call(this,y,true))}else{break}}if(r>49){c.appendChild(document.createTextNode("..."))}}}else{var b=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';if(this.options.hideDisabled)b+=":not(:disabled)";var _=this.$element[0].querySelectorAll("select > option"+b+", optgroup"+b+" option"+b).length,x=typeof this.options.countSelectedText==="function"?this.options.countSelectedText(r,_):this.options.countSelectedText;c=W.text.call(this,{text:x.replace("{0}",r.toString()).replace("{1}",_.toString())},true)}}if(this.options.title==undefined){this.options.title=this.$element.attr("title")}if(!c.childNodes.length){c=W.text.call(this,{text:typeof this.options.title!=="undefined"?this.options.title:this.options.noneSelectedText},true)}o.title=c.textContent.replace(/<[^>]*>?/g,"").trim();if(this.options.sanitize&&p){l([c],e.options.whiteList,e.options.sanitizeFn)}s.innerHTML="";s.appendChild(c);if(R.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")){var w=o.querySelector(".filter-expand"),k=s.cloneNode(true);k.className="filter-expand";if(w){o.replaceChild(k,w)}else{o.appendChild(k)}}this.$element.trigger("rendered"+L)},setStyle:function(e,t){var n=this.$button[0],i=this.$newElement[0],r=this.options.style.trim(),o;if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""))}if(R.major<4){i.classList.add("bs3");if(i.parentNode.classList.contains("input-group")&&(i.previousElementSibling||i.nextElementSibling)&&(i.previousElementSibling||i.nextElementSibling).classList.contains("input-group-addon")){i.classList.add("bs3-has-addon")}}if(e){o=e.trim()}else{o=r}if(t=="add"){if(o)n.classList.add.apply(n.classList,o.split(" "))}else if(t=="remove"){if(o)n.classList.remove.apply(n.classList,o.split(" "))}else{if(r)n.classList.remove.apply(n.classList,r.split(" "));if(o)n.classList.add.apply(n.classList,o.split(" "))}},liHeight:function(t){if(!t&&(this.options.size===false||Object.keys(this.sizeInfo).length))return;var n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("ul"),s=document.createElement("li"),a=document.createElement("li"),l=document.createElement("li"),c=document.createElement("a"),u=document.createElement("span"),d=this.options.header&&this.$menu.find("."+N.POPOVERHEADER).length>0?this.$menu.find("."+N.POPOVERHEADER)[0].cloneNode(true):null,p=this.options.liveSearch?document.createElement("div"):null,h=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(true):null,f=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(true):null,m=this.$element.find("option")[0];this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth;u.className="text";c.className="dropdown-item "+(m?m.className:"");n.className=this.$menu[0].parentNode.className+" "+N.SHOW;n.style.width=0;if(this.options.width==="auto")i.style.minWidth=0;i.className=N.MENU+" "+N.SHOW;r.className="inner "+N.SHOW;o.className=N.MENU+" inner "+(R.major==="4"?N.SHOW:"");s.className=N.DIVIDER;a.className="dropdown-header";u.appendChild(document.createTextNode(""));c.appendChild(u);l.appendChild(c);a.appendChild(u.cloneNode(true));if(this.selectpicker.view.widestOption){o.appendChild(this.selectpicker.view.widestOption.cloneNode(true))}o.appendChild(l);o.appendChild(s);o.appendChild(a);if(d)i.appendChild(d);if(p){var g=document.createElement("input");p.className="bs-searchbox";g.className="form-control";p.appendChild(g);i.appendChild(p)}if(h)i.appendChild(h);r.appendChild(o);i.appendChild(r);if(f)i.appendChild(f);n.appendChild(i);document.body.appendChild(n);var v=l.offsetHeight,y=a?a.offsetHeight:0,b=d?d.offsetHeight:0,x=p?p.offsetHeight:0,w=h?h.offsetHeight:0,k=f?f.offsetHeight:0,C=e(s).outerHeight(true),S=window.getComputedStyle?window.getComputedStyle(i):false,T=i.offsetWidth,E=S?null:e(i),q={vert:_(S?S.paddingTop:E.css("paddingTop"))+_(S?S.paddingBottom:E.css("paddingBottom"))+_(S?S.borderTopWidth:E.css("borderTopWidth"))+_(S?S.borderBottomWidth:E.css("borderBottomWidth")),horiz:_(S?S.paddingLeft:E.css("paddingLeft"))+_(S?S.paddingRight:E.css("paddingRight"))+_(S?S.borderLeftWidth:E.css("borderLeftWidth"))+_(S?S.borderRightWidth:E.css("borderRightWidth"))},j={vert:q.vert+_(S?S.marginTop:E.css("marginTop"))+_(S?S.marginBottom:E.css("marginBottom"))+2,horiz:q.horiz+_(S?S.marginLeft:E.css("marginLeft"))+_(S?S.marginRight:E.css("marginRight"))+2},P;r.style.overflowY="scroll";P=i.offsetWidth-T;document.body.removeChild(n);this.sizeInfo.liHeight=v;this.sizeInfo.dropdownHeaderHeight=y;this.sizeInfo.headerHeight=b;this.sizeInfo.searchHeight=x;this.sizeInfo.actionsHeight=w;this.sizeInfo.doneButtonHeight=k;this.sizeInfo.dividerHeight=C;this.sizeInfo.menuPadding=q;this.sizeInfo.menuExtras=j;this.sizeInfo.menuWidth=T;this.sizeInfo.menuInnerInnerWidth=T-q.horiz;this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth;this.sizeInfo.scrollBarWidth=P;this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight;this.setPositionData()},getSelectPosition:function(){var t=this,n=e(window),i=t.$newElement.offset(),r=e(t.options.container),o;if(t.options.container&&r.length&&!r.is("body")){o=r.offset();o.top+=parseInt(r.css("borderTopWidth"));o.left+=parseInt(r.css("borderLeftWidth"))}else{o={top:0,left:0}}var s=t.options.windowPadding;this.sizeInfo.selectOffsetTop=i.top-o.top-n.scrollTop();this.sizeInfo.selectOffsetBot=n.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-o.top-s[2];this.sizeInfo.selectOffsetLeft=i.left-o.left-n.scrollLeft();this.sizeInfo.selectOffsetRight=n.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-o.left-s[1];this.sizeInfo.selectOffsetTop-=s[0];this.sizeInfo.selectOffsetLeft-=s[3]},setMenuSize:function(e){this.getSelectPosition();var t=this.sizeInfo.selectWidth,n=this.sizeInfo.liHeight,i=this.sizeInfo.headerHeight,r=this.sizeInfo.searchHeight,o=this.sizeInfo.actionsHeight,s=this.sizeInfo.doneButtonHeight,a=this.sizeInfo.dividerHeight,l=this.sizeInfo.menuPadding,c,u,d=0,p,h,f,m,g,v;if(this.options.dropupAuto){g=n*this.selectpicker.current.elements.length+l.vert;v=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&g+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot;if(this.selectpicker.isSearching===true){v=this.selectpicker.dropup}this.$newElement.toggleClass(N.DROPUP,v);this.selectpicker.dropup=v}if(this.options.size==="auto"){h=this.selectpicker.current.elements.length>3?this.sizeInfo.liHeight*3+this.sizeInfo.menuExtras.vert-2:0;u=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert;p=h+i+r+o+s;m=Math.max(h-l.vert,0);if(this.$newElement.hasClass(N.DROPUP)){u=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert}f=u;c=u-i-r-o-s-l.vert}else if(this.options.size&&this.options.size!="auto"&&this.selectpicker.current.elements.length>this.options.size){for(var y=0;y<this.options.size;y++){if(this.selectpicker.current.data[y].type==="divider")d++}u=n*this.options.size+d*a+l.vert;c=u-l.vert;f=u+i+r+o+s;p=m=""}this.$menu.css({"max-height":f+"px",overflow:"hidden","min-height":p+"px"});this.$menuInner.css({"max-height":c+"px","overflow-y":"auto","min-height":m+"px"});this.sizeInfo.menuInnerHeight=Math.max(c,1);if(this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight){this.sizeInfo.hasScrollBar=true;this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth}if(this.options.dropdownAlignRight==="auto"){this.$menu.toggleClass(N.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-t)}if(this.dropdown&&this.dropdown._popper)this.dropdown._popper.update()},setSize:function(t){this.liHeight(t);if(this.options.header)this.$menu.css("padding-top",0);if(this.options.size!==false){var n=this,i=e(window);this.setMenuSize();if(this.options.liveSearch){this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",(function(){return n.setMenuSize()}))}if(this.options.size==="auto"){i.off("resize"+L+"."+this.selectId+".setMenuSize"+" scroll"+L+"."+this.selectId+".setMenuSize").on("resize"+L+"."+this.selectId+".setMenuSize"+" scroll"+L+"."+this.selectId+".setMenuSize",(function(){return n.setMenuSize()}))}else if(this.options.size&&this.options.size!="auto"&&this.selectpicker.current.elements.length>this.options.size){i.off("resize"+L+"."+this.selectId+".setMenuSize"+" scroll"+L+"."+this.selectId+".setMenuSize")}}this.createView(false,true,t)},setWidth:function(){var e=this;if(this.options.width==="auto"){requestAnimationFrame((function(){e.$menu.css("min-width","0");e.$element.on("loaded"+L,(function(){e.liHeight();e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),n=t.css("width","auto").children("button").outerWidth();t.remove();e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,n);e.$newElement.css("width",e.sizeInfo.selectWidth+"px")}))}))}else if(this.options.width==="fit"){this.$menu.css("min-width","");this.$newElement.css("width","").addClass("fit-width")}else if(this.options.width){this.$menu.css("min-width","");this.$newElement.css("width",this.options.width)}else{this.$menu.css("min-width","");this.$newElement.css("width","")}if(this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"){this.$newElement[0].classList.remove("fit-width")}},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t=this,n=e(this.options.container),i,r,o,s=function(s){var a={},l=t.options.display||(e.fn.dropdown.Constructor.Default?e.fn.dropdown.Constructor.Default.display:false);t.$bsContainer.addClass(s.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(N.DROPUP,s.hasClass(N.DROPUP));i=s.offset();if(!n.is("body")){r=n.offset();r.top+=parseInt(n.css("borderTopWidth"))-n.scrollTop();r.left+=parseInt(n.css("borderLeftWidth"))-n.scrollLeft()}else{r={top:0,left:0}}o=s.hasClass(N.DROPUP)?0:s[0].offsetHeight;if(R.major<4||l==="static"){a.top=i.top-r.top+o;a.left=i.left-r.left}a.width=s[0].offsetWidth;t.$bsContainer.css(a)};this.$button.on("click.bs.dropdown.data-api",(function(){if(t.isDisabled()){return}s(t.$newElement);t.$bsContainer.appendTo(t.options.container).toggleClass(N.SHOW,!t.$button.hasClass(N.SHOW)).append(t.$menu)}));e(window).off("resize"+L+"."+this.selectId+" scroll"+L+"."+this.selectId).on("resize"+L+"."+this.selectId+" scroll"+L+"."+this.selectId,(function(){var e=t.$newElement.hasClass(N.SHOW);if(e)s(t.$newElement)}));this.$element.on("hide"+L,(function(){t.$menu.data("height",t.$menu.height());t.$bsContainer.detach()}))},setOptionStatus:function(e){var t=this;t.noScroll=false;if(t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length){for(var n=0;n<t.selectpicker.view.visibleElements.length;n++){var i=t.selectpicker.current.data[n+t.selectpicker.view.position0],r=i.option;if(r){if(e!==true){t.setDisabled(i.index,i.disabled)}t.setSelected(i.index,r.selected)}}}},setSelected:function(e,t){var n=this.selectpicker.main.elements[e],i=this.selectpicker.main.data[e],r=this.activeIndex!==undefined,o=this.activeIndex===e,s,a,l=o||t&&!this.multiple&&!r;i.selected=t;a=n.firstChild;if(t){this.selectedIndex=e}n.classList.toggle("selected",t);if(l){this.focusItem(n,i);this.selectpicker.view.currentActive=n;this.activeIndex=e}else{this.defocusItem(n)}if(a){a.classList.toggle("selected",t);if(t){a.setAttribute("aria-selected",true)}else{if(this.multiple){a.setAttribute("aria-selected",false)}else{a.removeAttribute("aria-selected")}}}if(!l&&!r&&t&&this.prevActiveIndex!==undefined){s=this.selectpicker.main.elements[this.prevActiveIndex];this.defocusItem(s)}},setDisabled:function(e,t){var n=this.selectpicker.main.elements[e],i;this.selectpicker.main.data[e].disabled=t;i=n.firstChild;n.classList.toggle(N.DISABLED,t);if(i){if(R.major==="4")i.classList.toggle(N.DISABLED,t);if(t){i.setAttribute("aria-disabled",t);i.setAttribute("tabindex",-1)}else{i.removeAttribute("aria-disabled");i.setAttribute("tabindex",0)}}},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){if(this.isDisabled()){this.$newElement[0].classList.add(N.DISABLED);this.$button.addClass(N.DISABLED).attr("tabindex",-1).attr("aria-disabled",true)}else{if(this.$button[0].classList.contains(N.DISABLED)){this.$newElement[0].classList.remove(N.DISABLED);this.$button.removeClass(N.DISABLED).attr("aria-disabled",false)}if(this.$button.attr("tabindex")==-1&&!this.$element.data("tabindex")){this.$button.removeAttr("tabindex")}}},tabIndex:function(){if(this.$element.data("tabindex")!==this.$element.attr("tabindex")&&(this.$element.attr("tabindex")!==-98&&this.$element.attr("tabindex")!=="-98")){this.$element.data("tabindex",this.$element.attr("tabindex"));this.$button.attr("tabindex",this.$element.data("tabindex"))}this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,n=e(document);n.data("spaceSelect",false);this.$button.on("keyup",(function(e){if(/(32)/.test(e.keyCode.toString(10))&&n.data("spaceSelect")){e.preventDefault();n.data("spaceSelect",false)}}));this.$newElement.on("show.bs.dropdown",(function(){if(R.major>3&&!t.dropdown){t.dropdown=t.$button.data("bs.dropdown");t.dropdown._menu=t.$menu[0]}}));this.$button.on("click.bs.dropdown.data-api",(function(){if(!t.$newElement.hasClass(N.SHOW)){t.setSize()}}));function i(){if(t.options.liveSearch){t.$searchbox.trigger("focus")}else{t.$menuInner.trigger("focus")}}function r(){if(t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state.isCreated){i()}else{requestAnimationFrame(r)}}this.$element.on("shown"+L,(function(){if(t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop){t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop}if(R.major>3){requestAnimationFrame(r)}else{i()}}));this.$menuInner.on("mouseenter","li a",(function(e){var n=this.parentElement,i=t.isVirtual()?t.selectpicker.view.position0:0,r=Array.prototype.indexOf.call(n.parentElement.children,n),o=t.selectpicker.current.data[r+i];t.focusItem(n,o,true)}));this.$menuInner.on("click","li a",(function(n,i){var r=e(this),o=t.$element[0],s=t.isVirtual()?t.selectpicker.view.position0:0,a=t.selectpicker.current.data[r.parent().index()+s],l=a.index,c=m(o),u=o.selectedIndex,d=o.options[u],p=true;if(t.multiple&&t.options.maxOptions!==1){n.stopPropagation()}n.preventDefault();if(!t.isDisabled()&&!r.parent().hasClass(N.DISABLED)){var h=a.option,g=e(h),y=h.selected,b=g.parent("optgroup"),_=b.find("option"),x=t.options.maxOptions,w=b.data("maxOptions")||false;if(l===t.activeIndex)i=true;if(!i){t.prevActiveIndex=t.activeIndex;t.activeIndex=undefined}if(!t.multiple){if(d)d.selected=false;h.selected=true;t.setSelected(l,true)}else{h.selected=!y;t.setSelected(l,!y);r.trigger("blur");if(x!==false||w!==false){var k=x<f(o).length,C=w<b.find("option:selected").length;if(x&&k||w&&C){if(x&&x==1){o.selectedIndex=-1;h.selected=true;t.setOptionStatus(true)}else if(w&&w==1){for(var S=0;S<_.length;S++){var T=_[S];T.selected=false;t.setSelected(T.liIndex,false)}h.selected=true;t.setSelected(l,true)}else{var E=typeof t.options.maxOptionsText==="string"?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,q=typeof E==="function"?E(x,w):E,j=q[0].replace("{n}",x),P=q[1].replace("{n}",w),F=e('<div class="notify"></div>');if(q[2]){j=j.replace("{var}",q[2][x>1?0:1]);P=P.replace("{var}",q[2][w>1?0:1])}h.selected=false;t.$menu.append(F);if(x&&k){F.append(e("<div>"+j+"</div>"));p=false;t.$element.trigger("maxReached"+L)}if(w&&C){F.append(e("<div>"+P+"</div>"));p=false;t.$element.trigger("maxReachedGrp"+L)}setTimeout((function(){t.setSelected(l,false)}),10);F[0].classList.add("fadeOut");setTimeout((function(){F.remove()}),1050)}}}}if(!t.multiple||t.multiple&&t.options.maxOptions===1){t.$button.trigger("focus")}else if(t.options.liveSearch){t.$searchbox.trigger("focus")}if(p){if(t.multiple||u!==o.selectedIndex){v=[h.index,g.prop("selected"),c];t.$element.triggerNative("change")}}}}));this.$menu.on("click","li."+N.DISABLED+" a, ."+N.POPOVERHEADER+", ."+N.POPOVERHEADER+" :not(.close)",(function(n){if(n.currentTarget==this){n.preventDefault();n.stopPropagation();if(t.options.liveSearch&&!e(n.target).hasClass("close")){t.$searchbox.trigger("focus")}else{t.$button.trigger("focus")}}}));this.$menuInner.on("click",".divider, .dropdown-header",(function(e){e.preventDefault();e.stopPropagation();if(t.options.liveSearch){t.$searchbox.trigger("focus")}else{t.$button.trigger("focus")}}));this.$menu.on("click","."+N.POPOVERHEADER+" .close",(function(){t.$button.trigger("click")}));this.$searchbox.on("click",(function(e){e.stopPropagation()}));this.$menu.on("click",".actions-btn",(function(n){if(t.options.liveSearch){t.$searchbox.trigger("focus")}else{t.$button.trigger("focus")}n.preventDefault();n.stopPropagation();if(e(this).hasClass("bs-select-all")){t.selectAll()}else{t.deselectAll()}}));this.$element.on("change"+L,(function(){t.render();t.$element.trigger("changed"+L,v);v=null})).on("focus"+L,(function(){if(!t.options.mobile)t.$button.trigger("focus")}))},liveSearchListener:function(){var e=this,t=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",(function(){if(!!e.$searchbox.val()){e.$searchbox.val("")}}));this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",(function(e){e.stopPropagation()}));this.$searchbox.on("input propertychange",(function(){var n=e.$searchbox.val();e.selectpicker.search.elements=[];e.selectpicker.search.data=[];if(n){var i,r=[],o=n.toUpperCase(),s={},a=[],l=e._searchStyle(),c=e.options.liveSearchNormalize;if(c)o=A(o);for(var i=0;i<e.selectpicker.main.data.length;i++){var u=e.selectpicker.main.data[i];if(!s[i]){s[i]=b(u,o,l,c)}if(s[i]&&u.headerIndex!==undefined&&a.indexOf(u.headerIndex)===-1){if(u.headerIndex>0){s[u.headerIndex-1]=true;a.push(u.headerIndex-1)}s[u.headerIndex]=true;a.push(u.headerIndex);s[u.lastIndex+1]=true}if(s[i]&&u.type!=="optgroup-label")a.push(i)}for(var i=0,d=a.length;i<d;i++){var p=a[i],h=a[i-1],u=e.selectpicker.main.data[p],f=e.selectpicker.main.data[h];if(u.type!=="divider"||u.type==="divider"&&f&&f.type!=="divider"&&d-1!==i){e.selectpicker.search.data.push(u);r.push(e.selectpicker.main.elements[p])}}e.activeIndex=undefined;e.noScroll=true;e.$menuInner.scrollTop(0);e.selectpicker.search.elements=r;e.createView(true);if(!r.length){t.className="no-results";t.innerHTML=e.options.noneResultsText.replace("{0}",'"'+O(n)+'"');e.$menuInner[0].firstChild.appendChild(t)}}else{e.$menuInner.scrollTop(0);e.createView(false)}}))},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(typeof e!=="undefined"){var n=m(t);v=[null,null,n];this.$element.val(e).trigger("changed"+L,v);if(this.$newElement.hasClass(N.SHOW)){if(this.multiple){this.setOptionStatus(true)}else{var i=(t.options[t.selectedIndex]||{}).liIndex;if(typeof i==="number"){this.setSelected(this.selectedIndex,false);this.setSelected(i,true)}}}this.render();v=null;return this.$element}else{return this.$element.val()}},changeAll:function(e){if(!this.multiple)return;if(typeof e==="undefined")e=true;var t=this.$element[0],n=0,i=0,r=m(t);t.classList.add("bs-select-hidden");for(var o=0,s=this.selectpicker.current.data,a=s.length;o<a;o++){var l=s[o],c=l.option;if(c&&!l.disabled&&l.type!=="divider"){if(l.selected)n++;c.selected=e;if(e===true)i++}}t.classList.remove("bs-select-hidden");if(n===i)return;this.setOptionStatus();v=[null,null,r];this.$element.triggerNative("change")},selectAll:function(){return this.changeAll(true)},deselectAll:function(){return this.changeAll(false)},toggle:function(e){e=e||window.event;if(e)e.stopPropagation();this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var n=e(this),i=n.hasClass("dropdown-toggle"),r=i?n.closest(".dropdown"):n.closest(U.MENU),o=r.data("this"),s=o.findLis(),a,l,c,u,d,p=false,h=t.which===$.TAB&&!i&&!o.options.selectOnTab,f=z.test(t.which)||h,m=o.$menuInner[0].scrollTop,g=o.isVirtual(),v=g===true?o.selectpicker.view.position0:0;if(t.which>=112&&t.which<=123)return;l=o.$newElement.hasClass(N.SHOW);if(!l&&(f||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105||t.which>=65&&t.which<=90)){o.$button.trigger("click.bs.dropdown.data-api");if(o.options.liveSearch){o.$searchbox.trigger("focus");return}}if(t.which===$.ESCAPE&&l){t.preventDefault();o.$button.trigger("click.bs.dropdown.data-api").trigger("focus")}if(f){if(!s.length)return;c=o.selectpicker.main.elements[o.activeIndex];a=c?Array.prototype.indexOf.call(c.parentElement.children,c):-1;if(a!==-1){o.defocusItem(c)}if(t.which===$.ARROW_UP){if(a!==-1)a--;if(a+v<0)a+=s.length;if(!o.selectpicker.view.canHighlight[a+v]){a=o.selectpicker.view.canHighlight.slice(0,a+v).lastIndexOf(true)-v;if(a===-1)a=s.length-1}}else if(t.which===$.ARROW_DOWN||h){a++;if(a+v>=o.selectpicker.view.canHighlight.length)a=0;if(!o.selectpicker.view.canHighlight[a+v]){a=a+1+o.selectpicker.view.canHighlight.slice(a+v+1).indexOf(true)}}t.preventDefault();var y=v+a;if(t.which===$.ARROW_UP){if(v===0&&a===s.length-1){o.$menuInner[0].scrollTop=o.$menuInner[0].scrollHeight;y=o.selectpicker.current.elements.length-1}else{u=o.selectpicker.current.data[y];d=u.position-u.height;p=d<m}}else if(t.which===$.ARROW_DOWN||h){if(a===0){o.$menuInner[0].scrollTop=0;y=0}else{u=o.selectpicker.current.data[y];d=u.position-o.sizeInfo.menuInnerHeight;p=d>m}}c=o.selectpicker.current.elements[y];o.activeIndex=o.selectpicker.current.data[y].index;o.focusItem(c);o.selectpicker.view.currentActive=c;if(p)o.$menuInner[0].scrollTop=d;if(o.options.liveSearch){o.$searchbox.trigger("focus")}else{n.trigger("focus")}}else if(!n.is("input")&&!V.test(t.which)||t.which===$.SPACE&&o.selectpicker.keydown.keyHistory){var _,x=[],w;t.preventDefault();o.selectpicker.keydown.keyHistory+=B[t.which];if(o.selectpicker.keydown.resetKeyHistory.cancel)clearTimeout(o.selectpicker.keydown.resetKeyHistory.cancel);o.selectpicker.keydown.resetKeyHistory.cancel=o.selectpicker.keydown.resetKeyHistory.start();w=o.selectpicker.keydown.keyHistory;if(/^(.)\1+$/.test(w)){w=w.charAt(0)}for(var k=0;k<o.selectpicker.current.data.length;k++){var C=o.selectpicker.current.data[k],S;S=b(C,w,"startsWith",true);if(S&&o.selectpicker.view.canHighlight[k]){x.push(C.index)}}if(x.length){var T=0;s.removeClass("active").find("a").removeClass("active");if(w.length===1){T=x.indexOf(o.activeIndex);if(T===-1||T===x.length-1){T=0}else{T++}}_=x[T];u=o.selectpicker.main.data[_];if(m-u.position>0){d=u.position-u.height;p=true}else{d=u.position-o.sizeInfo.menuInnerHeight;p=u.position>m+o.sizeInfo.menuInnerHeight}c=o.selectpicker.main.elements[_];o.activeIndex=x[T];o.focusItem(c);if(c)c.firstChild.focus();if(p)o.$menuInner[0].scrollTop=d;n.trigger("focus")}}if(l&&(t.which===$.SPACE&&!o.selectpicker.keydown.keyHistory||t.which===$.ENTER||t.which===$.TAB&&o.options.selectOnTab)){if(t.which!==$.SPACE)t.preventDefault();if(!o.options.liveSearch||t.which!==$.SPACE){o.$menuInner.find(".active a").trigger("click",true);n.trigger("focus");if(!o.options.liveSearch){t.preventDefault();e(document).data("spaceSelect",true)}}}},mobile:function(){this.$element[0].classList.add("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t;this.checkDisabled();this.setStyle();this.render();this.buildData();this.buildList();this.setWidth();this.setSize(true);this.$element.trigger("refreshed"+L)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove();if(this.$bsContainer){this.$bsContainer.remove()}else{this.$menu.remove()}this.$element.off(L).removeData("selectpicker").removeClass("bs-select-hidden selectpicker");e(window).off(L+"."+this.selectId)}};function G(n){var i=arguments;var r=n;[].shift.apply(i);if(!R.success){try{R.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(e){if(Y.BootstrapVersion){R.full=Y.BootstrapVersion.split(" ")[0].split(".")}else{R.full=[R.major,"0","0"];console.warn("There was an issue retrieving Bootstrap's version. "+"Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. "+"If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e)}}R.major=R.full[0];R.success=true}if(R.major==="4"){var o=[];if(Y.DEFAULTS.style===N.BUTTONCLASS)o.push({name:"style",className:"BUTTONCLASS"});if(Y.DEFAULTS.iconBase===N.ICONBASE)o.push({name:"iconBase",className:"ICONBASE"});if(Y.DEFAULTS.tickIcon===N.TICKICON)o.push({name:"tickIcon",className:"TICKICON"});N.DIVIDER="dropdown-divider";N.SHOW="show";N.BUTTONCLASS="btn-light";N.POPOVERHEADER="popover-header";N.ICONBASE="";N.TICKICON="bs-ok-default";for(var s=0;s<o.length;s++){var n=o[s];Y.DEFAULTS[n.name]=N[n.className]}}var a;var l=this.each((function(){var n=e(this);if(n.is("select")){var o=n.data("selectpicker"),s=typeof r=="object"&&r;if(!o){var l=n.data();for(var c in l){if(l.hasOwnProperty(c)&&e.inArray(c,t)!==-1){delete l[c]}}var u=e.extend({},Y.DEFAULTS,e.fn.selectpicker.defaults||{},l,s);u.template=e.extend({},Y.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},l.template,s.template);n.data("selectpicker",o=new Y(this,u))}else if(s){for(var d in s){if(s.hasOwnProperty(d)){o.options[d]=s[d]}}}if(typeof r=="string"){if(o[r]instanceof Function){a=o[r].apply(o,i)}else{a=o.options[r]}}}}));if(typeof a!=="undefined"){return a}else{return l}}var K=e.fn.selectpicker;e.fn.selectpicker=G;e.fn.selectpicker.Constructor=Y;e.fn.selectpicker.noConflict=function(){e.fn.selectpicker=K;return this};var Q=e.fn.dropdown.Constructor._dataApiKeydownHandler||e.fn.dropdown.Constructor.prototype.keydown;e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",':not(.bootstrap-select) > [data-toggle="dropdown"]',Q).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",Q).on("keydown"+L,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',Y.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',(function(e){e.stopPropagation()}));e(window).on("load"+L+".data-api",(function(){e(".selectpicker").each((function(){var t=e(this);G.call(t,t.data())}))}))})(e)}))},Djcv:function(e,t){e.exports=function e(t){if(t==null)return[];return String(t).split(/\r\n?|\n/)}},EV28:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){"use strict";t=i(t);n=i(n);if(t===n)return 0;if(!t||!n)return Math.max(t.length,n.length);var r=new Array(n.length+1);for(var o=0;o<r.length;++o){r[o]=o}for(o=0;o<t.length;++o){var s=o+1;for(var a=0;a<n.length;++a){var l=s;s=r[a]+(t.charAt(o)===n.charAt(a)?0:1);var c=l+1;if(s>c){s=c}c=r[a+1]+1;if(s>c){s=c}r[a]=l}r[a]=s}return s}},EYlN:function(e,t,n){var i=n("Tzrs");e.exports=function e(t){return i(t,-1)}},"F/lw":function(e,t,n){(function(e){(function(){var t=null;(function(){var n=typeof t!=="undefined"&&t!==null&&!t.amd?t("moment"):this.moment;n.fn.round=function(e,t,n){if(typeof n==="undefined"){n="round"}var i=["Hours","Minutes","Seconds","Milliseconds"];var r=[24,60,60,1e3];t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();if(t.indexOf("s",t.length-1)===-1){t+="s"}var o=0;var s=false;var a=1;var l;for(var c in i){var u=i[c];if(u===t){o=this._d["get"+t]();l=r[c];s=true}else if(s){a*=r[c];o+=this._d["get"+u]()/a;this._d["set"+u](0)}}o=Math[n](o/e)*e;o=Math.min(o,l);this._d["set"+t](o);return this};n.fn.ceil=function(e,t){return this.round(e,t,"ceil")};n.fn.floor=function(e,t){return this.round(e,t,"floor")};if((true&&e!==null?e.exports:void 0)!=null){e.exports=n}}).call(this)}).call(window)}).call(this,n("YuTi")(e))},"F7n+":function(e,t){e.exports="/*\n *\n * Copyright (c) 2006/2007 Sam Collett (http://www.texotela.co.uk)\n * Licensed under the MIT License:\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Version 1.0\n * Demo: http://www.texotela.co.uk/code/jquery/numeric/\n *\n * $LastChangedDate: 2007-05-29 11:31:36 +0100 (Tue, 29 May 2007) $\n * $Rev: 2005 $\n */\neval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\\\b'+e(c)+'\\\\b','g'),k[c]);return p}('r.E.W=7(c,d){c=c||\".\";d=q d==\"7\"?d:7(){};6.K(7(e){g a=e.i?e.i:e.h?e.h:0;2(a==k&&6.N.J()==\"G\"){5 3}f 2(a==k){5 j}g b=j;2((e.4&&a==y)||(e.4&&a==v))5 3;2((e.4&&a==t)||(e.4&&a==u))5 3;2((e.4&&a==V)||(e.4&&a==S))5 3;2((e.4&&a==R)||(e.4&&a==Q))5 3;2((e.4&&a==P)||(e.4&&a==O)||(e.L&&a==p))5 3;2(a<I||a>H){2(a==p&&6.l.F==0)5 3;2(a==c.n(0)&&6.l.o(c)!=-1){b=j}2(a!=8&&a!=9&&a!=k&&a!=D&&a!=C&&a!=M&&a!=B&&a!=A){b=j}f{2(q e.i!=\"z\"){2(e.h==e.m&&e.m!=0){b=3}f 2(e.h!=0&&e.i==0&&e.m==0){b=3}}}2(a==c.n(0)&&6.l.o(c)==-1){b=3}}f{b=3}5 b}).x(7(){g a=r(6).w();2(a!=\"\"){g b=T U(\"^\\\\\\\\d+$|\\\\\\\\d*\"+c+\"\\\\\\\\d+\");2(!b.s(a)){d.X(6)}}});5 6}',60,60,'||if|true|ctrlKey|return|this|function||||||||else|var|keyCode|charCode|false|13|value|which|charCodeAt|indexOf|45|typeof|jQuery|exec|120|88|65|val|blur|97|undefined|46|39|36|35|fn|length|input|57|48|toLowerCase|keypress|shiftKey|37|nodeName|86|118|90|122|67|new|RegExp|99|numeric|apply'.split('|'),0,{}))"},F99g:function(e,t,n){n("8rVx")(n("zo2/"))},"FE+q":function(e,t,n){var i=n("ZVcv");e.exports=function e(t){return/^\s*$/.test(i(t))}},FWbn:function(e,t){e.exports="/**\n * jQuery.browser.mobile (http://detectmobilebrowser.com/)\n * jQuery.browser.mobile will be true if the browser is a mobile device (or pad device)\n **/\n(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);\n"},"H+5m":function(e,t,n){n("8rVx")(n("FWbn"))},HHgY:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){if(n==="")return true;return i(t).indexOf(n)!==-1}},HfAZ:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n,r){t=i(t);r=r||"...";n=~~n;return t.length>n?t.slice(0,n)+r:t}},IIMq:function(e,t,n){var i=n("Pg24");function r(e,t){var n,i,r=e.toLowerCase();t=[].concat(t);for(n=0;n<t.length;n+=1){i=t[n];if(!i)continue;if(i.test&&i.test(e))return true;if(i.toLowerCase()===r)return true}}e.exports=function e(t,n,o){if(typeof t==="number")t=""+t;if(typeof t!=="string")return!!t;t=i(t);if(r(t,n||["true","1"]))return true;if(r(t,o||["false","0"]))return false}},IJph:function(e,t,n){n("8rVx")(n("mO1O"))},IO0x:function(e,t){e.exports="/*globals $ */\nvar NavTooltips = {\n  init: function () {\n    $('#user_menu .dropdown-menu .account').each(function() {\n      $(this).tooltip({\n        placement: 'right',\n        title: $(this).text(),\n      });\n    });\n\n    let currentAccount = $('#user_menu .dropdown-menu .active-account');\n    currentAccount.tooltip({\n      placement: 'right',\n      title: currentAccount.text(),\n      offset: 10,\n    });\n\n    let email = $('#user_menu #user_info .user_info .email').text();\n    $('#user_info').tooltip({\n      placement: 'right',\n      title: email,\n      offset: 10,\n    });\n\n    $(\"#see_all_accounts\").click(function() {\n      window.dispatchEvent( new Event('vy-see-all-accounts') );\n    });\n  }\n};\n\n$(function() {\n  NavTooltips.init();\n});\n"},JEAp:function(e,t,n){var i;var r=r||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c="application/octet-stream",u=1e3*40,d=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,u)},p=function(e,t,n){t=[].concat(t);var i=t.length;while(i--){var r=e["on"+t[i]];if(typeof r==="function"){try{r.call(e,n||e)}catch(e){l(e)}}}},h=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},f=function(t,l,u){if(!u){t=h(t)}var f=this,m=t.type,g=m===c,v,y=function(){p(f,"writestart progress write writeend".split(" "))},b=function(){if((a||g&&s)&&e.FileReader){var i=new FileReader;i.onloadend=function(){var t=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;f.readyState=f.DONE;y()};i.readAsDataURL(t);f.readyState=f.INIT;return}if(!v){v=n().createObjectURL(t)}if(g){e.location.href=v}else{var r=e.open(v,"_blank");if(!r){e.location.href=v}}f.readyState=f.DONE;y();d(v)};f.readyState=f.INIT;if(r){v=n().createObjectURL(t);setTimeout((function(){i.href=v;i.download=l;o(i);y();d(v);f.readyState=f.DONE}));return}b()},m=f.prototype,g=function(e,t,n){return new f(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=h(e)}return navigator.msSaveOrOpenBlob(e,t)}}m.abort=function(){};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;return g}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(true&&e.exports){e.exports.saveAs=r}else if(true&&n("B9Yq")!==null&&n("PDX0")!==null){!(i=function(){return r}.call(t,n,t,e),i!==undefined&&(e.exports=i))}},JNEV:function(e,t,n){var i=n("ZVcv");var r=n("1wJT");var o=String.prototype.trimLeft;e.exports=function e(t,n){t=i(t);if(!n&&o)return o.call(t);n=r(n);return t.replace(new RegExp("^"+n+"+"),"")}},JdwY:function(e,t,n){var i,r,o;(function(s,a){"use strict";if(true){!(r=[n("EVdn")],i=a,o=typeof i==="function"?i.apply(t,r):i,o!==undefined&&(e.exports=o))}else{}})(this,(function e(t,n){"use strict";if(!Object.keys){Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if(typeof r!=="function"&&(typeof r!=="object"||r===null)){throw new TypeError("Object.keys called on non-object")}var o=[],s,a;for(s in r){if(e.call(r,s)){o.push(s)}}if(t){for(a=0;a<i;a++){if(e.call(r,n[a])){o.push(n[a])}}}return o}}()}var i={};var r="5.0.0";i.VERSION=r;var o={ar:{OK:"",CANCEL:"",CONFIRM:""},bg_BG:{OK:"",CANCEL:"",CONFIRM:""},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zruit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"",CANCEL:"",CONFIRM:""},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},eu:{OK:"OK",CANCEL:"Ezeztatu",CONFIRM:"Onartu"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"",CANCEL:"",CONFIRM:""},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"Confirmer"},he:{OK:"",CANCEL:"",CONFIRM:""},hu:{OK:"OK",CANCEL:"Mgsem",CONFIRM:"Megerst"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"",CONFIRM:""},ka:{OK:"OK",CANCEL:"",CONFIRM:""},ko:{OK:"OK",CANCEL:"",CONFIRM:""},lt:{OK:"Gerai",CANCEL:"Ataukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprint"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},sk:{OK:"OK",CANCEL:"Zrui",CONFIRM:"Potvrdi"},sl:{OK:"OK",CANCEL:"Preklii",CONFIRM:"Potrdi"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},sw:{OK:"Sawa",CANCEL:"Ghairi",CONFIRM:"Thibitisha"},ta:{OK:"",CANCEL:" ",CONFIRM:" "},th:{OK:"",CANCEL:"",CONFIRM:""},tr:{OK:"Tamam",CANCEL:"ptal",CONFIRM:"Onayla"},uk:{OK:"OK",CANCEL:"",CONFIRM:""},zh_CN:{OK:"OK",CANCEL:"",CONFIRM:""},zh_TW:{OK:"OK",CANCEL:"",CONFIRM:""}};var s={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-body"><div class="bootbox-body"></div></div>'+"</div>"+"</div>"+"</div>",header:'<div class="modal-header">'+'<h5 class="modal-title"></h5>'+"</div>",footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:"<option></option>",promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}};var a={locale:"en",backdrop:"static",animate:true,className:null,closeButton:true,show:true,container:"body",value:"",inputType:"text",swapButtonOrder:false,centerVertical:false,multiple:false,scrollable:false};i.locales=function(e){return e?o[e]:o};i.addLocale=function(e,n){t.each(["OK","CANCEL","CONFIRM"],(function(e,t){if(!n[t]){throw new Error('Please supply a translation for "'+t+'"')}}));o[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM};return i};i.removeLocale=function(e){if(e!=="en"){delete o[e]}else{throw new Error('"en" is used as the default and fallback locale and cannot be removed.')}return i};i.setLocale=function(e){return i.setDefaults("locale",e)};i.setDefaults=function(){var e={};if(arguments.length===2){e[arguments[0]]=arguments[1]}else{e=arguments[0]}t.extend(a,e);return i};i.hideAll=function(){t(".bootbox").modal("hide");return i};i.init=function(n){return e(n||t)};i.dialog=function(e){if(t.fn.modal===n){throw new Error('"$.fn.modal" is not defined; please double check you have included '+"the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ "+"for more details.")}e=f(e);if(t.fn.modal.Constructor.VERSION){e.fullBootstrapVersion=t.fn.modal.Constructor.VERSION;var i=e.fullBootstrapVersion.indexOf(".");e.bootstrap=e.fullBootstrapVersion.substring(0,i)}else{e.bootstrap="2";e.fullBootstrapVersion="2.3.2";console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.")}var r=t(s.dialog);var o=r.find(".modal-dialog");var a=r.find(".modal-body");var l=t(s.header);var c=t(s.footer);var u=e.buttons;var d={onEscape:e.onEscape};a.find(".bootbox-body").html(e.message);if(m(e.buttons)>0){g(u,(function(e,n){var i=t(s.button);i.data("bb-handler",e);i.addClass(n.className);switch(e){case"ok":case"confirm":i.addClass("bootbox-accept");break;case"cancel":i.addClass("bootbox-cancel");break}i.html(n.label);c.append(i);d[e]=n.callback}));a.after(c)}if(e.animate===true){r.addClass("fade")}if(e.className){r.addClass(e.className)}if(e.size){if(e.fullBootstrapVersion.substring(0,3)<"3.1"){console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")}switch(e.size){case"small":case"sm":o.addClass("modal-sm");break;case"large":case"lg":o.addClass("modal-lg");break;case"xl":case"extra-large":if(e.fullBootstrapVersion.substring(0,3)<"4.2"){console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")}o.addClass("modal-xl");break}}if(e.scrollable){if(e.fullBootstrapVersion.substring(0,3)<"4.3"){console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")}o.addClass("modal-dialog-scrollable")}if(e.title){a.before(l);r.find(".modal-title").html(e.title)}if(e.closeButton){var p=t(s.closeButton);if(e.title){if(e.bootstrap>3){r.find(".modal-header").append(p)}else{r.find(".modal-header").prepend(p)}}else{p.prependTo(a)}}if(e.centerVertical){if(e.fullBootstrapVersion<"4.0.0"){console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")}o.addClass("modal-dialog-centered")}r.one("hide.bs.modal",(function(e){if(e.target===this){r.off("escape.close.bb");r.off("click")}}));r.one("hidden.bs.modal",(function(e){if(e.target===this){r.remove()}}));r.one("shown.bs.modal",(function(){r.find(".bootbox-accept:first").trigger("focus")}));if(e.backdrop!=="static"){r.on("click.dismiss.bs.modal",(function(e){if(r.children(".modal-backdrop").length){e.currentTarget=r.children(".modal-backdrop").get(0)}if(e.target!==e.currentTarget){return}r.trigger("escape.close.bb")}))}r.on("escape.close.bb",(function(e){if(d.onEscape){v(e,r,d.onEscape)}}));r.on("click",".modal-footer button:not(.disabled)",(function(e){var i=t(this).data("bb-handler");if(i!==n){v(e,r,d[i])}}));r.on("click",".bootbox-close-button",(function(e){v(e,r,d.onEscape)}));r.on("keyup",(function(e){if(e.which===27){r.trigger("escape.close.bb")}}));t(e.container).append(r);r.modal({backdrop:e.backdrop?"static":false,keyboard:false,show:false});if(e.show){r.modal("show")}return r};i.alert=function(){var e;e=u("alert",["ok"],["message","callback"],arguments);if(e.callback&&!t.isFunction(e.callback)){throw new Error('alert requires the "callback" property to be a function when provided')}e.buttons.ok.callback=e.onEscape=function(){if(t.isFunction(e.callback)){return e.callback.call(this)}return true};return i.dialog(e)};i.confirm=function(){var e;e=u("confirm",["cancel","confirm"],["message","callback"],arguments);if(!t.isFunction(e.callback)){throw new Error("confirm requires a callback")}e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,false)};e.buttons.confirm.callback=function(){return e.callback.call(this,true)};return i.dialog(e)};i.prompt=function(){var e;var r;var o;var l;var c;var d;o=t(s.form);e=u("prompt",["cancel","confirm"],["title","callback"],arguments);if(!e.value){e.value=a.value}if(!e.inputType){e.inputType=a.inputType}c=e.show===n?a.show:e.show;e.show=false;e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)};e.buttons.confirm.callback=function(){var n;if(e.inputType==="checkbox"){n=l.find("input:checked").map((function(){return t(this).val()})).get()}else if(e.inputType==="radio"){n=l.find("input:checked").val()}else{if(l[0].checkValidity&&!l[0].checkValidity()){return false}else{if(e.inputType==="select"&&e.multiple===true){n=l.find("option:selected").map((function(){return t(this).val()})).get()}else{n=l.val()}}}return e.callback.call(this,n)};if(!e.title){throw new Error("prompt requires a title")}if(!t.isFunction(e.callback)){throw new Error("prompt requires a callback")}if(!s.inputs[e.inputType]){throw new Error("Invalid prompt type")}l=t(s.inputs[e.inputType]);switch(e.inputType){case"text":case"textarea":case"email":case"password":l.val(e.value);if(e.placeholder){l.attr("placeholder",e.placeholder)}if(e.pattern){l.attr("pattern",e.pattern)}if(e.maxlength){l.attr("maxlength",e.maxlength)}if(e.required){l.prop({required:true})}if(e.rows&&!isNaN(parseInt(e.rows))){if(e.inputType==="textarea"){l.attr({rows:e.rows})}}break;case"date":case"time":case"number":case"range":l.val(e.value);if(e.placeholder){l.attr("placeholder",e.placeholder)}if(e.pattern){l.attr("pattern",e.pattern)}if(e.required){l.prop({required:true})}if(e.inputType!=="date"){if(e.step){if(e.step==="any"||!isNaN(e.step)&&parseInt(e.step)>0){l.attr("step",e.step)}else{throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.')}}}if(y(e.inputType,e.min,e.max)){if(e.min!==n){l.attr("min",e.min)}if(e.max!==n){l.attr("max",e.max)}}break;case"select":var p={};d=e.inputOptions||[];if(!t.isArray(d)){throw new Error("Please pass an array of input options")}if(!d.length){throw new Error('prompt with "inputType" set to "select" requires at least one option')}if(e.placeholder){l.attr("placeholder",e.placeholder)}if(e.required){l.prop({required:true})}if(e.multiple){l.prop({multiple:true})}g(d,(function(e,i){var r=l;if(i.value===n||i.text===n){throw new Error('each option needs a "value" property and a "text" property')}if(i.group){if(!p[i.group]){p[i.group]=t("<optgroup />").attr("label",i.group)}r=p[i.group]}var o=t(s.option);o.attr("value",i.value).text(i.text);r.append(o)}));g(p,(function(e,t){l.append(t)}));l.val(e.value);break;case"checkbox":var h=t.isArray(e.value)?e.value:[e.value];d=e.inputOptions||[];if(!d.length){throw new Error('prompt with "inputType" set to "checkbox" requires at least one option')}l=t('<div class="bootbox-checkbox-list"></div>');g(d,(function(i,r){if(r.value===n||r.text===n){throw new Error('each option needs a "value" property and a "text" property')}var o=t(s.inputs[e.inputType]);o.find("input").attr("value",r.value);o.find("label").append("\n"+r.text);g(h,(function(e,t){if(t===r.value){o.find("input").prop("checked",true)}}));l.append(o)}));break;case"radio":if(e.value!==n&&t.isArray(e.value)){throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"')}d=e.inputOptions||[];if(!d.length){throw new Error('prompt with "inputType" set to "radio" requires at least one option')}l=t('<div class="bootbox-radiobutton-list"></div>');var f=true;g(d,(function(i,r){if(r.value===n||r.text===n){throw new Error('each option needs a "value" property and a "text" property')}var o=t(s.inputs[e.inputType]);o.find("input").attr("value",r.value);o.find("label").append("\n"+r.text);if(e.value!==n){if(r.value===e.value){o.find("input").prop("checked",true);f=false}}l.append(o)}));if(f){l.find('input[type="radio"]').first().prop("checked",true)}break}o.append(l);o.on("submit",(function(e){e.preventDefault();e.stopPropagation();r.find(".bootbox-accept").trigger("click")}));if(t.trim(e.message)!==""){var m=t(s.promptMessage).html(e.message);o.prepend(m);e.message=o}else{e.message=o}r=i.dialog(e);r.off("shown.bs.modal");r.on("shown.bs.modal",(function(){l.focus()}));if(c===true){r.modal("show")}return r};function l(e,t){var n=e.length;var i={};if(n<1||n>2){throw new Error("Invalid argument length")}if(n===2||typeof e[0]==="string"){i[t[0]]=e[0];i[t[1]]=e[1]}else{i=e[0]}return i}function c(e,n,i){return t.extend(true,{},e,l(n,i))}function u(e,t,n,i){var r;if(i&&i[0]){r=i[0].locale||a.locale;var o=i[0].swapButtonOrder||a.swapButtonOrder;if(o){t=t.reverse()}}var s={className:"bootbox-"+e,buttons:p(t,r)};return d(c(s,i,n),t)}function d(e,t){var i={};g(t,(function(e,t){i[t]=true}));g(e.buttons,(function(e){if(i[e]===n){throw new Error('button key "'+e+'" is not allowed (options are '+t.join(" ")+")")}}));return e}function p(e,t){var n={};for(var i=0,r=e.length;i<r;i++){var o=e[i];var s=o.toLowerCase();var a=o.toUpperCase();n[s]={label:h(a,t)}}return n}function h(e,t){var n=o[t];return n?n[e]:o.en[e]}function f(e){var n;var i;if(typeof e!=="object"){throw new Error("Please supply an object of options")}if(!e.message){throw new Error('"message" option must not be null or an empty string.')}e=t.extend({},a,e);if(!e.buttons){e.buttons={}}n=e.buttons;i=m(n);g(n,(function(r,o,s){if(t.isFunction(o)){o=n[r]={callback:o}}if(t.type(o)!=="object"){throw new Error('button with key "'+r+'" must be an object')}if(!o.label){o.label=r}if(!o.className){var a=false;if(e.swapButtonOrder){a=s===0}else{a=s===i-1}if(i<=2&&a){o.className="btn-primary"}else{o.className="btn-secondary btn-default"}}}));return e}function m(e){return Object.keys(e).length}function g(e,n){var i=0;t.each(e,(function(e,t){n(e,t,i++)}))}function v(e,n,i){e.stopPropagation();e.preventDefault();var r=t.isFunction(i)&&i.call(n,e)===false;if(!r){n.modal("hide")}}function y(e,t,i){var r=false;var o=true;var s=true;if(e==="date"){if(t!==n&&!(o=_(t))){console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.')}else if(i!==n&&!(s=_(i))){console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.')}}else if(e==="time"){if(t!==n&&!(o=b(t))){throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else if(i!==n&&!(s=b(i))){throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}}else{if(t!==n&&isNaN(t)){throw new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.')}if(i!==n&&isNaN(i)){throw new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}}if(o&&s){if(i<=t){throw new Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}else{r=true}}return r}function b(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function _(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}i.addLocale("en",{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"});return i}))},JnoB:function(e,t,n){(function(i){var r,o;var r,o;(function(i,s){if(true){!(r=[n("EVdn")],o=function(e){return i["Bloodhound"]=s(e)}.apply(t,r),o!==undefined&&(e.exports=o))}else{}})(this,(function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e==="string"},isNumber:function(e){return typeof e==="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e==="undefined"},isElement:function(e){return!!(e&&e.nodeType===1)},isJQuery:function(t){return t instanceof e},toStr:function e(n){return t.isUndefined(n)||n===null?"":n+""},bind:e.proxy,each:function(t,n){e.each(t,i);function i(e,t){return n(t,e)}},map:e.map,filter:e.grep,every:function(t,n){var i=true;if(!t){return i}e.each(t,(function(e,r){if(!(i=n.call(null,r,e,t))){return false}}));return!!i},some:function(t,n){var i=false;if(!t){return i}e.each(t,(function(e,r){if(i=n.call(null,r,e,t)){return false}}));return!!i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(true,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function t(n){return e.isFunction(n)?n:i;function i(){return String(n)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,r;return function(){var o=this,s=arguments,a,l;a=function(){i=null;if(!n){r=e.apply(o,s)}};l=n&&!i;clearTimeout(i);i=setTimeout(a,t);if(l){r=e.apply(o,s)}return r}},throttle:function(e,t){var n,i,r,o,s,a;s=0;a=function(){s=new Date;r=null;o=e.apply(n,i)};return function(){var l=new Date,c=t-(l-s);n=this;i=arguments;if(c<=0){clearTimeout(r);r=null;s=l;o=e.apply(n,i)}else if(!r){r=setTimeout(a,c)}return o}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(true)+e(true)+e()},noop:function(){}}}();var n="1.1.1";var i=function(){"use strict";return{nonword:n,whitespace:e,ngram:i,obj:{nonword:r(n),whitespace:r(e),ngram:r(i)}};function e(e){e=t.toStr(e);return e?e.split(/\s+/):[]}function n(e){e=t.toStr(e);return e?e.split(/\W+/):[]}function i(e){e=t.toStr(e);var n=[],i="";t.each(e.split(""),(function(e){if(e.match(/\s+/)){i=""}else{n.push(i+e);i+=e}}));return n}function r(e){return function n(i){i=t.isArray(i)?i:[].slice.call(arguments,0);return function n(r){var o=[];t.each(i,(function(n){o=o.concat(e(t.toStr(r[n])))}));return o}}}}();var r=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100;this.reset();if(this.maxSize<=0){this.set=this.get=e.noop}}t.mixin(n.prototype,{set:function e(t,n){var i=this.list.tail,o;if(this.size>=this.maxSize){this.list.remove(i);delete this.hash[i.key];this.size--}if(o=this.hash[t]){o.val=n;this.list.moveToFront(o)}else{o=new r(t,n);this.list.add(o);this.hash[t]=o;this.size++}},get:function e(t){var n=this.hash[t];if(n){this.list.moveToFront(n);return n.val}},reset:function e(){this.size=0;this.hash={};this.list=new i}});function i(){this.head=this.tail=null}t.mixin(i.prototype,{add:function e(t){if(this.head){t.next=this.head;this.head.prev=t}this.head=t;this.tail=this.tail||t},remove:function e(t){t.prev?t.prev.next=t.next:this.head=t.next;t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(e){this.remove(e);this.add(e)}});function r(e,t){this.key=e;this.val=t;this.prev=this.next=null}return n}();var o=function(){"use strict";var n;try{n=window.localStorage;n.setItem("~~~","!");n.removeItem("~~~")}catch(e){n=null}function i(e,i){this.prefix=["__",e,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix));this.ls=i||n;!this.ls&&this._noop()}t.mixin(i.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(e){if(e.name==="QuotaExceededError"){this.clear();this._noop()}}},get:function(e){if(this.isExpired(e)){this.remove(e)}return s(this.ls.getItem(this._prefix(e)))},set:function(e,n,i){if(t.isNumber(i)){this._safeSet(this._ttlKey(e),o(r()+i))}else{this.ls.removeItem(this._ttlKey(e))}return this._safeSet(this._prefix(e),o(n))},remove:function(e){this.ls.removeItem(this._ttlKey(e));this.ls.removeItem(this._prefix(e));return this},clear:function(){var e,t=a(this.keyMatcher);for(e=t.length;e--;){this.remove(t[e])}return this},isExpired:function(e){var n=s(this.ls.getItem(this._ttlKey(e)));return t.isNumber(n)&&r()>n?true:false}});return i;function r(){return(new Date).getTime()}function o(e){return JSON.stringify(t.isUndefined(e)?null:e)}function s(t){return e.parseJSON(t)}function a(e){var t,i,r=[],o=n.length;for(t=0;t<o;t++){if((i=n.key(t)).match(e)){r.push(i.replace(e,""))}}return r}}();var s=function(){"use strict";var n=0,i={},o=new r(10);function s(e){e=e||{};this.maxPendingRequests=e.maxPendingRequests||6;this.cancelled=false;this.lastReq=null;this._send=e.transport;this._get=e.limiter?e.limiter(this._get):this._get;this._cache=e.cache===false?new r(0):o}s.setMaxPendingRequests=function e(t){this.maxPendingRequests=t};s.resetCache=function e(){o.reset()};t.mixin(s.prototype,{_fingerprint:function t(n){n=n||{};return n.url+n.type+e.param(n.data||{})},_get:function(e,t){var r=this,o,s;o=this._fingerprint(e);if(this.cancelled||o!==this.lastReq){return}if(s=i[o]){s.done(a).fail(l)}else if(n<this.maxPendingRequests){n++;i[o]=this._send(e).done(a).fail(l).always(c)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function a(e){t(null,e);r._cache.set(o,e)}function l(){t(true)}function c(){n--;delete i[o];if(r.onDeckRequestArgs){r._get.apply(r,r.onDeckRequestArgs);r.onDeckRequestArgs=null}}},get:function(n,i){var r,o;i=i||e.noop;n=t.isString(n)?{url:n}:n||{};o=this._fingerprint(n);this.cancelled=false;this.lastReq=o;if(r=this._cache.get(o)){i(null,r)}else{this._get(n,i)}},cancel:function(){this.cancelled=true}});return s}();var a=window.SearchIndex=function(){"use strict";var n="c",i="i";function r(n){n=n||{};if(!n.datumTokenizer||!n.queryTokenizer){e.error("datumTokenizer and queryTokenizer are both required")}this.identify=n.identify||t.stringify;this.datumTokenizer=n.datumTokenizer;this.queryTokenizer=n.queryTokenizer;this.matchAnyQueryToken=n.matchAnyQueryToken;this.reset()}t.mixin(r.prototype,{bootstrap:function e(t){this.datums=t.datums;this.trie=t.trie},add:function(e){var r=this;e=t.isArray(e)?e:[e];t.each(e,(function(e){var a,l;r.datums[a=r.identify(e)]=e;l=o(r.datumTokenizer(e));t.each(l,(function(e){var t,o,l;t=r.trie;o=e.split("");while(l=o.shift()){t=t[n][l]||(t[n][l]=s());t[i].push(a)}}))}))},get:function e(n){var i=this;return t.map(n,(function(e){return i.datums[e]}))},search:function e(r){var s=this,c,u;c=o(this.queryTokenizer(r));t.each(c,(function(e){var t,r,o,a;if(u&&u.length===0&&!s.matchAnyQueryToken){return false}t=s.trie;r=e.split("");while(t&&(o=r.shift())){t=t[n][o]}if(t&&r.length===0){a=t[i].slice(0);u=u?l(u,a):a}else{if(!s.matchAnyQueryToken){u=[];return false}}}));return u?t.map(a(u),(function(e){return s.datums[e]})):[]},all:function e(){var t=[];for(var n in this.datums){t.push(this.datums[n])}return t},reset:function e(){this.datums={};this.trie=s()},serialize:function e(){return{datums:this.datums,trie:this.trie}}});return r;function o(e){e=t.filter(e,(function(e){return!!e}));e=t.map(e,(function(e){return e.toLowerCase()}));return e}function s(){var e={};e[i]=[];e[n]={};return e}function a(e){var t={},n=[];for(var i=0,r=e.length;i<r;i++){if(!t[e[i]]){t[e[i]]=true;n.push(e[i])}}return n}function l(e,t){var n=0,i=0,r=[];e=e.sort();t=t.sort();var o=e.length,s=t.length;while(n<o&&i<s){if(e[n]<t[i]){n++}else if(e[n]>t[i]){i++}else{r.push(e[n]);n++;i++}}return r}}();var l=function(){"use strict";var e;e={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function n(e){this.url=e.url;this.ttl=e.ttl;this.cache=e.cache;this.prepare=e.prepare;this.transform=e.transform;this.transport=e.transport;this.thumbprint=e.thumbprint;this.storage=new o(e.cacheKey)}t.mixin(n.prototype,{_settings:function e(){return{url:this.url,type:"GET",dataType:"json"}},store:function t(n){if(!this.cache){return}this.storage.set(e.data,n,this.ttl);this.storage.set(e.protocol,location.protocol,this.ttl);this.storage.set(e.thumbprint,this.thumbprint,this.ttl)},fromCache:function t(){var n={},i;if(!this.cache){return null}n.data=this.storage.get(e.data);n.protocol=this.storage.get(e.protocol);n.thumbprint=this.storage.get(e.thumbprint);i=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol;return n.data&&!i?n.data:null},fromNetwork:function(e){var t=this,n;if(!e){return}n=this.prepare(this._settings());this.transport(n).fail(i).done(r);function i(){e(true)}function r(n){e(null,t.transform(n))}},clear:function e(){this.storage.clear();return this}});return n}();var c=function(){"use strict";function e(e){this.url=e.url;this.prepare=e.prepare;this.transform=e.transform;this.indexResponse=e.indexResponse;this.transport=new s({cache:e.cache,limiter:e.limiter,transport:e.transport,maxPendingRequests:e.maxPendingRequests})}t.mixin(e.prototype,{_settings:function e(){return{url:this.url,type:"GET",dataType:"json"}},get:function e(t,n){var i=this,r;if(!n){return}t=t||"";r=this.prepare(t,this._settings());return this.transport.get(r,o);function o(e,t){e?n([]):n(i.transform(t))}},cancelLastRequest:function e(){this.transport.cancel()}});return e}();var u=function(){"use strict";return function n(o){var s,a;s={initialize:true,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:false,sufficient:5,indexRemote:false,sorter:null,local:[],prefetch:null,remote:null};o=t.mixin(s,o||{});!o.datumTokenizer&&e.error("datumTokenizer is required");!o.queryTokenizer&&e.error("queryTokenizer is required");a=o.sorter;o.sorter=a?function(e){return e.sort(a)}:t.identity;o.local=t.isFunction(o.local)?o.local():o.local;o.prefetch=i(o.prefetch);o.remote=r(o.remote);return o};function i(i){var r;if(!i){return null}r={url:null,ttl:24*60*60*1e3,cache:true,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null};i=t.isString(i)?{url:i}:i;i=t.mixin(r,i);!i.url&&e.error("prefetch requires url to be set");i.transform=i.filter||i.transform;i.cacheKey=i.cacheKey||i.url;i.thumbprint=n+i.thumbprint;i.transport=i.transport?a(i.transport):e.ajax;return i}function r(n){var i;if(!n){return}i={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null};n=t.isString(n)?{url:n}:n;n=t.mixin(i,n);!n.url&&e.error("remote requires url to be set");n.transform=n.filter||n.transform;n.prepare=o(n);n.limiter=s(n);n.transport=n.transport?a(n.transport):e.ajax;delete n.replace;delete n.wildcard;delete n.rateLimitBy;delete n.rateLimitWait;return n}function o(e){var t,n,i;t=e.prepare;n=e.replace;i=e.wildcard;if(t){return t}if(n){t=r}else if(e.wildcard){t=o}else{t=s}return t;function r(e,t){t.url=n(t.url,e);return t}function o(e,t){t.url=t.url.replace(i,encodeURIComponent(e));return t}function s(e,t){return t}}function s(e){var n,i,r;n=e.limiter;i=e.rateLimitBy;r=e.rateLimitWait;if(!n){n=/^throttle$/i.test(i)?s(r):o(r)}return n;function o(e){return function n(i){return t.debounce(i,e)}}function s(e){return function n(i){return t.throttle(i,e)}}}function a(n){return function i(r){var o=e.Deferred();n(r,s,a);return o;function s(e){t.defer((function(){o.resolve(e)}))}function a(e){t.defer((function(){o.reject(e)}))}}}}();var d=function(){"use strict";var n;n=window&&window.Bloodhound;function r(e){e=u(e);this.sorter=e.sorter;this.identify=e.identify;this.sufficient=e.sufficient;this.indexRemote=e.indexRemote;this.local=e.local;this.remote=e.remote?new c(e.remote):null;this.prefetch=e.prefetch?new l(e.prefetch):null;this.index=new a({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer});e.initialize!==false&&this.initialize()}r.noConflict=function e(){window&&(window.Bloodhound=n);return r};r.tokenizers=i;t.mixin(r.prototype,{__ttAdapter:function e(){var t=this;return this.remote?n:i;function n(e,n,i){return t.search(e,n,i)}function i(e,n){return t.search(e,n)}},_loadPrefetch:function t(){var n=this,i,r;i=e.Deferred();if(!this.prefetch){i.resolve()}else if(r=this.prefetch.fromCache()){this.index.bootstrap(r);i.resolve()}else{this.prefetch.fromNetwork(o)}return i.promise();function o(e,t){if(e){return i.reject()}n.add(t);n.prefetch.store(n.index.serialize());i.resolve()}},_initialize:function e(){var t=this,n;this.clear();(this.initPromise=this._loadPrefetch()).done(i);return this.initPromise;function i(){t.add(t.local)}},initialize:function e(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function e(t){this.index.add(t);return this},get:function e(n){n=t.isArray(n)?n:[].slice.call(arguments);return this.index.get(n)},search:function e(n,i,r){var o=this,s;i=i||t.noop;r=r||t.noop;s=this.sorter(this.index.search(n));i(this.remote?s.slice():s);if(this.remote&&s.length<this.sufficient){this.remote.get(n,a)}else if(this.remote){this.remote.cancelLastRequest()}return this;function a(e){var n=[];t.each(e,(function(e){!t.some(s,(function(t){return o.identify(e)===o.identify(t)}))&&n.push(e)}));o.indexRemote&&o.add(n);r(n)}},all:function e(){return this.index.all()},clear:function e(){this.index.reset();return this},clearPrefetchCache:function e(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function e(){s.resetCache();return this},ttAdapter:function e(){return this.__ttAdapter()}});return r}();return d}));(function(i,s){if(true){!(r=[n("EVdn")],o=function(e){return s(e)}.apply(t,r),o!==undefined&&(e.exports=o))}else{}})(this,(function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e==="string"},isNumber:function(e){return typeof e==="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e==="undefined"},isElement:function(e){return!!(e&&e.nodeType===1)},isJQuery:function(t){return t instanceof e},toStr:function e(n){return t.isUndefined(n)||n===null?"":n+""},bind:e.proxy,each:function(t,n){e.each(t,i);function i(e,t){return n(t,e)}},map:e.map,filter:e.grep,every:function(t,n){var i=true;if(!t){return i}e.each(t,(function(e,r){if(!(i=n.call(null,r,e,t))){return false}}));return!!i},some:function(t,n){var i=false;if(!t){return i}e.each(t,(function(e,r){if(i=n.call(null,r,e,t)){return false}}));return!!i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(true,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function t(n){return e.isFunction(n)?n:i;function i(){return String(n)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,r;return function(){var o=this,s=arguments,a,l;a=function(){i=null;if(!n){r=e.apply(o,s)}};l=n&&!i;clearTimeout(i);i=setTimeout(a,t);if(l){r=e.apply(o,s)}return r}},throttle:function(e,t){var n,i,r,o,s,a;s=0;a=function(){s=new Date;r=null;o=e.apply(n,i)};return function(){var l=new Date,c=t-(l-s);n=this;i=arguments;if(c<=0){clearTimeout(r);r=null;s=l;o=e.apply(n,i)}else if(!r){r=setTimeout(a,c)}return o}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},guid:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return"tt-"+e()+e(true)+e(true)+e()},noop:function(){}}}();var n=function(){"use strict";var e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return n;function n(n){var s,a;a=t.mixin({},e,n);s={css:o(),classes:a,html:i(a),selectors:r(a)};return{css:s.css,html:s.html,classes:s.classes,selectors:s.selectors,mixin:function(e){t.mixin(e,s)}}}function i(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div role="listbox" class="'+e.menu+'"></div>'}}function r(e){var n={};t.each(e,(function(e,t){n[t]="."+e}));return n}function o(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(t.isMsie()){t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}return e}}();var r=function(){"use strict";var n,i;n="typeahead:";i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function r(t){if(!t||!t.el){e.error("EventBus initialized without el")}this.$el=e(t.el)}t.mixin(r.prototype,{_trigger:function(t,i){var r=e.Event(n+t);this.$el.trigger.call(this.$el,r,i||[]);return r},before:function(e){var t,n;t=[].slice.call(arguments,1);n=this._trigger("before"+e,t);return n.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1));if(t=i[e]){this._trigger(t,[].slice.call(arguments,1))}}});return r}();var o=function(){"use strict";var e=/\s+/,t=c();return{onSync:o,onAsync:r,off:s,trigger:a};function n(t,n,i,r){var o;if(!i){return this}n=n.split(e);i=r?u(i,r):i;this._callbacks=this._callbacks||{};while(o=n.shift()){this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]};this._callbacks[o][t].push(i)}return this}function r(e,t,i){return n.call(this,"async",e,t,i)}function o(e,t,i){return n.call(this,"sync",e,t,i)}function s(t){var n;if(!this._callbacks){return this}t=t.split(e);while(n=t.shift()){delete this._callbacks[n]}return this}function a(n){var i,r,o,s,a;if(!this._callbacks){return this}n=n.split(e);o=[].slice.call(arguments,1);while((i=n.shift())&&(r=this._callbacks[i])){s=l(r.sync,this,[i].concat(o));a=l(r.async,this,[i].concat(o));s()&&t(a)}return this}function l(e,t,n){return i;function i(){var i;for(var r=0,o=e.length;!i&&r<o;r+=1){i=e[r].apply(t,n)===false}return!i}}function c(){var e;if(window.setImmediate){e=function e(t){i((function(){t()}))}}else{e=function e(t){setTimeout((function(){t()}),0)}}return e}function u(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}}();var s=function(e){"use strict";var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false,diacriticInsensitive:false};var i={A:"[Aa--------]",B:"[Bb--]",C:"[Cc--]",D:"[Dd-----]",E:"[Ee------]",F:"[Ff--]",G:"[Gg--]",H:"[Hh---]",I:"[Ii---------]",J:"[Jj--]",K:"[Kk--]",L:"[Ll----]",M:"[Mm----]",N:"[Nn---]",O:"[Oo-----]",P:"[Pp---]",Q:"[Qq]",R:"[Rr-----]",S:"[Ss---]",T:"[Tt--]",U:"[Uu------]",V:"[Vv----]",W:"[Ww--]",X:"[Xx---]",Y:"[Yy--]",Z:"[Zz----]"};return function i(r){var s;r=t.mixin({},n,r);if(!r.node||!r.pattern){return}r.pattern=t.isArray(r.pattern)?r.pattern:[r.pattern];s=o(r.pattern,r.caseSensitive,r.wordsOnly,r.diacriticInsensitive);l(r.node,a);function a(t){var n,i,o;if(n=s.exec(t.data)){o=e.createElement(r.tagName);r.className&&(o.className=r.className);i=t.splitText(n.index);i.splitText(n[0].length);o.appendChild(i.cloneNode(true));t.parentNode.replaceChild(o,i)}return!!n}function l(e,t){var n,i=3;for(var r=0;r<e.childNodes.length;r++){n=e.childNodes[r];if(n.nodeType===i){r+=t(n)?1:0}else{l(n,t)}}}};function r(e){return i[e.toUpperCase()]||e}function o(e,n,i,o){var s=[],a;for(var l=0,c=e.length;l<c;l++){var u=t.escapeRegExChars(e[l]);if(o){u=u.replace(/\S/g,r)}s.push(u)}a=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")";return n?new RegExp(a):new RegExp(a,"i")}}(window.document);var a=function(){"use strict";var n;n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function i(n,i){n=n||{};if(!n.input){e.error("input is missing")}i.mixin(this);this.$hint=e(n.hint);this.$input=e(n.input);this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"});e(i.menu).attr("id",this.$input.attr("id")+"_listbox");this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;this.$overflowHelper=r(this.$input);this._checkLanguageDirection();if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop}this.onSync("cursorchange",this._updateDescendent)}i.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")};t.mixin(i.prototype,o,{_onBlur:function e(){this.resetInputValue();this.trigger("blurred")},_onFocus:function e(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function e(t){var i=n[t.which||t.keyCode];this._managePreventDefault(i,t);if(i&&this._shouldTrigger(i,t)){this.trigger(i+"Keyed",t)}},_onInput:function e(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function e(t,n){var i;switch(t){case"up":case"down":i=!a(n);break;default:i=false}i&&n.preventDefault()},_shouldTrigger:function e(t,n){var i;switch(t){case"tab":i=!a(n);break;default:i=true}return i},_checkLanguageDirection:function e(){var t=(this.$input.css("direction")||"ltr").toLowerCase();if(this.dir!==t){this.dir=t;this.$hint.attr("dir",t);this.trigger("langDirChanged",t)}},_setQuery:function e(t,n){var i,r;i=s(t,this.query);r=i?this.query.length!==t.length:false;this.query=t;if(!n&&!i){this.trigger("queryChanged",this.query)}else if(!n&&r){this.trigger("whitespaceChanged",this.query)}},_updateDescendent:function e(t,n){this.$input.attr("aria-activedescendant",n)},bind:function(){var e=this,i,r,o,s;i=t.bind(this._onBlur,this);r=t.bind(this._onFocus,this);o=t.bind(this._onKeydown,this);s=t.bind(this._onInput,this);this.$input.on("blur.tt",i).on("focus.tt",r).on("keydown.tt",o);if(!t.isMsie()||t.isMsie()>9){this.$input.on("input.tt",s)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",(function(i){if(n[i.which||i.keyCode]){return}t.defer(t.bind(e._onInput,e,i))}))}return this},focus:function e(){this.$input.focus()},blur:function e(){this.$input.blur()},getLangDir:function e(){return this.dir},getQuery:function e(){return this.query||""},setQuery:function e(t,n){this.setInputValue(t);this._setQuery(t,n)},hasQueryChangedSinceLastFocus:function e(){return this.query!==this.queryWhenFocused},getInputValue:function e(){return this.$input.val()},setInputValue:function e(t){this.$input.val(t);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function e(){this.setInputValue(this.query)},getHint:function e(){return this.$hint.val()},setHint:function e(t){this.$hint.val(t)},clearHint:function e(){this.setHint("")},clearHintIfInvalid:function e(){var t,n,i,r;t=this.getInputValue();n=this.getHint();i=t!==n&&n.indexOf(t)===0;r=t!==""&&i&&!this.hasOverflow();!r&&this.clearHint()},hasFocus:function e(){return this.$input.is(":focus")},hasOverflow:function e(){var t=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var e,n,i;e=this.$input.val().length;n=this.$input[0].selectionStart;if(t.isNumber(n)){return n===e}else if(document.selection){i=document.selection.createRange();i.moveStart("character",-e);return e===i.text.length}return true},destroy:function t(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=e("<div>")}});return i;function r(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function a(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}}();var l=function(){"use strict";var n,i;n={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"};i=t.getIdGenerator();function r(n,r){n=n||{};n.templates=n.templates||{};n.templates.notFound=n.templates.notFound||n.templates.empty;if(!n.source){e.error("missing source")}if(!n.node){e.error("missing node")}if(n.name&&!c(n.name)){e.error("invalid dataset name: "+n.name)}r.mixin(this);this.highlight=!!n.highlight;this.name=t.toStr(n.name||i());this.limit=n.limit||5;this.displayFn=a(n.display||n.displayKey);this.templates=l(n.templates,this.displayFn);this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source;this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async;this._resetLastSuggestion();this.$el=e(n.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}r.extractData=function t(i){var r=e(i);if(r.data(n.obj)){return{dataset:r.data(n.dataset)||"",val:r.data(n.val)||"",obj:r.data(n.obj)||null}}return null};t.mixin(r.prototype,o,{_overwrite:function e(t,n){n=n||[];if(n.length){this._renderSuggestions(t,n)}else if(this.async&&this.templates.pending){this._renderPending(t)}else if(!this.async&&this.templates.notFound){this._renderNotFound(t)}else{this._empty()}this.trigger("rendered",n,false,this.name)},_append:function e(t,n){n=n||[];if(n.length&&this.$lastSuggestion.length){this._appendSuggestions(t,n)}else if(n.length){this._renderSuggestions(t,n)}else if(!this.$lastSuggestion.length&&this.templates.notFound){this._renderNotFound(t)}this.trigger("rendered",n,true,this.name)},_renderSuggestions:function e(t,n){var i;i=this._getSuggestionsFragment(t,n);this.$lastSuggestion=i.children().last();this.$el.html(i).prepend(this._getHeader(t,n)).append(this._getFooter(t,n))},_appendSuggestions:function e(t,n){var i,r;i=this._getSuggestionsFragment(t,n);r=i.children().last();this.$lastSuggestion.after(i);this.$lastSuggestion=r},_renderPending:function e(t){var n=this.templates.pending;this._resetLastSuggestion();n&&this.$el.html(n({query:t,dataset:this.name}))},_renderNotFound:function e(t){var n=this.templates.notFound;this._resetLastSuggestion();n&&this.$el.html(n({query:t,dataset:this.name}))},_empty:function e(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function i(r,o){var a=this,l;l=document.createDocumentFragment();t.each(o,(function t(i){var o,s;s=a._injectQuery(r,i);o=e(a.templates.suggestion(s)).data(n.dataset,a.name).data(n.obj,i).data(n.val,a.displayFn(i)).addClass(a.classes.suggestion+" "+a.classes.selectable);l.appendChild(o[0])}));this.highlight&&s({className:this.classes.highlight,node:l,pattern:r});return e(l)},_getFooter:function e(t,n){return this.templates.footer?this.templates.footer({query:t,suggestions:n,dataset:this.name}):null},_getHeader:function e(t,n){return this.templates.header?this.templates.header({query:t,suggestions:n,dataset:this.name}):null},_resetLastSuggestion:function t(){this.$lastSuggestion=e()},_injectQuery:function e(n,i){return t.isObject(i)?t.mixin({_query:n},i):i},update:function t(n){var i=this,r=false,o=false,s=0;this.cancel();this.cancel=function t(){r=true;i.cancel=e.noop;i.async&&i.trigger("asyncCanceled",n,i.name)};this.source(n,a,l);!o&&a([]);function a(e){if(o){return}o=true;e=(e||[]).slice(0,i.limit);s=e.length;i._overwrite(n,e);if(s<i.limit&&i.async){i.trigger("asyncRequested",n,i.name)}}function l(t){t=t||[];if(!r&&s<i.limit){i.cancel=e.noop;var o=Math.abs(s-i.limit);s+=o;i._append(n,t.slice(0,o));i.async&&i.trigger("asyncReceived",n,i.name)}}},cancel:e.noop,clear:function e(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function e(){return this.$el.is(":empty")},destroy:function t(){this.$el=e("<div>")}});return r;function a(e){e=e||t.stringify;return t.isFunction(e)?e:n;function n(t){return t[e]}}function l(n,i){return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion||r};function r(n){return e('<div role="option">').attr("id",t.guid()).text(i(n))}}function c(e){return/^[_a-zA-Z0-9-]+$/.test(e)}}();var c=function(){"use strict";function n(n,i){var r=this;n=n||{};if(!n.node){e.error("node is required")}i.mixin(this);this.$node=e(n.node);this.query=null;this.datasets=t.map(n.datasets,o);function o(t){var n=r.$node.find(t.node).first();t.node=n.length?n:e("<div>").appendTo(r.$node);return new l(t,i)}}t.mixin(n.prototype,o,{_onSelectableClick:function t(n){this.trigger("selectableClicked",e(n.currentTarget))},_onRendered:function e(t,n,i,r){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",n,i,r)},_onCleared:function e(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function e(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function e(){return t.every(this.datasets,t.bind((function e(t){var n=t.isEmpty();this.$node.attr("aria-expanded",!n);return n}),this))},_getSelectables:function e(){return this.$node.find(this.selectors.selectable)},_removeCursor:function e(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function e(t){var n,i,r,o;n=t.position().top;i=n+t.outerHeight(true);r=this.$node.scrollTop();o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);if(n<0){this.$node.scrollTop(r+n)}else if(o<i){this.$node.scrollTop(r+(i-o))}},bind:function(){var n=this,i;i=t.bind(this._onSelectableClick,this);this.$node.on("click.tt",this.selectors.selectable,i);this.$node.on("mouseover",this.selectors.selectable,(function(){n.setCursor(e(this))}));this.$node.on("mouseleave",(function(){n._removeCursor()}));t.each(this.datasets,(function(e){e.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}));return this},isOpen:function e(){return this.$node.hasClass(this.classes.open)},open:function e(){this.$node.scrollTop(0);this.$node.addClass(this.classes.open)},close:function e(){this.$node.attr("aria-expanded",false);this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function e(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function e(t){var n,i,r,o;i=this.getActiveSelectable();n=this._getSelectables();r=i?n.index(i):-1;o=r+t;o=(o+1)%(n.length+1)-1;o=o<-1?n.length-1:o;return o===-1?null:n.eq(o)},setCursor:function e(t){this._removeCursor();if(t=t&&t.first()){t.addClass(this.classes.cursor);this._ensureVisible(t)}},getSelectableData:function e(t){return t&&t.length?l.extractData(t):null},getActiveSelectable:function e(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function e(){var t=this._getSelectables().first();return t.length?t:null},update:function e(n){var i=n!==this.query;if(i){this.query=n;t.each(this.datasets,r)}return i;function r(e){e.update(n)}},empty:function e(){t.each(this.datasets,n);this.query=null;this.$node.addClass(this.classes.empty);function n(e){e.clear()}},destroy:function n(){this.$node.off(".tt");this.$node=e("<div>");t.each(this.datasets,i);function i(e){e.destroy()}}});return n}();var u=function(){"use strict";function n(n){this.$el=e("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"});n.$input.after(this.$el);t.each(n.menu.datasets,t.bind((function(e){if(e.onSync){e.onSync("rendered",t.bind(this.update,this));e.onSync("cleared",t.bind(this.cleared,this))}}),this))}t.mixin(n.prototype,{update:function e(t,n){var i=n.length;var r;if(i===1){r={result:"result",is:"is"}}else{r={result:"results",is:"are"}}this.$el.text(i+" "+r.result+" "+r.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}});return n}();var d=function(){"use strict";var e=c.prototype;function n(){c.apply(this,[].slice.call(arguments,0))}t.mixin(n.prototype,c.prototype,{open:function t(){!this._allDatasetsEmpty()&&this._show();return e.open.apply(this,[].slice.call(arguments,0))},close:function t(){this._hide();return e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function t(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function t(){if(this._allDatasetsEmpty()){this._hide()}else{this.isOpen()&&this._show()}return e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function t(n){this.$node.css(n==="ltr"?this.css.ltr:this.css.rtl);return e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function e(){this.$node.hide()},_show:function e(){this.$node.css("display","block")}});return n}();var p=function(){"use strict";function n(n,r){var o,s,a,l,c,u,d,p,h,f,m;n=n||{};if(!n.input){e.error("missing input")}if(!n.menu){e.error("missing menu")}if(!n.eventBus){e.error("missing event bus")}r.mixin(this);this.eventBus=n.eventBus;this.minLength=t.isNumber(n.minLength)?n.minLength:1;this.input=n.input;this.menu=n.menu;this.enabled=true;this.active=false;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);o=i(this,"activate","open","_onFocused");s=i(this,"deactivate","_onBlurred");a=i(this,"isActive","isOpen","_onEnterKeyed");l=i(this,"isActive","isOpen","_onTabKeyed");c=i(this,"isActive","_onEscKeyed");u=i(this,"isActive","open","_onUpKeyed");d=i(this,"isActive","open","_onDownKeyed");p=i(this,"isActive","isOpen","_onLeftKeyed");h=i(this,"isActive","isOpen","_onRightKeyed");f=i(this,"_openIfActive","_onQueryChanged");m=i(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",o,this).onSync("blurred",s,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",u,this).onSync("downKeyed",d,this).onSync("leftKeyed",p,this).onSync("rightKeyed",h,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}t.mixin(n.prototype,{_hacks:function n(){var i,r;i=this.input.$input||e("<div>");r=this.menu.$node||e("<div>");i.on("blur.tt",(function(e){var n,o,s;n=document.activeElement;o=r.is(n);s=r.has(n).length>0;if(t.isMsie()&&(o||s)){e.preventDefault();e.stopImmediatePropagation();t.defer((function(){i.focus()}))}}));r.on("mousedown.tt",(function(e){e.preventDefault()}))},_onSelectableClicked:function e(t,n){this.select(n)},_onDatasetCleared:function e(){this._updateHint()},_onDatasetRendered:function e(t,n,i,r){this._updateHint();this.eventBus.trigger("render",n,i,r)},_onAsyncRequested:function e(t,n,i){this.eventBus.trigger("asyncrequest",i,n)},_onAsyncCanceled:function e(t,n,i){this.eventBus.trigger("asynccancel",i,n)},_onAsyncReceived:function e(t,n,i){this.eventBus.trigger("asyncreceive",i,n)},_onFocused:function e(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function e(){if(this.input.hasQueryChangedSinceLastFocus()){this.eventBus.trigger("change",this.input.getQuery())}},_onEnterKeyed:function e(t,n){var i;if(i=this.menu.getActiveSelectable()){if(this.select(i)){n.preventDefault();n.stopPropagation()}}},_onTabKeyed:function e(t,n){var i;if(i=this.menu.getActiveSelectable()){this.select(i)&&n.preventDefault()}else if(i=this.menu.getTopSelectable()){this.autocomplete(i)&&n.preventDefault()}},_onEscKeyed:function e(){this.close()},_onUpKeyed:function e(){this.moveCursor(-1)},_onDownKeyed:function e(){this.moveCursor(+1)},_onLeftKeyed:function e(){if(this.dir==="rtl"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onRightKeyed:function e(){if(this.dir==="ltr"&&this.input.isCursorAtEnd()){this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())}},_onQueryChanged:function e(t,n){this._minLengthMet(n)?this.menu.update(n):this.menu.empty()},_onWhitespaceChanged:function e(){this._updateHint()},_onLangDirChanged:function e(t,n){if(this.dir!==n){this.dir=n;this.menu.setLanguageDirection(n)}},_openIfActive:function e(){this.isActive()&&this.open()},_minLengthMet:function e(n){n=t.isString(n)?n:this.input.getQuery()||"";return n.length>=this.minLength},_updateHint:function e(){var n,i,r,o,s,l,c;n=this.menu.getTopSelectable();i=this.menu.getSelectableData(n);r=this.input.getInputValue();if(i&&!t.isBlankString(r)&&!this.input.hasOverflow()){o=a.normalizeQuery(r);s=t.escapeRegExChars(o);l=new RegExp("^(?:"+s+")(.+$)","i");c=l.exec(i.val);c&&this.input.setHint(r+c[1])}else{this.input.clearHint()}},isEnabled:function e(){return this.enabled},enable:function e(){this.enabled=true},disable:function e(){this.enabled=false},isActive:function e(){return this.active},activate:function e(){if(this.isActive()){return true}else if(!this.isEnabled()||this.eventBus.before("active")){return false}else{this.active=true;this.eventBus.trigger("active");return true}},deactivate:function e(){if(!this.isActive()){return true}else if(this.eventBus.before("idle")){return false}else{this.active=false;this.close();this.eventBus.trigger("idle");return true}},isOpen:function e(){return this.menu.isOpen()},open:function e(){if(!this.isOpen()&&!this.eventBus.before("open")){this.menu.open();this._updateHint();this.eventBus.trigger("open")}return this.isOpen()},close:function e(){if(this.isOpen()&&!this.eventBus.before("close")){this.menu.close();this.input.clearHint();this.input.resetInputValue();this.eventBus.trigger("close")}return!this.isOpen()},setVal:function e(n){this.input.setQuery(t.toStr(n))},getVal:function e(){return this.input.getQuery()},select:function e(t){var n=this.menu.getSelectableData(t);if(n&&!this.eventBus.before("select",n.obj,n.dataset)){this.input.setQuery(n.val,true);this.eventBus.trigger("select",n.obj,n.dataset);this.close();return true}return false},autocomplete:function e(t){var n,i,r;n=this.input.getQuery();i=this.menu.getSelectableData(t);r=i&&n!==i.val;if(r&&!this.eventBus.before("autocomplete",i.obj,i.dataset)){this.input.setQuery(i.val);this.eventBus.trigger("autocomplete",i.obj,i.dataset);return true}return false},moveCursor:function e(t){var n,i,r,o,s,a,l;n=this.input.getQuery();i=this.menu.selectableRelativeToCursor(t);r=this.menu.getSelectableData(i);o=r?r.obj:null;s=r?r.dataset:null;l=i?i.attr("id"):null;this.input.trigger("cursorchange",l);a=this._minLengthMet()&&this.menu.update(n);if(!a&&!this.eventBus.before("cursorchange",o,s)){this.menu.setCursor(i);if(r){this.input.setInputValue(r.val)}else{this.input.resetInputValue();this._updateHint()}this.eventBus.trigger("cursorchange",o,s);return true}return false},destroy:function e(){this.input.destroy();this.menu.destroy()}});return n;function i(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,(function(t){return e[t].apply(e,i)}))}}}();(function(){"use strict";var i,o,s;i=e.fn.typeahead;o={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};s={initialize:function i(s,l){var m;l=t.isArray(l)?l:[].slice.call(arguments,1);s=s||{};m=n(s.classNames);return this.each(g);function g(){var n,i,g,y,b,_,x,w,k,C,S,T;t.each(l,(function(e){e.highlight=!!s.highlight}));n=e(this);i=e(m.html.wrapper);g=v(s.hint);y=v(s.menu);b=s.hint!==false&&!g;_=s.menu!==false&&!y;b&&(g=h(n,m));_&&(y=e(m.html.menu).css(m.css.menu));g&&g.val("");n=f(n,m);if(b||_){i.css(m.css.wrapper);n.css(b?m.css.input:m.css.inputWithNoHint);n.wrap(i).parent().prepend(b?g:null).append(_?y:null)}T=_?d:c;x=new r({el:n});w=new a({hint:g,input:n},m);k=new T({node:y,datasets:l},m);C=new u({$input:n,menu:k});S=new p({input:w,menu:k,eventBus:x,minLength:s.minLength},m);n.data(o.www,m);n.data(o.typeahead,S)}},isEnabled:function e(){var t;l(this.first(),(function(e){t=e.isEnabled()}));return t},enable:function e(){l(this,(function(e){e.enable()}));return this},disable:function e(){l(this,(function(e){e.disable()}));return this},isActive:function e(){var t;l(this.first(),(function(e){t=e.isActive()}));return t},activate:function e(){l(this,(function(e){e.activate()}));return this},deactivate:function e(){l(this,(function(e){e.deactivate()}));return this},isOpen:function e(){var t;l(this.first(),(function(e){t=e.isOpen()}));return t},open:function e(){l(this,(function(e){e.open()}));return this},close:function e(){l(this,(function(e){e.close()}));return this},select:function t(n){var i=false,r=e(n);l(this.first(),(function(e){i=e.select(r)}));return i},autocomplete:function t(n){var i=false,r=e(n);l(this.first(),(function(e){i=e.autocomplete(r)}));return i},moveCursor:function e(t){var n=false;l(this.first(),(function(e){n=e.moveCursor(t)}));return n},val:function e(n){var i;if(!arguments.length){l(this.first(),(function(e){i=e.getVal()}));return i}else{l(this,(function(e){e.setVal(t.toStr(n))}));return this}},destroy:function e(){l(this,(function(e,t){g(t);e.destroy()}));return this}};e.fn.typeahead=function(e){if(s[e]){return s[e].apply(this,[].slice.call(arguments,1))}else{return s.initialize.apply(this,arguments)}};e.fn.typeahead.noConflict=function t(){e.fn.typeahead=i;return this};function l(t,n){t.each((function(){var t=e(this),i;(i=t.data(o.typeahead))&&n(i,t)}))}function h(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(m(e)).prop("readonly",true).removeAttr("id name placeholder required").attr({spellcheck:"false",tabindex:-1})}function f(e,t){e.data(o.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")});e.addClass(t.classes.input).attr({spellcheck:false});try{!e.attr("dir")&&e.attr("dir","auto")}catch(e){}return e}function m(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function g(e){var n,i;n=e.data(o.www);i=e.parent().filter(n.selectors.wrapper);t.each(e.data(o.attrs),(function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}));e.removeData(o.typeahead).removeData(o.www).removeData(o.attr).removeClass(n.classes.input);if(i.length){e.detach().insertAfter(i);i.remove()}}function v(n){var i,r;i=t.isJQuery(n)||t.isElement(n);r=i?e(n).first():[];return r.length?r:null}})()}))}).call(this,n("URgk").setImmediate)},Jxvl:function(e,t,n){var i=n("Pg24");var r=n("mi91");var o=n("nQG2");e.exports=function e(t){return i(r(o(t).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},KVgF:function(e,t){e.exports="/**\n * This jQuery plugin displays pagination links inside the selected elements.\n *\n * This plugin needs at least jQuery 1.4.2\n *\n * @author Gabriel Birke (birke *at* d-scribe *dot* de)\n * @version 2.2\n * @param {int} maxentries Number of entries to paginate\n * @param {Object} opts Several options (see README for documentation)\n * @return {Object} jQuery Object\n */\n (function($){\n\t/**\n\t * @class Class for calculating pagination values\n\t */\n\t$.PaginationCalculator = function(maxentries, opts) {\n\t\tthis.maxentries = maxentries;\n\t\tthis.opts = opts;\n\t}\n\n\t$.extend($.PaginationCalculator.prototype, {\n\t\t/**\n\t\t * Calculate the maximum number of pages\n\t\t * @method\n\t\t * @returns {Number}\n\t\t */\n\t\tnumPages:function() {\n\t\t\treturn Math.ceil(this.maxentries/this.opts.items_per_page);\n\t\t},\n\t\t/**\n\t\t * Calculate start and end point of pagination links depending on\n\t\t * current_page and num_display_entries.\n\t\t * @returns {Array}\n\t\t */\n\t\tgetInterval:function(current_page)  {\n\t\t\tvar ne_half = Math.floor(this.opts.num_display_entries/2);\n\t\t\tvar np = this.numPages();\n\t\t\tvar upper_limit = np - this.opts.num_display_entries;\n\t\t\tvar start = current_page > ne_half ? Math.max( Math.min(current_page - ne_half, upper_limit), 0 ) : 0;\n\t\t\tvar end = current_page > ne_half?Math.min(current_page+ne_half + (this.opts.num_display_entries % 2), np):Math.min(this.opts.num_display_entries, np);\n\t\t\treturn {start:start, end:end};\n\t\t}\n\t});\n\n\t// Initialize jQuery object container for pagination renderers\n\t$.PaginationRenderers = {}\n\n\t/**\n\t * @class Default renderer for rendering pagination links\n\t */\n\t$.PaginationRenderers.defaultRenderer = function(maxentries, opts) {\n\t\tthis.maxentries = maxentries;\n\t\tthis.opts = opts;\n\t\tthis.pc = new $.PaginationCalculator(maxentries, opts);\n\t}\n\t$.extend($.PaginationRenderers.defaultRenderer.prototype, {\n\t\t/**\n\t\t * Helper function for generating a single link (or a span tag if it's the current page)\n\t\t * @param {Number} page_id The page id for the new item\n\t\t * @param {Number} current_page\n\t\t * @param {Object} appendopts Options for the new item: text and classes\n\t\t * @returns {jQuery} jQuery object containing the link\n\t\t */\n\t\tcreateLink:function(page_id, current_page, appendopts, is_action){\n\t\t\tvar lnk, np = this.pc.numPages();\n\t\t\tpage_id = page_id<0?0:(page_id<np?page_id:np-1); // Normalize page id to sane value\n\t\t\tappendopts = $.extend({text:page_id+1, classes:\"\"}, appendopts||{});\n\t\t\tif(page_id == current_page){\n\t\t\t\tlnk = $(\"<li class='\"+(is_action ? \"disabled\" : \"active\")+\"'><span data-page_id='\"+page_id+\"'>\" + appendopts.text + \"</span></li>\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlnk = $('<li />').append(\n\t\t\t\t\t$(\"<a data-page_id='\"+page_id+\"' href='\"+this.opts.link_to.replace(/__id__/,page_id)+\"'>\" + appendopts.text + '</a>')\n\t\t\t\t);\n\t\t\t}\n\t\t\tif(appendopts.classes){ lnk.addClass(appendopts.classes); }\n\t\t\treturn lnk;\n\t\t},\n\t\t// Generate a range of numeric links\n\t\tappendRange:function(container, current_page, start, end, opts) {\n\t\t\tvar i;\n\t\t\tfor(i=start; i<end; i++) {\n\t\t\t\tthis.createLink(i, current_page, opts).appendTo(container);\n\t\t\t}\n\t\t},\n\t\tgetLinks:function(current_page, eventHandler) {\n\t\t\tvar begin, end,\n\t\t\t\tinterval = this.pc.getInterval(current_page),\n\t\t\t\tnp = this.pc.numPages(),\n\t\t\t\tfragment = $(\"<ul class='pagination'></ul>\");\n\n\t\t\t// Generate \"Previous\"-Link\n\t\t\tif(this.opts.prev_text && (current_page > 0 || this.opts.prev_show_always)){\n\t\t\t\tfragment.append(this.createLink(current_page-1, current_page, {text:this.opts.prev_text, classes:\"prev\"}, true));\n\t\t\t}\n\t\t\t// Generate starting points\n\t\t\tif (interval.start > 0 && this.opts.num_edge_entries > 0)\n\t\t\t{\n\t\t\t\tend = Math.min(this.opts.num_edge_entries, interval.start);\n\t\t\t\tthis.appendRange(fragment, current_page, 0, end, {classes:'sp'});\n\t\t\t\tif(this.opts.num_edge_entries < interval.start && this.opts.ellipse_text)\n\t\t\t\t{\n\t\t\t\t\t$('<li><a href=\"#\">'+this.opts.ellipse_text+'</a></li>').appendTo(fragment);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Generate interval links\n\t\t\tthis.appendRange(fragment, current_page, interval.start, interval.end);\n\t\t\t// Generate ending points\n\t\t\tif (interval.end < np && this.opts.num_edge_entries > 0)\n\t\t\t{\n\t\t\t\tif(np-this.opts.num_edge_entries > interval.end && this.opts.ellipse_text)\n\t\t\t\t{\n\t\t\t\t\t$('<li><a href=\"#\">'+this.opts.ellipse_text+'</a></li>').appendTo(fragment);\n\t\t\t\t}\n\t\t\t\tbegin = Math.max(np-this.opts.num_edge_entries, interval.end);\n\t\t\t\tthis.appendRange(fragment, current_page, begin, np, {classes:'ep'});\n\n\t\t\t}\n\t\t\t// Generate \"Next\"-Link\n\t\t\tif(this.opts.next_text && (current_page < np-1 || this.opts.next_show_always)){\n\t\t\t\tfragment.append(this.createLink(current_page+1, current_page, {text:this.opts.next_text, classes:\"next\"}, true));\n\t\t\t}\n\t\t\t$('a', fragment).click(eventHandler);\n\t\t\treturn fragment;\n\t\t}\n\t});\n\n\t// Extend jQuery\n\t$.fn.pagination = function(maxentries, opts){\n\n\t\t// Initialize options with default values\n\t\topts = $.extend({\n\t\t\titems_per_page:10,\n\t\t\tnum_display_entries:11,\n\t\t\tcurrent_page:0,\n\t\t\tnum_edge_entries:0,\n\t\t\tlink_to:\"#\",\n\t\t\tprev_text:\"Prev\",\n\t\t\tnext_text:\"Next\",\n\t\t\tellipse_text:\"...\",\n\t\t\tprev_show_always:true,\n\t\t\tnext_show_always:true,\n\t\t\trenderer:\"defaultRenderer\",\n\t\t\tshow_if_single_page:false,\n\t\t\tload_first_page:true,\n\t\t\tcallback:function(){return false;}\n\t\t},opts||{});\n\n\t\tvar containers = this,\n\t\t\trenderer, links, current_page;\n\n\t\t/**\n\t\t * This is the event handling function for the pagination links.\n\t\t * @param {int} page_id The new page number\n\t\t */\n\t\tfunction paginationClickHandler(evt){\n\t\t\tvar links,\n\t\t\t\tnew_current_page = $(evt.target).data('page_id'),\n\t\t\t\tcontinuePropagation = selectPage(new_current_page);\n\t\t\tif (!continuePropagation) {\n\t\t\t\tevt.stopPropagation();\n\t\t\t}\n\t\t\treturn continuePropagation;\n\t\t}\n\n\t\t/**\n\t\t * This is a utility function for the internal event handlers.\n\t\t * It sets the new current page on the pagination container objects,\n\t\t * generates a new HTMl fragment for the pagination links and calls\n\t\t * the callback function.\n\t\t */\n\t\tfunction selectPage(new_current_page) {\n\t\t\t// update the link display of a all containers\n\t\t\tcontainers.data('current_page', new_current_page);\n\t\t\tlinks = renderer.getLinks(new_current_page, paginationClickHandler);\n\t\t\tcontainers.empty();\n\t\t\tlinks.appendTo(containers);\n\t\t\t// call the callback and propagate the event if it does not return false\n\t\t\tvar continuePropagation = opts.callback(new_current_page, containers);\n\t\t\treturn continuePropagation;\n\t\t}\n\n\t\t// -----------------------------------\n\t\t// Initialize containers\n\t\t// -----------------------------------\n                current_page = parseInt(opts.current_page);\n\t\tcontainers.data('current_page', current_page);\n\t\t// Create a sane value for maxentries and items_per_page\n\t\tmaxentries = (!maxentries || maxentries < 0)?1:maxentries;\n\t\topts.items_per_page = (!opts.items_per_page || opts.items_per_page < 0)?1:opts.items_per_page;\n\n\t\tif(!$.PaginationRenderers[opts.renderer])\n\t\t{\n\t\t\tthrow new ReferenceError(\"Pagination renderer '\" + opts.renderer + \"' was not found in jQuery.PaginationRenderers object.\");\n\t\t}\n\t\trenderer = new $.PaginationRenderers[opts.renderer](maxentries, opts);\n\n\t\t// Attach control events to the DOM elements\n\t\tvar pc = new $.PaginationCalculator(maxentries, opts);\n\t\tvar np = pc.numPages();\n\t\tcontainers.off('setPage').on('setPage', {numPages:np}, function(evt, page_id) {\n\t\t\t\tif(page_id >= 0 && page_id < evt.data.numPages) {\n\t\t\t\t\tselectPage(page_id); return false;\n\t\t\t\t}\n\t\t});\n\t\tcontainers.off('prevPage').on('prevPage', function(evt){\n\t\t\t\tvar current_page = $(this).data('current_page');\n\t\t\t\tif (current_page > 0) {\n\t\t\t\t\tselectPage(current_page - 1);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t});\n\t\tcontainers.off('nextPage').on('nextPage', {numPages:np}, function(evt){\n\t\t\t\tvar current_page = $(this).data('current_page');\n\t\t\t\tif(current_page < evt.data.numPages - 1) {\n\t\t\t\t\tselectPage(current_page + 1);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t});\n\t\tcontainers.off('currentPage').on('currentPage', function(){\n\t\t\t\tvar current_page = $(this).data('current_page');\n\t\t\t\tselectPage(current_page);\n\t\t\t\treturn false;\n\t\t});\n\n\t\t// When all initialisation is done, draw the links\n\t\tlinks = renderer.getLinks(current_page, paginationClickHandler);\n\t\tcontainers.empty();\n\t\tif(np > 1 || opts.show_if_single_page) {\n\t\t\tlinks.appendTo(containers);\n\t\t}\n\t\t// call callback function\n\t\tif(opts.load_first_page) {\n\t\t\topts.callback(current_page, containers);\n\t\t}\n\t} // End of $.fn.pagination block\n\n})(jQuery);\n"},Kn0B:function(e,t){e.exports="function uploaderWidgetsTagsSetup(existing_tags) {\n  existing_tags = JSON.parse(existing_tags.replace(/&quot;/g,'\"'));\n  var TagCollection = new TagSet.init();\n\n  var TagCollectionOptions =\n  {\n    $input_container: $(\"#input-tags\"),\n    $tag_field_container: $(\"#valid-tags\"),\n    preset_tags: existing_tags,\n    max_characters: 30,\n    show_suggestions: true,\n    tagSuggestionsURL: \"/api/v1/tags/names?query=%QUERY\",\n    tag_appearance: {\n      postfix: \"<div class='remove-button'>x</div>\",\n    },\n    validator_options: {\n      alphanumeric_tags_only: true\n    },\n    sorting_options: {\n      alphabetical_sort: true\n    },\n    onAdd: function(tag_model) {\n      //adds tags to a hidden form that gets submitted when page is saved\n      $('#uploader-widget-tags').append('<input type=\\'hidden\\' name=\\'uploader_widget[tags_attributes][][name]\\' class=\"tag-id-' + tag_model.id + '\" value=\\''+ tag_model.value +'\\'>');\n\n      // when remove button is clicked, remove the tag from the hidden input form\n      self.$(\"div[data-tag-id='\" + tag_model.id + \"'] .remove-button\").click(function() {\n        TagCollection.removeTag(tag_model);\n        $(\".tag-id-\" + tag_model.id).remove();\n      });\n    },\n    onValidationSuccess: function(tag_model) {\n      $(\"#error-box\").removeClass('alert-warning');\n      $(\"#error-box\").addClass('collapse');\n    },\n    onValidationFailure: function(error) {\n      $(\"#error-box\").removeClass('collapse');\n      $(\"#error-box\").html(error.error).addClass('alert-warning');\n\n    }\n  }\nTagCollection.setup(TagCollectionOptions);\n}\n"},Kxbi:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);n=i(n);var r=t.lastIndexOf(n);return~r?t.slice(0,r):t}},Lwn5:function(e,t,n){var i=n("ZVcv");var r=[].slice;e.exports=function e(){var t=r.call(arguments),n=t.shift();return t.join(i(n))}},"Mf+4":function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);var r=!n?t.slice(1):t.slice(1).toLowerCase();return t.charAt(0).toUpperCase()+r}},MlvY:function(e,t,n){var i=n("Mf+4");var r=n("tacv");var o=n("Pg24");e.exports=function e(t){return i(o(r(t).replace(/_id$/,"").replace(/_/g," ")))}},ND7y:function(e,t){e.exports='// Retrieved from: https://github.com/farhadi/html5sortable\n!function(t){var e,r=t();t.fn.sortable=function(a){var n=String(a);return a=t.extend({connectWith:!1},a),this.each(function(){if(/^enable|disable|destroy$/.test(n)){var i=t(this).children(t(this).data("items")).attr("draggable","enable"==n);return void("destroy"==n&&i.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"))}var s,d,i=t(this).children(a.items),o=t("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+\' class="sortable-placeholder">\');i.find(a.handle).mousedown(function(){s=!0}).mouseup(function(){s=!1}),t(this).data("items",a.items),r=r.add(o),a.connectWith&&t(a.connectWith).add(this).data("connectWith",a.connectWith),i.attr("draggable","true").on("dragstart.h5s",function(r){if(a.handle&&!s)return!1;s=!1;var n=r.originalEvent.dataTransfer;n.effectAllowed="move",n.setData("Text","dummy"),d=(e=t(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){e&&(e.removeClass("sortable-dragging").show(),r.detach(),d!=e.index()&&e.parent().trigger("sortupdate",{item:e}),e=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(n){return i.is(e)||a.connectWith===t(e).parent().data("connectWith")?"drop"==n.type?(n.stopPropagation(),r.filter(":visible").after(e),e.trigger("dragend.h5s"),!1):(n.preventDefault(),n.originalEvent.dataTransfer.dropEffect="move",i.is(this)?(a.forcePlaceholderSize&&o.height(e.outerHeight()),e.hide(),t(this)[o.index()<t(this).index()?"after":"before"](o),r.not(o).detach()):r.is(this)||t(this).children(a.items).length||(r.detach(),t(this).append(o)),!1):!0})})}}(jQuery);\n'},NFUD:function(e,t){(function(e){"use strict";var t=[];var n=false;var i=false;var r=false;var o={containerSelector:"body",type:"html",direction:"top",duration:300,transition:"ease",easingPluginTransition:"easeInCirc",useCSS:true,useEasingPlugin:false,imageURL:false,iframeURL:false,autoPlayVideo:true,youtubeID:false,youTubeTheme:"light",distanceX:"70%",forceMinHeight:false,minHeight:"200px",closeAfter:0,startOpened:false,startOpenedDelay:0,clickSelector:false,enableEscapeKey:true,hoverSelector:false,touchSelector:false,beforePanelOpen:function(){},afterPanelOpen:function(){},beforePanelClose:function(){},afterPanelClose:function(){}};e.fn.scotchPanel=function(s){if(typeof s==="undefined"){s={}}if(this.length===0)return this;if(this.length>1){this.each((function(){t.push(e(this).scotchPanel(s))}));t.open=function(){for(var e=0;e<t.length;e++){t[e].open()}};t.close=function(){for(var e=0;e<t.length;e++){t[e].close()}};t.toggle=function(){for(var e=0;e<t.length;e++){t[e].toggle()}};return t}var a={};a=this;var l=function(){if(!n){n=true;i=u.transition();r=u.translate3d()}for(var t in o){if(o.hasOwnProperty(t)){if(a.attr("data-"+t.toLowerCase())){s[t]=a.data(t.toLowerCase())}}}a.settings=e.extend({},o,s);c()};var c=function(){var t=e(a.settings.containerSelector);if(!t.hasClass("scotchified")){t.wrapInner('<div class="scotch-panel-wrapper"><div class="scotch-panel-canvas"></div></div>').addClass("scotchified")}e(".scotch-panel-wrapper").css({position:"relative",overflow:"hidden",width:"100%"});e(".scotch-panel-canvas").css({position:"relative",height:"100%",width:"100%"});if(a.settings.useCSS){e(".scotch-panel-canvas").css({"-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)","-o-transform":"translate3d(0, 0, 0)","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"})}if(a.settings.direction=="top"){a.height=a.height();a.addClass("scotch-panel-top");a.css({bottom:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})}if(a.settings.direction=="bottom"){a.height=a.height();a.addClass("scotch-panel-bottom");a.css({top:"100%",left:"0",width:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})}if(a.settings.direction=="left"){a.addClass("scotch-panel-left");a.css({top:"0",left:"-"+a.settings.distanceX,width:a.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})}if(a.settings.direction=="right"){a.addClass("scotch-panel-right");a.css({top:"0",right:"-"+a.settings.distanceX,width:a.settings.distanceX,height:"100%",position:"absolute","z-index":"888888",overflow:"hidden"})}a.css({"-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","-webkit-backface-visibility":"hidden","backface-visibility":"hidden"});if(a.settings.type=="image"&&a.settings.imageURL){a.css({"-o-background-size":"cover","-ms-background-size":"cover","-moz-background-size":"cover","-webkit-background-size":"cover","background-size":"cover","background-position":"50% 0","background-repeat":"no-repeat","background-image":"url("+a.settings.imageURL+")"});if(a.settings.direction=="top"||a.settings.direction=="bottom"){a.css("min-height",a.settings.minHeight);a.height=e(a).height()}}if(a.settings.type=="iframe"&&a.settings.iframeURL){a.iframeIsLoaded=false;a.append('<iframe frameborder="0" style="width: 100%; height: 100%; display: block; position: relative; min-height: '+a.settings.minHeight+'" allowfullscreen></iframe>');if(a.settings.direction=="top"||a.settings.direction=="bottom"){a.height=e(a).height()}}if(a.settings.type=="video"&&a.settings.youtubeID){a.append('<div id="video-id-'+a.settings.youtubeID+'" style="min-height: '+a.settings.minHeight+'; display: block !important;"><iframe src="//www.youtube.com/embed/'+a.settings.youtubeID+"?enablejsapi=1&theme="+a.settings.youTubeTheme+'" frameborder="0" style="width: 100%; height: 100%; display: block; position: absolute; left: 0; top: 0;" allowfullscreen></iframe></div>');if(a.settings.direction=="top"||a.settings.direction=="bottom"){a.height=e(a).height()}}if(i&&r){p(a.settings.transition,a.settings.duration)}if(a.settings.startOpened){setTimeout((function(){a.open()}),a.settings.startOpenedDelay)}if(a.settings.closeAfter!=0){setTimeout((function(){a.close()}),a.settings.closeAfter)}};var u={transition:function(){if(!window.getComputedStyle){return false}var e=document.body||document.documentElement,t=e.style,n="transition";if(typeof t[n]=="string"){return true}var i=["Moz","webkit","Webkit","Khtml","O","ms"];n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<i.length;r++){if(typeof t[i[r]+n]=="string"){return true}}return false},translate3d:function(){if(!window.getComputedStyle){return false}var e,t;e=document.createElement("p");e.style["transform"]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)";e.style["margin"]="0";document.body.insertBefore(e,document.body.lastChild);t=window.getComputedStyle(e).getPropertyValue("transform");if(t!==undefined){return t!=="none"}else{return false}}};var d=function(e,t){var n=document.getElementById(e);var i=n.getElementsByTagName("iframe")[0].contentWindow;n.style.display=t=="hide"?"none":"";var r=t=="hide"?"pauseVideo":"playVideo";i.postMessage('{"event":"command","func":"'+r+'","args":""}',"*");n.style["display"]="block"};var p=function(e,t){a.parents(".scotch-panel-canvas:first").css({"-ms-transition":"all "+t+"ms "+e,"-moz-transition":"all "+t+"ms "+e,"-o-transition":"all "+t+"ms "+e,"-webkit-transition":"all "+t+"ms "+e,transition:"all "+t+"ms "+e})};var h=function(e){if(a.settings.forceMinHeight){a.parents(".scotch-panel-canvas:first").css("min-height",e)}if(i&&r&&a.settings.useCSS){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.beforePanelOpen()}else{a.settings.beforePanelClose()}a.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d(0, "+e+"px, 0)","-moz-transform":"translate3d(0, "+e+"px, 0)","-o-transform":"translate3d(0, "+e+"px, 0)","-webkit-transform":"translate3d(0, "+e+"px, 0)",transform:"translate3d(0, "+e+"px, 0)"});setTimeout((function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.afterPanelOpen()}else{a.settings.afterPanelClose()}}),a.settings.duration)}else{if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.beforePanelOpen()}else{a.settings.beforePanelClose()}if(a.settings.useEasingPlugin){a.parents(".scotch-panel-canvas:first").animate({top:e+"px"},{duration:a.settings.duration,easing:a.settings.easingPluginTransition,complete:function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.afterPanelOpen()}else{a.settings.afterPanelClose()}}})}else{a.parents(".scotch-panel-canvas:first").animate({top:e+"px"},a.settings.duration,(function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.afterPanelOpen()}else{a.settings.afterPanelClose()}}))}}};var f=function(e){if(i&&r&&a.settings.useCSS){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.beforePanelOpen()}else{a.settings.beforePanelClose()}a.parents(".scotch-panel-canvas:first").css({"-ms-transform":"translate3d("+e+", 0, 0)","-moz-transform":"translate3d("+e+", 0, 0)","-o-transform":"translate3d("+e+", 0, 0)","-webkit-transform":"translate3d("+e+", 0, 0)",transform:"translate3d("+e+", 0, 0)"});setTimeout((function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.afterPanelOpen()}else{a.settings.afterPanelClose()}}),a.settings.duration)}else{if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.beforePanelOpen()}else{a.settings.beforePanelClose()}if(a.settings.useEasingPlugin){a.parents(".scotch-panel-canvas:first").animate({left:e},{duration:a.settings.duration,easing:a.settings.easingPluginTransition,complete:function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.afterPanelOpen()}else{a.settings.afterPanelClose()}}})}else{a.parents(".scotch-panel-canvas:first").animate({left:e},a.settings.duration,(function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.settings.afterPanelOpen()}else{a.settings.afterPanelClose()}}))}}};a.open=function(){a.parents(".scotch-panel-canvas:first").addClass("scotch-is-showing");if(a.settings.type=="iframe"&&a.settings.iframeURL&&!a.iframeIsLoaded){a.iframeIsLoaded=true;a.find("iframe").attr("src",a.settings.iframeURL)}if(a.settings.type=="video"&&a.settings.youtubeID&&a.settings.autoPlayVideo){d("video-id-"+a.settings.youtubeID,"")}if(a.settings.direction=="top"){h(a.height)}if(a.settings.direction=="bottom"){h("-"+a.height)}if(a.settings.direction=="left"){f(a.settings.distanceX)}if(a.settings.direction=="right"){f("-"+a.settings.distanceX)}};a.close=function(){a.parents(".scotch-panel-canvas:first").removeClass("scotch-is-showing");setTimeout((function(){if(a.settings.type=="video"&&a.settings.youtubeID&&a.settings.autoPlayVideo){d("video-id-"+a.settings.youtubeID,"hide")}}),a.settings.duration);if(a.settings.direction=="top"||a.settings.direction=="bottom"){h(0)}if(a.settings.direction=="left"||a.settings.direction=="right"){f(0)}};a.toggle=function(){if(a.parents(".scotch-panel-canvas:first").hasClass("scotch-is-showing")){a.close()}else{a.open()}};l();e(document).keyup((function(e){if(e.keyCode==27&&a.settings.enableEscapeKey){a.close()}}));if(a.settings.hoverSelector){e(a.settings.hoverSelector).hover((function(){a.open()}),(function(){a.close()}))}if(a.settings.clickSelector){e(a.settings.clickSelector).click((function(){a.toggle();return false}))}if(a.settings.touchSelector){e(a.settings.touchSelector).on("touchstart",(function(){a.toggle();return false}))}return a}})(jQuery)},NG1q:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n,r,o){var s=o===true?"gi":"g";var a=new RegExp(n,s);return i(t).replace(a,r)}},O2Hw:function(e,t,n){(function(t){e.exports=t["moment"]=n("wd/R")}).call(this,n("yLpj"))},OAT0:function(e,t,n){var i=n("CjW/");e.exports=function e(t,n,r){return i(t,n,r,true)}},OR4l:function(e,t,n){var i=n("ZVcv");var r=n("1wJT");var o=String.prototype.trimRight;e.exports=function e(t,n){t=i(t);if(!n&&o)return o.call(t);n=r(n);return t.replace(new RegExp(n+"+$"),"")}},ORmb:function(e,t,n){n("8rVx")(n("QzXb"))},ObbC:function(e,t,n){n("8rVx")(n("ND7y"))},P3S6:function(e,t,n){n("8rVx")(n("Azts"))},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},PQmd:function(e,t,n){var i=n("JPst");var r=i(false);r.push([e.i,"",""]);e.exports=r},Pg24:function(e,t,n){var i=n("ZVcv");var r=n("1wJT");var o=String.prototype.trim;e.exports=function e(t,n){t=i(t);if(!n&&o)return o.call(t);n=r(n);return t.replace(new RegExp("^"+n+"+|"+n+"+$","g"),"")}},QANi:function(e,t){var n={"":"cent","":"pound","":"yen","":"euro","":"copy","":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"};e.exports=n},Qy7k:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("UxlC");var r=n.n(i);function o(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.toString().replace(/[&<>"']/g,(function(e){return t[e]}))}},QzXb:function(e,t){e.exports="/********** Vidyard Tagfield **********\n * To use this, select your element   *\n * and call tagfield with the options *\n * that you want. The returned object *\n * will contain a methods property    *\n * that has the possible methods you  *\n * can call on the tagfield.          *                    *\n *************************************/\n\nvar TagSet = {\n  init: function() {\n    this.options = {\n      // Element to create put the input HTML into\n      $input_container: null,\n      // Where to place tag HTML on add\n      $tag_field_container: null,\n      // What string should appear in the text input as a placeholder\n      input_placeholder_string: \"Add New Tags\",\n      // Whether or not to create HTML for these tags (note, can be visible without a tag_container)\n      visible: false,\n      // Add to the beggining of the TagSet\n      unshift: false,\n      // Wrap tag_selector/tag_container with a form, to be used with tag_appearance: { hidden_inputs: true }\n      form_wrap: false,\n      // Apply class to the input container div\n      input_container_class: \"\",\n      // Apply class to containing tag field\n      tag_field_class: \"\",\n      // Apply class to the tag container div\n      tag_container_class: \"\",\n      // Whether or not tags additional to preset_tags can be added\n      allow_new_tags: true,\n      // Maximum number of tags allowed in the set\n      max_tags: -1,\n      // Maximum number of tag characters allowed\n      max_tag_set_characters: 500,\n      // List of tag values that will be suggested during typing\n      suggested_tags: [],\n      // Whether or not to show a list of suggestions during input typing\n      show_suggestions: false,\n      // List of tag values to be added on create, will NOT be validated\n      preset_tags: [],\n      // Should preset tags be sorted alphabetically before creation\n      sort_preset_tags: true,\n      // If, during input, these keys are pressed, a tag will be created and attempted to be entered\n      complete_controls: [13, 188],      // enter, comma\n      // Controls which will delete the current or most recent tag on press\n      delete_controls: [],\n      // If beggining/trailing whitespace should be removed before tag validation/creation\n      trim_whitespace: true,\n      // Do error checking on keypress as opposed to just submit\n      live_errors: false,\n      // Remote URL to fetch tag suggestions from, requires a query parameter. Format: \"#{url}?query=%QUERY\"\n      tagSuggestionsURL: \"\",\n      // A validator object used to validate all tags being added to this set\n      validator_options: {\n        // All input chars will be set to lowercase before validation/adding\n        force_lower_case: false,\n        // Any tags in this list will be dis-allowed\n        banned_tags: [],\n        // Any tag_value containing characters in this list will be rejected\n        invalid_characters: [],\n        // Allow/dis-allow duplicate tag values\n        allow_duplicates: false,\n        // Whether or not tags which are only whitespace characters should be valid\n        allow_whitespace_tags: false,\n        // Helper to only allow tags which contain alphanumiric characters\n        alphanumeric_tags_only: true,\n        // Max/Min character count, whitespace is counted\n        max_characters: 255,\n        min_characters: 2,\n        // Max/Min byte length calculated assuming UTF8 encoding\n        max_bytes: -1,\n        min_bytes: -1,\n        // An object of functions which will be run after all default validators\n        custom_validators: {}\n      },\n      // A sorting object used to sort all tags being added to this set\n      sorting_options: {\n        // Sort tags alphabetically\n        alphabetical_sort: false,\n        // Prepend tags\n        unshift: false\n      },\n      // Styling and markup options for tags rendered in this set\n      tag_appearance: {\n        // Use this selector to along with the TagSet selector to show/hide tags appropriatly\n        klass: \"valid\",\n        // HTML inserted before the tag value\n        prefix: null,\n        // HTML inserted after the tag value\n        postfix: null,\n        // Whether or not to wrap the tag value in an input[type=\"text\"]\n        editable: false,\n        // Add a hidden input to each tag with value = tag.value\n        hidden_inputs: false,\n        // Name of the hidden input value, this changes the key of the tag when the form is submitted\n        hidden_input_name: \"tag_value[]\",\n        // If set this function gets called en liu of the regular tag rendering functions\n        custom_html: null,\n        // Required for scoping issues\n        common_tags: null,\n        tags_field: null,\n        selected_items: null\n      },\n      // Before and after a tag is added to the tag set\n      beforeAdd: function(tag_value) { return true; },\n      onAdd: function(tag_model) { return true; },\n      // Before and after a tag is removed from the tag set\n      beforeRemove: function(tag_model) { return true; },\n      onRemove: function(tag_value) { return true; },\n      // Before and on Validation Sucess / Failure\n      beforeValidate: function(tag_value) { return true; },\n      onValidationSuccess: function(tag_value) { return true; },\n      onValidationFailure: function(error) { return true; },\n      // Before and after the tag suggestions are searched\n      beforeSuggest: function(tag_value) { return true; },\n      onSuggest: function(suggested_tags) { return true; },\n      // Force error box to hide\n      hideErrors: function() { return true; }\n    }\n\n    // TagValidator instance used to validate tag values before adding to set\n    this.tag_validator = null;\n    // List of all current tags in the set (does not include suggested_tags)\n    this.tags = [];\n    // Continually increasing index, used for a local unique id\n    this.tag_index = 0;\n    // Internal helper for direct access to $input_container.find(\"input\")\n    var $tag_input = null;\n    // Internal helper for direct access to $input_container.find(\"button\")\n    var $tag_add_button = null;\n    // Internal helper to get direct access to where tags are being placed\n    var $tag_field = null;\n    // Tag input field isn't being cleared properly and the previously typed tag reappears when taking focus off of input\n    var forceClear = false;\n\n    this.setup = function(user_options) {\n      if (user_options) {\n        $.extend(true, this.options, user_options);\n      }\n\n      this.tag_validator = TagValidator.init();\n      this.tag_validator.setup(this.options, this);\n\n      this.tag_sorter = TagSorter.init();\n      this.tag_sorter.setup(this.options, this);\n\n      this.setupInputHTML();\n      this.setupTagFieldHTML();\n\n      // Create html for input if configured to do so, for previously existing tags\n      this.addTags(this.options.preset_tags);\n    }\n\n    // Creates a input[type=text] within the $input_container\n    this.setupInputHTML = function(){\n      if(this.options.$input_container === null) {\n        return;\n      }\n\n      var input_html = \"<div class='mine-field input-group\" + this.options.input_container_class + \"'>\";\n      input_html += \"<input class='form-control' id='new_tags' placeholder='Add New Tags'\";\n\n\n      if(this.options.max_characters > -1) {\n        input_html += \" maxlength=\" + this.options.max_characters;\n      }\n      input_html += \"></input>\";\n      input_html += \"<span class='input-group-btn'><button class='btn btn-default add-button' type='button'><i class='fal fa-plus'></i></button>\";\n      input_html += \"</span></div>\";\n\n\n      this.options.$input_container.html(input_html);\n\n      $tag_input = this.options.$input_container.find(\"input\");\n      $add_tag_button = this.options.$input_container.find(\"button\");\n      this.addListeners();\n      this.setupTypeAhead();\n    }\n\n    // Sets up the containing tag field HTML as well as sets the internal $tag_field variable\n    this.setupTagFieldHTML = function() {\n      if(this.options.$tag_field_container === null) {\n        return;\n      }\n\n      var tag_field_html = \"<div class='mine-field \" + this.options.tag_field_class + \"'>\";\n\n      if(this.options.form_wrap === true) {\n        tag_field_html += \"<form></form>\";\n      }\n\n      tag_field_html += \"<input type='hidden' name='all-tags' value=''></input>\";\n\n      tag_field_html += \"</div>\";\n\n      this.options.$tag_field_container.html(tag_field_html);\n\n      if(this.options.form_wrap === true) {\n        $tag_field = this.options.$tag_field_container.find(\".mine-field form\");\n      }\n      else {\n        $tag_field = this.options.$tag_field_container.find(\".mine-field\");\n      }\n    }\n\n    // Sets up Typeahead for new tags input box\n    this.setupTypeAhead = function () {\n      if (!this.options.show_suggestions) return;\n\n      var self = this;\n      var suggestions = new Bloodhound({\n        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),\n        queryTokenizer: Bloodhound.tokenizers.whitespace,\n        prefetch: {\n          url: self.options.tagSuggestionsURL.replace(\"%QUERY\", \"\"),\n          cache: false\n        },\n        remote: {\n          url: self.options.tagSuggestionsURL,\n          wildcard: '%QUERY',\n          filter: function(result) {\n            return result.tags;\n          },\n          ajax: {\n            beforeSend: function(jqXhr, settings) {\n              self.options.beforeSuggest($tag_input.val());\n            },\n            success: function(result) {\n              self.options.onSuggest(result);\n            },\n            type: \"GET\"\n          }\n        }\n      });\n\n      suggestions.initialize();\n\n      $tag_input.typeahead({\n        hint      : true,\n        highlight : true,\n        minLength : 0\n      }, {\n        name        : 'tags',\n        displayKey  : 'name',\n        source      : suggestions.ttAdapter()\n      });\n    }\n\n    // Sets up basic listeners for keypresses (create and delete tags)\n    this.addListeners = function() {\n      var self = this;\n      this.options.$input_container.on('click', function () {\n        $tag_input.focus();\n      });\n\n      $tag_input.on('keydown', function (e) {\n        var key_code = e.keyCode;\n        if($.inArray(key_code, self.options.complete_controls) !== -1 && $tag_input.val().length > 0) {\n          self.addTag($tag_input.val());\n          return false;\n        }\n        else if($.inArray(key_code, self.options.delete_controls) !== -1 && $tag_input.val() === '') {\n          self.removeTag(self.tags[self.tags.length - 1]);\n          return false;\n        }\n        return true;\n      });\n      $add_tag_button.on('click', function () {\n        self.addTag($tag_input.val());\n      });\n    }\n\n    // Attempts to create a new tag based on tag_text\n    this.addTag = function(tag_text) {\n      if(this.options.force_lower_case === true) {\n        tag_text = tag_text.toLowerCase();\n      }\n      if(this.options.trim_whitespace === true) {\n        tag_text = tag_text.trim();\n      }\n      if(this.tag_validator.validateTagValue(tag_text) !== true) {\n        return false;\n      }\n\n      if(tag_text.includes(',')) {\n        this.addTags(tag_text.split(','));\n\n        $tag_input.typeahead('val', '');\n        return false;\n      }\n\n      var new_tag = new Tag(tag_text, this.tag_index++);\n\n      this.tags.push(new_tag);\n      this.tag_sorter.sort(this.tags);\n\n      this.options.beforeAdd(tag_text);\n\n      if(this.options.$tag_field_container) {\n        new_tag.$element = this.addTagToView(new_tag);\n      }\n\n      all_tags = this.options.$tag_field_container.find('input[name=all-tags]').val();\n      all_tags = all_tags ? all_tags.split(',') : [];\n      all_tags.push(tag_text);\n      $('input[name=all-tags]').val(all_tags.join(','));\n\n      this.options.onAdd(new_tag);\n\n      if($tag_input) {\n        $tag_input.typeahead('val', '');\n      }\n\n      // For some reason, doesn't recognize when using 'rescan'. Use 'checkform' to force the check.\n      $('.edit_uploader_widget').trigger('checkform.areYouSure');\n\n      return true;\n    }\n\n    this.addTags = function(tags) {\n      for(var i = 0; i < tags.length; i++) {\n        this.addTag(tags[i]);\n      }\n    }\n\n    // Tags a tag model, creates HTML and adds it to the page\n    this.addTagToView = function(tag_model) {\n      var tag = tag_model.value;\n      var tag_html = tag_model.buildTagView(tag, tag_model.id, this.options.tag_appearance);\n\n      var position = this.tag_sorter.getTagIndex(this.tags, tag_model);\n      if(position === 0) {\n        $tag_field.prepend(tag_html);\n      } else {\n        var $previous_tag_element = this.tags[position - 1].$element;\n        $(tag_html).insertAfter($previous_tag_element);\n      }\n\n      return $tag_field.find(\"[data-tag-id='\" + tag_model.id + \"']\");\n    }\n\n    this.isEmpty = function() {\n      return this.tags.length === 0;\n    }\n\n    this.removeTag = function(tag) {\n      if (jQuery.inArray(tag,this.tags) !== -1) {\n        if (this.options.beforeRemove(tag) === false) {\n          return false;\n        }\n        tag_name = tag.value;\n        this.tags.splice(this.tags.indexOf(tag), 1);\n        tag.$element.remove();\n\n        // Need timeout for rescan or else are-you-sure doesn't recognize the DOM change\n        setTimeout(function() {\n          $('.edit_uploader_widget').trigger('checkform.areYouSure');\n        }, 1);\n\n        all_tags = this.options.$tag_field_container\n          .find('input[name=all-tags]')\n          .val()\n          .split(',')\n          .filter(function (tag) { return tag !== tag_name; });\n\n        $('input[name=all-tags]').val(all_tags.join(','));\n\n        this.options.onRemove(tag.value);\n\n        return(tag_name);\n      }\n    }\n\n    this.removeTags = function(tags) {\n      var length = tags.length;\n      for(var i = 0; i < length; i++) {\n        this.removeTag(tags[0]);\n      }\n    }\n\n    this.resetTags = function() {\n      this.removeTags(this.tags);\n      this.tags.length = 0;\n      this.tag_index = 0;\n    }\n\n    this.checkForDuplicateTag = function(tag_value) {\n      for(var i = 0; i < this.tags.length; i++) {\n        if(this.tags[i].value.toUpperCase() == tag_value.toUpperCase()) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // Validates tag input against a set of functions before a Tag is actually created\n    var TagValidator = {\n      init: function() {\n        // Options for all built in validators\n        this.options = {\n          force_lower_case: true,\n          banned_tags: [],\n          invalid_characters: [],\n          allowed_tags: [],\n          allow_duplicates: false,\n          allow_whitespace_tags: false,\n          alphanumeric_tags_only: true,\n          max_characters: 255,\n          min_characters: 2,\n          max_bytes: -1,\n          min_bytes: -1,\n          custom_validators: {},\n          // Before and on Validation Sucess / Failure\n          beforeValidate: function(tag_value) { return true; },\n          onValidationSuccess: function(tag_value) { return true; },\n          onValidationFailure: function(validation_error) { return true; }\n        };\n\n        var tag_set = null;\n\n        this.setup = function(user_options, set_to_validate) {\n          $.extend(true, this.options, user_options);\n          $.extend(true, this.options, user_options.validator_options);\n\n          tag_set = set_to_validate;\n        }\n\n        this.validateTagValue = function(tag_value) {\n          var options = this.options;\n          options.beforeValidate(tag_value);\n\n          for(var validator_key in default_validators) {\n            var validator = default_validators[validator_key];\n            var validation_result = validator(tag_value, tag_set, options);\n\n            if(validation_result !== true) {\n              options.onValidationFailure(validation_result);\n              return validation_result;\n            }\n          }\n\n          for(var validator_key in options.custom_validators) {\n            var validator = options.custom_validators[validator_key];\n            var validation_result = validator(tag_value, tag_set, options);\n\n            if(validation_result !== true) {\n              options.onValidationFailure(validation_result);\n              return validation_result;\n            }\n          }\n\n          options.onValidationSuccess(tag_value);\n\n          return true;\n        }\n\n        this.validateTagValues = function(tag_values) {\n          for(var i = 0; i < tag_values.length; i++) {\n            validateTagValue(tag_values[i]);\n          }\n        }\n\n        var default_validators = {\n          validateTagCount: function(tag_value, tag_set, options) {\n            if(options.max_tags !== -1 && tag_set.tags.length > options.max_tags) {\n              return { error: 'Maximum number of tags (' + options.max_tags + ') exceeded', tag: tag_value };\n            }\n\n            return true;\n          },\n\n          validateTagSetCharacterLimit: function(tag_value, tag_set, options) {\n            var count = 0;\n            for (var i = 0; i < tag_set.tags.length; ++i) {\n              count += youtube_char_count(tag_set.tags[i].value)\n            }\n\n            count += youtube_char_count(tag_value);// Need this for including the new tag in the count.\n            count += tag_set.tags.length; // YouTube adds a Space between each tag.\n            if (count > options.max_tag_set_characters) {\n              return {\n                error: 'Maximum number of characters ('+ options.max_tag_set_characters +') exceeded by '+ (count - options.max_tag_set_characters),\n                tag: tag_value\n              };\n            }\n\n            return true;\n          },\n\n          validateAlphanumericality: function(tag_value, tag_set, options) {\n            if(options.alphanumeric_tags_only === true) {\n              var matched = tag_value.match(/^([a-z0-9 ])*$/i); //spaces count as alphanumeric\n\n              if(matched === null || matched[0] !== tag_value) {\n                return { error: 'Only alphanumeric tags are permitted', tag: tag_value };\n              }\n            }\n\n            return true;\n          },\n\n          validateWhitespace: function(tag_value, tag_set, options) {\n            if(options.allow_whitespace_tags === false) {\n              var matched = tag_value.match(/\\s+/);\n\n              if(matched !== null && matched[0] === tag_value) {\n                return { error: 'Tags must contain non-whitespace characters', tag: tag_value };\n              }\n            }\n\n            return true;\n          },\n\n          validateCharacters: function(tag_value, tag_set, options) {\n            if(options.invalid_characters.length > 0) {\n              var foundInvalidChars = [];\n              for(var i = 0; i < options.invalid_characters.length; i++) {\n                if(tag_value.indexOf(options.invalid_characters[i]) > -1) {\n                  foundInvalidChars.push(options.invalid_characters[i]);\n                }\n              }\n\n              if(foundInvalidChars.length > 0) {\n\n                return { error: 'The character: ' + foundInvalidChars.join(', ') + ' is not permitted', tag: tag_value };\n              }\n            }\n\n            return true;\n          },\n\n          validateBannedTags: function(tag_value, tag_set, options) {\n            if($.inArray(tag_value, options.banned_tags) !== -1) {\n              return { error: 'The tag: ' + tag_value + ' is banned', tag: tag_value };\n            }\n\n            return true;\n          },\n\n          validateAllowedTags: function(tag_value, tag_set, options) {\n            if(options.allowed_tags.length > 0 && $.inArray(tag_value, options.allowed_tags) === -1) {\n              return { error: 'The tag: ' + tag_value + ' is not in the set of allowed tags', tag: tag_value };\n            }\n\n            return true;\n          },\n\n          validateDuplicates: function(tag_value, tag_set, options) {\n            if (options.allow_duplicates === false && tag_set.checkForDuplicateTag(tag_value)) {\n              return { error: 'Duplicate Tag', tag: tag_value };\n            }\n\n            return true;\n          },\n\n          validateTagCharacterLength: function(tag_value, tag_set, options) {\n            if(options.max_characters != -1) {\n              if (tag_value.length > options.max_characters) {\n                return { error: 'Tags must be under ' + options.max_characters + ' characters', tag: tag_value };\n              }\n            }\n\n            if(options.min_characters != -1 && tag_value.length < options.min_characters) {\n              return { error: 'Tags must be at least ' + options.min_characters + ' characters', tag: tag_value };\n            }\n\n            return true;\n          },\n\n          validateTagByteSize: function(tag_value, tag_set, options) {\n            var tagLength = getUTF8Length(tag_value);\n\n            if(options.max_bytes != -1 && tagLength > options.max_bytes) {\n              return { error: 'Tags must be under ' + options.max_bytes + ' bytes', tag: tag_value };\n            }\n\n            if(options.min_bytes != -1 && tagLength < options.min_bytes) {\n              return { error: 'Tags must be at least ' + options.min_bytes + ' bytes', tag: tag_value };\n            }\n\n            return true;\n          }\n        }\n\n        return this;\n      }\n    }\n\n    var TagSorter = {\n      init: function() {\n        var options = {\n          alphabetical_sort: false,\n          unshift: false\n        };\n\n        this.setup = function(user_options, set_to_sort) {\n          $.extend(true, options, user_options);\n          $.extend(true, options, user_options.sorting_options);\n        }\n\n        // calling sort modifies the passed in array\n        this.sort = function(tag_set) {\n          if(options.alphabetical_sort === true) {\n            this.alphabeticalSort(tag_set);\n          } else if(options.unshift === true) {\n            this.prependTags(tag_set);\n          } else {\n            this.appendTags(tag_set);\n          }\n        }\n\n        this.alphabeticalSort = function(tag_set) {\n          tag_set.sort(function(a, b) {\n            return (a.value < b.value) ? -1: (a.value > b.value) ? 1 : 0;\n          });\n        }\n\n        this.appendTags = function(tag_set) {\n          tag_set.sort(function(a, b) {\n            return (a.id < b.id) ? -1: (a.id > b.id) ? 1 : 0;\n          });\n        }\n\n        this.prependTags = function(tag_set) {\n          tag_set.sort(function(a, b) {\n            return (a.id > b.id) ? -1: (a.id < b.id) ? 1 : 0;\n          });\n        }\n\n        this.getTagIndex = function(tag_set, new_tag) {\n          return tag_set.indexOf(new_tag);\n        }\n\n        return this;\n      }\n    }\n\n    function getUTF8Length(tag_value) {\n      if(tag_value === null) return -1;\n\n      var utf8length = 0;\n      for (var n = 0; n < tag_value.length; n++) {\n        var c = tag_value.charCodeAt(n);\n        if (c < 128) {\n          utf8length++;\n        }\n        else if((c > 127) && (c < 2048)) {\n          utf8length += 2;\n        }\n        else {\n          utf8length += 3;\n        }\n      }\n\n      return utf8length;\n    }\n\n    // Object used to store model data for a tag as well as helper funtions for validation/building views\n    function Tag(tag_value, tag_index) {\n      this.id = tag_index;\n      this.value = tag_value;\n      this.$element = null;\n      this.state = null;\n\n      // Creates the html view for this tag\n      this.buildTagView = function(tag_value, index, tag_appearance) {\n        if(tag_appearance.custom_html !== null) {\n          return tag_appearance.custom_html(tag_value, index, tag_appearance);\n        }\n\n        var prefix = \"\";\n        if(tag_appearance.prefix !== null) {\n          prefix = \"<div class='prefix-container'>\";\n          prefix += \"<div class='\" + tag_appearance.klass + \"'>\";\n          prefix += tag_appearance.prefix;\n          prefix += \"</div>\";\n          prefix += \"</div>\";\n        }\n\n        var content = \"<div class='content-container \" + tag_appearance.klass + \"'>\";\n        if(tag_appearance.editable === true) {\n          content += \"<input autocomplete='false' class='form-control tag-update'\";\n\n          if(this.options.max_characters > -1) {\n            content += \" maxlength='\" + this.options.max_characters +\"'\";\n          }\n          content += \" value='\" + tag_value + \"'\";\n        }\n\n        content += tag_value;\n\n        if(tag_appearance.editable === true) {\n          content += \"></input>\";\n        }\n\n        if(tag_appearance.hidden_inputs === true) {\n          content += $('<input>', {\n            type: 'hidden',\n            name: tag_appearance.hidden_input_name,\n            value: tag_value,\n          })[0].outerHTML;\n        }\n\n        content += \"</div>\";\n\n        var postfix = \"\";\n        if(tag_appearance.postfix !== null) {\n          postfix = \"<div class='postfix-container'>\";\n          postfix += \"<div class='\" + tag_appearance.klass + \"'>\";\n          postfix += tag_appearance.postfix;\n          postfix += \"</div>\";\n          postfix += \"</div>\";\n        }\n\n        return \"<div class='tag-container' data-tag-id='\" + index + \"' class='\" + tag_appearance.klass + \"' >\" + prefix + content + postfix + \"</div>\";\n      }\n    }\n\n    function youtube_char_count(tag){\n      var count = tag.length;\n      if (tag.match(/([\\s]+)/g)) {\n          count += 2; // YouTube wraps tags with a space with ''\n      }\n\n      return count;\n    }\n\n    return this;\n  }\n}\n"},"RPI+":function(e,t,n){n("8rVx")(n("qC07"))},RX5K:function(e,t){e.exports="/*globals $ */\nvar NavSearch = {\n  setupTypeahead: function () {\n\n    var SEARCH_DISPLAY_LIMIT = 6;\n    var $searchEl = $('#nav-search');\n\n    var commonBloodhoundSettings = {\n      datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n      queryTokenizer: Bloodhound.tokenizers.whitespace,\n      sufficient: 8,\n      initialize: true,\n      identify: function(obj) {\n        return obj.id;\n      },\n      remote: {\n        wildcard: \"%QUERY\"\n      }\n    }\n\n    // Bloodhound for players\n    var bloodhoundPlayerSettings = {\n      remote: {\n        url: \"/organizations/\" + currentOrganizationID() + \"/players/autocomplete?query=%QUERY\"\n      }\n    }\n    var typeaheadPlayers = new Bloodhound($.extend(true, commonBloodhoundSettings, bloodhoundPlayerSettings));\n\n    // Bloodhound for videos\n    var bloodhoundVideoSettings = {\n      remote: {\n        url: \"/organizations/\" + currentOrganizationID() + \"/videos/autocomplete?query=%QUERY\"\n      }\n    }\n    var typeaheadVideos = new Bloodhound($.extend(true, commonBloodhoundSettings, bloodhoundVideoSettings));\n\n    // Bloodhound for orgs/groups\n    var bloodhoundGroupsSettings = {\n      remote: {\n        url: \"/organizations/\" + currentOrganizationID() + \"/autocomplete?query=%QUERY\"\n      }\n    }\n    var typeaheadGroups = new Bloodhound($.extend(true, commonBloodhoundSettings, bloodhoundGroupsSettings));\n\n    var compileResultGroupHeader = function(context) {\n      var count = context.suggestions[0].count;\n      var dataSetFriendlyName = context.dataset.charAt(0).toUpperCase() + context.dataset.slice(1);\n\n      // If we have more than we can show in the search bar, put in a \"Show All\" button\n      // Bloodhound returns \"99+\" when the count is >= 100\n      if (count > SEARCH_DISPLAY_LIMIT || count === '99+') {\n        return '<div class=\"result-group\">' + compileMoreButton(context) + '<h4><span class=\"count\">' + count + '</span> ' + dataSetFriendlyName + '</h4></div>';\n      } else {\n        return '<div class=\"result-group\"><h4><span class=\"count\">' + count + '</span> ' + dataSetFriendlyName + '</h4></div>';\n      }\n    }\n\n    var compileResult = function(path, name, thumbnail_path) {\n      var icon = '<div class=\"col-xs-1\"><i class=\"icon-group\"></i></div>';\n\n      if (typeof thumbnail_path != 'undefined') {\n        icon = '<div class=\"col-xs-3\"><div class=\"vy-thumbnail\"> <div class=\"thumbnail-mask\" style=\"background-image: url(' + thumbnail_path + ');\"></div></div></div>';\n      }\n\n      return [\n        '<a class=\"search-result\" href=\"' + path + '\">',\n          '<div class=\"row\">',\n            icon,\n            '<div class=\"col-xs-9 truncate\">' + name + '</div>',\n         ' </div>',\n        '</a>'\n      ].join('\\n');\n    }\n\n    var compileMoreButton = function(context) {\n      var moreURL = \"\";\n\n      switch(context.dataset) {\n        case 'players':\n          moreURL = \"/organizations/\" + currentOrganizationID() + \"/players?query=\" + context.query;\n          break;\n        case 'videos':\n          moreURL = \"/organizations/\" + currentOrganizationID() + \"/video_library?query=\" + context.query;\n          break;\n        case 'groups':\n          moreURL = \"/organizations/\" + currentOrganizationID() + \"?utf8=&search_criteria=\" + context.query;\n          break;\n      }\n      return '<a aria-label=\"Show all ' + context.dataset + '\" class=\"btn btn-xs btn-outline pull-right mr-15 more-results\" href=\"' + moreURL + '\">Show All</a>';\n    }\n\n    // Prevent enter key from submitting form\n    $searchEl.on(\"keypress\", function(event) {\n      return event.keyCode != 13;\n    });\n\n    $searchEl.typeahead({\n      highlight: true,\n      hint: false,\n      menu: $('#nav-search-results')\n    },\n    {\n      limit: SEARCH_DISPLAY_LIMIT,\n      name: \"players\",\n      displayKey: \"value\",\n      source: typeaheadPlayers.ttAdapter(),\n      templates: {\n        header: compileResultGroupHeader,\n        suggestion: function(data) {\n          return compileResult(data.player_path, data.value, data.thumbnail_url);\n        }\n      }\n    },\n    {\n      limit: SEARCH_DISPLAY_LIMIT,\n      name: \"videos\",\n      displayKey: \"value\",\n      source: typeaheadVideos.ttAdapter(),\n      templates: {\n        header: compileResultGroupHeader,\n        suggestion: function(data) {\n          return compileResult(data.video_path, data.value, data.thumbnail_url);\n        }\n      }\n    },\n    {\n      limit: SEARCH_DISPLAY_LIMIT,\n      name: \"groups\",\n      displayKey: \"value\",\n      source: typeaheadGroups.ttAdapter(),\n      templates: {\n        header: compileResultGroupHeader,\n        suggestion: function(data) {\n          return compileResult(\"/organizations/\"+data.id+\"/groups/\"+data.id+\"/roles\", data.value);\n        }\n      }\n    });\n  },\n\n  updateTabIndex: function($wrapper) {\n    $wrapper.find('#nav-search').attr('tabIndex', ($wrapper.hasClass('panel-open')) ? 0 : -1);\n    $wrapper.find('button.close-panel').attr('tabIndex', ($wrapper.hasClass('panel-open')) ? 0 : -1);\n    $wrapper.find('#nav-search-container').attr('aria-hidden', ($wrapper.hasClass('panel-open')) ? false : true);\n  },\n\n  setupListeners: function() {\n    var $searchContainer = $('#nav-search-container');\n    var $searchEl = $searchContainer.find('#nav-search');\n    var $wrapper = $('#wrapper');\n\n    $(document).keyup(function(e) {\n      // Check for escape to close search panel if its open\n      if ($wrapper.hasClass('panel-open') && e.keyCode === 27) {\n        $wrapper.toggleClass('panel-open');\n        NavSearch.updateTabIndex($wrapper);\n      }\n    });\n\n    $('#nav-search-button, #nav-search-button-mobile, #nav-search-container .close-panel').on('click', function() {\n      $wrapper.toggleClass(\"panel-open\");\n      NavSearch.updateTabIndex($wrapper);\n      setTimeout(function(){\n        $searchEl.focus();\n      }, 50);\n    });\n\n    $searchEl.on('typeahead:asyncrequest', function() {\n      $searchContainer.addClass(\"in-progress\");\n    });\n\n    $searchEl.on('typeahead:asyncreceive', function() {\n      $searchContainer.removeClass(\"in-progress\");\n    });\n  },\n\n  init: function () {\n    \"use strict\";\n    this.setupTypeahead();\n    this.setupListeners();\n  }\n};\n\n$(function() {\n  NavSearch.init();\n});\n"},"RoM/":function(e,t,n){n("8rVx")(n("lD5I"))},SJgG:function(e,t,n){var i=n("FE+q");var r=n("Pg24");e.exports=function e(t,n){if(i(t))return[];return r(t,n).split(n||/\s+/)}},SKDj:function(e,t){e.exports="/**\n * @fileoverview Main function src.\n */\n\n// HTML5 Shiv. Must be in <head> to support older browsers.\ndocument.createElement('video');\ndocument.createElement('audio');\ndocument.createElement('track');\n\n/**\n * Doubles as the main function for users to create a player instance and also\n * the main library object.\n *\n * **ALIASES** videojs, _V_ (deprecated)\n *\n * The `vjs` function can be used to initialize or retrieve a player.\n *\n *     var myPlayer = vjs('my_video_id');\n *\n * @param  {String|Element} id      Video element or video element ID\n * @param  {Object=} options        Optional options object for config/settings\n * @param  {Function=} ready        Optional ready callback\n * @return {vjs.Player}             A player instance\n * @namespace\n */\nvar vjs = function(id, options, ready){\n  var tag; // Element of ID\n\n  // Allow for element or ID to be passed in\n  // String ID\n  if (typeof id === 'string') {\n\n    // Adjust for jQuery ID syntax\n    if (id.indexOf('#') === 0) {\n      id = id.slice(1);\n    }\n\n    // If a player instance has already been created for this ID return it.\n    if (vjs.players[id]) {\n\n      // If options or ready funtion are passed, warn\n      if (options) {\n        vjs.log.warn ('Player \"' + id + '\" is already initialised. Options will not be applied.');\n      }\n\n      if (ready) {\n        vjs.players[id].ready(ready);\n      }\n\n      return vjs.players[id];\n\n    // Otherwise get element for ID\n    } else {\n      tag = vjs.el(id);\n    }\n\n  // ID is a media element\n  } else {\n    tag = id;\n  }\n\n  // Check for a useable element\n  if (!tag || !tag.nodeName) { // re: nodeName, could be a box div also\n    throw new TypeError('The element or ID supplied is not valid. (videojs)'); // Returns\n  }\n\n  // Element may have a player attr referring to an already created player instance.\n  // If not, set up a new player and return the instance.\n  return tag['player'] || new vjs.Player(tag, options, ready);\n};\n\n// Extended name, also available externally, window.videojs\nvar videojs = window['videojs'] = vjs;\n\n// CDN Version. Used to target right flash swf.\nvjs.CDN_VERSION = '4.12';\nvjs.ACCESS_PROTOCOL = ('https:' == document.location.protocol ? 'https://' : 'http://');\n\n/**\n* Full player version\n* @type {string}\n*/\nvjs['VERSION'] = '4.12.5';\n\n/**\n * Global Player instance options, surfaced from vjs.Player.prototype.options_\n * vjs.options = vjs.Player.prototype.options_\n * All options should use string keys so they avoid\n * renaming by closure compiler\n * @type {Object}\n */\nvjs.options = {\n  // Default order of fallback technology\n  'techOrder': ['html5','flash'],\n  // techOrder: ['flash','html5'],\n\n  'html5': {},\n  'flash': {},\n\n  // Default of web browser is 300x150. Should rely on source width/height.\n  'width': 300,\n  'height': 150,\n  // defaultVolume: 0.85,\n  'defaultVolume': 0.00, // The freakin seaguls are driving me crazy!\n\n  // default playback rates\n  'playbackRates': [],\n  // Add playback rate selection by adding rates\n  // 'playbackRates': [0.5, 1, 1.5, 2],\n\n  // default inactivity timeout\n  'inactivityTimeout': 2000,\n\n  // Included control sets\n  'children': {\n    'mediaLoader': {},\n    'posterImage': {},\n    'loadingSpinner': {},\n    'textTrackDisplay': {},\n    'bigPlayButton': {},\n    'controlBar': {},\n    'errorDisplay': {},\n    'textTrackSettings': {}\n  },\n\n  'language': document.getElementsByTagName('html')[0].getAttribute('lang') || navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language || 'en',\n\n  // locales and their language translations\n  'languages': {},\n\n  // Default message to show when a video cannot be played.\n  'notSupportedMessage': 'No compatible source was found for this video.'\n};\n\n// Set CDN Version of swf\n// The added (+) blocks the replace from changing this 4.12 string\nif (vjs.CDN_VERSION !== 'GENERATED'+'_CDN_VSN') {\n  videojs.options['flash']['swf'] = vjs.ACCESS_PROTOCOL + 'vjs.zencdn.net/'+vjs.CDN_VERSION+'/video-js.swf';\n}\n\n/**\n * Utility function for adding languages to the default options. Useful for\n * amending multiple language support at runtime.\n *\n * Example: vjs.addLanguage('es', {'Hello':'Hola'});\n *\n * @param  {String} code The language code or dictionary property\n * @param  {Object} data The data values to be translated\n * @return {Object} The resulting global languages dictionary object\n */\nvjs.addLanguage = function(code, data){\n  if(vjs.options['languages'][code] !== undefined) {\n    vjs.options['languages'][code] = vjs.util.mergeOptions(vjs.options['languages'][code], data);\n  } else {\n    vjs.options['languages'][code] = data;\n  }\n  return vjs.options['languages'];\n};\n\n/**\n * Global player list\n * @type {Object}\n */\nvjs.players = {};\n\n/*!\n * Custom Universal Module Definition (UMD)\n *\n * Video.js will never be a non-browser lib so we can simplify UMD a bunch and\n * still support requirejs and browserify. This also needs to be closure\n * compiler compatible, so string keys are used.\n */\nif (typeof define === 'function' && define['amd']) {\n  define('videojs', [], function(){ return videojs; });\n\n// checking that module is an object too because of umdjs/umd#35\n} else if (typeof exports === 'object' && typeof module === 'object') {\n  module['exports'] = videojs;\n}\n/**\n * Core Object/Class for objects that use inheritance + constructors\n *\n * To create a class that can be subclassed itself, extend the CoreObject class.\n *\n *     var Animal = CoreObject.extend();\n *     var Horse = Animal.extend();\n *\n * The constructor can be defined through the init property of an object argument.\n *\n *     var Animal = CoreObject.extend({\n *       init: function(name, sound){\n *         this.name = name;\n *       }\n *     });\n *\n * Other methods and properties can be added the same way, or directly to the\n * prototype.\n *\n *    var Animal = CoreObject.extend({\n *       init: function(name){\n *         this.name = name;\n *       },\n *       getName: function(){\n *         return this.name;\n *       },\n *       sound: '...'\n *    });\n *\n *    Animal.prototype.makeSound = function(){\n *      alert(this.sound);\n *    };\n *\n * To create an instance of a class, use the create method.\n *\n *    var fluffy = Animal.create('Fluffy');\n *    fluffy.getName(); // -> Fluffy\n *\n * Methods and properties can be overridden in subclasses.\n *\n *     var Horse = Animal.extend({\n *       sound: 'Neighhhhh!'\n *     });\n *\n *     var horsey = Horse.create('Horsey');\n *     horsey.getName(); // -> Horsey\n *     horsey.makeSound(); // -> Alert: Neighhhhh!\n *\n * @class\n * @constructor\n */\nvjs.CoreObject = vjs['CoreObject'] = function(){};\n// Manually exporting vjs['CoreObject'] here for Closure Compiler\n// because of the use of the extend/create class methods\n// If we didn't do this, those functions would get flattened to something like\n// `a = ...` and `this.prototype` would refer to the global object instead of\n// CoreObject\n\n/**\n * Create a new object that inherits from this Object\n *\n *     var Animal = CoreObject.extend();\n *     var Horse = Animal.extend();\n *\n * @param {Object} props Functions and properties to be applied to the\n *                       new object's prototype\n * @return {vjs.CoreObject} An object that inherits from CoreObject\n * @this {*}\n */\nvjs.CoreObject.extend = function(props){\n  var init, subObj;\n\n  props = props || {};\n  // Set up the constructor using the supplied init method\n  // or using the init of the parent object\n  // Make sure to check the unobfuscated version for external libs\n  init = props['init'] || props.init || this.prototype['init'] || this.prototype.init || function(){};\n  // In Resig's simple class inheritance (previously used) the constructor\n  //  is a function that calls `this.init.apply(arguments)`\n  // However that would prevent us from using `ParentObject.call(this);`\n  //  in a Child constructor because the `this` in `this.init`\n  //  would still refer to the Child and cause an infinite loop.\n  // We would instead have to do\n  //    `ParentObject.prototype.init.apply(this, arguments);`\n  //  Bleh. We're not creating a _super() function, so it's good to keep\n  //  the parent constructor reference simple.\n  subObj = function(){\n    init.apply(this, arguments);\n  };\n\n  // Inherit from this object's prototype\n  subObj.prototype = vjs.obj.create(this.prototype);\n  // Reset the constructor property for subObj otherwise\n  // instances of subObj would have the constructor of the parent Object\n  subObj.prototype.constructor = subObj;\n\n  // Make the class extendable\n  subObj.extend = vjs.CoreObject.extend;\n  // Make a function for creating instances\n  subObj.create = vjs.CoreObject.create;\n\n  // Extend subObj's prototype with functions and other properties from props\n  for (var name in props) {\n    if (props.hasOwnProperty(name)) {\n      subObj.prototype[name] = props[name];\n    }\n  }\n\n  return subObj;\n};\n\n/**\n * Create a new instance of this Object class\n *\n *     var myAnimal = Animal.create();\n *\n * @return {vjs.CoreObject} An instance of a CoreObject subclass\n * @this {*}\n */\nvjs.CoreObject.create = function(){\n  // Create a new object that inherits from this object's prototype\n  var inst = vjs.obj.create(this.prototype);\n\n  // Apply this constructor function to the new object\n  this.apply(inst, arguments);\n\n  // Return the new object\n  return inst;\n};\n/**\n * @fileoverview Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)\n * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)\n * This should work very similarly to jQuery's events, however it's based off the book version which isn't as\n * robust as jquery's, so there's probably some differences.\n */\n\n/**\n * Add an event listener to element\n * It stores the handler function in a separate cache object\n * and adds a generic handler to the element's event,\n * along with a unique id (guid) to the element.\n * @param  {Element|Object}   elem Element or object to bind listeners to\n * @param  {String|Array}   type Type of event to bind to.\n * @param  {Function} fn   Event listener.\n * @private\n */\nvjs.on = function(elem, type, fn){\n  if (vjs.obj.isArray(type)) {\n    return _handleMultipleEvents(vjs.on, elem, type, fn);\n  }\n\n  var data = vjs.getData(elem);\n\n  // We need a place to store all our handler data\n  if (!data.handlers) data.handlers = {};\n\n  if (!data.handlers[type]) data.handlers[type] = [];\n\n  if (!fn.guid) fn.guid = vjs.guid++;\n\n  data.handlers[type].push(fn);\n\n  if (!data.dispatcher) {\n    data.disabled = false;\n\n    data.dispatcher = function (event){\n\n      if (data.disabled) return;\n      event = vjs.fixEvent(event);\n\n      var handlers = data.handlers[event.type];\n\n      if (handlers) {\n        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.\n        var handlersCopy = handlers.slice(0);\n\n        for (var m = 0, n = handlersCopy.length; m < n; m++) {\n          if (event.isImmediatePropagationStopped()) {\n            break;\n          } else {\n            handlersCopy[m].call(elem, event);\n          }\n        }\n      }\n    };\n  }\n\n  if (data.handlers[type].length == 1) {\n    if (elem.addEventListener) {\n      elem.addEventListener(type, data.dispatcher, false);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + type, data.dispatcher);\n    }\n  }\n};\n\n/**\n * Removes event listeners from an element\n * @param  {Element|Object}   elem Object to remove listeners from\n * @param  {String|Array=}   type Type of listener to remove. Don't include to remove all events from element.\n * @param  {Function} fn   Specific listener to remove. Don't include to remove listeners for an event type.\n * @private\n */\nvjs.off = function(elem, type, fn) {\n  // Don't want to add a cache object through getData if not needed\n  if (!vjs.hasData(elem)) return;\n\n  var data = vjs.getData(elem);\n\n  // If no events exist, nothing to unbind\n  if (!data.handlers) { return; }\n\n  if (vjs.obj.isArray(type)) {\n    return _handleMultipleEvents(vjs.off, elem, type, fn);\n  }\n\n  // Utility function\n  var removeType = function(t){\n     data.handlers[t] = [];\n     vjs.cleanUpEvents(elem,t);\n  };\n\n  // Are we removing all bound events?\n  if (!type) {\n    for (var t in data.handlers) removeType(t);\n    return;\n  }\n\n  var handlers = data.handlers[type];\n\n  // If no handlers exist, nothing to unbind\n  if (!handlers) return;\n\n  // If no listener was provided, remove all listeners for type\n  if (!fn) {\n    removeType(type);\n    return;\n  }\n\n  // We're only removing a single handler\n  if (fn.guid) {\n    for (var n = 0; n < handlers.length; n++) {\n      if (handlers[n].guid === fn.guid) {\n        handlers.splice(n--, 1);\n      }\n    }\n  }\n\n  vjs.cleanUpEvents(elem, type);\n};\n\n/**\n * Clean up the listener cache and dispatchers\n * @param  {Element|Object} elem Element to clean up\n * @param  {String} type Type of event to clean up\n * @private\n */\nvjs.cleanUpEvents = function(elem, type) {\n  var data = vjs.getData(elem);\n\n  // Remove the events of a particular type if there are none left\n  if (data.handlers[type].length === 0) {\n    delete data.handlers[type];\n    // data.handlers[type] = null;\n    // Setting to null was causing an error with data.handlers\n\n    // Remove the meta-handler from the element\n    if (elem.removeEventListener) {\n      elem.removeEventListener(type, data.dispatcher, false);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + type, data.dispatcher);\n    }\n  }\n\n  // Remove the events object if there are no types left\n  if (vjs.isEmpty(data.handlers)) {\n    delete data.handlers;\n    delete data.dispatcher;\n    delete data.disabled;\n\n    // data.handlers = null;\n    // data.dispatcher = null;\n    // data.disabled = null;\n  }\n\n  // Finally remove the expando if there is no data left\n  if (vjs.isEmpty(data)) {\n    vjs.removeData(elem);\n  }\n};\n\n/**\n * Fix a native event to have standard property values\n * @param  {Object} event Event object to fix\n * @return {Object}\n * @private\n */\nvjs.fixEvent = function(event) {\n\n  function returnTrue() { return true; }\n  function returnFalse() { return false; }\n\n  // Test if fixing up is needed\n  // Used to check if !event.stopPropagation instead of isPropagationStopped\n  // But native events return true for stopPropagation, but don't have\n  // other expected methods like isPropagationStopped. Seems to be a problem\n  // with the Javascript Ninja code. So we're just overriding all events now.\n  if (!event || !event.isPropagationStopped) {\n    var old = event || window.event;\n\n    event = {};\n    // Clone the old object so that we can modify the values event = {};\n    // IE8 Doesn't like when you mess with native event properties\n    // Firefox returns false for event.hasOwnProperty('type') and other props\n    //  which makes copying more difficult.\n    // TODO: Probably best to create a whitelist of event props\n    for (var key in old) {\n      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y\n      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation\n      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyLocation') {\n        // Chrome 32+ warns if you try to copy deprecated returnValue, but\n        // we still want to if preventDefault isn't supported (IE8).\n        if (!(key == 'returnValue' && old.preventDefault)) {\n          event[key] = old[key];\n        }\n      }\n    }\n\n    // The event occurred on this element\n    if (!event.target) {\n      event.target = event.srcElement || document;\n    }\n\n    // Handle which other element the event is related to\n    event.relatedTarget = event.fromElement === event.target ?\n      event.toElement :\n      event.fromElement;\n\n    // Stop the default browser action\n    event.preventDefault = function () {\n      if (old.preventDefault) {\n        old.preventDefault();\n      }\n      event.returnValue = false;\n      event.isDefaultPrevented = returnTrue;\n      event.defaultPrevented = true;\n    };\n\n    event.isDefaultPrevented = returnFalse;\n    event.defaultPrevented = false;\n\n    // Stop the event from bubbling\n    event.stopPropagation = function () {\n      if (old.stopPropagation) {\n        old.stopPropagation();\n      }\n      event.cancelBubble = true;\n      event.isPropagationStopped = returnTrue;\n    };\n\n    event.isPropagationStopped = returnFalse;\n\n    // Stop the event from bubbling and executing other handlers\n    event.stopImmediatePropagation = function () {\n      if (old.stopImmediatePropagation) {\n        old.stopImmediatePropagation();\n      }\n      event.isImmediatePropagationStopped = returnTrue;\n      event.stopPropagation();\n    };\n\n    event.isImmediatePropagationStopped = returnFalse;\n\n    // Handle mouse position\n    if (event.clientX != null) {\n      var doc = document.documentElement, body = document.body;\n\n      event.pageX = event.clientX +\n        (doc && doc.scrollLeft || body && body.scrollLeft || 0) -\n        (doc && doc.clientLeft || body && body.clientLeft || 0);\n      event.pageY = event.clientY +\n        (doc && doc.scrollTop || body && body.scrollTop || 0) -\n        (doc && doc.clientTop || body && body.clientTop || 0);\n    }\n\n    // Handle key presses\n    event.which = event.charCode || event.keyCode;\n\n    // Fix button for mouse clicks:\n    // 0 == left; 1 == middle; 2 == right\n    if (event.button != null) {\n      event.button = (event.button & 1 ? 0 :\n        (event.button & 4 ? 1 :\n          (event.button & 2 ? 2 : 0)));\n    }\n  }\n\n  // Returns fixed-up instance\n  return event;\n};\n\n/**\n * Trigger an event for an element\n * @param  {Element|Object}      elem  Element to trigger an event on\n * @param  {Event|Object|String} event A string (the type) or an event object with a type attribute\n * @private\n */\nvjs.trigger = function(elem, event) {\n  // Fetches element data and a reference to the parent (for bubbling).\n  // Don't want to add a data object to cache for every parent,\n  // so checking hasData first.\n  var elemData = (vjs.hasData(elem)) ? vjs.getData(elem) : {};\n  var parent = elem.parentNode || elem.ownerDocument;\n      // type = event.type || event,\n      // handler;\n\n  // If an event name was passed as a string, creates an event out of it\n  if (typeof event === 'string') {\n    event = { type:event, target:elem };\n  }\n  // Normalizes the event properties.\n  event = vjs.fixEvent(event);\n\n  // If the passed element has a dispatcher, executes the established handlers.\n  if (elemData.dispatcher) {\n    elemData.dispatcher.call(elem, event);\n  }\n\n  // Unless explicitly stopped or the event does not bubble (e.g. media events)\n    // recursively calls this function to bubble the event up the DOM.\n    if (parent && !event.isPropagationStopped() && event.bubbles !== false) {\n    vjs.trigger(parent, event);\n\n  // If at the top of the DOM, triggers the default action unless disabled.\n  } else if (!parent && !event.defaultPrevented) {\n    var targetData = vjs.getData(event.target);\n\n    // Checks if the target has a default action for this event.\n    if (event.target[event.type]) {\n      // Temporarily disables event dispatching on the target as we have already executed the handler.\n      targetData.disabled = true;\n      // Executes the default action.\n      if (typeof event.target[event.type] === 'function') {\n        event.target[event.type]();\n      }\n      // Re-enables event dispatching.\n      targetData.disabled = false;\n    }\n  }\n\n  // Inform the triggerer if the default was prevented by returning false\n  return !event.defaultPrevented;\n  /* Original version of js ninja events wasn't complete.\n   * We've since updated to the latest version, but keeping this around\n   * for now just in case.\n   */\n  // // Added in addition to book. Book code was broke.\n  // event = typeof event === 'object' ?\n  //   event[vjs.expando] ?\n  //     event :\n  //     new vjs.Event(type, event) :\n  //   new vjs.Event(type);\n\n  // event.type = type;\n  // if (handler) {\n  //   handler.call(elem, event);\n  // }\n\n  // // Clean up the event in case it is being reused\n  // event.result = undefined;\n  // event.target = elem;\n};\n\n/**\n * Trigger a listener only once for an event\n * @param  {Element|Object}   elem Element or object to\n * @param  {String|Array}   type\n * @param  {Function} fn\n * @private\n */\nvjs.one = function(elem, type, fn) {\n  if (vjs.obj.isArray(type)) {\n    return _handleMultipleEvents(vjs.one, elem, type, fn);\n  }\n  var func = function(){\n    vjs.off(elem, type, func);\n    fn.apply(this, arguments);\n  };\n  // copy the guid to the new function so it can removed using the original function's ID\n  func.guid = fn.guid = fn.guid || vjs.guid++;\n  vjs.on(elem, type, func);\n};\n\n/**\n * Loops through an array of event types and calls the requested method for each type.\n * @param  {Function} fn   The event method we want to use.\n * @param  {Element|Object} elem Element or object to bind listeners to\n * @param  {String}   type Type of event to bind to.\n * @param  {Function} callback   Event listener.\n * @private\n */\nfunction _handleMultipleEvents(fn, elem, type, callback) {\n  vjs.arr.forEach(type, function(type) {\n    fn(elem, type, callback); //Call the event method for each one of the types\n  });\n}\nvar hasOwnProp = Object.prototype.hasOwnProperty;\n\n/**\n * Creates an element and applies properties.\n * @param  {String=} tagName    Name of tag to be created.\n * @param  {Object=} properties Element properties to be applied.\n * @return {Element}\n * @private\n */\nvjs.createEl = function(tagName, properties){\n  var el;\n\n  tagName = tagName || 'div';\n  properties = properties || {};\n\n  el = document.createElement(tagName);\n\n  vjs.obj.each(properties, function(propName, val){\n    // Not remembering why we were checking for dash\n    // but using setAttribute means you have to use getAttribute\n\n    // The check for dash checks for the aria-* attributes, like aria-label, aria-valuemin.\n    // The additional check for \"role\" is because the default method for adding attributes does not\n    // add the attribute \"role\". My guess is because it's not a valid attribute in some namespaces, although\n    // browsers handle the attribute just fine. The W3C allows for aria-* attributes to be used in pre-HTML5 docs.\n    // http://www.w3.org/TR/wai-aria-primer/#ariahtml. Using setAttribute gets around this problem.\n    if (propName.indexOf('aria-') !== -1 || propName == 'role') {\n     el.setAttribute(propName, val);\n    } else {\n     el[propName] = val;\n    }\n  });\n\n  return el;\n};\n\n/**\n * Uppercase the first letter of a string\n * @param  {String} string String to be uppercased\n * @return {String}\n * @private\n */\nvjs.capitalize = function(string){\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\n/**\n * Object functions container\n * @type {Object}\n * @private\n */\nvjs.obj = {};\n\n/**\n * Object.create shim for prototypal inheritance\n *\n * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create\n *\n * @function\n * @param  {Object}   obj Object to use as prototype\n * @private\n */\nvjs.obj.create = Object.create || function(obj){\n  //Create a new function called 'F' which is just an empty object.\n  function F() {}\n\n  //the prototype of the 'F' function should point to the\n  //parameter of the anonymous function.\n  F.prototype = obj;\n\n  //create a new constructor function based off of the 'F' function.\n  return new F();\n};\n\n/**\n * Loop through each property in an object and call a function\n * whose arguments are (key,value)\n * @param  {Object}   obj Object of properties\n * @param  {Function} fn  Function to be called on each property.\n * @this {*}\n * @private\n */\nvjs.obj.each = function(obj, fn, context){\n  for (var key in obj) {\n    if (hasOwnProp.call(obj, key)) {\n      fn.call(context || this, key, obj[key]);\n    }\n  }\n};\n\n/**\n * Merge two objects together and return the original.\n * @param  {Object} obj1\n * @param  {Object} obj2\n * @return {Object}\n * @private\n */\nvjs.obj.merge = function(obj1, obj2){\n  if (!obj2) { return obj1; }\n  for (var key in obj2){\n    if (hasOwnProp.call(obj2, key)) {\n      obj1[key] = obj2[key];\n    }\n  }\n  return obj1;\n};\n\n/**\n * Merge two objects, and merge any properties that are objects\n * instead of just overwriting one. Uses to merge options hashes\n * where deeper default settings are important.\n * @param  {Object} obj1 Object to override\n * @param  {Object} obj2 Overriding object\n * @return {Object}      New object. Obj1 and Obj2 will be untouched.\n * @private\n */\nvjs.obj.deepMerge = function(obj1, obj2){\n  var key, val1, val2;\n\n  // make a copy of obj1 so we're not overwriting original values.\n  // like prototype.options_ and all sub options objects\n  obj1 = vjs.obj.copy(obj1);\n\n  for (key in obj2){\n    if (hasOwnProp.call(obj2, key)) {\n      val1 = obj1[key];\n      val2 = obj2[key];\n\n      // Check if both properties are pure objects and do a deep merge if so\n      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {\n        obj1[key] = vjs.obj.deepMerge(val1, val2);\n      } else {\n        obj1[key] = obj2[key];\n      }\n    }\n  }\n  return obj1;\n};\n\n/**\n * Make a copy of the supplied object\n * @param  {Object} obj Object to copy\n * @return {Object}     Copy of object\n * @private\n */\nvjs.obj.copy = function(obj){\n  return vjs.obj.merge({}, obj);\n};\n\n/**\n * Check if an object is plain, and not a dom node or any object sub-instance\n * @param  {Object} obj Object to check\n * @return {Boolean}     True if plain, false otherwise\n * @private\n */\nvjs.obj.isPlain = function(obj){\n  return !!obj\n    && typeof obj === 'object'\n    && obj.toString() === '[object Object]'\n    && obj.constructor === Object;\n};\n\n/**\n * Check if an object is Array\n*  Since instanceof Array will not work on arrays created in another frame we need to use Array.isArray, but since IE8 does not support Array.isArray we need this shim\n * @param  {Object} obj Object to check\n * @return {Boolean}     True if plain, false otherwise\n * @private\n */\nvjs.obj.isArray = Array.isArray || function(arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]';\n};\n\n/**\n * Check to see whether the input is NaN or not.\n * NaN is the only JavaScript construct that isn't equal to itself\n * @param {Number} num Number to check\n * @return {Boolean} True if NaN, false otherwise\n * @private\n */\nvjs.isNaN = function(num) {\n  return num !== num;\n};\n\n/**\n * Bind (a.k.a proxy or Context). A simple method for changing the context of a function\n   It also stores a unique id on the function so it can be easily removed from events\n * @param  {*}   context The object to bind as scope\n * @param  {Function} fn      The function to be bound to a scope\n * @param  {Number=}   uid     An optional unique ID for the function to be set\n * @return {Function}\n * @private\n */\nvjs.bind = function(context, fn, uid) {\n  // Make sure the function has a unique ID\n  if (!fn.guid) { fn.guid = vjs.guid++; }\n\n  // Create the new function that changes the context\n  var ret = function() {\n    return fn.apply(context, arguments);\n  };\n\n  // Allow for the ability to individualize this function\n  // Needed in the case where multiple objects might share the same prototype\n  // IF both items add an event listener with the same function, then you try to remove just one\n  // it will remove both because they both have the same guid.\n  // when using this, you need to use the bind method when you remove the listener as well.\n  // currently used in text tracks\n  ret.guid = (uid) ? uid + '_' + fn.guid : fn.guid;\n\n  return ret;\n};\n\n/**\n * Element Data Store. Allows for binding data to an element without putting it directly on the element.\n * Ex. Event listeners are stored here.\n * (also from jsninja.com, slightly modified and updated for closure compiler)\n * @type {Object}\n * @private\n */\nvjs.cache = {};\n\n/**\n * Unique ID for an element or function\n * @type {Number}\n * @private\n */\nvjs.guid = 1;\n\n/**\n * Unique attribute name to store an element's guid in\n * @type {String}\n * @constant\n * @private\n */\nvjs.expando = 'vdata' + (new Date()).getTime();\n\n/**\n * Returns the cache object where data for an element is stored\n * @param  {Element} el Element to store data for.\n * @return {Object}\n * @private\n */\nvjs.getData = function(el){\n  var id = el[vjs.expando];\n  if (!id) {\n    id = el[vjs.expando] = vjs.guid++;\n  }\n  if (!vjs.cache[id]) {\n    vjs.cache[id] = {};\n  }\n  return vjs.cache[id];\n};\n\n/**\n * Returns the cache object where data for an element is stored\n * @param  {Element} el Element to store data for.\n * @return {Object}\n * @private\n */\nvjs.hasData = function(el){\n  var id = el[vjs.expando];\n  return !(!id || vjs.isEmpty(vjs.cache[id]));\n};\n\n/**\n * Delete data for the element from the cache and the guid attr from getElementById\n * @param  {Element} el Remove data for an element\n * @private\n */\nvjs.removeData = function(el){\n  var id = el[vjs.expando];\n  if (!id) { return; }\n  // Remove all stored data\n  // Changed to = null\n  // http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/\n  // vjs.cache[id] = null;\n  delete vjs.cache[id];\n\n  // Remove the expando property from the DOM node\n  try {\n    delete el[vjs.expando];\n  } catch(e) {\n    if (el.removeAttribute) {\n      el.removeAttribute(vjs.expando);\n    } else {\n      // IE doesn't appear to support removeAttribute on the document element\n      el[vjs.expando] = null;\n    }\n  }\n};\n\n/**\n * Check if an object is empty\n * @param  {Object}  obj The object to check for emptiness\n * @return {Boolean}\n * @private\n */\nvjs.isEmpty = function(obj) {\n  for (var prop in obj) {\n    // Inlude null properties as empty.\n    if (obj[prop] !== null) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Check if an element has a CSS class\n * @param {Element} element Element to check\n * @param {String} classToCheck Classname to check\n * @private\n */\nvjs.hasClass = function(element, classToCheck){\n  return ((' ' + element.className + ' ').indexOf(' ' + classToCheck + ' ') !== -1);\n};\n\n\n/**\n * Add a CSS class name to an element\n * @param {Element} element    Element to add class name to\n * @param {String} classToAdd Classname to add\n * @private\n */\nvjs.addClass = function(element, classToAdd){\n  if (!vjs.hasClass(element, classToAdd)) {\n    element.className = element.className === '' ? classToAdd : element.className + ' ' + classToAdd;\n  }\n};\n\n/**\n * Remove a CSS class name from an element\n * @param {Element} element    Element to remove from class name\n * @param {String} classToAdd Classname to remove\n * @private\n */\nvjs.removeClass = function(element, classToRemove){\n  var classNames, i;\n\n  if (!vjs.hasClass(element, classToRemove)) {return;}\n\n  classNames = element.className.split(' ');\n\n  // no arr.indexOf in ie8, and we don't want to add a big shim\n  for (i = classNames.length - 1; i >= 0; i--) {\n    if (classNames[i] === classToRemove) {\n      classNames.splice(i,1);\n    }\n  }\n\n  element.className = classNames.join(' ');\n};\n\n/**\n * Element for testing browser HTML5 video capabilities\n * @type {Element}\n * @constant\n * @private\n */\nvjs.TEST_VID = vjs.createEl('video');\n(function() {\n  var track = document.createElement('track');\n  track.kind = 'captions';\n  track.srclang = 'en';\n  track.label = 'English';\n  vjs.TEST_VID.appendChild(track);\n})();\n\n/**\n * Useragent for browser testing.\n * @type {String}\n * @constant\n * @private\n */\nvjs.USER_AGENT = navigator.userAgent;\n\n/**\n * Device is an iPhone\n * @type {Boolean}\n * @constant\n * @private\n */\nvjs.IS_IPHONE = (/iPhone/i).test(vjs.USER_AGENT);\nvjs.IS_IPAD = (/iPad/i).test(vjs.USER_AGENT);\nvjs.IS_IPOD = (/iPod/i).test(vjs.USER_AGENT);\nvjs.IS_IOS = vjs.IS_IPHONE || vjs.IS_IPAD || vjs.IS_IPOD;\n\nvjs.IOS_VERSION = (function(){\n  var match = vjs.USER_AGENT.match(/OS (\\d+)_/i);\n  if (match && match[1]) { return match[1]; }\n})();\n\nvjs.IS_ANDROID = (/Android/i).test(vjs.USER_AGENT);\nvjs.ANDROID_VERSION = (function() {\n  // This matches Android Major.Minor.Patch versions\n  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned\n  var match = vjs.USER_AGENT.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i),\n    major,\n    minor;\n\n  if (!match) {\n    return null;\n  }\n\n  major = match[1] && parseFloat(match[1]);\n  minor = match[2] && parseFloat(match[2]);\n\n  if (major && minor) {\n    return parseFloat(match[1] + '.' + match[2]);\n  } else if (major) {\n    return major;\n  } else {\n    return null;\n  }\n})();\n// Old Android is defined as Version older than 2.3, and requiring a webkit version of the android browser\nvjs.IS_OLD_ANDROID = vjs.IS_ANDROID && (/webkit/i).test(vjs.USER_AGENT) && vjs.ANDROID_VERSION < 2.3;\n\nvjs.IS_FIREFOX = (/Firefox/i).test(vjs.USER_AGENT);\nvjs.IS_CHROME = (/Chrome/i).test(vjs.USER_AGENT);\nvjs.IS_IE8 = (/MSIE\\s8\\.0/).test(vjs.USER_AGENT);\n\nvjs.TOUCH_ENABLED = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch);\nvjs.BACKGROUND_SIZE_SUPPORTED = 'backgroundSize' in vjs.TEST_VID.style;\n\n/**\n * Apply attributes to an HTML element.\n * @param  {Element} el         Target element.\n * @param  {Object=} attributes Element attributes to be applied.\n * @private\n */\nvjs.setElementAttributes = function(el, attributes){\n  vjs.obj.each(attributes, function(attrName, attrValue) {\n    if (attrValue === null || typeof attrValue === 'undefined' || attrValue === false) {\n      el.removeAttribute(attrName);\n    } else {\n      el.setAttribute(attrName, (attrValue === true ? '' : attrValue));\n    }\n  });\n};\n\n/**\n * Get an element's attribute values, as defined on the HTML tag\n * Attributes are not the same as properties. They're defined on the tag\n * or with setAttribute (which shouldn't be used with HTML)\n * This will return true or false for boolean attributes.\n * @param  {Element} tag Element from which to get tag attributes\n * @return {Object}\n * @private\n */\nvjs.getElementAttributes = function(tag){\n  var obj, knownBooleans, attrs, attrName, attrVal;\n\n  obj = {};\n\n  // known boolean attributes\n  // we can check for matching boolean properties, but older browsers\n  // won't know about HTML5 boolean attributes that we still read from\n  knownBooleans = ','+'autoplay,controls,loop,muted,default'+',';\n\n  if (tag && tag.attributes && tag.attributes.length > 0) {\n    attrs = tag.attributes;\n\n    for (var i = attrs.length - 1; i >= 0; i--) {\n      attrName = attrs[i].name;\n      attrVal = attrs[i].value;\n\n      // check for known booleans\n      // the matching element property will return a value for typeof\n      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(','+attrName+',') !== -1) {\n        // the value of an included boolean attribute is typically an empty\n        // string ('') which would equal false if we just check for a false value.\n        // we also don't want support bad code like autoplay='false'\n        attrVal = (attrVal !== null) ? true : false;\n      }\n\n      obj[attrName] = attrVal;\n    }\n  }\n\n  return obj;\n};\n\n/**\n * Get the computed style value for an element\n * From http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/\n * @param  {Element} el        Element to get style value for\n * @param  {String} strCssRule Style name\n * @return {String}            Style value\n * @private\n */\nvjs.getComputedDimension = function(el, strCssRule){\n  var strValue = '';\n  if(document.defaultView && document.defaultView.getComputedStyle){\n    strValue = document.defaultView.getComputedStyle(el, '').getPropertyValue(strCssRule);\n\n  } else if(el.currentStyle){\n    // IE8 Width/Height support\n    strValue = el['client'+strCssRule.substr(0,1).toUpperCase() + strCssRule.substr(1)] + 'px';\n  }\n  return strValue;\n};\n\n/**\n * Insert an element as the first child node of another\n * @param  {Element} child   Element to insert\n * @param  {[type]} parent Element to insert child into\n * @private\n */\nvjs.insertFirst = function(child, parent){\n  if (parent.firstChild) {\n    parent.insertBefore(child, parent.firstChild);\n  } else {\n    parent.appendChild(child);\n  }\n};\n\n/**\n * Object to hold browser support information\n * @type {Object}\n * @private\n */\nvjs.browser = {};\n\n/**\n * Shorthand for document.getElementById()\n * Also allows for CSS (jQuery) ID syntax. But nothing other than IDs.\n * @param  {String} id  Element ID\n * @return {Element}    Element with supplied ID\n * @private\n */\nvjs.el = function(id){\n  if (id.indexOf('#') === 0) {\n    id = id.slice(1);\n  }\n\n  return document.getElementById(id);\n};\n\n/**\n * Format seconds as a time string, H:MM:SS or M:SS\n * Supplying a guide (in seconds) will force a number of leading zeros\n * to cover the length of the guide\n * @param  {Number} seconds Number of seconds to be turned into a string\n * @param  {Number} guide   Number (in seconds) to model the string after\n * @return {String}         Time formatted as H:MM:SS or M:SS\n * @private\n */\nvjs.formatTime = function(seconds, guide) {\n  // Default to using seconds as guide\n  guide = guide || seconds;\n  var s = Math.floor(seconds % 60),\n      m = Math.floor(seconds / 60 % 60),\n      h = Math.floor(seconds / 3600),\n      gm = Math.floor(guide / 60 % 60),\n      gh = Math.floor(guide / 3600);\n\n  // handle invalid times\n  if (isNaN(seconds) || seconds === Infinity) {\n    // '-' is false for all relational operators (e.g. <, >=) so this setting\n    // will add the minimum number of fields specified by the guide\n    h = m = s = '-';\n  }\n\n  // Check if we need to show hours\n  h = (h > 0 || gh > 0) ? h + ':' : '';\n\n  // If hours are showing, we may need to add a leading zero.\n  // Always show at least one digit of minutes.\n  m = (((h || gm >= 10) && m < 10) ? '0' + m : m) + ':';\n\n  // Check if leading zero is need for seconds\n  s = (s < 10) ? '0' + s : s;\n\n  return h + m + s;\n};\n\n// Attempt to block the ability to select text while dragging controls\nvjs.blockTextSelection = function(){\n  document.body.focus();\n  document.onselectstart = function () { return false; };\n};\n// Turn off text selection blocking\nvjs.unblockTextSelection = function(){ document.onselectstart = function () { return true; }; };\n\n/**\n * Trim whitespace from the ends of a string.\n * @param  {String} string String to trim\n * @return {String}        Trimmed string\n * @private\n */\nvjs.trim = function(str){\n  return (str+'').replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Should round off a number to a decimal place\n * @param  {Number} num Number to round\n * @param  {Number} dec Number of decimal places to round to\n * @return {Number}     Rounded number\n * @private\n */\nvjs.round = function(num, dec) {\n  if (!dec) { dec = 0; }\n  return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);\n};\n\n/**\n * Should create a fake TimeRange object\n * Mimics an HTML5 time range instance, which has functions that\n * return the start and end times for a range\n * TimeRanges are returned by the buffered() method\n * @param  {Number} start Start time in seconds\n * @param  {Number} end   End time in seconds\n * @return {Object}       Fake TimeRange object\n * @private\n */\nvjs.createTimeRange = function(start, end){\n  return {\n    length: 1,\n    start: function() { return start; },\n    end: function() { return end; }\n  };\n};\n\n/**\n * Add to local storage (may removable)\n * @private\n */\nvjs.setLocalStorage = function(key, value){\n  try {\n    // IE was throwing errors referencing the var anywhere without this\n    var localStorage = window.localStorage || false;\n    if (!localStorage) { return; }\n    localStorage[key] = value;\n  } catch(e) {\n    if (e.code == 22 || e.code == 1014) { // Webkit == 22 / Firefox == 1014\n      vjs.log('LocalStorage Full (VideoJS)', e);\n    } else {\n      if (e.code == 18) {\n        vjs.log('LocalStorage not allowed (VideoJS)', e);\n      } else {\n        vjs.log('LocalStorage Error (VideoJS)', e);\n      }\n    }\n  }\n};\n\n/**\n * Get absolute version of relative URL. Used to tell flash correct URL.\n * http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue\n * @param  {String} url URL to make absolute\n * @return {String}     Absolute URL\n * @private\n */\nvjs.getAbsoluteURL = function(url){\n\n  // Check if absolute URL\n  if (!url.match(/^https?:\\/\\//)) {\n    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.\n    url = vjs.createEl('div', {\n      innerHTML: '<a href=\"'+url+'\">x</a>'\n    }).firstChild.href;\n  }\n\n  return url;\n};\n\n\n/**\n * Resolve and parse the elements of a URL\n * @param  {String} url The url to parse\n * @return {Object}     An object of url details\n */\nvjs.parseUrl = function(url) {\n  var div, a, addToBody, props, details;\n\n  props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host'];\n\n  // add the url to an anchor and let the browser parse the URL\n  a = vjs.createEl('a', { href: url });\n\n  // IE8 (and 9?) Fix\n  // ie8 doesn't parse the URL correctly until the anchor is actually\n  // added to the body, and an innerHTML is needed to trigger the parsing\n  addToBody = (a.host === '' && a.protocol !== 'file:');\n  if (addToBody) {\n    div = vjs.createEl('div');\n    div.innerHTML = '<a href=\"'+url+'\"></a>';\n    a = div.firstChild;\n    // prevent the div from affecting layout\n    div.setAttribute('style', 'display:none; position:absolute;');\n    document.body.appendChild(div);\n  }\n\n  // Copy the specific URL properties to a new object\n  // This is also needed for IE8 because the anchor loses its\n  // properties when it's removed from the dom\n  details = {};\n  for (var i = 0; i < props.length; i++) {\n    details[props[i]] = a[props[i]];\n  }\n\n  // IE9 adds the port to the host property unlike everyone else. If\n  // a port identifier is added for standard ports, strip it.\n  if (details.protocol === 'http:') {\n    details.host = details.host.replace(/:80$/, '');\n  }\n  if (details.protocol === 'https:') {\n    details.host = details.host.replace(/:443$/, '');\n  }\n\n  if (addToBody) {\n    document.body.removeChild(div);\n  }\n\n  return details;\n};\n\n/**\n * Log messages to the console and history based on the type of message\n *\n * @param  {String} type The type of message, or `null` for `log`\n * @param  {[type]} args The args to be passed to the log\n * @private\n */\nfunction _logType(type, args){\n  var argsArray, noop, console;\n\n  // convert args to an array to get array functions\n  argsArray = Array.prototype.slice.call(args);\n  // if there's no console then don't try to output messages\n  // they will still be stored in vjs.log.history\n  // Was setting these once outside of this function, but containing them\n  // in the function makes it easier to test cases where console doesn't exist\n  noop = function(){};\n  console = window['console'] || {\n    'log': noop,\n    'warn': noop,\n    'error': noop\n  };\n\n  if (type) {\n    // add the type to the front of the message\n    argsArray.unshift(type.toUpperCase()+':');\n  } else {\n    // default to log with no prefix\n    type = 'log';\n  }\n\n  // add to history\n  vjs.log.history.push(argsArray);\n\n  // add console prefix after adding to history\n  argsArray.unshift('VIDEOJS:');\n\n  // call appropriate log function\n  if (console[type].apply) {\n    console[type].apply(console, argsArray);\n  } else {\n    // ie8 doesn't allow error.apply, but it will just join() the array anyway\n    console[type](argsArray.join(' '));\n  }\n}\n\n/**\n * Log plain debug messages\n */\nvjs.log = function(){\n  _logType(null, arguments);\n};\n\n/**\n * Keep a history of log messages\n * @type {Array}\n */\nvjs.log.history = [];\n\n/**\n * Log error messages\n */\nvjs.log.error = function(){\n  _logType('error', arguments);\n};\n\n/**\n * Log warning messages\n */\nvjs.log.warn = function(){\n  _logType('warn', arguments);\n};\n\n// Offset Left\n// getBoundingClientRect technique from John Resig http://ejohn.org/blog/getboundingclientrect-is-awesome/\nvjs.findPosition = function(el) {\n  var box, docEl, body, clientLeft, scrollLeft, left, clientTop, scrollTop, top;\n\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n\n  if (!box) {\n    return {\n      left: 0,\n      top: 0\n    };\n  }\n\n  docEl = document.documentElement;\n  body = document.body;\n\n  clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  scrollLeft = window.pageXOffset || body.scrollLeft;\n  left = box.left + scrollLeft - clientLeft;\n\n  clientTop = docEl.clientTop || body.clientTop || 0;\n  scrollTop = window.pageYOffset || body.scrollTop;\n  top = box.top + scrollTop - clientTop;\n\n  // Android sometimes returns slightly off decimal values, so need to round\n  return {\n    left: vjs.round(left),\n    top: vjs.round(top)\n  };\n};\n\n/**\n * Array functions container\n * @type {Object}\n * @private\n */\nvjs.arr = {};\n\n/*\n * Loops through an array and runs a function for each item inside it.\n * @param  {Array}    array       The array\n * @param  {Function} callback    The function to be run for each item\n * @param  {*}        thisArg     The `this` binding of callback\n * @returns {Array}               The array\n * @private\n */\nvjs.arr.forEach = function(array, callback, thisArg) {\n  if (vjs.obj.isArray(array) && callback instanceof Function) {\n    for (var i = 0, len = array.length; i < len; ++i) {\n      callback.call(thisArg || vjs, array[i], i, array);\n    }\n  }\n\n  return array;\n};\n/**\n * Simple http request for retrieving external files (e.g. text tracks)\n *\n * ##### Example\n *\n *     // using url string\n *     videojs.xhr('http://example.com/myfile.vtt', function(error, response, responseBody){});\n *\n *     // or options block\n *     videojs.xhr({\n *       uri: 'http://example.com/myfile.vtt',\n *       method: 'GET',\n *       responseType: 'text'\n *     }, function(error, response, responseBody){\n *       if (error) {\n *         // log the error\n *       } else {\n *         // successful, do something with the response\n *       }\n *     });\n *\n *\n * API is modeled after the Raynos/xhr, which we hope to use after\n * getting browserify implemented.\n * https://github.com/Raynos/xhr/blob/master/index.js\n *\n * @param  {Object|String}  options   Options block or URL string\n * @param  {Function}       callback  The callback function\n * @returns {Object}                  The request\n */\nvjs.xhr = function(options, callback){\n  var XHR, request, urlInfo, winLoc, fileUrl, crossOrigin, abortTimeout, successHandler, errorHandler;\n\n  // If options is a string it's the url\n  if (typeof options === 'string') {\n    options = {\n      uri: options\n    };\n  }\n\n  // Merge with default options\n  videojs.util.mergeOptions({\n    method: 'GET',\n    timeout: 45 * 1000\n  }, options);\n\n  callback = callback || function(){};\n\n  successHandler = function(){\n    window.clearTimeout(abortTimeout);\n    callback(null, request, request.response || request.responseText);\n  };\n\n  errorHandler = function(err){\n    window.clearTimeout(abortTimeout);\n\n    if (!err || typeof err === 'string') {\n      err = new Error(err);\n    }\n\n    callback(err, request);\n  };\n\n  XHR = window.XMLHttpRequest;\n\n  if (typeof XHR === 'undefined') {\n    // Shim XMLHttpRequest for older IEs\n    XHR = function () {\n      try { return new window.ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch (e) {}\n      try { return new window.ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch (f) {}\n      try { return new window.ActiveXObject('Msxml2.XMLHTTP'); } catch (g) {}\n      throw new Error('This browser does not support XMLHttpRequest.');\n    };\n  }\n\n  request = new XHR();\n  // Store a reference to the url on the request instance\n  request.uri = options.uri;\n\n  urlInfo = vjs.parseUrl(options.uri);\n  winLoc = window.location;\n  // Check if url is for another domain/origin\n  // IE8 doesn't know location.origin, so we won't rely on it here\n  crossOrigin = (urlInfo.protocol + urlInfo.host) !== (winLoc.protocol + winLoc.host);\n\n  // XDomainRequest -- Use for IE if XMLHTTPRequest2 isn't available\n  // 'withCredentials' is only available in XMLHTTPRequest2\n  // Also XDomainRequest has a lot of gotchas, so only use if cross domain\n  if (crossOrigin && window.XDomainRequest && !('withCredentials' in request)) {\n    request = new window.XDomainRequest();\n    request.onload = successHandler;\n    request.onerror = errorHandler;\n    // These blank handlers need to be set to fix ie9\n    // http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/\n    request.onprogress = function(){};\n    request.ontimeout = function(){};\n\n  // XMLHTTPRequest\n  } else {\n    fileUrl = (urlInfo.protocol == 'file:' || winLoc.protocol == 'file:');\n\n    request.onreadystatechange = function() {\n      if (request.readyState === 4) {\n        if (request.timedout) {\n          return errorHandler('timeout');\n        }\n\n        if (request.status === 200 || fileUrl && request.status === 0) {\n          successHandler();\n        } else {\n          errorHandler();\n        }\n      }\n    };\n\n    if (options.timeout) {\n      abortTimeout = window.setTimeout(function() {\n        if (request.readyState !== 4) {\n          request.timedout = true;\n          request.abort();\n        }\n      }, options.timeout);\n    }\n  }\n\n  // open the connection\n  try {\n    // Third arg is async, or ignored by XDomainRequest\n    request.open(options.method || 'GET', options.uri, true);\n  } catch(err) {\n    return errorHandler(err);\n  }\n\n  // withCredentials only supported by XMLHttpRequest2\n  if(options.withCredentials) {\n    request.withCredentials = true;\n  }\n\n  if (options.responseType) {\n    request.responseType = options.responseType;\n  }\n\n  // send the request\n  try {\n    request.send();\n  } catch(err) {\n    return errorHandler(err);\n  }\n\n  return request;\n};\n/**\n * Utility functions namespace\n * @namespace\n * @type {Object}\n */\nvjs.util = {};\n\n/**\n * Merge two options objects, recursively merging any plain object properties as\n * well.  Previously `deepMerge`\n *\n * @param  {Object} obj1 Object to override values in\n * @param  {Object} obj2 Overriding object\n * @return {Object}      New object -- obj1 and obj2 will be untouched\n */\nvjs.util.mergeOptions = function(obj1, obj2){\n  var key, val1, val2;\n\n  // make a copy of obj1 so we're not overwriting original values.\n  // like prototype.options_ and all sub options objects\n  obj1 = vjs.obj.copy(obj1);\n\n  for (key in obj2){\n    if (obj2.hasOwnProperty(key)) {\n      val1 = obj1[key];\n      val2 = obj2[key];\n\n      // Check if both properties are pure objects and do a deep merge if so\n      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {\n        obj1[key] = vjs.util.mergeOptions(val1, val2);\n      } else {\n        obj1[key] = obj2[key];\n      }\n    }\n  }\n  return obj1;\n};vjs.EventEmitter = function() {\n};\n\nvjs.EventEmitter.prototype.allowedEvents_ = {\n};\n\nvjs.EventEmitter.prototype.on = function(type, fn) {\n  // Remove the addEventListener alias before calling vjs.on\n  // so we don't get into an infinite type loop\n  var ael = this.addEventListener;\n  this.addEventListener = Function.prototype;\n  vjs.on(this, type, fn);\n  this.addEventListener = ael;\n};\nvjs.EventEmitter.prototype.addEventListener = vjs.EventEmitter.prototype.on;\n\nvjs.EventEmitter.prototype.off = function(type, fn) {\n  vjs.off(this, type, fn);\n};\nvjs.EventEmitter.prototype.removeEventListener = vjs.EventEmitter.prototype.off;\n\nvjs.EventEmitter.prototype.one = function(type, fn) {\n  vjs.one(this, type, fn);\n};\n\nvjs.EventEmitter.prototype.trigger = function(event) {\n  var type = event.type || event;\n\n  if (typeof event === 'string') {\n    event = {\n      type: type\n    };\n  }\n  event = vjs.fixEvent(event);\n\n  if (this.allowedEvents_[type] && this['on' + type]) {\n    this['on' + type](event);\n  }\n\n  vjs.trigger(this, event);\n};\n// The standard DOM EventTarget.dispatchEvent() is aliased to trigger()\nvjs.EventEmitter.prototype.dispatchEvent = vjs.EventEmitter.prototype.trigger;\n/**\n * @fileoverview Player Component - Base class for all UI objects\n *\n */\n\n/**\n * Base UI Component class\n *\n * Components are embeddable UI objects that are represented by both a\n * javascript object and an element in the DOM. They can be children of other\n * components, and can have many children themselves.\n *\n *     // adding a button to the player\n *     var button = player.addChild('button');\n *     button.el(); // -> button element\n *\n *     <div class=\"video-js\">\n *       <div class=\"vjs-button\">Button</div>\n *     </div>\n *\n * Components are also event emitters.\n *\n *     button.on('click', function(){\n *       console.log('Button Clicked!');\n *     });\n *\n *     button.trigger('customevent');\n *\n * @param {Object} player  Main Player\n * @param {Object=} options\n * @class\n * @constructor\n * @extends vjs.CoreObject\n */\nvjs.Component = vjs.CoreObject.extend({\n  /**\n   * the constructor function for the class\n   *\n   * @constructor\n   */\n  init: function(player, options, ready){\n    this.player_ = player;\n\n    // Make a copy of prototype.options_ to protect against overriding global defaults\n    this.options_ = vjs.obj.copy(this.options_);\n\n    // Updated options with supplied options\n    options = this.options(options);\n\n    // Get ID from options or options element if one is supplied\n    this.id_ = options['id'] || (options['el'] && options['el']['id']);\n\n    // If there was no ID from the options, generate one\n    if (!this.id_) {\n      // Don't require the player ID function in the case of mock players\n      this.id_ = ((player.id && player.id()) || 'no_player') + '_component_' + vjs.guid++;\n    }\n\n    this.name_ = options['name'] || null;\n\n    // Create element if one wasn't provided in options\n    this.el_ = options['el'] || this.createEl();\n\n    this.children_ = [];\n    this.childIndex_ = {};\n    this.childNameIndex_ = {};\n\n    // Add any child components in options\n    this.initChildren();\n\n    this.ready(ready);\n    // Don't want to trigger ready here or it will before init is actually\n    // finished for all children that run this constructor\n\n    if (options.reportTouchActivity !== false) {\n      this.enableTouchActivity();\n    }\n  }\n});\n\n/**\n * Dispose of the component and all child components\n */\nvjs.Component.prototype.dispose = function(){\n  this.trigger({ type: 'dispose', 'bubbles': false });\n\n  // Dispose all children.\n  if (this.children_) {\n    for (var i = this.children_.length - 1; i >= 0; i--) {\n      if (this.children_[i].dispose) {\n        this.children_[i].dispose();\n      }\n    }\n  }\n\n  // Delete child references\n  this.children_ = null;\n  this.childIndex_ = null;\n  this.childNameIndex_ = null;\n\n  // Remove all event listeners.\n  this.off();\n\n  // Remove element from DOM\n  if (this.el_.parentNode) {\n    this.el_.parentNode.removeChild(this.el_);\n  }\n\n  vjs.removeData(this.el_);\n  this.el_ = null;\n};\n\n/**\n * Reference to main player instance\n *\n * @type {vjs.Player}\n * @private\n */\nvjs.Component.prototype.player_ = true;\n\n/**\n * Return the component's player\n *\n * @return {vjs.Player}\n */\nvjs.Component.prototype.player = function(){\n  return this.player_;\n};\n\n/**\n * The component's options object\n *\n * @type {Object}\n * @private\n */\nvjs.Component.prototype.options_;\n\n/**\n * Deep merge of options objects\n *\n * Whenever a property is an object on both options objects\n * the two properties will be merged using vjs.obj.deepMerge.\n *\n * This is used for merging options for child components. We\n * want it to be easy to override individual options on a child\n * component without having to rewrite all the other default options.\n *\n *     Parent.prototype.options_ = {\n *       children: {\n *         'childOne': { 'foo': 'bar', 'asdf': 'fdsa' },\n *         'childTwo': {},\n *         'childThree': {}\n *       }\n *     }\n *     newOptions = {\n *       children: {\n *         'childOne': { 'foo': 'baz', 'abc': '123' }\n *         'childTwo': null,\n *         'childFour': {}\n *       }\n *     }\n *\n *     this.options(newOptions);\n *\n * RESULT\n *\n *     {\n *       children: {\n *         'childOne': { 'foo': 'baz', 'asdf': 'fdsa', 'abc': '123' },\n *         'childTwo': null, // Disabled. Won't be initialized.\n *         'childThree': {},\n *         'childFour': {}\n *       }\n *     }\n *\n * @param  {Object} obj Object of new option values\n * @return {Object}     A NEW object of this.options_ and obj merged\n */\nvjs.Component.prototype.options = function(obj){\n  if (obj === undefined) return this.options_;\n\n  return this.options_ = vjs.util.mergeOptions(this.options_, obj);\n};\n\n/**\n * The DOM element for the component\n *\n * @type {Element}\n * @private\n */\nvjs.Component.prototype.el_;\n\n/**\n * Create the component's DOM element\n *\n * @param  {String=} tagName  Element's node type. e.g. 'div'\n * @param  {Object=} attributes An object of element attributes that should be set on the element\n * @return {Element}\n */\nvjs.Component.prototype.createEl = function(tagName, attributes){\n  return vjs.createEl(tagName, attributes);\n};\n\nvjs.Component.prototype.localize = function(string){\n  var lang = this.player_.language(),\n      languages = this.player_.languages();\n  if (languages && languages[lang] && languages[lang][string]) {\n    return languages[lang][string];\n  }\n  return string;\n};\n\n/**\n * Get the component's DOM element\n *\n *     var domEl = myComponent.el();\n *\n * @return {Element}\n */\nvjs.Component.prototype.el = function(){\n  return this.el_;\n};\n\n/**\n * An optional element where, if defined, children will be inserted instead of\n * directly in `el_`\n *\n * @type {Element}\n * @private\n */\nvjs.Component.prototype.contentEl_;\n\n/**\n * Return the component's DOM element for embedding content.\n * Will either be el_ or a new element defined in createEl.\n *\n * @return {Element}\n */\nvjs.Component.prototype.contentEl = function(){\n  return this.contentEl_ || this.el_;\n};\n\n/**\n * The ID for the component\n *\n * @type {String}\n * @private\n */\nvjs.Component.prototype.id_;\n\n/**\n * Get the component's ID\n *\n *     var id = myComponent.id();\n *\n * @return {String}\n */\nvjs.Component.prototype.id = function(){\n  return this.id_;\n};\n\n/**\n * The name for the component. Often used to reference the component.\n *\n * @type {String}\n * @private\n */\nvjs.Component.prototype.name_;\n\n/**\n * Get the component's name. The name is often used to reference the component.\n *\n *     var name = myComponent.name();\n *\n * @return {String}\n */\nvjs.Component.prototype.name = function(){\n  return this.name_;\n};\n\n/**\n * Array of child components\n *\n * @type {Array}\n * @private\n */\nvjs.Component.prototype.children_;\n\n/**\n * Get an array of all child components\n *\n *     var kids = myComponent.children();\n *\n * @return {Array} The children\n */\nvjs.Component.prototype.children = function(){\n  return this.children_;\n};\n\n/**\n * Object of child components by ID\n *\n * @type {Object}\n * @private\n */\nvjs.Component.prototype.childIndex_;\n\n/**\n * Returns a child component with the provided ID\n *\n * @return {vjs.Component}\n */\nvjs.Component.prototype.getChildById = function(id){\n  return this.childIndex_[id];\n};\n\n/**\n * Object of child components by name\n *\n * @type {Object}\n * @private\n */\nvjs.Component.prototype.childNameIndex_;\n\n/**\n * Returns a child component with the provided name\n *\n * @return {vjs.Component}\n */\nvjs.Component.prototype.getChild = function(name){\n  return this.childNameIndex_[name];\n};\n\n/**\n * Adds a child component inside this component\n *\n *     myComponent.el();\n *     // -> <div class='my-component'></div>\n *     myComonent.children();\n *     // [empty array]\n *\n *     var myButton = myComponent.addChild('MyButton');\n *     // -> <div class='my-component'><div class=\"my-button\">myButton<div></div>\n *     // -> myButton === myComonent.children()[0];\n *\n * Pass in options for child constructors and options for children of the child\n *\n *     var myButton = myComponent.addChild('MyButton', {\n *       text: 'Press Me',\n *       children: {\n *         buttonChildExample: {\n *           buttonChildOption: true\n *         }\n *       }\n *     });\n *\n * @param {String|vjs.Component} child The class name or instance of a child to add\n * @param {Object=} options Options, including options to be passed to children of the child.\n * @return {vjs.Component} The child component (created by this process if a string was used)\n * @suppress {accessControls|checkRegExp|checkTypes|checkVars|const|constantProperty|deprecated|duplicate|es5Strict|fileoverviewTags|globalThis|invalidCasts|missingProperties|nonStandardJsDocs|strictModuleDepCheck|undefinedNames|undefinedVars|unknownDefines|uselessCode|visibility}\n */\nvjs.Component.prototype.addChild = function(child, options){\n  var component, componentClass, componentName;\n\n  // If child is a string, create new component with options\n  if (typeof child === 'string') {\n    componentName = child;\n\n    // Make sure options is at least an empty object to protect against errors\n    options = options || {};\n\n    // If no componentClass in options, assume componentClass is the name lowercased\n    // (e.g. playButton)\n    componentClass = options['componentClass'] || vjs.capitalize(componentName);\n\n    // Set name through options\n    options['name'] = componentName;\n\n    // Create a new object & element for this controls set\n    // If there's no .player_, this is a player\n    // Closure Compiler throws an 'incomplete alias' warning if we use the vjs variable directly.\n    // Every class should be exported, so this should never be a problem here.\n    component = new window['videojs'][componentClass](this.player_ || this, options);\n\n  // child is a component instance\n  } else {\n    component = child;\n  }\n\n  this.children_.push(component);\n\n  if (typeof component.id === 'function') {\n    this.childIndex_[component.id()] = component;\n  }\n\n  // If a name wasn't used to create the component, check if we can use the\n  // name function of the component\n  componentName = componentName || (component.name && component.name());\n\n  if (componentName) {\n    this.childNameIndex_[componentName] = component;\n  }\n\n  // Add the UI object's element to the container div (box)\n  // Having an element is not required\n  if (typeof component['el'] === 'function' && component['el']()) {\n    this.contentEl().appendChild(component['el']());\n  }\n\n  // Return so it can stored on parent object if desired.\n  return component;\n};\n\n/**\n * Remove a child component from this component's list of children, and the\n * child component's element from this component's element\n *\n * @param  {vjs.Component} component Component to remove\n */\nvjs.Component.prototype.removeChild = function(component){\n  if (typeof component === 'string') {\n    component = this.getChild(component);\n  }\n\n  if (!component || !this.children_) return;\n\n  var childFound = false;\n  for (var i = this.children_.length - 1; i >= 0; i--) {\n    if (this.children_[i] === component) {\n      childFound = true;\n      this.children_.splice(i,1);\n      break;\n    }\n  }\n\n  if (!childFound) return;\n\n  this.childIndex_[component.id()] = null;\n  this.childNameIndex_[component.name()] = null;\n\n  var compEl = component.el();\n  if (compEl && compEl.parentNode === this.contentEl()) {\n    this.contentEl().removeChild(component.el());\n  }\n};\n\n/**\n * Add and initialize default child components from options\n *\n *     // when an instance of MyComponent is created, all children in options\n *     // will be added to the instance by their name strings and options\n *     MyComponent.prototype.options_.children = {\n *       myChildComponent: {\n *         myChildOption: true\n *       }\n *     }\n *\n *     // Or when creating the component\n *     var myComp = new MyComponent(player, {\n *       children: {\n *         myChildComponent: {\n *           myChildOption: true\n *         }\n *       }\n *     });\n *\n * The children option can also be an Array of child names or\n * child options objects (that also include a 'name' key).\n *\n *     var myComp = new MyComponent(player, {\n *       children: [\n *         'button',\n *         {\n *           name: 'button',\n *           someOtherOption: true\n *         }\n *       ]\n *     });\n *\n */\nvjs.Component.prototype.initChildren = function(){\n  var parent, parentOptions, children, child, name, opts, handleAdd;\n\n  parent = this;\n  parentOptions = parent.options();\n  children = parentOptions['children'];\n\n  if (children) {\n    handleAdd = function(name, opts){\n      // Allow options for children to be set at the parent options\n      // e.g. videojs(id, { controlBar: false });\n      // instead of videojs(id, { children: { controlBar: false });\n      if (parentOptions[name] !== undefined) {\n        opts = parentOptions[name];\n      }\n\n      // Allow for disabling default components\n      // e.g. vjs.options['children']['posterImage'] = false\n      if (opts === false) return;\n\n      // Create and add the child component.\n      // Add a direct reference to the child by name on the parent instance.\n      // If two of the same component are used, different names should be supplied\n      // for each\n      parent[name] = parent.addChild(name, opts);\n    };\n\n    // Allow for an array of children details to passed in the options\n    if (vjs.obj.isArray(children)) {\n      for (var i = 0; i < children.length; i++) {\n        child = children[i];\n\n        if (typeof child == 'string') {\n          // ['myComponent']\n          name = child;\n          opts = {};\n        } else {\n          // [{ name: 'myComponent', otherOption: true }]\n          name = child.name;\n          opts = child;\n        }\n\n        handleAdd(name, opts);\n      }\n    } else {\n      vjs.obj.each(children, handleAdd);\n    }\n  }\n};\n\n/**\n * Allows sub components to stack CSS class names\n *\n * @return {String} The constructed class name\n */\nvjs.Component.prototype.buildCSSClass = function(){\n    // Child classes can include a function that does:\n    // return 'CLASS NAME' + this._super();\n    return '';\n};\n\n/* Events\n============================================================================= */\n\n/**\n * Add an event listener to this component's element\n *\n *     var myFunc = function(){\n *       var myComponent = this;\n *       // Do something when the event is fired\n *     };\n *\n *     myComponent.on('eventType', myFunc);\n *\n * The context of myFunc will be myComponent unless previously bound.\n *\n * Alternatively, you can add a listener to another element or component.\n *\n *     myComponent.on(otherElement, 'eventName', myFunc);\n *     myComponent.on(otherComponent, 'eventName', myFunc);\n *\n * The benefit of using this over `vjs.on(otherElement, 'eventName', myFunc)`\n * and `otherComponent.on('eventName', myFunc)` is that this way the listeners\n * will be automatically cleaned up when either component is disposed.\n * It will also bind myComponent as the context of myFunc.\n *\n * **NOTE**: When using this on elements in the page other than window\n * and document (both permanent), if you remove the element from the DOM\n * you need to call `vjs.trigger(el, 'dispose')` on it to clean up\n * references to it and allow the browser to garbage collect it.\n *\n * @param  {String|vjs.Component} first   The event type or other component\n * @param  {Function|String}      second  The event handler or event type\n * @param  {Function}             third   The event handler\n * @return {vjs.Component}        self\n */\nvjs.Component.prototype.on = function(first, second, third){\n  var target, type, fn, removeOnDispose, cleanRemover, thisComponent;\n\n  if (typeof first === 'string' || vjs.obj.isArray(first)) {\n    vjs.on(this.el_, first, vjs.bind(this, second));\n\n  // Targeting another component or element\n  } else {\n    target = first;\n    type = second;\n    fn = vjs.bind(this, third);\n    thisComponent = this;\n\n    // When this component is disposed, remove the listener from the other component\n    removeOnDispose = function(){\n      thisComponent.off(target, type, fn);\n    };\n    // Use the same function ID so we can remove it later it using the ID\n    // of the original listener\n    removeOnDispose.guid = fn.guid;\n    this.on('dispose', removeOnDispose);\n\n    // If the other component is disposed first we need to clean the reference\n    // to the other component in this component's removeOnDispose listener\n    // Otherwise we create a memory leak.\n    cleanRemover = function(){\n      thisComponent.off('dispose', removeOnDispose);\n    };\n    // Add the same function ID so we can easily remove it later\n    cleanRemover.guid = fn.guid;\n\n    // Check if this is a DOM node\n    if (first.nodeName) {\n      // Add the listener to the other element\n      vjs.on(target, type, fn);\n      vjs.on(target, 'dispose', cleanRemover);\n\n    // Should be a component\n    // Not using `instanceof vjs.Component` because it makes mock players difficult\n    } else if (typeof first.on === 'function') {\n      // Add the listener to the other component\n      target.on(type, fn);\n      target.on('dispose', cleanRemover);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Remove an event listener from this component's element\n *\n *     myComponent.off('eventType', myFunc);\n *\n * If myFunc is excluded, ALL listeners for the event type will be removed.\n * If eventType is excluded, ALL listeners will be removed from the component.\n *\n * Alternatively you can use `off` to remove listeners that were added to other\n * elements or components using `myComponent.on(otherComponent...`.\n * In this case both the event type and listener function are REQUIRED.\n *\n *     myComponent.off(otherElement, 'eventType', myFunc);\n *     myComponent.off(otherComponent, 'eventType', myFunc);\n *\n * @param  {String=|vjs.Component}  first  The event type or other component\n * @param  {Function=|String}       second The listener function or event type\n * @param  {Function=}              third  The listener for other component\n * @return {vjs.Component}\n */\nvjs.Component.prototype.off = function(first, second, third){\n  var target, otherComponent, type, fn, otherEl;\n\n  if (!first || typeof first === 'string' || vjs.obj.isArray(first)) {\n    vjs.off(this.el_, first, second);\n  } else {\n    target = first;\n    type = second;\n    // Ensure there's at least a guid, even if the function hasn't been used\n    fn = vjs.bind(this, third);\n\n    // Remove the dispose listener on this component,\n    // which was given the same guid as the event listener\n    this.off('dispose', fn);\n\n    if (first.nodeName) {\n      // Remove the listener\n      vjs.off(target, type, fn);\n      // Remove the listener for cleaning the dispose listener\n      vjs.off(target, 'dispose', fn);\n    } else {\n      target.off(type, fn);\n      target.off('dispose', fn);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Add an event listener to be triggered only once and then removed\n *\n *     myComponent.one('eventName', myFunc);\n *\n * Alternatively you can add a listener to another element or component\n * that will be triggered only once.\n *\n *     myComponent.one(otherElement, 'eventName', myFunc);\n *     myComponent.one(otherComponent, 'eventName', myFunc);\n *\n * @param  {String|vjs.Component}  first   The event type or other component\n * @param  {Function|String}       second  The listener function or event type\n * @param  {Function=}             third   The listener function for other component\n * @return {vjs.Component}\n */\nvjs.Component.prototype.one = function(first, second, third) {\n  var target, type, fn, thisComponent, newFunc;\n\n  if (typeof first === 'string' || vjs.obj.isArray(first)) {\n    vjs.one(this.el_, first, vjs.bind(this, second));\n  } else {\n    target = first;\n    type = second;\n    fn = vjs.bind(this, third);\n    thisComponent = this;\n\n    newFunc = function(){\n      thisComponent.off(target, type, newFunc);\n      fn.apply(this, arguments);\n    };\n    // Keep the same function ID so we can remove it later\n    newFunc.guid = fn.guid;\n\n    this.on(target, type, newFunc);\n  }\n\n  return this;\n};\n\n/**\n * Trigger an event on an element\n *\n *     myComponent.trigger('eventName');\n *     myComponent.trigger({'type':'eventName'});\n *\n * @param  {Event|Object|String} event  A string (the type) or an event object with a type attribute\n * @return {vjs.Component}       self\n */\nvjs.Component.prototype.trigger = function(event){\n  vjs.trigger(this.el_, event);\n  return this;\n};\n\n/* Ready\n================================================================================ */\n/**\n * Is the component loaded\n * This can mean different things depending on the component.\n *\n * @private\n * @type {Boolean}\n */\nvjs.Component.prototype.isReady_;\n\n/**\n * Trigger ready as soon as initialization is finished\n *\n * Allows for delaying ready. Override on a sub class prototype.\n * If you set this.isReadyOnInitFinish_ it will affect all components.\n * Specially used when waiting for the Flash player to asynchronously load.\n *\n * @type {Boolean}\n * @private\n */\nvjs.Component.prototype.isReadyOnInitFinish_ = true;\n\n/**\n * List of ready listeners\n *\n * @type {Array}\n * @private\n */\nvjs.Component.prototype.readyQueue_;\n\n/**\n * Bind a listener to the component's ready state\n *\n * Different from event listeners in that if the ready event has already happened\n * it will trigger the function immediately.\n *\n * @param  {Function} fn Ready listener\n * @return {vjs.Component}\n */\nvjs.Component.prototype.ready = function(fn){\n  if (fn) {\n    if (this.isReady_) {\n      fn.call(this);\n    } else {\n      if (this.readyQueue_ === undefined) {\n        this.readyQueue_ = [];\n      }\n      this.readyQueue_.push(fn);\n    }\n  }\n  return this;\n};\n\n/**\n * Trigger the ready listeners\n *\n * @return {vjs.Component}\n */\nvjs.Component.prototype.triggerReady = function(){\n  this.isReady_ = true;\n\n  var readyQueue = this.readyQueue_;\n\n  if (readyQueue && readyQueue.length > 0) {\n\n    for (var i = 0, j = readyQueue.length; i < j; i++) {\n      readyQueue[i].call(this);\n    }\n\n    // Reset Ready Queue\n    this.readyQueue_ = [];\n\n    // Allow for using event listeners also, in case you want to do something everytime a source is ready.\n    this.trigger('ready');\n  }\n};\n\n/* Display\n============================================================================= */\n\n/**\n * Check if a component's element has a CSS class name\n *\n * @param {String} classToCheck Classname to check\n * @return {vjs.Component}\n */\nvjs.Component.prototype.hasClass = function(classToCheck){\n  return vjs.hasClass(this.el_, classToCheck);\n};\n\n/**\n * Add a CSS class name to the component's element\n *\n * @param {String} classToAdd Classname to add\n * @return {vjs.Component}\n */\nvjs.Component.prototype.addClass = function(classToAdd){\n  vjs.addClass(this.el_, classToAdd);\n  return this;\n};\n\n/**\n * Remove a CSS class name from the component's element\n *\n * @param {String} classToRemove Classname to remove\n * @return {vjs.Component}\n */\nvjs.Component.prototype.removeClass = function(classToRemove){\n  vjs.removeClass(this.el_, classToRemove);\n  return this;\n};\n\n/**\n * Show the component element if hidden\n *\n * @return {vjs.Component}\n */\nvjs.Component.prototype.show = function(){\n  this.removeClass('vjs-hidden');\n  return this;\n};\n\n/**\n * Hide the component element if currently showing\n *\n * @return {vjs.Component}\n */\nvjs.Component.prototype.hide = function(){\n  this.addClass('vjs-hidden');\n  return this;\n};\n\n/**\n * Lock an item in its visible state\n * To be used with fadeIn/fadeOut.\n *\n * @return {vjs.Component}\n * @private\n */\nvjs.Component.prototype.lockShowing = function(){\n  this.addClass('vjs-lock-showing');\n  return this;\n};\n\n/**\n * Unlock an item to be hidden\n * To be used with fadeIn/fadeOut.\n *\n * @return {vjs.Component}\n * @private\n */\nvjs.Component.prototype.unlockShowing = function(){\n  this.removeClass('vjs-lock-showing');\n  return this;\n};\n\n/**\n * Disable component by making it unshowable\n *\n * Currently private because we're moving towards more css-based states.\n * @private\n */\nvjs.Component.prototype.disable = function(){\n  this.hide();\n  this.show = function(){};\n};\n\n/**\n * Set or get the width of the component (CSS values)\n *\n * Setting the video tag dimension values only works with values in pixels.\n * Percent values will not work.\n * Some percents can be used, but width()/height() will return the number + %,\n * not the actual computed width/height.\n *\n * @param  {Number|String=} num   Optional width number\n * @param  {Boolean} skipListeners Skip the 'resize' event trigger\n * @return {vjs.Component} This component, when setting the width\n * @return {Number|String} The width, when getting\n */\nvjs.Component.prototype.width = function(num, skipListeners){\n  return this.dimension('width', num, skipListeners);\n};\n\n/**\n * Get or set the height of the component (CSS values)\n *\n * Setting the video tag dimension values only works with values in pixels.\n * Percent values will not work.\n * Some percents can be used, but width()/height() will return the number + %,\n * not the actual computed width/height.\n *\n * @param  {Number|String=} num     New component height\n * @param  {Boolean=} skipListeners Skip the resize event trigger\n * @return {vjs.Component} This component, when setting the height\n * @return {Number|String} The height, when getting\n */\nvjs.Component.prototype.height = function(num, skipListeners){\n  return this.dimension('height', num, skipListeners);\n};\n\n/**\n * Set both width and height at the same time\n *\n * @param  {Number|String} width\n * @param  {Number|String} height\n * @return {vjs.Component} The component\n */\nvjs.Component.prototype.dimensions = function(width, height){\n  // Skip resize listeners on width for optimization\n  return this.width(width, true).height(height);\n};\n\n/**\n * Get or set width or height\n *\n * This is the shared code for the width() and height() methods.\n * All for an integer, integer + 'px' or integer + '%';\n *\n * Known issue: Hidden elements officially have a width of 0. We're defaulting\n * to the style.width value and falling back to computedStyle which has the\n * hidden element issue. Info, but probably not an efficient fix:\n * http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/\n *\n * @param  {String} widthOrHeight  'width' or 'height'\n * @param  {Number|String=} num     New dimension\n * @param  {Boolean=} skipListeners Skip resize event trigger\n * @return {vjs.Component} The component if a dimension was set\n * @return {Number|String} The dimension if nothing was set\n * @private\n */\nvjs.Component.prototype.dimension = function(widthOrHeight, num, skipListeners){\n  if (num !== undefined) {\n    if (num === null || vjs.isNaN(num)) {\n      num = 0;\n    }\n\n    // Check if using css width/height (% or px) and adjust\n    if ((''+num).indexOf('%') !== -1 || (''+num).indexOf('px') !== -1) {\n      this.el_.style[widthOrHeight] = num;\n    } else if (num === 'auto') {\n      this.el_.style[widthOrHeight] = '';\n    } else {\n      this.el_.style[widthOrHeight] = num+'px';\n    }\n\n    // skipListeners allows us to avoid triggering the resize event when setting both width and height\n    if (!skipListeners) { this.trigger('resize'); }\n\n    // Return component\n    return this;\n  }\n\n  // Not setting a value, so getting it\n  // Make sure element exists\n  if (!this.el_) return 0;\n\n  // Get dimension value from style\n  var val = this.el_.style[widthOrHeight];\n  var pxIndex = val.indexOf('px');\n  if (pxIndex !== -1) {\n    // Return the pixel value with no 'px'\n    return parseInt(val.slice(0,pxIndex), 10);\n\n  // No px so using % or no style was set, so falling back to offsetWidth/height\n  // If component has display:none, offset will return 0\n  // TODO: handle display:none and no dimension style using px\n  } else {\n\n    return parseInt(this.el_['offset'+vjs.capitalize(widthOrHeight)], 10);\n\n    // ComputedStyle version.\n    // Only difference is if the element is hidden it will return\n    // the percent value (e.g. '100%'')\n    // instead of zero like offsetWidth returns.\n    // var val = vjs.getComputedStyleValue(this.el_, widthOrHeight);\n    // var pxIndex = val.indexOf('px');\n\n    // if (pxIndex !== -1) {\n    //   return val.slice(0, pxIndex);\n    // } else {\n    //   return val;\n    // }\n  }\n};\n\n/**\n * Fired when the width and/or height of the component changes\n * @event resize\n */\nvjs.Component.prototype.onResize;\n\n/**\n * Emit 'tap' events when touch events are supported\n *\n * This is used to support toggling the controls through a tap on the video.\n *\n * We're requiring them to be enabled because otherwise every component would\n * have this extra overhead unnecessarily, on mobile devices where extra\n * overhead is especially bad.\n * @private\n */\nvjs.Component.prototype.emitTapEvents = function(){\n  var touchStart, firstTouch, touchTime, couldBeTap, noTap,\n      xdiff, ydiff, touchDistance, tapMovementThreshold, touchTimeThreshold;\n\n  // Track the start time so we can determine how long the touch lasted\n  touchStart = 0;\n  firstTouch = null;\n\n  // Maximum movement allowed during a touch event to still be considered a tap\n  // Other popular libs use anywhere from 2 (hammer.js) to 15, so 10 seems like a nice, round number.\n  tapMovementThreshold = 10;\n\n  // The maximum length a touch can be while still being considered a tap\n  touchTimeThreshold = 200;\n\n  this.on('touchstart', function(event) {\n    // If more than one finger, don't consider treating this as a click\n    if (event.touches.length === 1) {\n      firstTouch = vjs.obj.copy(event.touches[0]);\n      // Record start time so we can detect a tap vs. \"touch and hold\"\n      touchStart = new Date().getTime();\n      // Reset couldBeTap tracking\n      couldBeTap = true;\n    }\n  });\n\n  this.on('touchmove', function(event) {\n    // If more than one finger, don't consider treating this as a click\n    if (event.touches.length > 1) {\n      couldBeTap = false;\n    } else if (firstTouch) {\n      // Some devices will throw touchmoves for all but the slightest of taps.\n      // So, if we moved only a small distance, this could still be a tap\n      xdiff = event.touches[0].pageX - firstTouch.pageX;\n      ydiff = event.touches[0].pageY - firstTouch.pageY;\n      touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n      if (touchDistance > tapMovementThreshold) {\n        couldBeTap = false;\n      }\n    }\n  });\n\n  noTap = function(){\n    couldBeTap = false;\n  };\n  // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s\n  this.on('touchleave', noTap);\n  this.on('touchcancel', noTap);\n\n  // When the touch ends, measure how long it took and trigger the appropriate\n  // event\n  this.on('touchend', function(event) {\n    firstTouch = null;\n    // Proceed only if the touchmove/leave/cancel event didn't happen\n    if (couldBeTap === true) {\n      // Measure how long the touch lasted\n      touchTime = new Date().getTime() - touchStart;\n      // Make sure the touch was less than the threshold to be considered a tap\n      if (touchTime < touchTimeThreshold) {\n        event.preventDefault(); // Don't let browser turn this into a click\n        this.trigger('tap');\n        // It may be good to copy the touchend event object and change the\n        // type to tap, if the other event properties aren't exact after\n        // vjs.fixEvent runs (e.g. event.target)\n      }\n    }\n  });\n};\n\n/**\n * Report user touch activity when touch events occur\n *\n * User activity is used to determine when controls should show/hide. It's\n * relatively simple when it comes to mouse events, because any mouse event\n * should show the controls. So we capture mouse events that bubble up to the\n * player and report activity when that happens.\n *\n * With touch events it isn't as easy. We can't rely on touch events at the\n * player level, because a tap (touchstart + touchend) on the video itself on\n * mobile devices is meant to turn controls off (and on). User activity is\n * checked asynchronously, so what could happen is a tap event on the video\n * turns the controls off, then the touchend event bubbles up to the player,\n * which if it reported user activity, would turn the controls right back on.\n * (We also don't want to completely block touch events from bubbling up)\n *\n * Also a touchmove, touch+hold, and anything other than a tap is not supposed\n * to turn the controls back on on a mobile device.\n *\n * Here we're setting the default component behavior to report user activity\n * whenever touch events happen, and this can be turned off by components that\n * want touch events to act differently.\n */\nvjs.Component.prototype.enableTouchActivity = function() {\n  var report, touchHolding, touchEnd;\n\n  // Don't continue if the root player doesn't support reporting user activity\n  if (!this.player().reportUserActivity) {\n    return;\n  }\n\n  // listener for reporting that the user is active\n  report = vjs.bind(this.player(), this.player().reportUserActivity);\n\n  this.on('touchstart', function() {\n    report();\n    // For as long as the they are touching the device or have their mouse down,\n    // we consider them active even if they're not moving their finger or mouse.\n    // So we want to continue to update that they are active\n    this.clearInterval(touchHolding);\n    // report at the same interval as activityCheck\n    touchHolding = this.setInterval(report, 250);\n  });\n\n  touchEnd = function(event) {\n    report();\n    // stop the interval that maintains activity if the touch is holding\n    this.clearInterval(touchHolding);\n  };\n\n  this.on('touchmove', report);\n  this.on('touchend', touchEnd);\n  this.on('touchcancel', touchEnd);\n};\n\n/**\n * Creates timeout and sets up disposal automatically.\n * @param {Function} fn The function to run after the timeout.\n * @param {Number} timeout Number of ms to delay before executing specified function.\n * @return {Number} Returns the timeout ID\n */\nvjs.Component.prototype.setTimeout = function(fn, timeout) {\n  fn = vjs.bind(this, fn);\n\n  // window.setTimeout would be preferable here, but due to some bizarre issue with Sinon and/or Phantomjs, we can't.\n  var timeoutId = setTimeout(fn, timeout);\n\n  var disposeFn = function() {\n    this.clearTimeout(timeoutId);\n  };\n\n  disposeFn.guid = 'vjs-timeout-'+ timeoutId;\n\n  this.on('dispose', disposeFn);\n\n  return timeoutId;\n};\n\n\n/**\n * Clears a timeout and removes the associated dispose listener\n * @param {Number} timeoutId The id of the timeout to clear\n * @return {Number} Returns the timeout ID\n */\nvjs.Component.prototype.clearTimeout = function(timeoutId) {\n  clearTimeout(timeoutId);\n\n  var disposeFn = function(){};\n  disposeFn.guid = 'vjs-timeout-'+ timeoutId;\n\n  this.off('dispose', disposeFn);\n\n  return timeoutId;\n};\n\n/**\n * Creates an interval and sets up disposal automatically.\n * @param {Function} fn The function to run every N seconds.\n * @param {Number} interval Number of ms to delay before executing specified function.\n * @return {Number} Returns the interval ID\n */\nvjs.Component.prototype.setInterval = function(fn, interval) {\n  fn = vjs.bind(this, fn);\n\n  var intervalId = setInterval(fn, interval);\n\n  var disposeFn = function() {\n    this.clearInterval(intervalId);\n  };\n\n  disposeFn.guid = 'vjs-interval-'+ intervalId;\n\n  this.on('dispose', disposeFn);\n\n  return intervalId;\n};\n\n/**\n * Clears an interval and removes the associated dispose listener\n * @param {Number} intervalId The id of the interval to clear\n * @return {Number} Returns the interval ID\n */\nvjs.Component.prototype.clearInterval = function(intervalId) {\n  clearInterval(intervalId);\n\n  var disposeFn = function(){};\n  disposeFn.guid = 'vjs-interval-'+ intervalId;\n\n  this.off('dispose', disposeFn);\n\n  return intervalId;\n};\n/* Button - Base class for all buttons\n================================================================================ */\n/**\n * Base class for all buttons\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n */\nvjs.Button = vjs.Component.extend({\n  /**\n   * @constructor\n   * @inheritDoc\n   */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    this.emitTapEvents();\n\n    this.on('tap', this.onClick);\n    this.on('click', this.onClick);\n    this.on('focus', this.onFocus);\n    this.on('blur', this.onBlur);\n  }\n});\n\nvjs.Button.prototype.createEl = function(type, props){\n  var el;\n\n  // Add standard Aria and Tabindex info\n  props = vjs.obj.merge({\n    className: this.buildCSSClass(),\n    'role': 'button',\n    'aria-live': 'polite', // let the screen reader user know that the text of the button may change\n    tabIndex: 0\n  }, props);\n\n  el = vjs.Component.prototype.createEl.call(this, type, props);\n\n  // if innerHTML hasn't been overridden (bigPlayButton), add content elements\n  if (!props.innerHTML) {\n    this.contentEl_ = vjs.createEl('div', {\n      className: 'vjs-control-content'\n    });\n\n    this.controlText_ = vjs.createEl('span', {\n      className: 'vjs-control-text',\n      innerHTML: this.localize(this.buttonText) || 'Need Text'\n    });\n\n    this.contentEl_.appendChild(this.controlText_);\n    el.appendChild(this.contentEl_);\n  }\n\n  return el;\n};\n\nvjs.Button.prototype.buildCSSClass = function(){\n  // TODO: Change vjs-control to vjs-button?\n  return 'vjs-control ' + vjs.Component.prototype.buildCSSClass.call(this);\n};\n\n  // Click - Override with specific functionality for button\nvjs.Button.prototype.onClick = function(){};\n\n  // Focus - Add keyboard functionality to element\nvjs.Button.prototype.onFocus = function(){\n  vjs.on(document, 'keydown', vjs.bind(this, this.onKeyPress));\n};\n\n  // KeyPress (document level) - Trigger click when keys are pressed\nvjs.Button.prototype.onKeyPress = function(event){\n  // Check for space bar (32) or enter (13) keys\n  if (event.which == 32 || event.which == 13) {\n    event.preventDefault();\n    this.onClick();\n  }\n};\n\n// Blur - Remove keyboard triggers\nvjs.Button.prototype.onBlur = function(){\n  vjs.off(document, 'keydown', vjs.bind(this, this.onKeyPress));\n};\n/* Slider\n================================================================================ */\n/**\n * The base functionality for sliders like the volume bar and seek bar\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.Slider = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    // Set property names to bar and handle to match with the child Slider class is looking for\n    this.bar = this.getChild(this.options_['barName']);\n    this.handle = this.getChild(this.options_['handleName']);\n\n    this.on('mousedown', this.onMouseDown);\n    this.on('touchstart', this.onMouseDown);\n    this.on('focus', this.onFocus);\n    this.on('blur', this.onBlur);\n    this.on('click', this.onClick);\n\n    this.on(player, 'controlsvisible', this.update);\n    this.on(player, this.playerEvent, this.update);\n  }\n});\n\nvjs.Slider.prototype.createEl = function(type, props) {\n  props = props || {};\n  // Add the slider element class to all sub classes\n  props.className = props.className + ' vjs-slider';\n  props = vjs.obj.merge({\n    'role': 'slider',\n    'aria-valuenow': 0,\n    'aria-valuemin': 0,\n    'aria-valuemax': 100,\n    tabIndex: 0\n  }, props);\n\n  return vjs.Component.prototype.createEl.call(this, type, props);\n};\n\nvjs.Slider.prototype.onMouseDown = function(event){\n  event.preventDefault();\n  vjs.blockTextSelection();\n  this.addClass('vjs-sliding');\n\n  this.on(document, 'mousemove', this.onMouseMove);\n  this.on(document, 'mouseup', this.onMouseUp);\n  this.on(document, 'touchmove', this.onMouseMove);\n  this.on(document, 'touchend', this.onMouseUp);\n\n  this.onMouseMove(event);\n};\n\n// To be overridden by a subclass\nvjs.Slider.prototype.onMouseMove = function(){};\n\nvjs.Slider.prototype.onMouseUp = function() {\n  vjs.unblockTextSelection();\n  this.removeClass('vjs-sliding');\n\n  this.off(document, 'mousemove', this.onMouseMove);\n  this.off(document, 'mouseup', this.onMouseUp);\n  this.off(document, 'touchmove', this.onMouseMove);\n  this.off(document, 'touchend', this.onMouseUp);\n\n  this.update();\n};\n\nvjs.Slider.prototype.update = function(){\n  // In VolumeBar init we have a setTimeout for update that pops and update to the end of the\n  // execution stack. The player is destroyed before then update will cause an error\n  if (!this.el_) return;\n\n  // If scrubbing, we could use a cached value to make the handle keep up with the user's mouse.\n  // On HTML5 browsers scrubbing is really smooth, but some flash players are slow, so we might want to utilize this later.\n  // var progress =  (this.player_.scrubbing) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();\n\n  var barProgress,\n      progress = this.getPercent(),\n      handle = this.handle,\n      bar = this.bar;\n\n  // Protect against no duration and other division issues\n  if (typeof progress !== 'number' ||\n      progress !== progress ||\n      progress < 0 ||\n      progress === Infinity) {\n        progress = 0;\n  }\n\n  barProgress = progress;\n\n  // If there is a handle, we need to account for the handle in our calculation for progress bar\n  // so that it doesn't fall short of or extend past the handle.\n  if (handle) {\n\n    var box = this.el_,\n        boxWidth = box.offsetWidth,\n\n        handleWidth = handle.el().offsetWidth,\n\n        // The width of the handle in percent of the containing box\n        // In IE, widths may not be ready yet causing NaN\n        handlePercent = (handleWidth) ? handleWidth / boxWidth : 0,\n\n        // Get the adjusted size of the box, considering that the handle's center never touches the left or right side.\n        // There is a margin of half the handle's width on both sides.\n        boxAdjustedPercent = 1 - handlePercent,\n\n        // Adjust the progress that we'll use to set widths to the new adjusted box width\n        adjustedProgress = progress * boxAdjustedPercent;\n\n    // The bar does reach the left side, so we need to account for this in the bar's width\n    barProgress = adjustedProgress + (handlePercent / 2);\n\n    // Move the handle from the left based on the adjected progress\n    handle.el().style.left = vjs.round(adjustedProgress * 100, 2) + '%';\n  }\n\n  // Set the new bar width\n  if (bar) {\n    bar.el().style.width = vjs.round(barProgress * 100, 2) + '%';\n  }\n};\n\nvjs.Slider.prototype.calculateDistance = function(event){\n  var el, box, boxX, boxY, boxW, boxH, handle, pageX, pageY;\n\n  el = this.el_;\n  box = vjs.findPosition(el);\n  boxW = boxH = el.offsetWidth;\n  handle = this.handle;\n\n  if (this.options()['vertical']) {\n    boxY = box.top;\n\n    if (event.changedTouches) {\n      pageY = event.changedTouches[0].pageY;\n    } else {\n      pageY = event.pageY;\n    }\n\n    if (handle) {\n      var handleH = handle.el().offsetHeight;\n      // Adjusted X and Width, so handle doesn't go outside the bar\n      boxY = boxY + (handleH / 2);\n      boxH = boxH - handleH;\n    }\n\n    // Percent that the click is through the adjusted area\n    return Math.max(0, Math.min(1, ((boxY - pageY) + boxH) / boxH));\n\n  } else {\n    boxX = box.left;\n\n    if (event.changedTouches) {\n      pageX = event.changedTouches[0].pageX;\n    } else {\n      pageX = event.pageX;\n    }\n\n    if (handle) {\n      var handleW = handle.el().offsetWidth;\n\n      // Adjusted X and Width, so handle doesn't go outside the bar\n      boxX = boxX + (handleW / 2);\n      boxW = boxW - handleW;\n    }\n\n    // Percent that the click is through the adjusted area\n    return Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n  }\n};\n\nvjs.Slider.prototype.onFocus = function(){\n  this.on(document, 'keydown', this.onKeyPress);\n};\n\nvjs.Slider.prototype.onKeyPress = function(event){\n  if (event.which == 37 || event.which == 40) { // Left and Down Arrows\n    event.preventDefault();\n    this.stepBack();\n  } else if (event.which == 38 || event.which == 39) { // Up and Right Arrows\n    event.preventDefault();\n    this.stepForward();\n  }\n};\n\nvjs.Slider.prototype.onBlur = function(){\n  this.off(document, 'keydown', this.onKeyPress);\n};\n\n/**\n * Listener for click events on slider, used to prevent clicks\n *   from bubbling up to parent elements like button menus.\n * @param  {Object} event Event object\n */\nvjs.Slider.prototype.onClick = function(event){\n  event.stopImmediatePropagation();\n  event.preventDefault();\n};\n\n/**\n * SeekBar Behavior includes play progress bar, and seek handle\n * Needed so it can determine seek position based on handle position/size\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.SliderHandle = vjs.Component.extend();\n\n/**\n * Default value of the slider\n *\n * @type {Number}\n * @private\n */\nvjs.SliderHandle.prototype.defaultValue = 0;\n\n/** @inheritDoc */\nvjs.SliderHandle.prototype.createEl = function(type, props) {\n  props = props || {};\n  // Add the slider element class to all sub classes\n  props.className = props.className + ' vjs-slider-handle';\n  props = vjs.obj.merge({\n    innerHTML: '<span class=\"vjs-control-text\">'+this.defaultValue+'</span>'\n  }, props);\n\n  return vjs.Component.prototype.createEl.call(this, 'div', props);\n};\n/* Menu\n================================================================================ */\n/**\n * The Menu component is used to build pop up menus, including subtitle and\n * captions selection menus.\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n */\nvjs.Menu = vjs.Component.extend();\n\n/**\n * Add a menu item to the menu\n * @param {Object|String} component Component or component type to add\n */\nvjs.Menu.prototype.addItem = function(component){\n  this.addChild(component);\n  component.on('click', vjs.bind(this, function(){\n    this.unlockShowing();\n  }));\n};\n\n/** @inheritDoc */\nvjs.Menu.prototype.createEl = function(){\n  var contentElType = this.options().contentElType || 'ul';\n  this.contentEl_ = vjs.createEl(contentElType, {\n    className: 'vjs-menu-content'\n  });\n  var el = vjs.Component.prototype.createEl.call(this, 'div', {\n    append: this.contentEl_,\n    className: 'vjs-menu'\n  });\n  el.appendChild(this.contentEl_);\n\n  // Prevent clicks from bubbling up. Needed for Menu Buttons,\n  // where a click on the parent is significant\n  vjs.on(el, 'click', function(event){\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  });\n\n  return el;\n};\n\n/**\n * The component for a menu item. `<li>`\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n */\nvjs.MenuItem = vjs.Button.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Button.call(this, player, options);\n    this.selected(options['selected']);\n  }\n});\n\n/** @inheritDoc */\nvjs.MenuItem.prototype.createEl = function(type, props){\n  return vjs.Button.prototype.createEl.call(this, 'li', vjs.obj.merge({\n    className: 'vjs-menu-item',\n    innerHTML: this.localize(this.options_['label'])\n  }, props));\n};\n\n/**\n * Handle a click on the menu item, and set it to selected\n */\nvjs.MenuItem.prototype.onClick = function(){\n  this.selected(true);\n};\n\n/**\n * Set this menu item as selected or not\n * @param  {Boolean} selected\n */\nvjs.MenuItem.prototype.selected = function(selected){\n  if (selected) {\n    this.addClass('vjs-selected');\n    this.el_.setAttribute('aria-selected',true);\n  } else {\n    this.removeClass('vjs-selected');\n    this.el_.setAttribute('aria-selected',false);\n  }\n};\n\n\n/**\n * A button class with a popup menu\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.MenuButton = vjs.Button.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Button.call(this, player, options);\n\n    this.update();\n\n    this.on('keydown', this.onKeyPress);\n    this.el_.setAttribute('aria-haspopup', true);\n    this.el_.setAttribute('role', 'button');\n  }\n});\n\nvjs.MenuButton.prototype.update = function() {\n  var menu = this.createMenu();\n\n  if (this.menu) {\n    this.removeChild(this.menu);\n  }\n\n  this.menu = menu;\n  this.addChild(menu);\n\n  if (this.items && this.items.length === 0) {\n    this.hide();\n  } else if (this.items && this.items.length > 1) {\n    this.show();\n  }\n};\n\n/**\n * Track the state of the menu button\n * @type {Boolean}\n * @private\n */\nvjs.MenuButton.prototype.buttonPressed_ = false;\n\nvjs.MenuButton.prototype.createMenu = function(){\n  var menu = new vjs.Menu(this.player_);\n\n  // Add a title list item to the top\n  if (this.options().title) {\n    menu.contentEl().appendChild(vjs.createEl('li', {\n      className: 'vjs-menu-title',\n      innerHTML: vjs.capitalize(this.options().title),\n      tabindex: -1\n    }));\n  }\n\n  this.items = this['createItems']();\n\n  if (this.items) {\n    // Add menu items to the menu\n    for (var i = 0; i < this.items.length; i++) {\n      menu.addItem(this.items[i]);\n    }\n  }\n\n  return menu;\n};\n\n/**\n * Create the list of menu items. Specific to each subclass.\n */\nvjs.MenuButton.prototype.createItems = function(){};\n\n/** @inheritDoc */\nvjs.MenuButton.prototype.buildCSSClass = function(){\n  return this.className + ' vjs-menu-button ' + vjs.Button.prototype.buildCSSClass.call(this);\n};\n\n// Focus - Add keyboard functionality to element\n// This function is not needed anymore. Instead, the keyboard functionality is handled by\n// treating the button as triggering a submenu. When the button is pressed, the submenu\n// appears. Pressing the button again makes the submenu disappear.\nvjs.MenuButton.prototype.onFocus = function(){};\n// Can't turn off list display that we turned on with focus, because list would go away.\nvjs.MenuButton.prototype.onBlur = function(){};\n\nvjs.MenuButton.prototype.onClick = function(){\n  // When you click the button it adds focus, which will show the menu indefinitely.\n  // So we'll remove focus when the mouse leaves the button.\n  // Focus is needed for tab navigation.\n  this.one('mouseout', vjs.bind(this, function(){\n    this.menu.unlockShowing();\n    this.el_.blur();\n  }));\n  if (this.buttonPressed_){\n    this.unpressButton();\n  } else {\n    this.pressButton();\n  }\n};\n\nvjs.MenuButton.prototype.onKeyPress = function(event){\n\n  // Check for space bar (32) or enter (13) keys\n  if (event.which == 32 || event.which == 13) {\n    if (this.buttonPressed_){\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n    event.preventDefault();\n  // Check for escape (27) key\n  } else if (event.which == 27){\n    if (this.buttonPressed_){\n      this.unpressButton();\n    }\n    event.preventDefault();\n  }\n};\n\nvjs.MenuButton.prototype.pressButton = function(){\n  this.buttonPressed_ = true;\n  this.menu.lockShowing();\n  this.el_.setAttribute('aria-pressed', true);\n  if (this.items && this.items.length > 0) {\n    this.items[0].el().focus(); // set the focus to the title of the submenu\n  }\n};\n\nvjs.MenuButton.prototype.unpressButton = function(){\n  this.buttonPressed_ = false;\n  this.menu.unlockShowing();\n  this.el_.setAttribute('aria-pressed', false);\n};\n/**\n * Custom MediaError to mimic the HTML5 MediaError\n * @param {Number} code The media error code\n */\nvjs.MediaError = function(code){\n  if (typeof code === 'number') {\n    this.code = code;\n  } else if (typeof code === 'string') {\n    // default code is zero, so this is a custom error\n    this.message = code;\n  } else if (typeof code === 'object') { // object\n    vjs.obj.merge(this, code);\n  }\n\n  if (!this.message) {\n    this.message = vjs.MediaError.defaultMessages[this.code] || '';\n  }\n};\n\n/**\n * The error code that refers two one of the defined\n * MediaError types\n * @type {Number}\n */\nvjs.MediaError.prototype.code = 0;\n\n/**\n * An optional message to be shown with the error.\n * Message is not part of the HTML5 video spec\n * but allows for more informative custom errors.\n * @type {String}\n */\nvjs.MediaError.prototype.message = '';\n\n/**\n * An optional status code that can be set by plugins\n * to allow even more detail about the error.\n * For example the HLS plugin might provide the specific\n * HTTP status code that was returned when the error\n * occurred, then allowing a custom error overlay\n * to display more information.\n * @type {[type]}\n */\nvjs.MediaError.prototype.status = null;\n\nvjs.MediaError.errorTypes = [\n  'MEDIA_ERR_CUSTOM',            // = 0\n  'MEDIA_ERR_ABORTED',           // = 1\n  'MEDIA_ERR_NETWORK',           // = 2\n  'MEDIA_ERR_DECODE',            // = 3\n  'MEDIA_ERR_SRC_NOT_SUPPORTED', // = 4\n  'MEDIA_ERR_ENCRYPTED'          // = 5\n];\n\nvjs.MediaError.defaultMessages = {\n  1: 'You aborted the video playback',\n  2: 'A network error caused the video download to fail part-way.',\n  3: 'The video playback was aborted due to a corruption problem or because the video used features your browser did not support.',\n  4: 'The video could not be loaded, either because the server or network failed or because the format is not supported.',\n  5: 'The video is encrypted and we do not have the keys to decrypt it.'\n};\n\n// Add types as properties on MediaError\n// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;\nfor (var errNum = 0; errNum < vjs.MediaError.errorTypes.length; errNum++) {\n  vjs.MediaError[vjs.MediaError.errorTypes[errNum]] = errNum;\n  // values should be accessible on both the class and instance\n  vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]] = errNum;\n}\n(function(){\n  var apiMap, specApi, browserApi, i;\n\n  /**\n   * Store the browser-specific methods for the fullscreen API\n   * @type {Object|undefined}\n   * @private\n   */\n  vjs.browser.fullscreenAPI;\n\n  // browser API methods\n  // map approach from Screenful.js - https://github.com/sindresorhus/screenfull.js\n  apiMap = [\n    // Spec: https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html\n    [\n      'requestFullscreen',\n      'exitFullscreen',\n      'fullscreenElement',\n      'fullscreenEnabled',\n      'fullscreenchange',\n      'fullscreenerror'\n    ],\n    // WebKit\n    [\n      'webkitRequestFullscreen',\n      'webkitExitFullscreen',\n      'webkitFullscreenElement',\n      'webkitFullscreenEnabled',\n      'webkitfullscreenchange',\n      'webkitfullscreenerror'\n    ],\n    // Old WebKit (Safari 5.1)\n    [\n      'webkitRequestFullScreen',\n      'webkitCancelFullScreen',\n      'webkitCurrentFullScreenElement',\n      'webkitCancelFullScreen',\n      'webkitfullscreenchange',\n      'webkitfullscreenerror'\n    ],\n    // Mozilla\n    [\n      'mozRequestFullScreen',\n      'mozCancelFullScreen',\n      'mozFullScreenElement',\n      'mozFullScreenEnabled',\n      'mozfullscreenchange',\n      'mozfullscreenerror'\n    ],\n    // Microsoft\n    [\n      'msRequestFullscreen',\n      'msExitFullscreen',\n      'msFullscreenElement',\n      'msFullscreenEnabled',\n      'MSFullscreenChange',\n      'MSFullscreenError'\n    ]\n  ];\n\n  specApi = apiMap[0];\n\n  // determine the supported set of functions\n  for (i=0; i<apiMap.length; i++) {\n    // check for exitFullscreen function\n    if (apiMap[i][1] in document) {\n      browserApi = apiMap[i];\n      break;\n    }\n  }\n\n  // map the browser API names to the spec API names\n  // or leave vjs.browser.fullscreenAPI undefined\n  if (browserApi) {\n    vjs.browser.fullscreenAPI = {};\n\n    for (i=0; i<browserApi.length; i++) {\n      vjs.browser.fullscreenAPI[specApi[i]] = browserApi[i];\n    }\n  }\n\n})();\n/**\n * An instance of the `vjs.Player` class is created when any of the Video.js setup methods are used to initialize a video.\n *\n * ```js\n * var myPlayer = videojs('example_video_1');\n * ```\n *\n * In the following example, the `data-setup` attribute tells the Video.js library to create a player instance when the library is ready.\n *\n * ```html\n * <video id=\"example_video_1\" data-setup='{}' controls>\n *   <source src=\"my-source.mp4\" type=\"video/mp4\">\n * </video>\n * ```\n *\n * After an instance has been created it can be accessed globally using `Video('example_video_1')`.\n *\n * @class\n * @extends vjs.Component\n */\nvjs.Player = vjs.Component.extend({\n\n  /**\n   * player's constructor function\n   *\n   * @constructs\n   * @method init\n   * @param {Element} tag        The original video tag used for configuring options\n   * @param {Object=} options    Player options\n   * @param {Function=} ready    Ready callback function\n   */\n  init: function(tag, options, ready){\n    this.tag = tag; // Store the original tag used to set options\n\n    // Make sure tag ID exists\n    tag.id = tag.id || 'vjs_video_' + vjs.guid++;\n\n    // Store the tag attributes used to restore html5 element\n    this.tagAttributes = tag && vjs.getElementAttributes(tag);\n\n    // Set Options\n    // The options argument overrides options set in the video tag\n    // which overrides globally set options.\n    // This latter part coincides with the load order\n    // (tag must exist before Player)\n    options = vjs.obj.merge(this.getTagSettings(tag), options);\n\n    // Update Current Language\n    this.language_ = options['language'] || vjs.options['language'];\n\n    // Update Supported Languages\n    this.languages_ = options['languages'] || vjs.options['languages'];\n\n    // Cache for video property values.\n    this.cache_ = {};\n\n    // Set poster\n    this.poster_ = options['poster'] || '';\n\n    // Set controls\n    this.controls_ = !!options['controls'];\n    // Original tag settings stored in options\n    // now remove immediately so native controls don't flash.\n    // May be turned back on by HTML5 tech if nativeControlsForTouch is true\n    tag.controls = false;\n\n    // we don't want the player to report touch activity on itself\n    // see enableTouchActivity in Component\n    options.reportTouchActivity = false;\n\n    // Set isAudio based on whether or not an audio tag was used\n    this.isAudio(this.tag.nodeName.toLowerCase() === 'audio');\n\n    // Run base component initializing with new options.\n    // Builds the element through createEl()\n    // Inits and embeds any child components in opts\n    vjs.Component.call(this, this, options, ready);\n\n    // Update controls className. Can't do this when the controls are initially\n    // set because the element doesn't exist yet.\n    if (this.controls()) {\n      this.addClass('vjs-controls-enabled');\n    } else {\n      this.addClass('vjs-controls-disabled');\n    }\n\n    if (this.isAudio()) {\n      this.addClass('vjs-audio');\n    }\n\n    // TODO: Make this smarter. Toggle user state between touching/mousing\n    // using events, since devices can have both touch and mouse events.\n    // if (vjs.TOUCH_ENABLED) {\n    //   this.addClass('vjs-touch-enabled');\n    // }\n\n    // Make player easily findable by ID\n    vjs.players[this.id_] = this;\n\n    if (options['plugins']) {\n      vjs.obj.each(options['plugins'], function(key, val){\n        this[key](val);\n      }, this);\n    }\n\n    this.listenForUserActivity();\n  }\n});\n\n/**\n * The player's stored language code\n *\n * @type {String}\n * @private\n */\nvjs.Player.prototype.language_;\n\n/**\n * The player's language code\n * @param  {String} languageCode  The locale string\n * @return {String}             The locale string when getting\n * @return {vjs.Player}         self, when setting\n */\nvjs.Player.prototype.language = function (languageCode) {\n  if (languageCode === undefined) {\n    return this.language_;\n  }\n\n  this.language_ = languageCode;\n  return this;\n};\n\n/**\n * The player's stored language dictionary\n *\n * @type {Object}\n * @private\n */\nvjs.Player.prototype.languages_;\n\nvjs.Player.prototype.languages = function(){\n  return this.languages_;\n};\n\n/**\n * Player instance options, surfaced using vjs.options\n * vjs.options = vjs.Player.prototype.options_\n * Make changes in vjs.options, not here.\n * All options should use string keys so they avoid\n * renaming by closure compiler\n * @type {Object}\n * @private\n */\nvjs.Player.prototype.options_ = vjs.options;\n\n/**\n * Destroys the video player and does any necessary cleanup\n *\n *     myPlayer.dispose();\n *\n * This is especially helpful if you are dynamically adding and removing videos\n * to/from the DOM.\n */\nvjs.Player.prototype.dispose = function(){\n  this.trigger('dispose');\n  // prevent dispose from being called twice\n  this.off('dispose');\n\n  // Kill reference to this player\n  vjs.players[this.id_] = null;\n  if (this.tag && this.tag['player']) { this.tag['player'] = null; }\n  if (this.el_ && this.el_['player']) { this.el_['player'] = null; }\n\n  if (this.tech) { this.tech.dispose(); }\n\n  // Component dispose\n  vjs.Component.prototype.dispose.call(this);\n};\n\nvjs.Player.prototype.getTagSettings = function(tag){\n  var tagOptions,\n      dataSetup,\n      options = {\n        'sources': [],\n        'tracks': []\n      };\n\n  tagOptions = vjs.getElementAttributes(tag);\n  dataSetup = tagOptions['data-setup'];\n\n  // Check if data-setup attr exists.\n  if (dataSetup !== null){\n    // Parse options JSON\n    // If empty string, make it a parsable json object.\n    vjs.obj.merge(tagOptions, vjs.JSON.parse(dataSetup || '{}'));\n  }\n\n  vjs.obj.merge(options, tagOptions);\n\n  // Get tag children settings\n  if (tag.hasChildNodes()) {\n    var children, child, childName, i, j;\n\n    children = tag.childNodes;\n\n    for (i=0,j=children.length; i<j; i++) {\n      child = children[i];\n      // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/\n      childName = child.nodeName.toLowerCase();\n      if (childName === 'source') {\n        options['sources'].push(vjs.getElementAttributes(child));\n      } else if (childName === 'track') {\n        options['tracks'].push(vjs.getElementAttributes(child));\n      }\n    }\n  }\n\n  return options;\n};\n\nvjs.Player.prototype.createEl = function(){\n  var\n    el = this.el_ = vjs.Component.prototype.createEl.call(this, 'div'),\n    tag = this.tag,\n    attrs;\n\n  // Remove width/height attrs from tag so CSS can make it 100% width/height\n  tag.removeAttribute('width');\n  tag.removeAttribute('height');\n\n  // Copy over all the attributes from the tag, including ID and class\n  // ID will now reference player box, not the video tag\n  attrs = vjs.getElementAttributes(tag);\n  vjs.obj.each(attrs, function(attr) {\n    // workaround so we don't totally break IE7\n    // http://stackoverflow.com/questions/3653444/css-styles-not-applied-on-dynamic-elements-in-internet-explorer-7\n    if (attr == 'class') {\n      el.className = attrs[attr];\n    } else {\n      el.setAttribute(attr, attrs[attr]);\n    }\n  });\n\n  // Update tag id/class for use as HTML5 playback tech\n  // Might think we should do this after embedding in container so .vjs-tech class\n  // doesn't flash 100% width/height, but class only applies with .video-js parent\n  tag.id += '_html5_api';\n  tag.className = 'vjs-tech';\n\n  // Make player findable on elements\n  tag['player'] = el['player'] = this;\n  // Default state of video is paused\n  this.addClass('vjs-paused');\n\n  // Make box use width/height of tag, or rely on default implementation\n  // Enforce with CSS since width/height attrs don't work on divs\n  this.width(this.options_['width'], true); // (true) Skip resize listener on load\n  this.height(this.options_['height'], true);\n\n  // vjs.insertFirst seems to cause the networkState to flicker from 3 to 2, so\n  // keep track of the original for later so we can know if the source originally failed\n  tag.initNetworkState_ = tag.networkState;\n\n  // Wrap video tag in div (el/box) container\n  if (tag.parentNode) {\n    tag.parentNode.insertBefore(el, tag);\n  }\n  vjs.insertFirst(tag, el); // Breaks iPhone, fixed in HTML5 setup.\n\n  // The event listeners need to be added before the children are added\n  // in the component init because the tech (loaded with mediaLoader) may\n  // fire events, like loadstart, that these events need to capture.\n  // Long term it might be better to expose a way to do this in component.init\n  // like component.initEventListeners() that runs between el creation and\n  // adding children\n  this.el_ = el;\n  this.on('loadstart', this.onLoadStart);\n  this.on('waiting', this.onWaiting);\n  this.on(['canplay', 'canplaythrough', 'playing', 'ended'], this.onWaitEnd);\n  this.on('seeking', this.onSeeking);\n  this.on('seeked', this.onSeeked);\n  this.on('ended', this.onEnded);\n  this.on('play', this.onPlay);\n  this.on('firstplay', this.onFirstPlay);\n  this.on('pause', this.onPause);\n  this.on('progress', this.onProgress);\n  this.on('durationchange', this.onDurationChange);\n  this.on('fullscreenchange', this.onFullscreenChange);\n\n  return el;\n};\n\n// /* Media Technology (tech)\n// ================================================================================ */\n// Load/Create an instance of playback technology including element and API methods\n// And append playback element in player div.\nvjs.Player.prototype.loadTech = function(techName, source){\n\n  // Pause and remove current playback technology\n  if (this.tech) {\n    this.unloadTech();\n  }\n\n  // get rid of the HTML5 video tag as soon as we are using another tech\n  if (techName !== 'Html5' && this.tag) {\n    vjs.Html5.disposeMediaElement(this.tag);\n    this.tag = null;\n  }\n\n  this.techName = techName;\n\n  // Turn off API access because we're loading a new tech that might load asynchronously\n  this.isReady_ = false;\n\n  var techReady = function(){\n    this.player_.triggerReady();\n  };\n\n  // Grab tech-specific options from player options and add source and parent element to use.\n  var techOptions = vjs.obj.merge({ 'source': source, 'parentEl': this.el_ }, this.options_[techName.toLowerCase()]);\n\n  if (source) {\n    this.currentType_ = source.type;\n    if (source.src == this.cache_.src && this.cache_.currentTime > 0) {\n      techOptions['startTime'] = this.cache_.currentTime;\n    }\n\n    this.cache_.src = source.src;\n  }\n\n  // Initialize tech instance\n  this.tech = new window['videojs'][techName](this, techOptions);\n\n  this.tech.ready(techReady);\n};\n\nvjs.Player.prototype.unloadTech = function(){\n  this.isReady_ = false;\n\n  this.tech.dispose();\n\n  this.tech = false;\n};\n\n// There's many issues around changing the size of a Flash (or other plugin) object.\n// First is a plugin reload issue in Firefox that has been around for 11 years: https://bugzilla.mozilla.org/show_bug.cgi?id=90268\n// Then with the new fullscreen API, Mozilla and webkit browsers will reload the flash object after going to fullscreen.\n// To get around this, we're unloading the tech, caching source and currentTime values, and reloading the tech once the plugin is resized.\n// reloadTech: function(betweenFn){\n//   vjs.log('unloadingTech')\n//   this.unloadTech();\n//   vjs.log('unloadedTech')\n//   if (betweenFn) { betweenFn.call(); }\n//   vjs.log('LoadingTech')\n//   this.loadTech(this.techName, { src: this.cache_.src })\n//   vjs.log('loadedTech')\n// },\n\n// /* Player event handlers (how the player reacts to certain events)\n// ================================================================================ */\n\n/**\n * Fired when the user agent begins looking for media data\n * @event loadstart\n */\nvjs.Player.prototype.onLoadStart = function() {\n  // TODO: Update to use `emptied` event instead. See #1277.\n\n  this.removeClass('vjs-ended');\n\n  // reset the error state\n  this.error(null);\n\n  // If it's already playing we want to trigger a firstplay event now.\n  // The firstplay event relies on both the play and loadstart events\n  // which can happen in any order for a new source\n  if (!this.paused()) {\n    this.trigger('firstplay');\n  } else {\n    // reset the hasStarted state\n    this.hasStarted(false);\n  }\n};\n\nvjs.Player.prototype.hasStarted_ = false;\n\nvjs.Player.prototype.hasStarted = function(hasStarted){\n  if (hasStarted !== undefined) {\n    // only update if this is a new value\n    if (this.hasStarted_ !== hasStarted) {\n      this.hasStarted_ = hasStarted;\n      if (hasStarted) {\n        this.addClass('vjs-has-started');\n        // trigger the firstplay event if this newly has played\n        this.trigger('firstplay');\n      } else {\n        this.removeClass('vjs-has-started');\n      }\n    }\n    return this;\n  }\n  return this.hasStarted_;\n};\n\n/**\n * Fired when the player has initial duration and dimension information\n * @event loadedmetadata\n */\nvjs.Player.prototype.onLoadedMetaData;\n\n/**\n * Fired when the player has downloaded data at the current playback position\n * @event loadeddata\n */\nvjs.Player.prototype.onLoadedData;\n\n/**\n * Fired when the player has finished downloading the source data\n * @event loadedalldata\n */\nvjs.Player.prototype.onLoadedAllData;\n\n/**\n * Fired whenever the media begins or resumes playback\n * @event play\n */\nvjs.Player.prototype.onPlay = function(){\n  this.removeClass('vjs-ended');\n  this.removeClass('vjs-paused');\n  this.addClass('vjs-playing');\n\n  // hide the poster when the user hits play\n  // https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-play\n  this.hasStarted(true);\n};\n\n/**\n * Fired whenever the media begins waiting\n * @event waiting\n */\nvjs.Player.prototype.onWaiting = function(){\n  this.addClass('vjs-waiting');\n};\n\n/**\n * A handler for events that signal that waiting has ended\n * which is not consistent between browsers. See #1351\n * @private\n */\nvjs.Player.prototype.onWaitEnd = function(){\n  this.removeClass('vjs-waiting');\n};\n\n/**\n * Fired whenever the player is jumping to a new time\n * @event seeking\n */\nvjs.Player.prototype.onSeeking = function(){\n  this.addClass('vjs-seeking');\n};\n\n/**\n * Fired when the player has finished jumping to a new time\n * @event seeked\n */\nvjs.Player.prototype.onSeeked = function(){\n  this.removeClass('vjs-seeking');\n};\n\n/**\n * Fired the first time a video is played\n *\n * Not part of the HLS spec, and we're not sure if this is the best\n * implementation yet, so use sparingly. If you don't have a reason to\n * prevent playback, use `myPlayer.one('play');` instead.\n *\n * @event firstplay\n */\nvjs.Player.prototype.onFirstPlay = function(){\n    //If the first starttime attribute is specified\n    //then we will start at the given offset in seconds\n    if(this.options_['starttime']){\n      this.currentTime(this.options_['starttime']);\n    }\n\n    this.addClass('vjs-has-started');\n};\n\n/**\n * Fired whenever the media has been paused\n * @event pause\n */\nvjs.Player.prototype.onPause = function(){\n  this.removeClass('vjs-playing');\n  this.addClass('vjs-paused');\n};\n\n/**\n * Fired when the current playback position has changed\n *\n * During playback this is fired every 15-250 milliseconds, depending on the\n * playback technology in use.\n * @event timeupdate\n */\nvjs.Player.prototype.onTimeUpdate;\n\n/**\n * Fired while the user agent is downloading media data\n * @event progress\n */\nvjs.Player.prototype.onProgress = function(){\n  // Add custom event for when source is finished downloading.\n  if (this.bufferedPercent() == 1) {\n    this.trigger('loadedalldata');\n  }\n};\n\n/**\n * Fired when the end of the media resource is reached (currentTime == duration)\n * @event ended\n */\nvjs.Player.prototype.onEnded = function(){\n  this.addClass('vjs-ended');\n  if (this.options_['loop']) {\n    this.currentTime(0);\n    this.play();\n  } else if (!this.paused()) {\n    this.pause();\n  }\n};\n\n/**\n * Fired when the duration of the media resource is first known or changed\n * @event durationchange\n */\nvjs.Player.prototype.onDurationChange = function(){\n  // Allows for caching value instead of asking player each time.\n  // We need to get the techGet response and check for a value so we don't\n  // accidentally cause the stack to blow up.\n  var duration = this.techGet('duration');\n  if (duration) {\n    if (duration < 0) {\n      duration = Infinity;\n    }\n    this.duration(duration);\n    // Determine if the stream is live and propagate styles down to UI.\n    if (duration === Infinity) {\n      this.addClass('vjs-live');\n    } else {\n      this.removeClass('vjs-live');\n    }\n  }\n};\n\n/**\n * Fired when the volume changes\n * @event volumechange\n */\nvjs.Player.prototype.onVolumeChange;\n\n/**\n * Fired when the player switches in or out of fullscreen mode\n * @event fullscreenchange\n */\nvjs.Player.prototype.onFullscreenChange = function() {\n  if (this.isFullscreen()) {\n    this.addClass('vjs-fullscreen');\n  } else {\n    this.removeClass('vjs-fullscreen');\n  }\n};\n\n/**\n * Fired when an error occurs\n * @event error\n */\nvjs.Player.prototype.onError;\n\n// /* Player API\n// ================================================================================ */\n\n/**\n * Object for cached values.\n * @private\n */\nvjs.Player.prototype.cache_;\n\nvjs.Player.prototype.getCache = function(){\n  return this.cache_;\n};\n\n// Pass values to the playback tech\nvjs.Player.prototype.techCall = function(method, arg){\n  // If it's not ready yet, call method when it is\n  if (this.tech && !this.tech.isReady_) {\n    this.tech.ready(function(){\n      this[method](arg);\n    });\n\n  // Otherwise call method now\n  } else {\n    try {\n      this.tech[method](arg);\n    } catch(e) {\n      vjs.log(e);\n      throw e;\n    }\n  }\n};\n\n// Get calls can't wait for the tech, and sometimes don't need to.\nvjs.Player.prototype.techGet = function(method){\n  if (this.tech && this.tech.isReady_) {\n\n    // Flash likes to die and reload when you hide or reposition it.\n    // In these cases the object methods go away and we get errors.\n    // When that happens we'll catch the errors and inform tech that it's not ready any more.\n    try {\n      return this.tech[method]();\n    } catch(e) {\n      // When building additional tech libs, an expected method may not be defined yet\n      if (this.tech[method] === undefined) {\n        vjs.log('Video.js: ' + method + ' method not defined for '+this.techName+' playback technology.', e);\n      } else {\n        // When a method isn't available on the object it throws a TypeError\n        if (e.name == 'TypeError') {\n          vjs.log('Video.js: ' + method + ' unavailable on '+this.techName+' playback technology element.', e);\n          this.tech.isReady_ = false;\n        } else {\n          vjs.log(e);\n        }\n      }\n      throw e;\n    }\n  }\n\n  return;\n};\n\n/**\n * start media playback\n *\n *     myPlayer.play();\n *\n * @return {vjs.Player} self\n */\nvjs.Player.prototype.play = function(){\n  this.techCall('play');\n  return this;\n};\n\n/**\n * Pause the video playback\n *\n *     myPlayer.pause();\n *\n * @return {vjs.Player} self\n */\nvjs.Player.prototype.pause = function(){\n  this.techCall('pause');\n  return this;\n};\n\n/**\n * Check if the player is paused\n *\n *     var isPaused = myPlayer.paused();\n *     var isPlaying = !myPlayer.paused();\n *\n * @return {Boolean} false if the media is currently playing, or true otherwise\n */\nvjs.Player.prototype.paused = function(){\n  // The initial state of paused should be true (in Safari it's actually false)\n  return (this.techGet('paused') === false) ? false : true;\n};\n\n/**\n * Get or set the current time (in seconds)\n *\n *     // get\n *     var whereYouAt = myPlayer.currentTime();\n *\n *     // set\n *     myPlayer.currentTime(120); // 2 minutes into the video\n *\n * @param  {Number|String=} seconds The time to seek to\n * @return {Number}        The time in seconds, when not setting\n * @return {vjs.Player}    self, when the current time is set\n */\nvjs.Player.prototype.currentTime = function(seconds){\n  if (seconds !== undefined) {\n\n    this.techCall('setCurrentTime', seconds);\n\n    return this;\n  }\n\n  // cache last currentTime and return. default to 0 seconds\n  //\n  // Caching the currentTime is meant to prevent a massive amount of reads on the tech's\n  // currentTime when scrubbing, but may not provide much performance benefit afterall.\n  // Should be tested. Also something has to read the actual current time or the cache will\n  // never get updated.\n  return this.cache_.currentTime = (this.techGet('currentTime') || 0);\n};\n\n/**\n * Get the length in time of the video in seconds\n *\n *     var lengthOfVideo = myPlayer.duration();\n *\n * **NOTE**: The video must have started loading before the duration can be\n * known, and in the case of Flash, may not be known until the video starts\n * playing.\n *\n * @return {Number} The duration of the video in seconds\n */\nvjs.Player.prototype.duration = function(seconds){\n  if (seconds !== undefined) {\n\n    // cache the last set value for optimized scrubbing (esp. Flash)\n    this.cache_.duration = parseFloat(seconds);\n\n    return this;\n  }\n\n  if (this.cache_.duration === undefined) {\n    this.onDurationChange();\n  }\n\n  return this.cache_.duration || 0;\n};\n\n/**\n * Calculates how much time is left.\n *\n *     var timeLeft = myPlayer.remainingTime();\n *\n * Not a native video element function, but useful\n * @return {Number} The time remaining in seconds\n */\nvjs.Player.prototype.remainingTime = function(){\n  return this.duration() - this.currentTime();\n};\n\n// http://dev.w3.org/html5/spec/video.html#dom-media-buffered\n// Buffered returns a timerange object.\n// Kind of like an array of portions of the video that have been downloaded.\n\n/**\n * Get a TimeRange object with the times of the video that have been downloaded\n *\n * If you just want the percent of the video that's been downloaded,\n * use bufferedPercent.\n *\n *     // Number of different ranges of time have been buffered. Usually 1.\n *     numberOfRanges = bufferedTimeRange.length,\n *\n *     // Time in seconds when the first range starts. Usually 0.\n *     firstRangeStart = bufferedTimeRange.start(0),\n *\n *     // Time in seconds when the first range ends\n *     firstRangeEnd = bufferedTimeRange.end(0),\n *\n *     // Length in seconds of the first time range\n *     firstRangeLength = firstRangeEnd - firstRangeStart;\n *\n * @return {Object} A mock TimeRange object (following HTML spec)\n */\nvjs.Player.prototype.buffered = function(){\n  var buffered = this.techGet('buffered');\n\n  if (!buffered || !buffered.length) {\n    buffered = vjs.createTimeRange(0,0);\n  }\n\n  return buffered;\n};\n\n/**\n * Get the percent (as a decimal) of the video that's been downloaded\n *\n *     var howMuchIsDownloaded = myPlayer.bufferedPercent();\n *\n * 0 means none, 1 means all.\n * (This method isn't in the HTML5 spec, but it's very convenient)\n *\n * @return {Number} A decimal between 0 and 1 representing the percent\n */\nvjs.Player.prototype.bufferedPercent = function(){\n  var duration = this.duration(),\n      buffered = this.buffered(),\n      bufferedDuration = 0,\n      start, end;\n\n  if (!duration) {\n    return 0;\n  }\n\n  for (var i=0; i<buffered.length; i++){\n    start = buffered.start(i);\n    end   = buffered.end(i);\n\n    // buffered end can be bigger than duration by a very small fraction\n    if (end > duration) {\n      end = duration;\n    }\n\n    bufferedDuration += end - start;\n  }\n\n  return bufferedDuration / duration;\n};\n\n/**\n * Get the ending time of the last buffered time range\n *\n * This is used in the progress bar to encapsulate all time ranges.\n * @return {Number} The end of the last buffered time range\n */\nvjs.Player.prototype.bufferedEnd = function(){\n  var buffered = this.buffered(),\n      duration = this.duration(),\n      end = buffered.end(buffered.length-1);\n\n  if (end > duration) {\n    end = duration;\n  }\n\n  return end;\n};\n\n/**\n * Get or set the current volume of the media\n *\n *     // get\n *     var howLoudIsIt = myPlayer.volume();\n *\n *     // set\n *     myPlayer.volume(0.5); // Set volume to half\n *\n * 0 is off (muted), 1.0 is all the way up, 0.5 is half way.\n *\n * @param  {Number} percentAsDecimal The new volume as a decimal percent\n * @return {Number}                  The current volume, when getting\n * @return {vjs.Player}              self, when setting\n */\nvjs.Player.prototype.volume = function(percentAsDecimal){\n  var vol;\n\n  if (percentAsDecimal !== undefined) {\n    vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal))); // Force value to between 0 and 1\n    this.cache_.volume = vol;\n    this.techCall('setVolume', vol);\n    vjs.setLocalStorage('volume', vol);\n    return this;\n  }\n\n  // Default to 1 when returning current volume.\n  vol = parseFloat(this.techGet('volume'));\n  return (isNaN(vol)) ? 1 : vol;\n};\n\n\n/**\n * Get the current muted state, or turn mute on or off\n *\n *     // get\n *     var isVolumeMuted = myPlayer.muted();\n *\n *     // set\n *     myPlayer.muted(true); // mute the volume\n *\n * @param  {Boolean=} muted True to mute, false to unmute\n * @return {Boolean} True if mute is on, false if not, when getting\n * @return {vjs.Player} self, when setting mute\n */\nvjs.Player.prototype.muted = function(muted){\n  if (muted !== undefined) {\n    this.techCall('setMuted', muted);\n    return this;\n  }\n  return this.techGet('muted') || false; // Default to false\n};\n\n// Check if current tech can support native fullscreen\n// (e.g. with built in controls like iOS, so not our flash swf)\nvjs.Player.prototype.supportsFullScreen = function(){\n  return this.techGet('supportsFullScreen') || false;\n};\n\n/**\n * is the player in fullscreen\n * @type {Boolean}\n * @private\n */\nvjs.Player.prototype.isFullscreen_ = false;\n\n/**\n * Check if the player is in fullscreen mode\n *\n *     // get\n *     var fullscreenOrNot = myPlayer.isFullscreen();\n *\n *     // set\n *     myPlayer.isFullscreen(true); // tell the player it's in fullscreen\n *\n * NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official\n * property and instead document.fullscreenElement is used. But isFullscreen is\n * still a valuable property for internal player workings.\n *\n * @param  {Boolean=} isFS Update the player's fullscreen state\n * @return {Boolean} true if fullscreen, false if not\n * @return {vjs.Player} self, when setting\n */\nvjs.Player.prototype.isFullscreen = function(isFS){\n  if (isFS !== undefined) {\n    this.isFullscreen_ = !!isFS;\n    return this;\n  }\n  return this.isFullscreen_;\n};\n\n/**\n * Old naming for isFullscreen()\n * @deprecated for lowercase 's' version\n */\nvjs.Player.prototype.isFullScreen = function(isFS){\n  vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase \"s\")');\n  return this.isFullscreen(isFS);\n};\n\n/**\n * Increase the size of the video to full screen\n *\n *     myPlayer.requestFullscreen();\n *\n * In some browsers, full screen is not supported natively, so it enters\n * \"full window mode\", where the video fills the browser window.\n * In browsers and devices that support native full screen, sometimes the\n * browser's default controls will be shown, and not the Video.js custom skin.\n * This includes most mobile devices (iOS, Android) and older versions of\n * Safari.\n *\n * @return {vjs.Player} self\n */\nvjs.Player.prototype.requestFullscreen = function(){\n  var fsApi = vjs.browser.fullscreenAPI;\n\n  this.isFullscreen(true);\n\n  if (fsApi) {\n    // the browser supports going fullscreen at the element level so we can\n    // take the controls fullscreen as well as the video\n\n    // Trigger fullscreenchange event after change\n    // We have to specifically add this each time, and remove\n    // when canceling fullscreen. Otherwise if there's multiple\n    // players on a page, they would all be reacting to the same fullscreen\n    // events\n    vjs.on(document, fsApi['fullscreenchange'], vjs.bind(this, function(e){\n      this.isFullscreen(document[fsApi.fullscreenElement]);\n\n      // If cancelling fullscreen, remove event listener.\n      if (this.isFullscreen() === false) {\n        vjs.off(document, fsApi['fullscreenchange'], arguments.callee);\n      }\n\n      this.trigger('fullscreenchange');\n    }));\n\n    this.el_[fsApi.requestFullscreen]();\n\n  } else if (this.tech.supportsFullScreen()) {\n    // we can't take the video.js controls fullscreen but we can go fullscreen\n    // with native controls\n    this.techCall('enterFullScreen');\n  } else {\n    // fullscreen isn't supported so we'll just stretch the video element to\n    // fill the viewport\n    this.enterFullWindow();\n    this.trigger('fullscreenchange');\n  }\n\n  return this;\n};\n\n/**\n * Old naming for requestFullscreen\n * @deprecated for lower case 's' version\n */\nvjs.Player.prototype.requestFullScreen = function(){\n  vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase \"s\")');\n  return this.requestFullscreen();\n};\n\n\n/**\n * Return the video to its normal size after having been in full screen mode\n *\n *     myPlayer.exitFullscreen();\n *\n * @return {vjs.Player} self\n */\nvjs.Player.prototype.exitFullscreen = function(){\n  var fsApi = vjs.browser.fullscreenAPI;\n  this.isFullscreen(false);\n\n  // Check for browser element fullscreen support\n  if (fsApi) {\n    document[fsApi.exitFullscreen]();\n  } else if (this.tech.supportsFullScreen()) {\n   this.techCall('exitFullScreen');\n  } else {\n   this.exitFullWindow();\n   this.trigger('fullscreenchange');\n  }\n\n  return this;\n};\n\n/**\n * Old naming for exitFullscreen\n * @deprecated for exitFullscreen\n */\nvjs.Player.prototype.cancelFullScreen = function(){\n  vjs.log.warn('player.cancelFullScreen() has been deprecated, use player.exitFullscreen()');\n  return this.exitFullscreen();\n};\n\n// When fullscreen isn't supported we can stretch the video container to as wide as the browser will let us.\nvjs.Player.prototype.enterFullWindow = function(){\n  this.isFullWindow = true;\n\n  // Storing original doc overflow value to return to when fullscreen is off\n  this.docOrigOverflow = document.documentElement.style.overflow;\n\n  // Add listener for esc key to exit fullscreen\n  vjs.on(document, 'keydown', vjs.bind(this, this.fullWindowOnEscKey));\n\n  // Hide any scroll bars\n  document.documentElement.style.overflow = 'hidden';\n\n  // Apply fullscreen styles\n  vjs.addClass(document.body, 'vjs-full-window');\n\n  this.trigger('enterFullWindow');\n};\nvjs.Player.prototype.fullWindowOnEscKey = function(event){\n  if (event.keyCode === 27) {\n    if (this.isFullscreen() === true) {\n      this.exitFullscreen();\n    } else {\n      this.exitFullWindow();\n    }\n  }\n};\n\nvjs.Player.prototype.exitFullWindow = function(){\n  this.isFullWindow = false;\n  vjs.off(document, 'keydown', this.fullWindowOnEscKey);\n\n  // Unhide scroll bars.\n  document.documentElement.style.overflow = this.docOrigOverflow;\n\n  // Remove fullscreen styles\n  vjs.removeClass(document.body, 'vjs-full-window');\n\n  // Resize the box, controller, and poster to original sizes\n  // this.positionAll();\n  this.trigger('exitFullWindow');\n};\n\nvjs.Player.prototype.selectSource = function(sources){\n  // Loop through each playback technology in the options order\n  for (var i=0,j=this.options_['techOrder'];i<j.length;i++) {\n    var techName = vjs.capitalize(j[i]),\n        tech = window['videojs'][techName];\n\n    // Check if the current tech is defined before continuing\n    if (!tech) {\n      vjs.log.error('The \"' + techName + '\" tech is undefined. Skipped browser support check for that tech.');\n      continue;\n    }\n\n    // Check if the browser supports this technology\n    if (tech.isSupported()) {\n      // Loop through each source object\n      for (var a=0,b=sources;a<b.length;a++) {\n        var source = b[a];\n\n        // Check if source can be played with this technology\n        if (tech['canPlaySource'](source)) {\n          return { source: source, tech: techName };\n        }\n      }\n    }\n  }\n\n  return false;\n};\n\n/**\n * The source function updates the video source\n *\n * There are three types of variables you can pass as the argument.\n *\n * **URL String**: A URL to the the video file. Use this method if you are sure\n * the current playback technology (HTML5/Flash) can support the source you\n * provide. Currently only MP4 files can be used in both HTML5 and Flash.\n *\n *     myPlayer.src(\"http://www.example.com/path/to/video.mp4\");\n *\n * **Source Object (or element):** A javascript object containing information\n * about the source file. Use this method if you want the player to determine if\n * it can support the file using the type information.\n *\n *     myPlayer.src({ type: \"video/mp4\", src: \"http://www.example.com/path/to/video.mp4\" });\n *\n * **Array of Source Objects:** To provide multiple versions of the source so\n * that it can be played using HTML5 across browsers you can use an array of\n * source objects. Video.js will detect which version is supported and load that\n * file.\n *\n *     myPlayer.src([\n *       { type: \"video/mp4\", src: \"http://www.example.com/path/to/video.mp4\" },\n *       { type: \"video/webm\", src: \"http://www.example.com/path/to/video.webm\" },\n *       { type: \"video/ogg\", src: \"http://www.example.com/path/to/video.ogv\" }\n *     ]);\n *\n * @param  {String|Object|Array=} source The source URL, object, or array of sources\n * @return {String} The current video source when getting\n * @return {String} The player when setting\n */\nvjs.Player.prototype.src = function(source){\n  if (source === undefined) {\n    return this.techGet('src');\n  }\n\n  // case: Array of source objects to choose from and pick the best to play\n  if (vjs.obj.isArray(source)) {\n    this.sourceList_(source);\n\n  // case: URL String (http://myvideo...)\n  } else if (typeof source === 'string') {\n    // create a source object from the string\n    this.src({ src: source });\n\n  // case: Source object { src: '', type: '' ... }\n  } else if (source instanceof Object) {\n    // check if the source has a type and the loaded tech cannot play the source\n    // if there's no type we'll just try the current tech\n    if (source.type && !window['videojs'][this.techName]['canPlaySource'](source)) {\n      // create a source list with the current source and send through\n      // the tech loop to check for a compatible technology\n      this.sourceList_([source]);\n    } else {\n      this.cache_.src = source.src;\n      this.currentType_ = source.type || '';\n\n      // wait until the tech is ready to set the source\n      this.ready(function(){\n\n        // The setSource tech method was added with source handlers\n        // so older techs won't support it\n        // We need to check the direct prototype for the case where subclasses\n        // of the tech do not support source handlers\n        if (window['videojs'][this.techName].prototype.hasOwnProperty('setSource')) {\n          this.techCall('setSource', source);\n        } else {\n          this.techCall('src', source.src);\n        }\n\n        if (this.options_['preload'] == 'auto') {\n          this.load();\n        }\n\n        if (this.options_['autoplay']) {\n          this.play();\n        }\n      });\n    }\n  }\n\n  return this;\n};\n\n/**\n * Handle an array of source objects\n * @param  {[type]} sources Array of source objects\n * @private\n */\nvjs.Player.prototype.sourceList_ = function(sources){\n  var sourceTech = this.selectSource(sources);\n\n  if (sourceTech) {\n    if (sourceTech.tech === this.techName) {\n      // if this technology is already loaded, set the source\n      this.src(sourceTech.source);\n    } else {\n      // load this technology with the chosen source\n      this.loadTech(sourceTech.tech, sourceTech.source);\n    }\n  } else {\n    // We need to wrap this in a timeout to give folks a chance to add error event handlers\n    this.setTimeout( function() {\n      this.error({ code: 4, message: this.localize(this.options()['notSupportedMessage']) });\n    }, 0);\n\n    // we could not find an appropriate tech, but let's still notify the delegate that this is it\n    // this needs a better comment about why this is needed\n    this.triggerReady();\n  }\n};\n\n/**\n * Begin loading the src data.\n * @return {vjs.Player} Returns the player\n */\nvjs.Player.prototype.load = function(){\n  this.techCall('load');\n  return this;\n};\n\n/**\n * Returns the fully qualified URL of the current source value e.g. http://mysite.com/video.mp4\n * Can be used in conjuction with `currentType` to assist in rebuilding the current source object.\n * @return {String} The current source\n */\nvjs.Player.prototype.currentSrc = function(){\n  return this.techGet('currentSrc') || this.cache_.src || '';\n};\n\n/**\n * Get the current source type e.g. video/mp4\n * This can allow you rebuild the current source object so that you could load the same\n * source and tech later\n * @return {String} The source MIME type\n */\nvjs.Player.prototype.currentType = function(){\n    return this.currentType_ || '';\n};\n\n/**\n * Get or set the preload attribute.\n * @return {String} The preload attribute value when getting\n * @return {vjs.Player} Returns the player when setting\n */\nvjs.Player.prototype.preload = function(value){\n  if (value !== undefined) {\n    this.techCall('setPreload', value);\n    this.options_['preload'] = value;\n    return this;\n  }\n  return this.techGet('preload');\n};\n\n/**\n * Get or set the autoplay attribute.\n * @return {String} The autoplay attribute value when getting\n * @return {vjs.Player} Returns the player when setting\n */\nvjs.Player.prototype.autoplay = function(value){\n  if (value !== undefined) {\n    this.techCall('setAutoplay', value);\n    this.options_['autoplay'] = value;\n    return this;\n  }\n  return this.techGet('autoplay', value);\n};\n\n/**\n * Get or set the loop attribute on the video element.\n * @return {String} The loop attribute value when getting\n * @return {vjs.Player} Returns the player when setting\n */\nvjs.Player.prototype.loop = function(value){\n  if (value !== undefined) {\n    this.techCall('setLoop', value);\n    this.options_['loop'] = value;\n    return this;\n  }\n  return this.techGet('loop');\n};\n\n/**\n * the url of the poster image source\n * @type {String}\n * @private\n */\nvjs.Player.prototype.poster_;\n\n/**\n * get or set the poster image source url\n *\n * ##### EXAMPLE:\n *\n *     // getting\n *     var currentPoster = myPlayer.poster();\n *\n *     // setting\n *     myPlayer.poster('http://example.com/myImage.jpg');\n *\n * @param  {String=} [src] Poster image source URL\n * @return {String} poster URL when getting\n * @return {vjs.Player} self when setting\n */\nvjs.Player.prototype.poster = function(src){\n  if (src === undefined) {\n    return this.poster_;\n  }\n\n  // The correct way to remove a poster is to set as an empty string\n  // other falsey values will throw errors\n  if (!src) {\n    src = '';\n  }\n\n  // update the internal poster variable\n  this.poster_ = src;\n\n  // update the tech's poster\n  this.techCall('setPoster', src);\n\n  // alert components that the poster has been set\n  this.trigger('posterchange');\n\n  return this;\n};\n\n/**\n * Whether or not the controls are showing\n * @type {Boolean}\n * @private\n */\nvjs.Player.prototype.controls_;\n\n/**\n * Get or set whether or not the controls are showing.\n * @param  {Boolean} controls Set controls to showing or not\n * @return {Boolean}    Controls are showing\n */\nvjs.Player.prototype.controls = function(bool){\n  if (bool !== undefined) {\n    bool = !!bool; // force boolean\n    // Don't trigger a change event unless it actually changed\n    if (this.controls_ !== bool) {\n      this.controls_ = bool;\n      if (bool) {\n        this.removeClass('vjs-controls-disabled');\n        this.addClass('vjs-controls-enabled');\n        this.trigger('controlsenabled');\n      } else {\n        this.removeClass('vjs-controls-enabled');\n        this.addClass('vjs-controls-disabled');\n        this.trigger('controlsdisabled');\n      }\n    }\n    return this;\n  }\n  return this.controls_;\n};\n\nvjs.Player.prototype.usingNativeControls_;\n\n/**\n * Toggle native controls on/off. Native controls are the controls built into\n * devices (e.g. default iPhone controls), Flash, or other techs\n * (e.g. Vimeo Controls)\n *\n * **This should only be set by the current tech, because only the tech knows\n * if it can support native controls**\n *\n * @param  {Boolean} bool    True signals that native controls are on\n * @return {vjs.Player}      Returns the player\n * @private\n */\nvjs.Player.prototype.usingNativeControls = function(bool){\n  if (bool !== undefined) {\n    bool = !!bool; // force boolean\n    // Don't trigger a change event unless it actually changed\n    if (this.usingNativeControls_ !== bool) {\n      this.usingNativeControls_ = bool;\n      if (bool) {\n        this.addClass('vjs-using-native-controls');\n\n        /**\n         * player is using the native device controls\n         *\n         * @event usingnativecontrols\n         * @memberof vjs.Player\n         * @instance\n         * @private\n         */\n        this.trigger('usingnativecontrols');\n      } else {\n        this.removeClass('vjs-using-native-controls');\n\n        /**\n         * player is using the custom HTML controls\n         *\n         * @event usingcustomcontrols\n         * @memberof vjs.Player\n         * @instance\n         * @private\n         */\n        this.trigger('usingcustomcontrols');\n      }\n    }\n    return this;\n  }\n  return this.usingNativeControls_;\n};\n\n/**\n * Store the current media error\n * @type {Object}\n * @private\n */\nvjs.Player.prototype.error_ = null;\n\n/**\n * Set or get the current MediaError\n * @param  {*} err A MediaError or a String/Number to be turned into a MediaError\n * @return {vjs.MediaError|null}     when getting\n * @return {vjs.Player}              when setting\n */\nvjs.Player.prototype.error = function(err){\n  if (err === undefined) {\n    return this.error_;\n  }\n\n  // restoring to default\n  if (err === null) {\n    this.error_ = err;\n    this.removeClass('vjs-error');\n    return this;\n  }\n\n  // error instance\n  if (err instanceof vjs.MediaError) {\n    this.error_ = err;\n  } else {\n    this.error_ = new vjs.MediaError(err);\n  }\n\n  // fire an error event on the player\n  this.trigger('error');\n\n  // add the vjs-error classname to the player\n  this.addClass('vjs-error');\n\n  // log the name of the error type and any message\n  // ie8 just logs \"[object object]\" if you just log the error object\n  vjs.log.error('(CODE:'+this.error_.code+' '+vjs.MediaError.errorTypes[this.error_.code]+')', this.error_.message, this.error_);\n\n  return this;\n};\n\n/**\n * Returns whether or not the player is in the \"ended\" state.\n * @return {Boolean} True if the player is in the ended state, false if not.\n */\nvjs.Player.prototype.ended = function(){ return this.techGet('ended'); };\n\n/**\n * Returns whether or not the player is in the \"seeking\" state.\n * @return {Boolean} True if the player is in the seeking state, false if not.\n */\nvjs.Player.prototype.seeking = function(){ return this.techGet('seeking'); };\n\n// When the player is first initialized, trigger activity so components\n// like the control bar show themselves if needed\nvjs.Player.prototype.userActivity_ = true;\nvjs.Player.prototype.reportUserActivity = function(event){\n  this.userActivity_ = true;\n};\n\nvjs.Player.prototype.userActive_ = true;\nvjs.Player.prototype.userActive = function(bool){\n  if (bool !== undefined) {\n    bool = !!bool;\n    if (bool !== this.userActive_) {\n      this.userActive_ = bool;\n      if (bool) {\n        // If the user was inactive and is now active we want to reset the\n        // inactivity timer\n        this.userActivity_ = true;\n        this.removeClass('vjs-user-inactive');\n        this.addClass('vjs-user-active');\n        this.trigger('useractive');\n      } else {\n        // We're switching the state to inactive manually, so erase any other\n        // activity\n        this.userActivity_ = false;\n\n        // Chrome/Safari/IE have bugs where when you change the cursor it can\n        // trigger a mousemove event. This causes an issue when you're hiding\n        // the cursor when the user is inactive, and a mousemove signals user\n        // activity. Making it impossible to go into inactive mode. Specifically\n        // this happens in fullscreen when we really need to hide the cursor.\n        //\n        // When this gets resolved in ALL browsers it can be removed\n        // https://code.google.com/p/chromium/issues/detail?id=103041\n        if(this.tech) {\n          this.tech.one('mousemove', function(e){\n            e.stopPropagation();\n            e.preventDefault();\n          });\n        }\n\n        this.removeClass('vjs-user-active');\n        this.addClass('vjs-user-inactive');\n        this.trigger('userinactive');\n      }\n    }\n    return this;\n  }\n  return this.userActive_;\n};\n\nvjs.Player.prototype.listenForUserActivity = function(){\n  var onActivity, onMouseMove, onMouseDown, mouseInProgress, onMouseUp,\n      activityCheck, inactivityTimeout, lastMoveX, lastMoveY;\n\n  onActivity = vjs.bind(this, this.reportUserActivity);\n\n  onMouseMove = function(e) {\n    // #1068 - Prevent mousemove spamming\n    // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970\n    if(e.screenX != lastMoveX || e.screenY != lastMoveY) {\n      lastMoveX = e.screenX;\n      lastMoveY = e.screenY;\n      onActivity();\n    }\n  };\n\n  onMouseDown = function() {\n    onActivity();\n    // For as long as the they are touching the device or have their mouse down,\n    // we consider them active even if they're not moving their finger or mouse.\n    // So we want to continue to update that they are active\n    this.clearInterval(mouseInProgress);\n    // Setting userActivity=true now and setting the interval to the same time\n    // as the activityCheck interval (250) should ensure we never miss the\n    // next activityCheck\n    mouseInProgress = this.setInterval(onActivity, 250);\n  };\n\n  onMouseUp = function(event) {\n    onActivity();\n    // Stop the interval that maintains activity if the mouse/touch is down\n    this.clearInterval(mouseInProgress);\n  };\n\n  // Any mouse movement will be considered user activity\n  this.on('mousedown', onMouseDown);\n  this.on('mousemove', onMouseMove);\n  this.on('mouseup', onMouseUp);\n\n  // Listen for keyboard navigation\n  // Shouldn't need to use inProgress interval because of key repeat\n  this.on('keydown', onActivity);\n  this.on('keyup', onActivity);\n\n  // Run an interval every 250 milliseconds instead of stuffing everything into\n  // the mousemove/touchmove function itself, to prevent performance degradation.\n  // `this.reportUserActivity` simply sets this.userActivity_ to true, which\n  // then gets picked up by this loop\n  // http://ejohn.org/blog/learning-from-twitter/\n  activityCheck = this.setInterval(function() {\n    // Check to see if mouse/touch activity has happened\n    if (this.userActivity_) {\n      // Reset the activity tracker\n      this.userActivity_ = false;\n\n      // If the user state was inactive, set the state to active\n      this.userActive(true);\n\n      // Clear any existing inactivity timeout to start the timer over\n      this.clearTimeout(inactivityTimeout);\n\n      var timeout = this.options()['inactivityTimeout'];\n      if (timeout > 0) {\n          // In <timeout> milliseconds, if no more activity has occurred the\n          // user will be considered inactive\n          inactivityTimeout = this.setTimeout(function () {\n              // Protect against the case where the inactivityTimeout can trigger just\n              // before the next user activity is picked up by the activityCheck loop\n              // causing a flicker\n              if (!this.userActivity_) {\n                  this.userActive(false);\n              }\n          }, timeout);\n      }\n    }\n  }, 250);\n};\n\n/**\n * Gets or sets the current playback rate.\n * @param  {Boolean} rate   New playback rate to set.\n * @return {Number}         Returns the new playback rate when setting\n * @return {Number}         Returns the current playback rate when getting\n */\nvjs.Player.prototype.playbackRate = function(rate) {\n  if (rate !== undefined) {\n    this.techCall('setPlaybackRate', rate);\n    return this;\n  }\n\n  if (this.tech && this.tech['featuresPlaybackRate']) {\n    return this.techGet('playbackRate');\n  } else {\n    return 1.0;\n  }\n\n};\n\n/**\n * Store the current audio state\n * @type {Boolean}\n * @private\n */\nvjs.Player.prototype.isAudio_ = false;\n\n/**\n * Gets or sets the audio flag\n *\n * @param  {Boolean} bool    True signals that this is an audio player.\n * @return {Boolean}         Returns true if player is audio, false if not when getting\n * @return {vjs.Player}      Returns the player if setting\n * @private\n */\nvjs.Player.prototype.isAudio = function(bool) {\n  if (bool !== undefined) {\n    this.isAudio_ = !!bool;\n    return this;\n  }\n\n  return this.isAudio_;\n};\n\n/**\n * Returns the current state of network activity for the element, from\n * the codes in the list below.\n * - NETWORK_EMPTY (numeric value 0)\n *   The element has not yet been initialised. All attributes are in\n *   their initial states.\n * - NETWORK_IDLE (numeric value 1)\n *   The element's resource selection algorithm is active and has\n *   selected a resource, but it is not actually using the network at\n *   this time.\n * - NETWORK_LOADING (numeric value 2)\n *   The user agent is actively trying to download data.\n * - NETWORK_NO_SOURCE (numeric value 3)\n *   The element's resource selection algorithm is active, but it has\n *   not yet found a resource to use.\n * @return {Number} the current network activity state\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states\n */\nvjs.Player.prototype.networkState = function(){\n  return this.techGet('networkState');\n};\n\n/**\n * Returns a value that expresses the current state of the element\n * with respect to rendering the current playback position, from the\n * codes in the list below.\n * - HAVE_NOTHING (numeric value 0)\n *   No information regarding the media resource is available.\n * - HAVE_METADATA (numeric value 1)\n *   Enough of the resource has been obtained that the duration of the\n *   resource is available.\n * - HAVE_CURRENT_DATA (numeric value 2)\n *   Data for the immediate current playback position is available.\n * - HAVE_FUTURE_DATA (numeric value 3)\n *   Data for the immediate current playback position is available, as\n *   well as enough data for the user agent to advance the current\n *   playback position in the direction of playback.\n * - HAVE_ENOUGH_DATA (numeric value 4)\n *   The user agent estimates that enough data is available for\n *   playback to proceed uninterrupted.\n * @return {Number} the current playback rendering state\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate\n */\nvjs.Player.prototype.readyState = function(){\n  return this.techGet('readyState');\n};\n\n/**\n * Text tracks are tracks of timed text events.\n * Captions - text displayed over the video for the hearing impaired\n * Subtitles - text displayed over the video for those who don't understand language in the video\n * Chapters - text displayed in a menu allowing the user to jump to particular points (chapters) in the video\n * Descriptions (not supported yet) - audio descriptions that are read back to the user by a screen reading device\n */\n\n/**\n * Get an array of associated text tracks. captions, subtitles, chapters, descriptions\n * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks\n * @return {Array}           Array of track objects\n */\nvjs.Player.prototype.textTracks = function(){\n  // cannot use techGet directly because it checks to see whether the tech is ready.\n  // Flash is unlikely to be ready in time but textTracks should still work.\n  return this.tech && this.tech['textTracks']();\n};\n\nvjs.Player.prototype.remoteTextTracks = function() {\n  return this.tech && this.tech['remoteTextTracks']();\n};\n\n/**\n * Add a text track\n * In addition to the W3C settings we allow adding additional info through options.\n * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack\n * @param {String}  kind        Captions, subtitles, chapters, descriptions, or metadata\n * @param {String=} label       Optional label\n * @param {String=} language    Optional language\n */\nvjs.Player.prototype.addTextTrack = function(kind, label, language) {\n  return this.tech && this.tech['addTextTrack'](kind, label, language);\n};\n\nvjs.Player.prototype.addRemoteTextTrack = function(options) {\n  return this.tech && this.tech['addRemoteTextTrack'](options);\n};\n\nvjs.Player.prototype.removeRemoteTextTrack = function(track) {\n  this.tech && this.tech['removeRemoteTextTrack'](track);\n};\n\n// Methods to add support for\n// initialTime: function(){ return this.techCall('initialTime'); },\n// startOffsetTime: function(){ return this.techCall('startOffsetTime'); },\n// played: function(){ return this.techCall('played'); },\n// seekable: function(){ return this.techCall('seekable'); },\n// videoTracks: function(){ return this.techCall('videoTracks'); },\n// audioTracks: function(){ return this.techCall('audioTracks'); },\n// videoWidth: function(){ return this.techCall('videoWidth'); },\n// videoHeight: function(){ return this.techCall('videoHeight'); },\n// defaultPlaybackRate: function(){ return this.techCall('defaultPlaybackRate'); },\n// mediaGroup: function(){ return this.techCall('mediaGroup'); },\n// controller: function(){ return this.techCall('controller'); },\n// defaultMuted: function(){ return this.techCall('defaultMuted'); }\n\n// TODO\n// currentSrcList: the array of sources including other formats and bitrates\n// playList: array of source lists in order of playback\n/**\n * Container of main controls\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n * @extends vjs.Component\n */\nvjs.ControlBar = vjs.Component.extend();\n\nvjs.ControlBar.prototype.options_ = {\n  loadEvent: 'play',\n  children: {\n    'playToggle': {},\n    'currentTimeDisplay': {},\n    'timeDivider': {},\n    'durationDisplay': {},\n    'remainingTimeDisplay': {},\n    'liveDisplay': {},\n    'progressControl': {},\n    'fullscreenToggle': {},\n    'volumeControl': {},\n    'muteToggle': {},\n    // 'volumeMenuButton': {},\n    'playbackRateMenuButton': {},\n    'subtitlesButton': {},\n    'captionsButton': {},\n    'chaptersButton': {}\n  }\n};\n\nvjs.ControlBar.prototype.createEl = function(){\n  return vjs.createEl('div', {\n    className: 'vjs-control-bar'\n  });\n};\n/**\n * Displays the live indicator\n * TODO - Future make it click to snap to live\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.LiveDisplay = vjs.Component.extend({\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n  }\n});\n\nvjs.LiveDisplay.prototype.createEl = function(){\n  var el = vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-live-controls vjs-control'\n  });\n\n  this.contentEl_ = vjs.createEl('div', {\n    className: 'vjs-live-display',\n    innerHTML: '<span class=\"vjs-control-text\">' + this.localize('Stream Type') + '</span>' + this.localize('LIVE'),\n    'aria-live': 'off'\n  });\n\n  el.appendChild(this.contentEl_);\n\n  return el;\n};\n/**\n * Button to toggle between play and pause\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n */\nvjs.PlayToggle = vjs.Button.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Button.call(this, player, options);\n\n    this.on(player, 'play', this.onPlay);\n    this.on(player, 'pause', this.onPause);\n  }\n});\n\nvjs.PlayToggle.prototype.buttonText = 'Play';\n\nvjs.PlayToggle.prototype.buildCSSClass = function(){\n  return 'vjs-play-control ' + vjs.Button.prototype.buildCSSClass.call(this);\n};\n\n// OnClick - Toggle between play and pause\nvjs.PlayToggle.prototype.onClick = function(){\n  if (this.player_.paused()) {\n    this.player_.play();\n  } else {\n    this.player_.pause();\n  }\n};\n\n  // OnPlay - Add the vjs-playing class to the element so it can change appearance\nvjs.PlayToggle.prototype.onPlay = function(){\n  this.removeClass('vjs-paused');\n  this.addClass('vjs-playing');\n  this.el_.children[0].children[0].innerHTML = this.localize('Pause'); // change the button text to \"Pause\"\n};\n\n  // OnPause - Add the vjs-paused class to the element so it can change appearance\nvjs.PlayToggle.prototype.onPause = function(){\n  this.removeClass('vjs-playing');\n  this.addClass('vjs-paused');\n  this.el_.children[0].children[0].innerHTML = this.localize('Play'); // change the button text to \"Play\"\n};\n/**\n * Displays the current time\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.CurrentTimeDisplay = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    this.on(player, 'timeupdate', this.updateContent);\n  }\n});\n\nvjs.CurrentTimeDisplay.prototype.createEl = function(){\n  var el = vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-current-time vjs-time-controls vjs-control'\n  });\n\n  this.contentEl_ = vjs.createEl('div', {\n    className: 'vjs-current-time-display',\n    innerHTML: '<span class=\"vjs-control-text\">Current Time </span>' + '0:00', // label the current time for screen reader users\n    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes\n  });\n\n  el.appendChild(this.contentEl_);\n  return el;\n};\n\nvjs.CurrentTimeDisplay.prototype.updateContent = function(){\n  // Allows for smooth scrubbing, when player can't keep up.\n  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();\n  this.contentEl_.innerHTML = '<span class=\"vjs-control-text\">' + this.localize('Current Time') + '</span> ' + vjs.formatTime(time, this.player_.duration());\n};\n\n/**\n * Displays the duration\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.DurationDisplay = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    // this might need to be changed to 'durationchange' instead of 'timeupdate' eventually,\n    // however the durationchange event fires before this.player_.duration() is set,\n    // so the value cannot be written out using this method.\n    // Once the order of durationchange and this.player_.duration() being set is figured out,\n    // this can be updated.\n    this.on(player, 'timeupdate', this.updateContent);\n  }\n});\n\nvjs.DurationDisplay.prototype.createEl = function(){\n  var el = vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-duration vjs-time-controls vjs-control'\n  });\n\n  this.contentEl_ = vjs.createEl('div', {\n    className: 'vjs-duration-display',\n    innerHTML: '<span class=\"vjs-control-text\">' + this.localize('Duration Time') + '</span> ' + '0:00', // label the duration time for screen reader users\n    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes\n  });\n\n  el.appendChild(this.contentEl_);\n  return el;\n};\n\nvjs.DurationDisplay.prototype.updateContent = function(){\n  var duration = this.player_.duration();\n  if (duration) {\n      this.contentEl_.innerHTML = '<span class=\"vjs-control-text\">' + this.localize('Duration Time') + '</span> ' + vjs.formatTime(duration); // label the duration time for screen reader users\n  }\n};\n\n/**\n * The separator between the current time and duration\n *\n * Can be hidden if it's not needed in the design.\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.TimeDivider = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n  }\n});\n\nvjs.TimeDivider.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-time-divider',\n    innerHTML: '<div><span>/</span></div>'\n  });\n};\n\n/**\n * Displays the time left in the video\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.RemainingTimeDisplay = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    this.on(player, 'timeupdate', this.updateContent);\n  }\n});\n\nvjs.RemainingTimeDisplay.prototype.createEl = function(){\n  var el = vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-remaining-time vjs-time-controls vjs-control'\n  });\n\n  this.contentEl_ = vjs.createEl('div', {\n    className: 'vjs-remaining-time-display',\n    innerHTML: '<span class=\"vjs-control-text\">' + this.localize('Remaining Time') + '</span> ' + '-0:00', // label the remaining time for screen reader users\n    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes\n  });\n\n  el.appendChild(this.contentEl_);\n  return el;\n};\n\nvjs.RemainingTimeDisplay.prototype.updateContent = function(){\n  if (this.player_.duration()) {\n    this.contentEl_.innerHTML = '<span class=\"vjs-control-text\">' + this.localize('Remaining Time') + '</span> ' + '-'+ vjs.formatTime(this.player_.remainingTime());\n  }\n\n  // Allows for smooth scrubbing, when player can't keep up.\n  // var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();\n  // this.contentEl_.innerHTML = vjs.formatTime(time, this.player_.duration());\n};\n/**\n * Toggle fullscreen video\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @extends vjs.Button\n */\nvjs.FullscreenToggle = vjs.Button.extend({\n  /**\n   * @constructor\n   * @memberof vjs.FullscreenToggle\n   * @instance\n   */\n  init: function(player, options){\n    vjs.Button.call(this, player, options);\n  }\n});\n\nvjs.FullscreenToggle.prototype.buttonText = 'Fullscreen';\n\nvjs.FullscreenToggle.prototype.buildCSSClass = function(){\n  return 'vjs-fullscreen-control ' + vjs.Button.prototype.buildCSSClass.call(this);\n};\n\nvjs.FullscreenToggle.prototype.onClick = function(){\n  if (!this.player_.isFullscreen()) {\n    this.player_.requestFullscreen();\n    this.controlText_.innerHTML = this.localize('Non-Fullscreen');\n  } else {\n    this.player_.exitFullscreen();\n    this.controlText_.innerHTML = this.localize('Fullscreen');\n  }\n};\n/**\n * The Progress Control component contains the seek bar, load progress,\n * and play progress\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.ProgressControl = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n  }\n});\n\nvjs.ProgressControl.prototype.options_ = {\n  children: {\n    'seekBar': {}\n  }\n};\n\nvjs.ProgressControl.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-progress-control vjs-control'\n  });\n};\n\n/**\n * Seek Bar and holder for the progress bars\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.SeekBar = vjs.Slider.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Slider.call(this, player, options);\n    this.on(player, 'timeupdate', this.updateARIAAttributes);\n    player.ready(vjs.bind(this, this.updateARIAAttributes));\n  }\n});\n\nvjs.SeekBar.prototype.options_ = {\n  children: {\n    'loadProgressBar': {},\n    'playProgressBar': {},\n    'seekHandle': {}\n  },\n  'barName': 'playProgressBar',\n  'handleName': 'seekHandle'\n};\n\nvjs.SeekBar.prototype.playerEvent = 'timeupdate';\n\nvjs.SeekBar.prototype.createEl = function(){\n  return vjs.Slider.prototype.createEl.call(this, 'div', {\n    className: 'vjs-progress-holder',\n    'aria-label': 'video progress bar'\n  });\n};\n\nvjs.SeekBar.prototype.updateARIAAttributes = function(){\n    // Allows for smooth scrubbing, when player can't keep up.\n    var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();\n    this.el_.setAttribute('aria-valuenow',vjs.round(this.getPercent()*100, 2)); // machine readable value of progress bar (percentage complete)\n    this.el_.setAttribute('aria-valuetext',vjs.formatTime(time, this.player_.duration())); // human readable value of progress bar (time complete)\n};\n\nvjs.SeekBar.prototype.getPercent = function(){\n  return this.player_.currentTime() / this.player_.duration();\n};\n\nvjs.SeekBar.prototype.onMouseDown = function(event){\n  vjs.Slider.prototype.onMouseDown.call(this, event);\n\n  this.player_.scrubbing = true;\n  this.player_.addClass('vjs-scrubbing');\n\n  this.videoWasPlaying = !this.player_.paused();\n  this.player_.pause();\n};\n\nvjs.SeekBar.prototype.onMouseMove = function(event){\n  var newTime = this.calculateDistance(event) * this.player_.duration();\n\n  // Don't let video end while scrubbing.\n  if (newTime == this.player_.duration()) { newTime = newTime - 0.1; }\n\n  // Set new time (tell player to seek to new time)\n  this.player_.currentTime(newTime);\n};\n\nvjs.SeekBar.prototype.onMouseUp = function(event){\n  vjs.Slider.prototype.onMouseUp.call(this, event);\n\n  this.player_.scrubbing = false;\n  this.player_.removeClass('vjs-scrubbing');\n  if (this.videoWasPlaying) {\n    this.player_.play();\n  }\n};\n\nvjs.SeekBar.prototype.stepForward = function(){\n  this.player_.currentTime(this.player_.currentTime() + 5); // more quickly fast forward for keyboard-only users\n};\n\nvjs.SeekBar.prototype.stepBack = function(){\n  this.player_.currentTime(this.player_.currentTime() - 5); // more quickly rewind for keyboard-only users\n};\n\n/**\n * Shows load progress\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.LoadProgressBar = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n    this.on(player, 'progress', this.update);\n  }\n});\n\nvjs.LoadProgressBar.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-load-progress',\n    innerHTML: '<span class=\"vjs-control-text\"><span>' + this.localize('Loaded') + '</span>: 0%</span>'\n  });\n};\n\nvjs.LoadProgressBar.prototype.update = function(){\n  var i, start, end, part,\n      buffered = this.player_.buffered(),\n      duration = this.player_.duration(),\n      bufferedEnd = this.player_.bufferedEnd(),\n      children = this.el_.children,\n      // get the percent width of a time compared to the total end\n      percentify = function (time, end){\n        var percent = (time / end) || 0; // no NaN\n        return (percent * 100) + '%';\n      };\n\n  // update the width of the progress bar\n  this.el_.style.width = percentify(bufferedEnd, duration);\n\n  // add child elements to represent the individual buffered time ranges\n  for (i = 0; i < buffered.length; i++) {\n    start = buffered.start(i),\n    end = buffered.end(i),\n    part = children[i];\n\n    if (!part) {\n      part = this.el_.appendChild(vjs.createEl());\n    }\n\n    // set the percent based on the width of the progress bar (bufferedEnd)\n    part.style.left = percentify(start, bufferedEnd);\n    part.style.width = percentify(end - start, bufferedEnd);\n  }\n\n  // remove unused buffered range elements\n  for (i = children.length; i > buffered.length; i--) {\n    this.el_.removeChild(children[i-1]);\n  }\n};\n\n/**\n * Shows play progress\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.PlayProgressBar = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n  }\n});\n\nvjs.PlayProgressBar.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-play-progress',\n    innerHTML: '<span class=\"vjs-control-text\"><span>' + this.localize('Progress') + '</span>: 0%</span>'\n  });\n};\n\n/**\n * The Seek Handle shows the current position of the playhead during playback,\n * and can be dragged to adjust the playhead.\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.SeekHandle = vjs.SliderHandle.extend({\n  init: function(player, options) {\n    vjs.SliderHandle.call(this, player, options);\n    this.on(player, 'timeupdate', this.updateContent);\n  }\n});\n\n/**\n * The default value for the handle content, which may be read by screen readers\n *\n * @type {String}\n * @private\n */\nvjs.SeekHandle.prototype.defaultValue = '00:00';\n\n/** @inheritDoc */\nvjs.SeekHandle.prototype.createEl = function() {\n  return vjs.SliderHandle.prototype.createEl.call(this, 'div', {\n    className: 'vjs-seek-handle',\n    'aria-live': 'off'\n  });\n};\n\nvjs.SeekHandle.prototype.updateContent = function() {\n  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();\n  this.el_.innerHTML = '<span class=\"vjs-control-text\">' + vjs.formatTime(time, this.player_.duration()) + '</span>';\n};\n/**\n * The component for controlling the volume level\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.VolumeControl = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    // hide volume controls when they're not supported by the current tech\n    if (player.tech && player.tech['featuresVolumeControl'] === false) {\n      this.addClass('vjs-hidden');\n    }\n    this.on(player, 'loadstart', function(){\n      if (player.tech['featuresVolumeControl'] === false) {\n        this.addClass('vjs-hidden');\n      } else {\n        this.removeClass('vjs-hidden');\n      }\n    });\n  }\n});\n\nvjs.VolumeControl.prototype.options_ = {\n  children: {\n    'volumeBar': {}\n  }\n};\n\nvjs.VolumeControl.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-volume-control vjs-control'\n  });\n};\n\n/**\n * The bar that contains the volume level and can be clicked on to adjust the level\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.VolumeBar = vjs.Slider.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Slider.call(this, player, options);\n    this.on(player, 'volumechange', this.updateARIAAttributes);\n    player.ready(vjs.bind(this, this.updateARIAAttributes));\n  }\n});\n\nvjs.VolumeBar.prototype.updateARIAAttributes = function(){\n  // Current value of volume bar as a percentage\n  this.el_.setAttribute('aria-valuenow',vjs.round(this.player_.volume()*100, 2));\n  this.el_.setAttribute('aria-valuetext',vjs.round(this.player_.volume()*100, 2)+'%');\n};\n\nvjs.VolumeBar.prototype.options_ = {\n  children: {\n    'volumeLevel': {},\n    'volumeHandle': {}\n  },\n  'barName': 'volumeLevel',\n  'handleName': 'volumeHandle'\n};\n\nvjs.VolumeBar.prototype.playerEvent = 'volumechange';\n\nvjs.VolumeBar.prototype.createEl = function(){\n  return vjs.Slider.prototype.createEl.call(this, 'div', {\n    className: 'vjs-volume-bar',\n    'aria-label': 'volume level'\n  });\n};\n\nvjs.VolumeBar.prototype.onMouseMove = function(event) {\n  if (this.player_.muted()) {\n    this.player_.muted(false);\n  }\n\n  this.player_.volume(this.calculateDistance(event));\n};\n\nvjs.VolumeBar.prototype.getPercent = function(){\n  if (this.player_.muted()) {\n    return 0;\n  } else {\n    return this.player_.volume();\n  }\n};\n\nvjs.VolumeBar.prototype.stepForward = function(){\n  this.player_.volume(this.player_.volume() + 0.1);\n};\n\nvjs.VolumeBar.prototype.stepBack = function(){\n  this.player_.volume(this.player_.volume() - 0.1);\n};\n\n/**\n * Shows volume level\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.VolumeLevel = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n  }\n});\n\nvjs.VolumeLevel.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-volume-level',\n    innerHTML: '<span class=\"vjs-control-text\"></span>'\n  });\n};\n\n/**\n * The volume handle can be dragged to adjust the volume level\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\n vjs.VolumeHandle = vjs.SliderHandle.extend();\n\n vjs.VolumeHandle.prototype.defaultValue = '00:00';\n\n /** @inheritDoc */\n vjs.VolumeHandle.prototype.createEl = function(){\n   return vjs.SliderHandle.prototype.createEl.call(this, 'div', {\n     className: 'vjs-volume-handle'\n   });\n };\n/**\n * A button component for muting the audio\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.MuteToggle = vjs.Button.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Button.call(this, player, options);\n\n    this.on(player, 'volumechange', this.update);\n\n    // hide mute toggle if the current tech doesn't support volume control\n    if (player.tech && player.tech['featuresVolumeControl'] === false) {\n      this.addClass('vjs-hidden');\n    }\n\n    this.on(player, 'loadstart', function(){\n      if (player.tech['featuresVolumeControl'] === false) {\n        this.addClass('vjs-hidden');\n      } else {\n        this.removeClass('vjs-hidden');\n      }\n    });\n  }\n});\n\nvjs.MuteToggle.prototype.createEl = function(){\n  return vjs.Button.prototype.createEl.call(this, 'div', {\n    className: 'vjs-mute-control vjs-control',\n    innerHTML: '<div><span class=\"vjs-control-text\">' + this.localize('Mute') + '</span></div>'\n  });\n};\n\nvjs.MuteToggle.prototype.onClick = function(){\n  this.player_.muted( this.player_.muted() ? false : true );\n};\n\nvjs.MuteToggle.prototype.update = function(){\n  var vol = this.player_.volume(),\n      level = 3;\n\n  if (vol === 0 || this.player_.muted()) {\n    level = 0;\n  } else if (vol < 0.33) {\n    level = 1;\n  } else if (vol < 0.67) {\n    level = 2;\n  }\n\n  // Don't rewrite the button text if the actual text doesn't change.\n  // This causes unnecessary and confusing information for screen reader users.\n  // This check is needed because this function gets called every time the volume level is changed.\n  if(this.player_.muted()){\n      if(this.el_.children[0].children[0].innerHTML!=this.localize('Unmute')){\n          this.el_.children[0].children[0].innerHTML = this.localize('Unmute'); // change the button text to \"Unmute\"\n      }\n  } else {\n      if(this.el_.children[0].children[0].innerHTML!=this.localize('Mute')){\n          this.el_.children[0].children[0].innerHTML = this.localize('Mute'); // change the button text to \"Mute\"\n      }\n  }\n\n  /* TODO improve muted icon classes */\n  for (var i = 0; i < 4; i++) {\n    vjs.removeClass(this.el_, 'vjs-vol-'+i);\n  }\n  vjs.addClass(this.el_, 'vjs-vol-'+level);\n};\n/**\n * Menu button with a popup for showing the volume slider.\n * @constructor\n */\nvjs.VolumeMenuButton = vjs.MenuButton.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.MenuButton.call(this, player, options);\n\n    // Same listeners as MuteToggle\n    this.on(player, 'volumechange', this.volumeUpdate);\n\n    // hide mute toggle if the current tech doesn't support volume control\n    if (player.tech && player.tech['featuresVolumeControl'] === false) {\n      this.addClass('vjs-hidden');\n    }\n    this.on(player, 'loadstart', function(){\n      if (player.tech['featuresVolumeControl'] === false) {\n        this.addClass('vjs-hidden');\n      } else {\n        this.removeClass('vjs-hidden');\n      }\n    });\n    this.addClass('vjs-menu-button');\n  }\n});\n\nvjs.VolumeMenuButton.prototype.createMenu = function(){\n  var menu = new vjs.Menu(this.player_, {\n    contentElType: 'div'\n  });\n  var vc = new vjs.VolumeBar(this.player_, this.options_['volumeBar']);\n  vc.on('focus', function() {\n    menu.lockShowing();\n  });\n  vc.on('blur', function() {\n    menu.unlockShowing();\n  });\n  menu.addChild(vc);\n  return menu;\n};\n\nvjs.VolumeMenuButton.prototype.onClick = function(){\n  vjs.MuteToggle.prototype.onClick.call(this);\n  vjs.MenuButton.prototype.onClick.call(this);\n};\n\nvjs.VolumeMenuButton.prototype.createEl = function(){\n  return vjs.Button.prototype.createEl.call(this, 'div', {\n    className: 'vjs-volume-menu-button vjs-menu-button vjs-control',\n    innerHTML: '<div><span class=\"vjs-control-text\">' + this.localize('Mute') + '</span></div>'\n  });\n};\nvjs.VolumeMenuButton.prototype.volumeUpdate = vjs.MuteToggle.prototype.update;\n/**\n * The component for controlling the playback rate\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.PlaybackRateMenuButton = vjs.MenuButton.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.MenuButton.call(this, player, options);\n\n    this.updateVisibility();\n    this.updateLabel();\n\n    this.on(player, 'loadstart', this.updateVisibility);\n    this.on(player, 'ratechange', this.updateLabel);\n  }\n});\n\nvjs.PlaybackRateMenuButton.prototype.buttonText = 'Playback Rate';\nvjs.PlaybackRateMenuButton.prototype.className = 'vjs-playback-rate';\n\nvjs.PlaybackRateMenuButton.prototype.createEl = function(){\n  var el = vjs.MenuButton.prototype.createEl.call(this);\n\n  this.labelEl_ = vjs.createEl('div', {\n    className: 'vjs-playback-rate-value',\n    innerHTML: 1.0\n  });\n\n  el.appendChild(this.labelEl_);\n\n  return el;\n};\n\n// Menu creation\nvjs.PlaybackRateMenuButton.prototype.createMenu = function(){\n  var menu = new vjs.Menu(this.player());\n  var rates = this.player().options()['playbackRates'];\n\n  if (rates) {\n    for (var i = rates.length - 1; i >= 0; i--) {\n      menu.addChild(\n        new vjs.PlaybackRateMenuItem(this.player(), { 'rate': rates[i] + 'x'})\n        );\n    }\n  }\n\n  return menu;\n};\n\nvjs.PlaybackRateMenuButton.prototype.updateARIAAttributes = function(){\n  // Current playback rate\n  this.el().setAttribute('aria-valuenow', this.player().playbackRate());\n};\n\nvjs.PlaybackRateMenuButton.prototype.onClick = function(){\n  // select next rate option\n  var currentRate = this.player().playbackRate();\n  var rates = this.player().options()['playbackRates'];\n  // this will select first one if the last one currently selected\n  var newRate = rates[0];\n  for (var i = 0; i <rates.length ; i++) {\n    if (rates[i] > currentRate) {\n      newRate = rates[i];\n      break;\n    }\n  }\n  this.player().playbackRate(newRate);\n};\n\nvjs.PlaybackRateMenuButton.prototype.playbackRateSupported = function(){\n  return this.player().tech\n    && this.player().tech['featuresPlaybackRate']\n    && this.player().options()['playbackRates']\n    && this.player().options()['playbackRates'].length > 0\n  ;\n};\n\n/**\n * Hide playback rate controls when they're no playback rate options to select\n */\nvjs.PlaybackRateMenuButton.prototype.updateVisibility = function(){\n  if (this.playbackRateSupported()) {\n    this.removeClass('vjs-hidden');\n  } else {\n    this.addClass('vjs-hidden');\n  }\n};\n\n/**\n * Update button label when rate changed\n */\nvjs.PlaybackRateMenuButton.prototype.updateLabel = function(){\n  if (this.playbackRateSupported()) {\n    this.labelEl_.innerHTML = this.player().playbackRate() + 'x';\n  }\n};\n\n/**\n * The specific menu item type for selecting a playback rate\n *\n * @constructor\n */\nvjs.PlaybackRateMenuItem = vjs.MenuItem.extend({\n  contentElType: 'button',\n  /** @constructor */\n  init: function(player, options){\n    var label = this.label = options['rate'];\n    var rate = this.rate = parseFloat(label, 10);\n\n    // Modify options for parent MenuItem class's init.\n    options['label'] = label;\n    options['selected'] = rate === 1;\n    vjs.MenuItem.call(this, player, options);\n\n    this.on(player, 'ratechange', this.update);\n  }\n});\n\nvjs.PlaybackRateMenuItem.prototype.onClick = function(){\n  vjs.MenuItem.prototype.onClick.call(this);\n  this.player().playbackRate(this.rate);\n};\n\nvjs.PlaybackRateMenuItem.prototype.update = function(){\n  this.selected(this.player().playbackRate() == this.rate);\n};\n/* Poster Image\n================================================================================ */\n/**\n * The component that handles showing the poster image.\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.PosterImage = vjs.Button.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Button.call(this, player, options);\n\n    this.update();\n    player.on('posterchange', vjs.bind(this, this.update));\n  }\n});\n\n/**\n * Clean up the poster image\n */\nvjs.PosterImage.prototype.dispose = function(){\n  this.player().off('posterchange', this.update);\n  vjs.Button.prototype.dispose.call(this);\n};\n\n/**\n * Create the poster image element\n * @return {Element}\n */\nvjs.PosterImage.prototype.createEl = function(){\n  var el = vjs.createEl('div', {\n    className: 'vjs-poster',\n\n    // Don't want poster to be tabbable.\n    tabIndex: -1\n  });\n\n  // To ensure the poster image resizes while maintaining its original aspect\n  // ratio, use a div with `background-size` when available. For browsers that\n  // do not support `background-size` (e.g. IE8), fall back on using a regular\n  // img element.\n  if (!vjs.BACKGROUND_SIZE_SUPPORTED) {\n    this.fallbackImg_ = vjs.createEl('img');\n    el.appendChild(this.fallbackImg_);\n  }\n\n  return el;\n};\n\n/**\n * Event handler for updates to the player's poster source\n */\nvjs.PosterImage.prototype.update = function(){\n  var url = this.player().poster();\n\n  this.setSrc(url);\n\n  // If there's no poster source we should display:none on this component\n  // so it's not still clickable or right-clickable\n  if (url) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\n\n/**\n * Set the poster source depending on the display method\n */\nvjs.PosterImage.prototype.setSrc = function(url){\n  var backgroundImage;\n\n  if (this.fallbackImg_) {\n    this.fallbackImg_.src = url;\n  } else {\n    backgroundImage = '';\n    // Any falsey values should stay as an empty string, otherwise\n    // this will throw an extra error\n    if (url) {\n      backgroundImage = 'url(\"' + url + '\")';\n    }\n\n    this.el_.style.backgroundImage = backgroundImage;\n  }\n};\n\n/**\n * Event handler for clicks on the poster image\n */\nvjs.PosterImage.prototype.onClick = function(){\n  // We don't want a click to trigger playback when controls are disabled\n  // but CSS should be hiding the poster to prevent that from happening\n  this.player_.play();\n};\n/* Loading Spinner\n================================================================================ */\n/**\n * Loading spinner for waiting events\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n */\nvjs.LoadingSpinner = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    // MOVING DISPLAY HANDLING TO CSS\n\n    // player.on('canplay', vjs.bind(this, this.hide));\n    // player.on('canplaythrough', vjs.bind(this, this.hide));\n    // player.on('playing', vjs.bind(this, this.hide));\n    // player.on('seeking', vjs.bind(this, this.show));\n\n    // in some browsers seeking does not trigger the 'playing' event,\n    // so we also need to trap 'seeked' if we are going to set a\n    // 'seeking' event\n    // player.on('seeked', vjs.bind(this, this.hide));\n\n    // player.on('ended', vjs.bind(this, this.hide));\n\n    // Not showing spinner on stalled any more. Browsers may stall and then not trigger any events that would remove the spinner.\n    // Checked in Chrome 16 and Safari 5.1.2. http://help.videojs.com/discussions/problems/883-why-is-the-download-progress-showing\n    // player.on('stalled', vjs.bind(this, this.show));\n\n    // player.on('waiting', vjs.bind(this, this.show));\n  }\n});\n\nvjs.LoadingSpinner.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-loading-spinner'\n  });\n};\n/* Big Play Button\n================================================================================ */\n/**\n * Initial play button. Shows before the video has played. The hiding of the\n * big play button is done via CSS and player states.\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @class\n * @constructor\n */\nvjs.BigPlayButton = vjs.Button.extend();\n\nvjs.BigPlayButton.prototype.createEl = function(){\n  return vjs.Button.prototype.createEl.call(this, 'div', {\n    className: 'vjs-big-play-button',\n    innerHTML: '<span aria-hidden=\"true\"></span>',\n    'aria-label': 'play video'\n  });\n};\n\nvjs.BigPlayButton.prototype.onClick = function(){\n  this.player_.play();\n};\n/**\n * Display that an error has occurred making the video unplayable\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.ErrorDisplay = vjs.Component.extend({\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    this.update();\n    this.on(player, 'error', this.update);\n  }\n});\n\nvjs.ErrorDisplay.prototype.createEl = function(){\n  var el = vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-error-display'\n  });\n\n  this.contentEl_ = vjs.createEl('div');\n  el.appendChild(this.contentEl_);\n\n  return el;\n};\n\nvjs.ErrorDisplay.prototype.update = function(){\n  if (this.player().error()) {\n    this.contentEl_.innerHTML = this.localize(this.player().error().message);\n  }\n};\n(function() {\n  var createTrackHelper;\n/**\n * @fileoverview Media Technology Controller - Base class for media playback\n * technology controllers like Flash and HTML5\n */\n\n/**\n * Base class for media (HTML5 Video, Flash) controllers\n * @param {vjs.Player|Object} player  Central player instance\n * @param {Object=} options Options object\n * @constructor\n */\nvjs.MediaTechController = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    options = options || {};\n    // we don't want the tech to report user activity automatically.\n    // This is done manually in addControlsListeners\n    options.reportTouchActivity = false;\n    vjs.Component.call(this, player, options, ready);\n\n    // Manually track progress in cases where the browser/flash player doesn't report it.\n    if (!this['featuresProgressEvents']) {\n      this.manualProgressOn();\n    }\n\n    // Manually track timeupdates in cases where the browser/flash player doesn't report it.\n    if (!this['featuresTimeupdateEvents']) {\n      this.manualTimeUpdatesOn();\n    }\n\n    this.initControlsListeners();\n\n    if (!this['featuresNativeTextTracks']) {\n      this.emulateTextTracks();\n    }\n\n    this.initTextTrackListeners();\n  }\n});\n\n/**\n * Set up click and touch listeners for the playback element\n * On desktops, a click on the video itself will toggle playback,\n * on a mobile device a click on the video toggles controls.\n * (toggling controls is done by toggling the user state between active and\n * inactive)\n *\n * A tap can signal that a user has become active, or has become inactive\n * e.g. a quick tap on an iPhone movie should reveal the controls. Another\n * quick tap should hide them again (signaling the user is in an inactive\n * viewing state)\n *\n * In addition to this, we still want the user to be considered inactive after\n * a few seconds of inactivity.\n *\n * Note: the only part of iOS interaction we can't mimic with this setup\n * is a touch and hold on the video element counting as activity in order to\n * keep the controls showing, but that shouldn't be an issue. A touch and hold on\n * any controls will still keep the user active\n */\nvjs.MediaTechController.prototype.initControlsListeners = function(){\n  var player, activateControls;\n\n  player = this.player();\n\n  activateControls = function(){\n    if (player.controls() && !player.usingNativeControls()) {\n      this.addControlsListeners();\n    }\n  };\n\n  // Set up event listeners once the tech is ready and has an element to apply\n  // listeners to\n  this.ready(activateControls);\n  this.on(player, 'controlsenabled', activateControls);\n  this.on(player, 'controlsdisabled', this.removeControlsListeners);\n\n  // if we're loading the playback object after it has started loading or playing the\n  // video (often with autoplay on) then the loadstart event has already fired and we\n  // need to fire it manually because many things rely on it.\n  // Long term we might consider how we would do this for other events like 'canplay'\n  // that may also have fired.\n  this.ready(function(){\n    if (this.networkState && this.networkState() > 0) {\n      this.player().trigger('loadstart');\n    }\n  });\n};\n\nvjs.MediaTechController.prototype.addControlsListeners = function(){\n  var userWasActive;\n\n  // Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do\n  // trigger mousedown/up.\n  // http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object\n  // Any touch events are set to block the mousedown event from happening\n  this.on('mousedown', this.onClick);\n\n  // If the controls were hidden we don't want that to change without a tap event\n  // so we'll check if the controls were already showing before reporting user\n  // activity\n  this.on('touchstart', function(event) {\n    userWasActive = this.player_.userActive();\n  });\n\n  this.on('touchmove', function(event) {\n    if (userWasActive){\n      this.player().reportUserActivity();\n    }\n  });\n\n  this.on('touchend', function(event) {\n    // Stop the mouse events from also happening\n    event.preventDefault();\n  });\n\n  // Turn on component tap events\n  this.emitTapEvents();\n\n  // The tap listener needs to come after the touchend listener because the tap\n  // listener cancels out any reportedUserActivity when setting userActive(false)\n  this.on('tap', this.onTap);\n};\n\n/**\n * Remove the listeners used for click and tap controls. This is needed for\n * toggling to controls disabled, where a tap/touch should do nothing.\n */\nvjs.MediaTechController.prototype.removeControlsListeners = function(){\n  // We don't want to just use `this.off()` because there might be other needed\n  // listeners added by techs that extend this.\n  this.off('tap');\n  this.off('touchstart');\n  this.off('touchmove');\n  this.off('touchleave');\n  this.off('touchcancel');\n  this.off('touchend');\n  this.off('click');\n  this.off('mousedown');\n};\n\n/**\n * Handle a click on the media element. By default will play/pause the media.\n */\nvjs.MediaTechController.prototype.onClick = function(event){\n  // We're using mousedown to detect clicks thanks to Flash, but mousedown\n  // will also be triggered with right-clicks, so we need to prevent that\n  if (event.button !== 0) return;\n\n  // When controls are disabled a click should not toggle playback because\n  // the click is considered a control\n  if (this.player().controls()) {\n    if (this.player().paused()) {\n      this.player().play();\n    } else {\n      this.player().pause();\n    }\n  }\n};\n\n/**\n * Handle a tap on the media element. By default it will toggle the user\n * activity state, which hides and shows the controls.\n */\nvjs.MediaTechController.prototype.onTap = function(){\n  this.player().userActive(!this.player().userActive());\n};\n\n/* Fallbacks for unsupported event types\n================================================================================ */\n// Manually trigger progress events based on changes to the buffered amount\n// Many flash players and older HTML5 browsers don't send progress or progress-like events\nvjs.MediaTechController.prototype.manualProgressOn = function(){\n  this.manualProgress = true;\n\n  // Trigger progress watching when a source begins loading\n  this.trackProgress();\n};\n\nvjs.MediaTechController.prototype.manualProgressOff = function(){\n  this.manualProgress = false;\n  this.stopTrackingProgress();\n};\n\nvjs.MediaTechController.prototype.trackProgress = function(){\n  this.progressInterval = this.setInterval(function(){\n    // Don't trigger unless buffered amount is greater than last time\n\n    var bufferedPercent = this.player().bufferedPercent();\n\n    if (this.bufferedPercent_ != bufferedPercent) {\n      this.player().trigger('progress');\n    }\n\n    this.bufferedPercent_ = bufferedPercent;\n\n    if (bufferedPercent === 1) {\n      this.stopTrackingProgress();\n    }\n  }, 500);\n};\nvjs.MediaTechController.prototype.stopTrackingProgress = function(){ this.clearInterval(this.progressInterval); };\n\n/*! Time Tracking -------------------------------------------------------------- */\nvjs.MediaTechController.prototype.manualTimeUpdatesOn = function(){\n  var player = this.player_;\n\n  this.manualTimeUpdates = true;\n\n  this.on(player, 'play', this.trackCurrentTime);\n  this.on(player, 'pause', this.stopTrackingCurrentTime);\n  // timeupdate is also called by .currentTime whenever current time is set\n\n  // Watch for native timeupdate event\n  this.one('timeupdate', function(){\n    // Update known progress support for this playback technology\n    this['featuresTimeupdateEvents'] = true;\n    // Turn off manual progress tracking\n    this.manualTimeUpdatesOff();\n  });\n};\n\nvjs.MediaTechController.prototype.manualTimeUpdatesOff = function(){\n  var player = this.player_;\n\n  this.manualTimeUpdates = false;\n  this.stopTrackingCurrentTime();\n  this.off(player, 'play', this.trackCurrentTime);\n  this.off(player, 'pause', this.stopTrackingCurrentTime);\n};\n\nvjs.MediaTechController.prototype.trackCurrentTime = function(){\n  if (this.currentTimeInterval) { this.stopTrackingCurrentTime(); }\n  this.currentTimeInterval = this.setInterval(function(){\n    this.player().trigger('timeupdate');\n  }, 250); // 42 = 24 fps // 250 is what Webkit uses // FF uses 15\n};\n\n// Turn off play progress tracking (when paused or dragging)\nvjs.MediaTechController.prototype.stopTrackingCurrentTime = function(){\n  this.clearInterval(this.currentTimeInterval);\n\n  // #1002 - if the video ends right before the next timeupdate would happen,\n  // the progress bar won't make it all the way to the end\n  this.player().trigger('timeupdate');\n};\n\nvjs.MediaTechController.prototype.dispose = function() {\n  // Turn off any manual progress or timeupdate tracking\n  if (this.manualProgress) { this.manualProgressOff(); }\n\n  if (this.manualTimeUpdates) { this.manualTimeUpdatesOff(); }\n\n  vjs.Component.prototype.dispose.call(this);\n};\n\nvjs.MediaTechController.prototype.setCurrentTime = function() {\n  // improve the accuracy of manual timeupdates\n  if (this.manualTimeUpdates) { this.player().trigger('timeupdate'); }\n};\n\n// TODO: Consider looking at moving this into the text track display directly\n// https://github.com/videojs/video.js/issues/1863\nvjs.MediaTechController.prototype.initTextTrackListeners = function() {\n  var player = this.player_,\n      tracks,\n      textTrackListChanges = function() {\n        var textTrackDisplay = player.getChild('textTrackDisplay'),\n            controlBar;\n\n        if (textTrackDisplay) {\n          textTrackDisplay.updateDisplay();\n        }\n      };\n\n  tracks = this.textTracks();\n\n  if (!tracks) {\n    return;\n  }\n\n  tracks.addEventListener('removetrack', textTrackListChanges);\n  tracks.addEventListener('addtrack', textTrackListChanges);\n\n  this.on('dispose', vjs.bind(this, function() {\n    tracks.removeEventListener('removetrack', textTrackListChanges);\n    tracks.removeEventListener('addtrack', textTrackListChanges);\n  }));\n};\n\nvjs.MediaTechController.prototype.emulateTextTracks = function() {\n  var player = this.player_,\n      textTracksChanges,\n      tracks,\n      script;\n\n  if (!window['WebVTT']) {\n    script = document.createElement('script');\n    script.src = player.options()['vtt.js'] || '../node_modules/vtt.js/dist/vtt.js';\n    player.el().appendChild(script);\n    window['WebVTT'] = true;\n  }\n\n  tracks = this.textTracks();\n  if (!tracks) {\n    return;\n  }\n\n  textTracksChanges = function() {\n    var i, track, textTrackDisplay;\n\n    textTrackDisplay = player.getChild('textTrackDisplay'),\n\n    textTrackDisplay.updateDisplay();\n\n    for (i = 0; i < this.length; i++) {\n      track = this[i];\n      track.removeEventListener('cuechange', vjs.bind(textTrackDisplay, textTrackDisplay.updateDisplay));\n      if (track.mode === 'showing') {\n        track.addEventListener('cuechange', vjs.bind(textTrackDisplay, textTrackDisplay.updateDisplay));\n      }\n    }\n  };\n\n  tracks.addEventListener('change', textTracksChanges);\n\n  this.on('dispose', vjs.bind(this, function() {\n    tracks.removeEventListener('change', textTracksChanges);\n  }));\n};\n\n/**\n * Provide default methods for text tracks.\n *\n * Html5 tech overrides these.\n */\n\n/**\n * List of associated text tracks\n * @type {Array}\n * @private\n */\nvjs.MediaTechController.prototype.textTracks_;\n\nvjs.MediaTechController.prototype.textTracks = function() {\n  this.player_.textTracks_ = this.player_.textTracks_ || new vjs.TextTrackList();\n  return this.player_.textTracks_;\n};\n\nvjs.MediaTechController.prototype.remoteTextTracks = function() {\n  this.player_.remoteTextTracks_ = this.player_.remoteTextTracks_ || new vjs.TextTrackList();\n  return this.player_.remoteTextTracks_;\n};\n\ncreateTrackHelper = function(self, kind, label, language, options) {\n  var tracks = self.textTracks(),\n      track;\n\n  options = options || {};\n\n  options['kind'] = kind;\n  if (label) {\n    options['label'] = label;\n  }\n  if (language) {\n    options['language'] = language;\n  }\n  options['player'] = self.player_;\n\n  track = new vjs.TextTrack(options);\n  tracks.addTrack_(track);\n\n  return track;\n};\n\nvjs.MediaTechController.prototype.addTextTrack = function(kind, label, language) {\n  if (!kind) {\n    throw new Error('TextTrack kind is required but was not provided');\n  }\n\n  return createTrackHelper(this, kind, label, language);\n};\n\nvjs.MediaTechController.prototype.addRemoteTextTrack = function(options) {\n  var track = createTrackHelper(this, options['kind'], options['label'], options['language'], options);\n  this.remoteTextTracks().addTrack_(track);\n  return {\n    track: track\n  };\n};\n\nvjs.MediaTechController.prototype.removeRemoteTextTrack = function(track) {\n  this.textTracks().removeTrack_(track);\n  this.remoteTextTracks().removeTrack_(track);\n};\n\n/**\n * Provide a default setPoster method for techs\n *\n * Poster support for techs should be optional, so we don't want techs to\n * break if they don't have a way to set a poster.\n */\nvjs.MediaTechController.prototype.setPoster = function(){};\n\nvjs.MediaTechController.prototype['featuresVolumeControl'] = true;\n\n// Resizing plugins using request fullscreen reloads the plugin\nvjs.MediaTechController.prototype['featuresFullscreenResize'] = false;\nvjs.MediaTechController.prototype['featuresPlaybackRate'] = false;\n\n// Optional events that we can manually mimic with timers\n// currently not triggered by video-js-swf\nvjs.MediaTechController.prototype['featuresProgressEvents'] = false;\nvjs.MediaTechController.prototype['featuresTimeupdateEvents'] = false;\n\nvjs.MediaTechController.prototype['featuresNativeTextTracks'] = false;\n\n/**\n * A functional mixin for techs that want to use the Source Handler pattern.\n *\n * ##### EXAMPLE:\n *\n *   videojs.MediaTechController.withSourceHandlers.call(MyTech);\n *\n */\nvjs.MediaTechController.withSourceHandlers = function(Tech){\n  /**\n   * Register a source handler\n   * Source handlers are scripts for handling specific formats.\n   * The source handler pattern is used for adaptive formats (HLS, DASH) that\n   * manually load video data and feed it into a Source Buffer (Media Source Extensions)\n   * @param  {Function} handler  The source handler\n   * @param  {Boolean}  first    Register it before any existing handlers\n   */\n  Tech.registerSourceHandler = function(handler, index){\n    var handlers = Tech.sourceHandlers;\n\n    if (!handlers) {\n      handlers = Tech.sourceHandlers = [];\n    }\n\n    if (index === undefined) {\n      // add to the end of the list\n      index = handlers.length;\n    }\n\n    handlers.splice(index, 0, handler);\n  };\n\n  /**\n   * Return the first source handler that supports the source\n   * TODO: Answer question: should 'probably' be prioritized over 'maybe'\n   * @param  {Object} source The source object\n   * @returns {Object}       The first source handler that supports the source\n   * @returns {null}         Null if no source handler is found\n   */\n  Tech.selectSourceHandler = function(source){\n    var handlers = Tech.sourceHandlers || [],\n        can;\n\n    for (var i = 0; i < handlers.length; i++) {\n      can = handlers[i].canHandleSource(source);\n\n      if (can) {\n        return handlers[i];\n      }\n    }\n\n    return null;\n  };\n\n  /**\n  * Check if the tech can support the given source\n  * @param  {Object} srcObj  The source object\n  * @return {String}         'probably', 'maybe', or '' (empty string)\n  */\n  Tech.canPlaySource = function(srcObj){\n    var sh = Tech.selectSourceHandler(srcObj);\n\n    if (sh) {\n      return sh.canHandleSource(srcObj);\n    }\n\n    return '';\n  };\n\n  /**\n   * Create a function for setting the source using a source object\n   * and source handlers.\n   * Should never be called unless a source handler was found.\n   * @param {Object} source  A source object with src and type keys\n   * @return {vjs.MediaTechController} self\n   */\n  Tech.prototype.setSource = function(source){\n    var sh = Tech.selectSourceHandler(source);\n\n    if (!sh) {\n      // Fall back to a native source hander when unsupported sources are\n      // deliberately set\n      if (Tech.nativeSourceHandler) {\n        sh = Tech.nativeSourceHandler;\n      } else {\n        vjs.log.error('No source hander found for the current source.');\n      }\n    }\n\n    // Dispose any existing source handler\n    this.disposeSourceHandler();\n    this.off('dispose', this.disposeSourceHandler);\n\n    this.currentSource_ = source;\n    this.sourceHandler_ = sh.handleSource(source, this);\n    this.on('dispose', this.disposeSourceHandler);\n\n    return this;\n  };\n\n  /**\n   * Clean up any existing source handler\n   */\n  Tech.prototype.disposeSourceHandler = function(){\n    if (this.sourceHandler_ && this.sourceHandler_.dispose) {\n      this.sourceHandler_.dispose();\n    }\n  };\n\n};\n\nvjs.media = {};\n\n})();\n/**\n * @fileoverview HTML5 Media Controller - Wrapper for HTML5 Media API\n */\n\n/**\n * HTML5 Media Controller - Wrapper for HTML5 Media API\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @param {Function=} ready\n * @constructor\n */\nvjs.Html5 = vjs.MediaTechController.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    var  nodes, nodesLength, i, node, nodeName, removeNodes;\n\n    if (options['nativeCaptions'] === false || options['nativeTextTracks'] === false) {\n      this['featuresNativeTextTracks'] = false;\n    }\n\n    vjs.MediaTechController.call(this, player, options, ready);\n\n    this.setupTriggers();\n\n    var source = options['source'];\n\n    // Set the source if one is provided\n    // 1) Check if the source is new (if not, we want to keep the original so playback isn't interrupted)\n    // 2) Check to see if the network state of the tag was failed at init, and if so, reset the source\n    // anyway so the error gets fired.\n    if (source && (this.el_.currentSrc !== source.src || (player.tag && player.tag.initNetworkState_ === 3))) {\n      this.setSource(source);\n    }\n\n    if (this.el_.hasChildNodes()) {\n\n      nodes = this.el_.childNodes;\n      nodesLength = nodes.length;\n      removeNodes = [];\n\n      while (nodesLength--) {\n        node = nodes[nodesLength];\n        nodeName = node.nodeName.toLowerCase();\n        if (nodeName === 'track') {\n          if (!this['featuresNativeTextTracks']) {\n            // Empty video tag tracks so the built-in player doesn't use them also.\n            // This may not be fast enough to stop HTML5 browsers from reading the tags\n            // so we'll need to turn off any default tracks if we're manually doing\n            // captions and subtitles. videoElement.textTracks\n            removeNodes.push(node);\n          } else {\n            this.remoteTextTracks().addTrack_(node['track']);\n          }\n        }\n      }\n\n      for (i=0; i<removeNodes.length; i++) {\n        this.el_.removeChild(removeNodes[i]);\n      }\n    }\n\n    if (this['featuresNativeTextTracks']) {\n      this.on('loadstart', vjs.bind(this, this.hideCaptions));\n    }\n\n    // Determine if native controls should be used\n    // Our goal should be to get the custom controls on mobile solid everywhere\n    // so we can remove this all together. Right now this will block custom\n    // controls on touch enabled laptops like the Chrome Pixel\n    if (vjs.TOUCH_ENABLED && player.options()['nativeControlsForTouch'] === true) {\n      this.useNativeControls();\n    }\n\n    // Chrome and Safari both have issues with autoplay.\n    // In Safari (5.1.1), when we move the video element into the container div, autoplay doesn't work.\n    // In Chrome (15), if you have autoplay + a poster + no controls, the video gets hidden (but audio plays)\n    // This fixes both issues. Need to wait for API, so it updates displays correctly\n    player.ready(function(){\n      if (this.tag && this.options_['autoplay'] && this.paused()) {\n        delete this.tag['poster']; // Chrome Fix. Fixed in Chrome v16.\n        this.play();\n      }\n    });\n\n    this.triggerReady();\n  }\n});\n\nvjs.Html5.prototype.dispose = function(){\n  vjs.Html5.disposeMediaElement(this.el_);\n  vjs.MediaTechController.prototype.dispose.call(this);\n};\n\nvjs.Html5.prototype.createEl = function(){\n  var player = this.player_,\n      track,\n      trackEl,\n      i,\n      // If possible, reuse original tag for HTML5 playback technology element\n      el = player.tag,\n      attributes,\n      newEl,\n      clone;\n\n  // Check if this browser supports moving the element into the box.\n  // On the iPhone video will break if you move the element,\n  // So we have to create a brand new element.\n  if (!el || this['movingMediaElementInDOM'] === false) {\n\n    // If the original tag is still there, clone and remove it.\n    if (el) {\n      clone = el.cloneNode(false);\n      vjs.Html5.disposeMediaElement(el);\n      el = clone;\n      player.tag = null;\n    } else {\n      el = vjs.createEl('video');\n\n      // determine if native controls should be used\n      attributes = videojs.util.mergeOptions({}, player.tagAttributes);\n      if (!vjs.TOUCH_ENABLED || player.options()['nativeControlsForTouch'] !== true) {\n        delete attributes.controls;\n      }\n\n      vjs.setElementAttributes(el,\n        vjs.obj.merge(attributes, {\n          id:player.id() + '_html5_api',\n          'class':'vjs-tech'\n        })\n      );\n    }\n    // associate the player with the new tag\n    el['player'] = player;\n\n    if (player.options_.tracks) {\n      for (i = 0; i < player.options_.tracks.length; i++) {\n        track = player.options_.tracks[i];\n        trackEl = document.createElement('track');\n        trackEl.kind = track.kind;\n        trackEl.label = track.label;\n        trackEl.srclang = track.srclang;\n        trackEl.src = track.src;\n        if ('default' in track) {\n          trackEl.setAttribute('default', 'default');\n        }\n        el.appendChild(trackEl);\n      }\n    }\n\n    vjs.insertFirst(el, player.el());\n  }\n\n  // Update specific tag settings, in case they were overridden\n  var settingsAttrs = ['autoplay','preload','loop','muted'];\n  for (i = settingsAttrs.length - 1; i >= 0; i--) {\n    var attr = settingsAttrs[i];\n    var overwriteAttrs = {};\n    if (typeof player.options_[attr] !== 'undefined') {\n      overwriteAttrs[attr] = player.options_[attr];\n    }\n    vjs.setElementAttributes(el, overwriteAttrs);\n  }\n\n  return el;\n  // jenniisawesome = true;\n};\n\n\nvjs.Html5.prototype.hideCaptions = function() {\n  var tracks = this.el_.querySelectorAll('track'),\n      track,\n      i = tracks.length,\n      kinds = {\n        'captions': 1,\n        'subtitles': 1\n      };\n\n  while (i--) {\n    track = tracks[i].track;\n    if ((track && track['kind'] in kinds) &&\n        (!tracks[i]['default'])) {\n      track.mode = 'disabled';\n    }\n  }\n};\n\n// Make video events trigger player events\n// May seem verbose here, but makes other APIs possible.\n// Triggers removed using this.off when disposed\nvjs.Html5.prototype.setupTriggers = function(){\n  for (var i = vjs.Html5.Events.length - 1; i >= 0; i--) {\n    this.on(vjs.Html5.Events[i], this.eventHandler);\n  }\n};\n\nvjs.Html5.prototype.eventHandler = function(evt){\n  // In the case of an error on the video element, set the error prop\n  // on the player and let the player handle triggering the event. On\n  // some platforms, error events fire that do not cause the error\n  // property on the video element to be set. See #1465 for an example.\n  if (evt.type == 'error' && this.error()) {\n    this.player().error(this.error().code);\n\n  // in some cases we pass the event directly to the player\n  } else {\n    // No need for media events to bubble up.\n    evt.bubbles = false;\n\n    this.player().trigger(evt);\n  }\n};\n\nvjs.Html5.prototype.useNativeControls = function(){\n  var tech, player, controlsOn, controlsOff, cleanUp;\n\n  tech = this;\n  player = this.player();\n\n  // If the player controls are enabled turn on the native controls\n  tech.setControls(player.controls());\n\n  // Update the native controls when player controls state is updated\n  controlsOn = function(){\n    tech.setControls(true);\n  };\n  controlsOff = function(){\n    tech.setControls(false);\n  };\n  player.on('controlsenabled', controlsOn);\n  player.on('controlsdisabled', controlsOff);\n\n  // Clean up when not using native controls anymore\n  cleanUp = function(){\n    player.off('controlsenabled', controlsOn);\n    player.off('controlsdisabled', controlsOff);\n  };\n  tech.on('dispose', cleanUp);\n  player.on('usingcustomcontrols', cleanUp);\n\n  // Update the state of the player to using native controls\n  player.usingNativeControls(true);\n};\n\n\nvjs.Html5.prototype.play = function(){ this.el_.play(); };\nvjs.Html5.prototype.pause = function(){ this.el_.pause(); };\nvjs.Html5.prototype.paused = function(){ return this.el_.paused; };\n\nvjs.Html5.prototype.currentTime = function(){ return this.el_.currentTime; };\nvjs.Html5.prototype.setCurrentTime = function(seconds){\n  try {\n    this.el_.currentTime = seconds;\n  } catch(e) {\n    vjs.log(e, 'Video is not ready. (Video.js)');\n    // this.warning(VideoJS.warnings.videoNotReady);\n  }\n};\n\nvjs.Html5.prototype.duration = function(){ return this.el_.duration || 0; };\nvjs.Html5.prototype.buffered = function(){ return this.el_.buffered; };\n\nvjs.Html5.prototype.volume = function(){ return this.el_.volume; };\nvjs.Html5.prototype.setVolume = function(percentAsDecimal){ this.el_.volume = percentAsDecimal; };\nvjs.Html5.prototype.muted = function(){ return this.el_.muted; };\nvjs.Html5.prototype.setMuted = function(muted){ this.el_.muted = muted; };\n\nvjs.Html5.prototype.width = function(){ return this.el_.offsetWidth; };\nvjs.Html5.prototype.height = function(){ return this.el_.offsetHeight; };\n\nvjs.Html5.prototype.supportsFullScreen = function(){\n  if (typeof this.el_.webkitEnterFullScreen == 'function') {\n\n    // Seems to be broken in Chromium/Chrome && Safari in Leopard\n    if (/Android/.test(vjs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nvjs.Html5.prototype.enterFullScreen = function(){\n  var video = this.el_;\n\n  if ('webkitDisplayingFullscreen' in video) {\n    this.one('webkitbeginfullscreen', function() {\n      this.player_.isFullscreen(true);\n\n      this.one('webkitendfullscreen', function() {\n        this.player_.isFullscreen(false);\n        this.player_.trigger('fullscreenchange');\n      });\n\n      this.player_.trigger('fullscreenchange');\n    });\n  }\n\n  if (video.paused && video.networkState <= video.HAVE_METADATA) {\n    // attempt to prime the video element for programmatic access\n    // this isn't necessary on the desktop but shouldn't hurt\n    this.el_.play();\n\n    // playing and pausing synchronously during the transition to fullscreen\n    // can get iOS ~6.1 devices into a play/pause loop\n    this.setTimeout(function(){\n      video.pause();\n      video.webkitEnterFullScreen();\n    }, 0);\n  } else {\n    video.webkitEnterFullScreen();\n  }\n};\n\nvjs.Html5.prototype.exitFullScreen = function(){\n  this.el_.webkitExitFullScreen();\n};\n\n\nvjs.Html5.prototype.src = function(src) {\n  if (src === undefined) {\n    return this.el_.src;\n  } else {\n    // Setting src through `src` instead of `setSrc` will be deprecated\n    this.setSrc(src);\n  }\n};\n\nvjs.Html5.prototype.setSrc = function(src) {\n  this.el_.src = src;\n};\n\nvjs.Html5.prototype.load = function(){ this.el_.load(); };\nvjs.Html5.prototype.currentSrc = function(){ return this.el_.currentSrc; };\n\nvjs.Html5.prototype.poster = function(){ return this.el_.poster; };\nvjs.Html5.prototype.setPoster = function(val){ this.el_.poster = val; };\n\nvjs.Html5.prototype.preload = function(){ return this.el_.preload; };\nvjs.Html5.prototype.setPreload = function(val){ this.el_.preload = val; };\n\nvjs.Html5.prototype.autoplay = function(){ return this.el_.autoplay; };\nvjs.Html5.prototype.setAutoplay = function(val){ this.el_.autoplay = val; };\n\nvjs.Html5.prototype.controls = function(){ return this.el_.controls; };\nvjs.Html5.prototype.setControls = function(val){ this.el_.controls = !!val; };\n\nvjs.Html5.prototype.loop = function(){ return this.el_.loop; };\nvjs.Html5.prototype.setLoop = function(val){ this.el_.loop = val; };\n\nvjs.Html5.prototype.error = function(){ return this.el_.error; };\nvjs.Html5.prototype.seeking = function(){ return this.el_.seeking; };\nvjs.Html5.prototype.ended = function(){ return this.el_.ended; };\nvjs.Html5.prototype.defaultMuted = function(){ return this.el_.defaultMuted; };\n\nvjs.Html5.prototype.playbackRate = function(){ return this.el_.playbackRate; };\nvjs.Html5.prototype.setPlaybackRate = function(val){ this.el_.playbackRate = val; };\n\nvjs.Html5.prototype.networkState = function(){ return this.el_.networkState; };\nvjs.Html5.prototype.readyState = function(){ return this.el_.readyState; };\n\nvjs.Html5.prototype.textTracks = function() {\n  if (!this['featuresNativeTextTracks']) {\n    return vjs.MediaTechController.prototype.textTracks.call(this);\n  }\n\n  return this.el_.textTracks;\n};\nvjs.Html5.prototype.addTextTrack = function(kind, label, language) {\n  if (!this['featuresNativeTextTracks']) {\n    return vjs.MediaTechController.prototype.addTextTrack.call(this, kind, label, language);\n  }\n\n  return this.el_.addTextTrack(kind, label, language);\n};\n\nvjs.Html5.prototype.addRemoteTextTrack = function(options) {\n  if (!this['featuresNativeTextTracks']) {\n    return vjs.MediaTechController.prototype.addRemoteTextTrack.call(this, options);\n  }\n\n  var track = document.createElement('track');\n  options = options || {};\n\n  if (options['kind']) {\n    track['kind'] = options['kind'];\n  }\n  if (options['label']) {\n    track['label'] = options['label'];\n  }\n  if (options['language'] || options['srclang']) {\n    track['srclang'] = options['language'] || options['srclang'];\n  }\n  if (options['default']) {\n    track['default'] = options['default'];\n  }\n  if (options['id']) {\n    track['id'] = options['id'];\n  }\n  if (options['src']) {\n    track['src'] = options['src'];\n  }\n\n  this.el().appendChild(track);\n\n  if (track.track['kind'] === 'metadata') {\n    track['track']['mode'] = 'hidden';\n  } else {\n    track['track']['mode'] = 'disabled';\n  }\n\n  track['onload'] = function() {\n    var tt = track['track'];\n    if (track.readyState >= 2) {\n      if (tt['kind'] === 'metadata' && tt['mode'] !== 'hidden') {\n        tt['mode'] = 'hidden';\n      } else if (tt['kind'] !== 'metadata' && tt['mode'] !== 'disabled') {\n        tt['mode'] = 'disabled';\n      }\n      track['onload'] = null;\n    }\n  };\n\n  this.remoteTextTracks().addTrack_(track.track);\n\n  return track;\n};\n\nvjs.Html5.prototype.removeRemoteTextTrack = function(track) {\n  if (!this['featuresNativeTextTracks']) {\n    return vjs.MediaTechController.prototype.removeRemoteTextTrack.call(this, track);\n  }\n\n  var tracks, i;\n\n  this.remoteTextTracks().removeTrack_(track);\n\n  tracks = this.el()['querySelectorAll']('track');\n\n  for (i = 0; i < tracks.length; i++) {\n    if (tracks[i] === track || tracks[i]['track'] === track) {\n      tracks[i]['parentNode']['removeChild'](tracks[i]);\n      break;\n    }\n  }\n};\n\n/* HTML5 Support Testing ---------------------------------------------------- */\n\n/**\n * Check if HTML5 video is supported by this browser/device\n * @return {Boolean}\n */\nvjs.Html5.isSupported = function(){\n  // IE9 with no Media Player is a LIAR! (#984)\n  try {\n    vjs.TEST_VID['volume'] = 0.5;\n  } catch (e) {\n    return false;\n  }\n\n  return !!vjs.TEST_VID.canPlayType;\n};\n\n// Add Source Handler pattern functions to this tech\nvjs.MediaTechController.withSourceHandlers(vjs.Html5);\n\n/**\n * The default native source handler.\n * This simply passes the source to the video element. Nothing fancy.\n * @param  {Object} source   The source object\n * @param  {vjs.Html5} tech  The instance of the HTML5 tech\n */\nvjs.Html5.nativeSourceHandler = {};\n\n/**\n * Check if the video element can handle the source natively\n * @param  {Object} source  The source object\n * @return {String}         'probably', 'maybe', or '' (empty string)\n */\nvjs.Html5.nativeSourceHandler.canHandleSource = function(source){\n  var match, ext;\n\n  function canPlayType(type){\n    // IE9 on Windows 7 without MediaPlayer throws an error here\n    // https://github.com/videojs/video.js/issues/519\n    try {\n      return vjs.TEST_VID.canPlayType(type);\n    } catch(e) {\n      return '';\n    }\n  }\n\n  // If a type was provided we should rely on that\n  if (source.type) {\n    return canPlayType(source.type);\n  } else if (source.src) {\n    // If no type, fall back to checking 'video/[EXTENSION]'\n    match = source.src.match(/\\.([^.\\/\\?]+)(\\?[^\\/]+)?$/i);\n    ext = match && match[1];\n\n    return canPlayType('video/'+ext);\n  }\n\n  return '';\n};\n\n/**\n * Pass the source to the video element\n * Adaptive source handlers will have more complicated workflows before passing\n * video data to the video element\n * @param  {Object} source    The source object\n * @param  {vjs.Html5} tech   The instance of the Html5 tech\n */\nvjs.Html5.nativeSourceHandler.handleSource = function(source, tech){\n  tech.setSrc(source.src);\n};\n\n/**\n * Clean up the source handler when disposing the player or switching sources..\n * (no cleanup is needed when supporting the format natively)\n */\nvjs.Html5.nativeSourceHandler.dispose = function(){};\n\n// Register the native source handler\nvjs.Html5.registerSourceHandler(vjs.Html5.nativeSourceHandler);\n\n/**\n * Check if the volume can be changed in this browser/device.\n * Volume cannot be changed in a lot of mobile devices.\n * Specifically, it can't be changed from 1 on iOS.\n * @return {Boolean}\n */\nvjs.Html5.canControlVolume = function(){\n  var volume =  vjs.TEST_VID.volume;\n  vjs.TEST_VID.volume = (volume / 2) + 0.1;\n  return volume !== vjs.TEST_VID.volume;\n};\n\n/**\n * Check if playbackRate is supported in this browser/device.\n * @return {[type]} [description]\n */\nvjs.Html5.canControlPlaybackRate = function(){\n  var playbackRate =  vjs.TEST_VID.playbackRate;\n  vjs.TEST_VID.playbackRate = (playbackRate / 2) + 0.1;\n  return playbackRate !== vjs.TEST_VID.playbackRate;\n};\n\n/**\n * Check to see if native text tracks are supported by this browser/device\n * @return {Boolean}\n */\nvjs.Html5.supportsNativeTextTracks = function() {\n  var supportsTextTracks;\n\n  // Figure out native text track support\n  // If mode is a number, we cannot change it because it'll disappear from view.\n  // Browsers with numeric modes include IE10 and older (<=2013) samsung android models.\n  // Firefox isn't playing nice either with modifying the mode\n  // TODO: Investigate firefox: https://github.com/videojs/video.js/issues/1862\n  supportsTextTracks = !!vjs.TEST_VID.textTracks;\n  if (supportsTextTracks && vjs.TEST_VID.textTracks.length > 0) {\n    supportsTextTracks = typeof vjs.TEST_VID.textTracks[0]['mode'] !== 'number';\n  }\n  if (supportsTextTracks && vjs.IS_FIREFOX) {\n    supportsTextTracks = false;\n  }\n\n  return supportsTextTracks;\n};\n\n/**\n * Set the tech's volume control support status\n * @type {Boolean}\n */\nvjs.Html5.prototype['featuresVolumeControl'] = vjs.Html5.canControlVolume();\n\n/**\n * Set the tech's playbackRate support status\n * @type {Boolean}\n */\nvjs.Html5.prototype['featuresPlaybackRate'] = vjs.Html5.canControlPlaybackRate();\n\n/**\n * Set the tech's status on moving the video element.\n * In iOS, if you move a video element in the DOM, it breaks video playback.\n * @type {Boolean}\n */\nvjs.Html5.prototype['movingMediaElementInDOM'] = !vjs.IS_IOS;\n\n/**\n * Set the the tech's fullscreen resize support status.\n * HTML video is able to automatically resize when going to fullscreen.\n * (No longer appears to be used. Can probably be removed.)\n */\nvjs.Html5.prototype['featuresFullscreenResize'] = true;\n\n/**\n * Set the tech's progress event support status\n * (this disables the manual progress events of the MediaTechController)\n */\nvjs.Html5.prototype['featuresProgressEvents'] = true;\n\n/**\n * Sets the tech's status on native text track support\n * @type {Boolean}\n */\nvjs.Html5.prototype['featuresNativeTextTracks'] = vjs.Html5.supportsNativeTextTracks();\n\n// HTML5 Feature detection and Device Fixes --------------------------------- //\n(function() {\n  var canPlayType,\n      mpegurlRE = /^application\\/(?:x-|vnd\\.apple\\.)mpegurl/i,\n      mp4RE = /^video\\/mp4/i;\n\n  vjs.Html5.patchCanPlayType = function() {\n    // Android 4.0 and above can play HLS to some extent but it reports being unable to do so\n    if (vjs.ANDROID_VERSION >= 4.0) {\n      if (!canPlayType) {\n        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;\n      }\n\n      vjs.TEST_VID.constructor.prototype.canPlayType = function(type) {\n        if (type && mpegurlRE.test(type)) {\n          return 'maybe';\n        }\n        return canPlayType.call(this, type);\n      };\n    }\n\n    // Override Android 2.2 and less canPlayType method which is broken\n    if (vjs.IS_OLD_ANDROID) {\n      if (!canPlayType) {\n        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;\n      }\n\n      vjs.TEST_VID.constructor.prototype.canPlayType = function(type){\n        if (type && mp4RE.test(type)) {\n          return 'maybe';\n        }\n        return canPlayType.call(this, type);\n      };\n    }\n  };\n\n  vjs.Html5.unpatchCanPlayType = function() {\n    var r = vjs.TEST_VID.constructor.prototype.canPlayType;\n    vjs.TEST_VID.constructor.prototype.canPlayType = canPlayType;\n    canPlayType = null;\n    return r;\n  };\n\n  // by default, patch the video element\n  vjs.Html5.patchCanPlayType();\n})();\n\n// List of all HTML5 events (various uses).\nvjs.Html5.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange'.split(',');\n\nvjs.Html5.disposeMediaElement = function(el){\n  if (!el) { return; }\n\n  el['player'] = null;\n\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n\n  // remove any child track or source nodes to prevent their loading\n  while(el.hasChildNodes()) {\n    el.removeChild(el.firstChild);\n  }\n\n  // remove any src reference. not setting `src=''` because that causes a warning\n  // in firefox\n  el.removeAttribute('src');\n\n  // force the media element to update its loading state by calling load()\n  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)\n  if (typeof el.load === 'function') {\n    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n    (function() {\n      try {\n        el.load();\n      } catch (e) {\n        // not supported\n      }\n    })();\n  }\n};\n/**\n * @fileoverview VideoJS-SWF - Custom Flash Player with HTML5-ish API\n * https://github.com/zencoder/video-js-swf\n * Not using setupTriggers. Using global onEvent func to distribute events\n */\n\n/**\n * Flash Media Controller - Wrapper for fallback SWF API\n *\n * @param {vjs.Player} player\n * @param {Object=} options\n * @param {Function=} ready\n * @constructor\n */\nvjs.Flash = vjs.MediaTechController.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.MediaTechController.call(this, player, options, ready);\n\n    var source = options['source'],\n\n        // Which element to embed in\n        parentEl = options['parentEl'],\n\n        // Create a temporary element to be replaced by swf object\n        placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),\n\n        // Generate ID for swf object\n        objId = player.id()+'_flash_api',\n\n        // Store player options in local var for optimization\n        // TODO: switch to using player methods instead of options\n        // e.g. player.autoplay();\n        playerOptions = player.options_,\n\n        // Merge default flashvars with ones passed in to init\n        flashVars = vjs.obj.merge({\n\n          // SWF Callback Functions\n          'readyFunction': 'videojs.Flash.onReady',\n          'eventProxyFunction': 'videojs.Flash.onEvent',\n          'errorEventProxyFunction': 'videojs.Flash.onError',\n\n          // Player Settings\n          'autoplay': playerOptions.autoplay,\n          'preload': playerOptions.preload,\n          'loop': playerOptions.loop,\n          'muted': playerOptions.muted\n\n        }, options['flashVars']),\n\n        // Merge default parames with ones passed in\n        params = vjs.obj.merge({\n          'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance\n          'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading\n        }, options['params']),\n\n        // Merge default attributes with ones passed in\n        attributes = vjs.obj.merge({\n          'id': objId,\n          'name': objId, // Both ID and Name needed or swf to identify itself\n          'class': 'vjs-tech'\n        }, options['attributes'])\n    ;\n\n    // If source was supplied pass as a flash var.\n    if (source) {\n      this.ready(function(){\n        this.setSource(source);\n      });\n    }\n\n    // Add placeholder to player div\n    vjs.insertFirst(placeHolder, parentEl);\n\n    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers\n    // This allows resetting the playhead when we catch the reload\n    if (options['startTime']) {\n      this.ready(function(){\n        this.load();\n        this.play();\n        this['currentTime'](options['startTime']);\n      });\n    }\n\n    // firefox doesn't bubble mousemove events to parent. videojs/video-js-swf#37\n    // bugzilla bug: https://bugzilla.mozilla.org/show_bug.cgi?id=836786\n    if (vjs.IS_FIREFOX) {\n      this.ready(function(){\n        this.on('mousemove', function(){\n          // since it's a custom event, don't bubble higher than the player\n          this.player().trigger({ 'type':'mousemove', 'bubbles': false });\n        });\n      });\n    }\n\n    // native click events on the SWF aren't triggered on IE11, Win8.1RT\n    // use stageclick events triggered from inside the SWF instead\n    player.on('stageclick', player.reportUserActivity);\n\n    this.el_ = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);\n  }\n});\n\nvjs.Flash.prototype.dispose = function(){\n  vjs.MediaTechController.prototype.dispose.call(this);\n};\n\nvjs.Flash.prototype.play = function(){\n  this.el_.vjs_play();\n};\n\nvjs.Flash.prototype.pause = function(){\n  this.el_.vjs_pause();\n};\n\nvjs.Flash.prototype.src = function(src){\n  if (src === undefined) {\n    return this['currentSrc']();\n  }\n\n  // Setting src through `src` not `setSrc` will be deprecated\n  return this.setSrc(src);\n};\n\nvjs.Flash.prototype.setSrc = function(src){\n  // Make sure source URL is absolute.\n  src = vjs.getAbsoluteURL(src);\n  this.el_.vjs_src(src);\n\n  // Currently the SWF doesn't autoplay if you load a source later.\n  // e.g. Load player w/ no source, wait 2s, set src.\n  if (this.player_.autoplay()) {\n    var tech = this;\n    this.setTimeout(function(){ tech.play(); }, 0);\n  }\n};\n\nvjs.Flash.prototype['setCurrentTime'] = function(time){\n  this.lastSeekTarget_ = time;\n  this.el_.vjs_setProperty('currentTime', time);\n  vjs.MediaTechController.prototype.setCurrentTime.call(this);\n};\n\nvjs.Flash.prototype['currentTime'] = function(time){\n  // when seeking make the reported time keep up with the requested time\n  // by reading the time we're seeking to\n  if (this.seeking()) {\n    return this.lastSeekTarget_ || 0;\n  }\n  return this.el_.vjs_getProperty('currentTime');\n};\n\nvjs.Flash.prototype['currentSrc'] = function(){\n  if (this.currentSource_) {\n    return this.currentSource_.src;\n  } else {\n    return this.el_.vjs_getProperty('currentSrc');\n  }\n};\n\nvjs.Flash.prototype.load = function(){\n  this.el_.vjs_load();\n};\n\nvjs.Flash.prototype.poster = function(){\n  this.el_.vjs_getProperty('poster');\n};\nvjs.Flash.prototype['setPoster'] = function(){\n  // poster images are not handled by the Flash tech so make this a no-op\n};\n\nvjs.Flash.prototype.buffered = function(){\n  return vjs.createTimeRange(0, this.el_.vjs_getProperty('buffered'));\n};\n\nvjs.Flash.prototype.supportsFullScreen = function(){\n  return false; // Flash does not allow fullscreen through javascript\n};\n\nvjs.Flash.prototype.enterFullScreen = function(){\n  return false;\n};\n\n(function(){\n  // Create setters and getters for attributes\n  var api = vjs.Flash.prototype,\n    readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),\n    readOnly = 'error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight'.split(','),\n    // Overridden: buffered, currentTime, currentSrc\n    i;\n\n  function createSetter(attr){\n    var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);\n    api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };\n  }\n  function createGetter(attr) {\n    api[attr] = function(){ return this.el_.vjs_getProperty(attr); };\n  }\n\n  // Create getter and setters for all read/write attributes\n  for (i = 0; i < readWrite.length; i++) {\n    createGetter(readWrite[i]);\n    createSetter(readWrite[i]);\n  }\n\n  // Create getters for read-only attributes\n  for (i = 0; i < readOnly.length; i++) {\n    createGetter(readOnly[i]);\n  }\n})();\n\n/* Flash Support Testing -------------------------------------------------------- */\n\nvjs.Flash.isSupported = function(){\n  return vjs.Flash.version()[0] >= 10;\n  // return swfobject.hasFlashPlayerVersion('10');\n};\n\n// Add Source Handler pattern functions to this tech\nvjs.MediaTechController.withSourceHandlers(vjs.Flash);\n\n/**\n * The default native source handler.\n * This simply passes the source to the video element. Nothing fancy.\n * @param  {Object} source   The source object\n * @param  {vjs.Flash} tech  The instance of the Flash tech\n */\nvjs.Flash.nativeSourceHandler = {};\n\n/**\n * Check Flash can handle the source natively\n * @param  {Object} source  The source object\n * @return {String}         'probably', 'maybe', or '' (empty string)\n */\nvjs.Flash.nativeSourceHandler.canHandleSource = function(source){\n  var type;\n\n  if (!source.type) {\n    return '';\n  }\n\n  // Strip code information from the type because we don't get that specific\n  type = source.type.replace(/;.*/,'').toLowerCase();\n\n  if (type in vjs.Flash.formats) {\n    return 'maybe';\n  }\n\n  return '';\n};\n\n/**\n * Pass the source to the flash object\n * Adaptive source handlers will have more complicated workflows before passing\n * video data to the video element\n * @param  {Object} source    The source object\n * @param  {vjs.Flash} tech   The instance of the Flash tech\n */\nvjs.Flash.nativeSourceHandler.handleSource = function(source, tech){\n  tech.setSrc(source.src);\n};\n\n/**\n * Clean up the source handler when disposing the player or switching sources..\n * (no cleanup is needed when supporting the format natively)\n */\nvjs.Flash.nativeSourceHandler.dispose = function(){};\n\n// Register the native source handler\nvjs.Flash.registerSourceHandler(vjs.Flash.nativeSourceHandler);\n\nvjs.Flash.formats = {\n  'video/flv': 'FLV',\n  'video/x-flv': 'FLV',\n  'video/mp4': 'MP4',\n  'video/m4v': 'MP4'\n};\n\nvjs.Flash['onReady'] = function(currSwf){\n  var el, player;\n\n  el = vjs.el(currSwf);\n\n  // get player from the player div property\n  player = el && el.parentNode && el.parentNode['player'];\n\n  // if there is no el or player then the tech has been disposed\n  // and the tech element was removed from the player div\n  if (player) {\n    // reference player on tech element\n    el['player'] = player;\n    // check that the flash object is really ready\n    vjs.Flash['checkReady'](player.tech);\n  }\n};\n\n// The SWF isn't always ready when it says it is. Sometimes the API functions still need to be added to the object.\n// If it's not ready, we set a timeout to check again shortly.\nvjs.Flash['checkReady'] = function(tech){\n  // stop worrying if the tech has been disposed\n  if (!tech.el()) {\n    return;\n  }\n\n  // check if API property exists\n  if (tech.el().vjs_getProperty) {\n    // tell tech it's ready\n    tech.triggerReady();\n  } else {\n    // wait longer\n    this.setTimeout(function(){\n      vjs.Flash['checkReady'](tech);\n    }, 50);\n  }\n};\n\n// Trigger events from the swf on the player\nvjs.Flash['onEvent'] = function(swfID, eventName){\n  var player = vjs.el(swfID)['player'];\n  player.trigger(eventName);\n};\n\n// Log errors from the swf\nvjs.Flash['onError'] = function(swfID, err){\n  var player = vjs.el(swfID)['player'];\n  var msg = 'FLASH: '+err;\n\n  if (err == 'srcnotfound') {\n    player.error({ code: 4, message: msg });\n\n  // errors we haven't categorized into the media errors\n  } else {\n    player.error(msg);\n  }\n};\n\n// Flash Version Check\nvjs.Flash.version = function(){\n  var version = '0,0,0';\n\n  // IE\n  try {\n    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\\D+/g, ',').match(/^,?(.+),?$/)[1];\n\n  // other browsers\n  } catch(e) {\n    try {\n      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){\n        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\\D+/g, ',').match(/^,?(.+),?$/)[1];\n      }\n    } catch(err) {}\n  }\n  return version.split(',');\n};\n\n// Flash embedding method. Only used in non-iframe mode\nvjs.Flash.embed = function(swf, placeHolder, flashVars, params, attributes){\n  var code = vjs.Flash.getEmbedCode(swf, flashVars, params, attributes),\n\n      // Get element by embedding code and retrieving created element\n      obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],\n\n      par = placeHolder.parentNode\n  ;\n\n  placeHolder.parentNode.replaceChild(obj, placeHolder);\n\n  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.\n  // This is a dumb fix\n  var newObj = par.childNodes[0];\n  setTimeout(function(){\n    newObj.style.display = 'block';\n  }, 1000);\n\n  return obj;\n\n};\n\nvjs.Flash.getEmbedCode = function(swf, flashVars, params, attributes){\n\n  var objTag = '<object type=\"application/x-shockwave-flash\" ',\n      flashVarsString = '',\n      paramsString = '',\n      attrsString = '';\n\n  // Convert flash vars to string\n  if (flashVars) {\n    vjs.obj.each(flashVars, function(key, val){\n      flashVarsString += (key + '=' + val + '&amp;');\n    });\n  }\n\n  // Add swf, flashVars, and other default params\n  params = vjs.obj.merge({\n    'movie': swf,\n    'flashvars': flashVarsString,\n    'allowScriptAccess': 'always', // Required to talk to swf\n    'allowNetworking': 'all' // All should be default, but having security issues.\n  }, params);\n\n  // Create param tags string\n  vjs.obj.each(params, function(key, val){\n    paramsString += '<param name=\"'+key+'\" value=\"'+val+'\" />';\n  });\n\n  attributes = vjs.obj.merge({\n    // Add swf to attributes (need both for IE and Others to work)\n    'data': swf,\n\n    // Default to 100% width/height\n    'width': '100%',\n    'height': '100%'\n\n  }, attributes);\n\n  // Create Attributes string\n  vjs.obj.each(attributes, function(key, val){\n    attrsString += (key + '=\"' + val + '\" ');\n  });\n\n  return objTag + attrsString + '>' + paramsString + '</object>';\n};\nvjs.Flash.streamingFormats = {\n  'rtmp/mp4': 'MP4',\n  'rtmp/flv': 'FLV'\n};\n\nvjs.Flash.streamFromParts = function(connection, stream) {\n  return connection + '&' + stream;\n};\n\nvjs.Flash.streamToParts = function(src) {\n  var parts = {\n    connection: '',\n    stream: ''\n  };\n\n  if (! src) {\n    return parts;\n  }\n\n  // Look for the normal URL separator we expect, '&'.\n  // If found, we split the URL into two pieces around the\n  // first '&'.\n  var connEnd = src.indexOf('&');\n  var streamBegin;\n  if (connEnd !== -1) {\n    streamBegin = connEnd + 1;\n  }\n  else {\n    // If there's not a '&', we use the last '/' as the delimiter.\n    connEnd = streamBegin = src.lastIndexOf('/') + 1;\n    if (connEnd === 0) {\n      // really, there's not a '/'?\n      connEnd = streamBegin = src.length;\n    }\n  }\n  parts.connection = src.substring(0, connEnd);\n  parts.stream = src.substring(streamBegin, src.length);\n\n  return parts;\n};\n\nvjs.Flash.isStreamingType = function(srcType) {\n  return srcType in vjs.Flash.streamingFormats;\n};\n\n// RTMP has four variations, any string starting\n// with one of these protocols should be valid\nvjs.Flash.RTMP_RE = /^rtmp[set]?:\\/\\//i;\n\nvjs.Flash.isStreamingSrc = function(src) {\n  return vjs.Flash.RTMP_RE.test(src);\n};\n\n/**\n * A source handler for RTMP urls\n * @type {Object}\n */\nvjs.Flash.rtmpSourceHandler = {};\n\n/**\n * Check Flash can handle the source natively\n * @param  {Object} source  The source object\n * @return {String}         'probably', 'maybe', or '' (empty string)\n */\nvjs.Flash.rtmpSourceHandler.canHandleSource = function(source){\n  if (vjs.Flash.isStreamingType(source.type) || vjs.Flash.isStreamingSrc(source.src)) {\n    return 'maybe';\n  }\n\n  return '';\n};\n\n/**\n * Pass the source to the flash object\n * Adaptive source handlers will have more complicated workflows before passing\n * video data to the video element\n * @param  {Object} source    The source object\n * @param  {vjs.Flash} tech   The instance of the Flash tech\n */\nvjs.Flash.rtmpSourceHandler.handleSource = function(source, tech){\n  var srcParts = vjs.Flash.streamToParts(source.src);\n\n  tech['setRtmpConnection'](srcParts.connection);\n  tech['setRtmpStream'](srcParts.stream);\n};\n\n// Register the native source handler\nvjs.Flash.registerSourceHandler(vjs.Flash.rtmpSourceHandler);\n/**\n * The Media Loader is the component that decides which playback technology to load\n * when the player is initialized.\n *\n * @constructor\n */\nvjs.MediaLoader = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.Component.call(this, player, options, ready);\n\n    // If there are no sources when the player is initialized,\n    // load the first supported playback technology.\n    if (!player.options_['sources'] || player.options_['sources'].length === 0) {\n      for (var i=0,j=player.options_['techOrder']; i<j.length; i++) {\n        var techName = vjs.capitalize(j[i]),\n            tech = window['videojs'][techName];\n\n        // Check if the browser supports this technology\n        if (tech && tech.isSupported()) {\n          player.loadTech(techName);\n          break;\n        }\n      }\n    } else {\n      // // Loop through playback technologies (HTML5, Flash) and check for support.\n      // // Then load the best source.\n      // // A few assumptions here:\n      // //   All playback technologies respect preload false.\n      player.src(player.options_['sources']);\n    }\n  }\n});\n/*\n * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackmode\n *\n * enum TextTrackMode { \"disabled\",  \"hidden\",  \"showing\" };\n */\nvjs.TextTrackMode = {\n  'disabled': 'disabled',\n  'hidden': 'hidden',\n  'showing': 'showing'\n};\n\n/*\n * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackkind\n *\n * enum TextTrackKind { \"subtitles\",  \"captions\",  \"descriptions\",  \"chapters\",  \"metadata\" };\n */\nvjs.TextTrackKind = {\n  'subtitles': 'subtitles',\n  'captions': 'captions',\n  'descriptions': 'descriptions',\n  'chapters': 'chapters',\n  'metadata': 'metadata'\n};\n(function() {\n/*\n * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack\n *\n * interface TextTrack : EventTarget {\n *   readonly attribute TextTrackKind kind;\n *   readonly attribute DOMString label;\n *   readonly attribute DOMString language;\n *\n *   readonly attribute DOMString id;\n *   readonly attribute DOMString inBandMetadataTrackDispatchType;\n *\n *   attribute TextTrackMode mode;\n *\n *   readonly attribute TextTrackCueList? cues;\n *   readonly attribute TextTrackCueList? activeCues;\n *\n *   void addCue(TextTrackCue cue);\n *   void removeCue(TextTrackCue cue);\n *\n *   attribute EventHandler oncuechange;\n * };\n */\n\nvjs.TextTrack = function(options) {\n  var tt, id, mode, kind, label, language, cues, activeCues, timeupdateHandler, changed, prop;\n\n  options = options || {};\n\n  if (!options['player']) {\n    throw new Error('A player was not provided.');\n  }\n\n  tt = this;\n  if (vjs.IS_IE8) {\n    tt = document.createElement('custom');\n\n    for (prop in vjs.TextTrack.prototype) {\n      tt[prop] = vjs.TextTrack.prototype[prop];\n    }\n  }\n\n  tt.player_ = options['player'];\n\n  mode = vjs.TextTrackMode[options['mode']] || 'disabled';\n  kind = vjs.TextTrackKind[options['kind']] || 'subtitles';\n  label = options['label'] || '';\n  language = options['language'] || options['srclang'] || '';\n  id = options['id'] || 'vjs_text_track_' + vjs.guid++;\n\n  if (kind === 'metadata' || kind === 'chapters') {\n    mode = 'hidden';\n  }\n\n  tt.cues_ = [];\n  tt.activeCues_ = [];\n\n  cues = new vjs.TextTrackCueList(tt.cues_);\n  activeCues = new vjs.TextTrackCueList(tt.activeCues_);\n\n  changed = false;\n  timeupdateHandler = vjs.bind(tt, function() {\n    this['activeCues'];\n    if (changed) {\n      this['trigger']('cuechange');\n      changed = false;\n    }\n  });\n  if (mode !== 'disabled') {\n    tt.player_.on('timeupdate', timeupdateHandler);\n  }\n\n  Object.defineProperty(tt, 'kind', {\n    get: function() {\n      return kind;\n    },\n    set: Function.prototype\n  });\n\n  Object.defineProperty(tt, 'label', {\n    get: function() {\n      return label;\n    },\n    set: Function.prototype\n  });\n\n  Object.defineProperty(tt, 'language', {\n    get: function() {\n      return language;\n    },\n    set: Function.prototype\n  });\n\n  Object.defineProperty(tt, 'id', {\n    get: function() {\n      return id;\n    },\n    set: Function.prototype\n  });\n\n  Object.defineProperty(tt, 'mode', {\n    get: function() {\n      return mode;\n    },\n    set: function(newMode) {\n      if (!vjs.TextTrackMode[newMode]) {\n        return;\n      }\n      mode = newMode;\n      if (mode === 'showing') {\n        this.player_.on('timeupdate', timeupdateHandler);\n      }\n      this.trigger('modechange');\n    }\n  });\n\n  Object.defineProperty(tt, 'cues', {\n    get: function() {\n      if (!this.loaded_) {\n        return null;\n      }\n\n      return cues;\n    },\n    set: Function.prototype\n  });\n\n  Object.defineProperty(tt, 'activeCues', {\n    get: function() {\n      var i, l, active, ct, cue;\n\n      if (!this.loaded_) {\n        return null;\n      }\n\n      if (this['cues'].length === 0) {\n        return activeCues; // nothing to do\n      }\n\n      ct = this.player_.currentTime();\n      i = 0;\n      l = this['cues'].length;\n      active = [];\n\n      for (; i < l; i++) {\n        cue = this['cues'][i];\n        if (cue['startTime'] <= ct && cue['endTime'] >= ct) {\n          active.push(cue);\n        } else if (cue['startTime'] === cue['endTime'] && cue['startTime'] <= ct && cue['startTime'] + 0.5 >= ct) {\n          active.push(cue);\n        }\n      }\n\n      changed = false;\n\n      if (active.length !== this.activeCues_.length) {\n        changed = true;\n      } else {\n        for (i = 0; i < active.length; i++) {\n          if (indexOf.call(this.activeCues_, active[i]) === -1) {\n            changed = true;\n          }\n        }\n      }\n\n      this.activeCues_ = active;\n      activeCues.setCues_(this.activeCues_);\n\n      return activeCues;\n    },\n    set: Function.prototype\n  });\n\n  if (options.src) {\n    loadTrack(options.src, tt);\n  } else {\n    tt.loaded_ = true;\n  }\n\n  if (vjs.IS_IE8) {\n    return tt;\n  }\n};\n\nvjs.TextTrack.prototype = vjs.obj.create(vjs.EventEmitter.prototype);\nvjs.TextTrack.prototype.constructor = vjs.TextTrack;\n\n/*\n * cuechange - One or more cues in the track have become active or stopped being active.\n */\nvjs.TextTrack.prototype.allowedEvents_ = {\n  'cuechange': 'cuechange'\n};\n\nvjs.TextTrack.prototype.addCue = function(cue) {\n  var tracks = this.player_.textTracks(),\n      i = 0;\n\n  if (tracks) {\n    for (; i < tracks.length; i++) {\n      if (tracks[i] !== this) {\n        tracks[i].removeCue(cue);\n      }\n    }\n  }\n\n  this.cues_.push(cue);\n  this['cues'].setCues_(this.cues_);\n};\n\nvjs.TextTrack.prototype.removeCue = function(removeCue) {\n  var i = 0,\n      l = this.cues_.length,\n      cue,\n      removed = false;\n\n  for (; i < l; i++) {\n    cue = this.cues_[i];\n    if (cue === removeCue) {\n      this.cues_.splice(i, 1);\n      removed = true;\n    }\n  }\n\n  if (removed) {\n    this.cues.setCues_(this.cues_);\n  }\n};\n\n/*\n * Downloading stuff happens below this point\n */\nvar loadTrack, parseCues, indexOf;\n\nloadTrack = function(src, track) {\n  vjs.xhr(src, vjs.bind(this, function(err, response, responseBody){\n    if (err) {\n      return vjs.log.error(err);\n    }\n\n\n    track.loaded_ = true;\n    parseCues(responseBody, track);\n  }));\n};\n\nparseCues = function(srcContent, track) {\n  if (typeof window['WebVTT'] !== 'function') {\n    //try again a bit later\n    return window.setTimeout(function() {\n      parseCues(srcContent, track);\n    }, 25);\n  }\n\n  var parser = new window['WebVTT']['Parser'](window, window['vttjs'], window['WebVTT']['StringDecoder']());\n\n  parser['oncue'] = function(cue) {\n    track.addCue(cue);\n  };\n  parser['onparsingerror'] = function(error) {\n    vjs.log.error(error);\n  };\n\n  parser['parse'](srcContent);\n  parser['flush']();\n};\n\nindexOf = function(searchElement, fromIndex) {\n\n  var k;\n\n  if (this == null) {\n    throw new TypeError('\"this\" is null or not defined');\n  }\n\n  var O = Object(this);\n\n  var len = O.length >>> 0;\n\n  if (len === 0) {\n    return -1;\n  }\n\n  var n = +fromIndex || 0;\n\n  if (Math.abs(n) === Infinity) {\n    n = 0;\n  }\n\n  if (n >= len) {\n    return -1;\n  }\n\n  k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n  while (k < len) {\n    if (k in O && O[k] === searchElement) {\n      return k;\n    }\n    k++;\n  }\n  return -1;\n};\n\n})();\n/*\n * https://html.spec.whatwg.org/multipage/embedded-content.html#texttracklist\n *\n * interface TextTrackList : EventTarget {\n *   readonly attribute unsigned long length;\n *   getter TextTrack (unsigned long index);\n *   TextTrack? getTrackById(DOMString id);\n *\n *   attribute EventHandler onchange;\n *   attribute EventHandler onaddtrack;\n *   attribute EventHandler onremovetrack;\n * };\n */\nvjs.TextTrackList = function(tracks) {\n  var list = this,\n      prop,\n      i = 0;\n\n  if (vjs.IS_IE8) {\n    list = document.createElement('custom');\n\n    for (prop in vjs.TextTrackList.prototype) {\n      list[prop] = vjs.TextTrackList.prototype[prop];\n    }\n  }\n\n  tracks = tracks || [];\n  list.tracks_ = [];\n\n  Object.defineProperty(list, 'length', {\n    get: function() {\n      return this.tracks_.length;\n    }\n  });\n\n  for (; i < tracks.length; i++) {\n    list.addTrack_(tracks[i]);\n  }\n\n  if (vjs.IS_IE8) {\n    return list;\n  }\n};\n\nvjs.TextTrackList.prototype = vjs.obj.create(vjs.EventEmitter.prototype);\nvjs.TextTrackList.prototype.constructor = vjs.TextTrackList;\n\n/*\n * change - One or more tracks in the track list have been enabled or disabled.\n * addtrack - A track has been added to the track list.\n * removetrack - A track has been removed from the track list.\n*/\nvjs.TextTrackList.prototype.allowedEvents_ = {\n  'change': 'change',\n  'addtrack': 'addtrack',\n  'removetrack': 'removetrack'\n};\n\n// emulate attribute EventHandler support to allow for feature detection\n(function() {\n  var event;\n\n  for (event in vjs.TextTrackList.prototype.allowedEvents_) {\n    vjs.TextTrackList.prototype['on' + event] = null;\n  }\n})();\n\nvjs.TextTrackList.prototype.addTrack_ = function(track) {\n  var index = this.tracks_.length;\n  if (!(''+index in this)) {\n    Object.defineProperty(this, index, {\n      get: function() {\n        return this.tracks_[index];\n      }\n    });\n  }\n\n  track.addEventListener('modechange', vjs.bind(this, function() {\n    this.trigger('change');\n  }));\n  this.tracks_.push(track);\n\n  this.trigger({\n    type: 'addtrack',\n    track: track\n  });\n};\n\nvjs.TextTrackList.prototype.removeTrack_ = function(rtrack) {\n  var i = 0,\n      l = this.length,\n      result = null,\n      track;\n\n  for (; i < l; i++) {\n    track = this[i];\n    if (track === rtrack) {\n      this.tracks_.splice(i, 1);\n      break;\n    }\n  }\n\n  this.trigger({\n    type: 'removetrack',\n    track: rtrack\n  });\n};\n\nvjs.TextTrackList.prototype.getTrackById = function(id) {\n  var i = 0,\n      l = this.length,\n      result = null,\n      track;\n\n  for (; i < l; i++) {\n    track = this[i];\n    if (track.id === id) {\n      result = track;\n      break;\n    }\n  }\n\n  return result;\n};\n/*\n * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcuelist\n *\n * interface TextTrackCueList {\n *   readonly attribute unsigned long length;\n *   getter TextTrackCue (unsigned long index);\n *   TextTrackCue? getCueById(DOMString id);\n * };\n */\n\nvjs.TextTrackCueList = function(cues) {\n  var list = this,\n      prop;\n\n  if (vjs.IS_IE8) {\n    list = document.createElement('custom');\n\n    for (prop in vjs.TextTrackCueList.prototype) {\n      list[prop] = vjs.TextTrackCueList.prototype[prop];\n    }\n  }\n\n  vjs.TextTrackCueList.prototype.setCues_.call(list, cues);\n\n  Object.defineProperty(list, 'length', {\n    get: function() {\n      return this.length_;\n    }\n  });\n\n  if (vjs.IS_IE8) {\n    return list;\n  }\n};\n\nvjs.TextTrackCueList.prototype.setCues_ = function(cues) {\n  var oldLength = this.length || 0,\n      i = 0,\n      l = cues.length,\n      defineProp;\n\n  this.cues_ = cues;\n  this.length_ = cues.length;\n\n  defineProp = function(i) {\n    if (!(''+i in this)) {\n      Object.defineProperty(this, '' + i, {\n        get: function() {\n          return this.cues_[i];\n        }\n      });\n    }\n  };\n\n  if (oldLength < l) {\n    i = oldLength;\n    for(; i < l; i++) {\n      defineProp.call(this, i);\n    }\n  }\n};\n\nvjs.TextTrackCueList.prototype.getCueById = function(id) {\n  var i = 0,\n      l = this.length,\n      result = null,\n      cue;\n\n  for (; i < l; i++) {\n    cue = this[i];\n    if (cue.id === id) {\n      result = cue;\n      break;\n    }\n  }\n\n  return result;\n};\n(function() {\n'use strict';\n\n/* Text Track Display\n============================================================================= */\n// Global container for both subtitle and captions text. Simple div container.\n\n/**\n * The component for displaying text track cues\n *\n * @constructor\n */\nvjs.TextTrackDisplay = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.Component.call(this, player, options, ready);\n\n    player.on('loadstart', vjs.bind(this, this.toggleDisplay));\n\n    // This used to be called during player init, but was causing an error\n    // if a track should show by default and the display hadn't loaded yet.\n    // Should probably be moved to an external track loader when we support\n    // tracks that don't need a display.\n    player.ready(vjs.bind(this, function() {\n      if (player.tech && player.tech['featuresNativeTextTracks']) {\n        this.hide();\n        return;\n      }\n\n      var i, tracks, track;\n\n      player.on('fullscreenchange', vjs.bind(this, this.updateDisplay));\n\n      tracks = player.options_['tracks'] || [];\n      for (i = 0; i < tracks.length; i++) {\n        track = tracks[i];\n        this.player_.addRemoteTextTrack(track);\n      }\n    }));\n  }\n});\n\nvjs.TextTrackDisplay.prototype.toggleDisplay = function() {\n  if (this.player_.tech && this.player_.tech['featuresNativeTextTracks']) {\n    this.hide();\n  } else {\n    this.show();\n  }\n};\n\nvjs.TextTrackDisplay.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-text-track-display'\n  });\n};\n\nvjs.TextTrackDisplay.prototype.clearDisplay = function() {\n  if (typeof window['WebVTT'] === 'function') {\n    window['WebVTT']['processCues'](window, [], this.el_);\n  }\n};\n\n// Add cue HTML to display\nvar constructColor = function(color, opacity) {\n  return 'rgba(' +\n    // color looks like \"#f0e\"\n    parseInt(color[1] + color[1], 16) + ',' +\n    parseInt(color[2] + color[2], 16) + ',' +\n    parseInt(color[3] + color[3], 16) + ',' +\n    opacity + ')';\n};\nvar darkGray = '#222';\nvar lightGray = '#ccc';\nvar fontMap = {\n  monospace:             'monospace',\n  sansSerif:             'sans-serif',\n  serif:                 'serif',\n  monospaceSansSerif:    '\"Andale Mono\", \"Lucida Console\", monospace',\n  monospaceSerif:        '\"Courier New\", monospace',\n  proportionalSansSerif: 'sans-serif',\n  proportionalSerif:     'serif',\n  casual:                '\"Comic Sans MS\", Impact, fantasy',\n  script:                '\"Monotype Corsiva\", cursive',\n  smallcaps:             '\"Andale Mono\", \"Lucida Console\", monospace, sans-serif'\n};\nvar tryUpdateStyle = function(el, style, rule) {\n  // some style changes will throw an error, particularly in IE8. Those should be noops.\n  try {\n    el.style[style] = rule;\n  } catch (e) {}\n};\n\nvjs.TextTrackDisplay.prototype.updateDisplay = function() {\n  var tracks = this.player_.textTracks(),\n      i = 0,\n      track;\n\n  this.clearDisplay();\n\n  if (!tracks) {\n    return;\n  }\n\n  for (; i < tracks.length; i++) {\n    track = tracks[i];\n    if (track['mode'] === 'showing') {\n      this.updateForTrack(track);\n    }\n  }\n};\n\nvjs.TextTrackDisplay.prototype.updateForTrack = function(track) {\n  if (typeof window['WebVTT'] !== 'function' || !track['activeCues']) {\n    return;\n  }\n\n  var i = 0,\n      property,\n      cueDiv,\n      overrides = this.player_['textTrackSettings'].getValues(),\n      fontSize,\n      cues = [];\n\n  for (; i < track['activeCues'].length; i++) {\n    cues.push(track['activeCues'][i]);\n  }\n\n  window['WebVTT']['processCues'](window, track['activeCues'], this.el_);\n\n  i = cues.length;\n  while (i--) {\n    cueDiv = cues[i].displayState;\n    if (overrides.color) {\n      cueDiv.firstChild.style.color = overrides.color;\n    }\n    if (overrides.textOpacity) {\n      tryUpdateStyle(cueDiv.firstChild,\n                     'color',\n                     constructColor(overrides.color || '#fff',\n                                    overrides.textOpacity));\n    }\n    if (overrides.backgroundColor) {\n      cueDiv.firstChild.style.backgroundColor = overrides.backgroundColor;\n    }\n    if (overrides.backgroundOpacity) {\n      tryUpdateStyle(cueDiv.firstChild,\n                     'backgroundColor',\n                     constructColor(overrides.backgroundColor || '#000',\n                                    overrides.backgroundOpacity));\n    }\n    if (overrides.windowColor) {\n      if (overrides.windowOpacity) {\n        tryUpdateStyle(cueDiv,\n                       'backgroundColor',\n                       constructColor(overrides.windowColor, overrides.windowOpacity));\n      } else {\n        cueDiv.style.backgroundColor = overrides.windowColor;\n      }\n    }\n    if (overrides.edgeStyle) {\n      if (overrides.edgeStyle === 'dropshadow') {\n        cueDiv.firstChild.style.textShadow = '2px 2px 3px ' + darkGray + ', 2px 2px 4px ' + darkGray + ', 2px 2px 5px ' + darkGray;\n      } else if (overrides.edgeStyle === 'raised') {\n        cueDiv.firstChild.style.textShadow = '1px 1px ' + darkGray + ', 2px 2px ' + darkGray + ', 3px 3px ' + darkGray;\n      } else if (overrides.edgeStyle === 'depressed') {\n        cueDiv.firstChild.style.textShadow = '1px 1px ' + lightGray + ', 0 1px ' + lightGray + ', -1px -1px ' + darkGray + ', 0 -1px ' + darkGray;\n      } else if (overrides.edgeStyle === 'uniform') {\n        cueDiv.firstChild.style.textShadow = '0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray;\n      }\n    }\n    if (overrides.fontPercent && overrides.fontPercent !== 1) {\n      fontSize = window.parseFloat(cueDiv.style.fontSize);\n      cueDiv.style.fontSize = (fontSize * overrides.fontPercent) + 'px';\n      cueDiv.style.height = 'auto';\n      cueDiv.style.top = 'auto';\n      cueDiv.style.bottom = '2px';\n    }\n    if (overrides.fontFamily && overrides.fontFamily !== 'default') {\n      if (overrides.fontFamily === 'small-caps') {\n        cueDiv.firstChild.style.fontVariant = 'small-caps';\n      } else {\n        cueDiv.firstChild.style.fontFamily = fontMap[overrides.fontFamily];\n      }\n    }\n  }\n};\n\n\n/**\n * The specific menu item type for selecting a language within a text track kind\n *\n * @constructor\n */\nvjs.TextTrackMenuItem = vjs.MenuItem.extend({\n  /** @constructor */\n  init: function(player, options){\n    var track = this.track = options['track'],\n        tracks = player.textTracks(),\n        changeHandler,\n        event;\n\n    if (tracks) {\n      changeHandler = vjs.bind(this, function() {\n        var selected = this.track['mode'] === 'showing',\n            track,\n            i,\n            l;\n\n        if (this instanceof vjs.OffTextTrackMenuItem) {\n          selected = true;\n\n          i = 0,\n          l = tracks.length;\n\n          for (; i < l; i++) {\n            track = tracks[i];\n            if (track['kind'] === this.track['kind'] && track['mode'] === 'showing') {\n              selected = false;\n              break;\n            }\n          }\n        }\n\n        this.selected(selected);\n      });\n      tracks.addEventListener('change', changeHandler);\n      player.on('dispose', function() {\n        tracks.removeEventListener('change', changeHandler);\n      });\n    }\n\n    // Modify options for parent MenuItem class's init.\n    options['label'] = track['label'] || track['language'] || 'Unknown';\n    options['selected'] = track['default'] || track['mode'] === 'showing';\n    vjs.MenuItem.call(this, player, options);\n\n    // iOS7 doesn't dispatch change events to TextTrackLists when an\n    // associated track's mode changes. Without something like\n    // Object.observe() (also not present on iOS7), it's not\n    // possible to detect changes to the mode attribute and polyfill\n    // the change event. As a poor substitute, we manually dispatch\n    // change events whenever the controls modify the mode.\n    if (tracks && tracks.onchange === undefined) {\n      this.on(['tap', 'click'], function() {\n        if (typeof window.Event !== 'object') {\n          // Android 2.3 throws an Illegal Constructor error for window.Event\n          try {\n            event = new window.Event('change');\n          } catch(err){}\n        }\n\n        if (!event) {\n          event = document.createEvent('Event');\n          event.initEvent('change', true, true);\n        }\n\n        tracks.dispatchEvent(event);\n      });\n    }\n  }\n});\n\nvjs.TextTrackMenuItem.prototype.onClick = function(){\n  var kind = this.track['kind'],\n      tracks = this.player_.textTracks(),\n      mode,\n      track,\n      i = 0;\n\n  vjs.MenuItem.prototype.onClick.call(this);\n\n  if (!tracks) {\n    return;\n  }\n\n  for (; i < tracks.length; i++) {\n    track = tracks[i];\n\n    if (track['kind'] !== kind) {\n      continue;\n    }\n\n    if (track === this.track) {\n      track['mode'] = 'showing';\n    } else {\n      track['mode'] = 'disabled';\n    }\n  }\n};\n\n/**\n * A special menu item for turning of a specific type of text track\n *\n * @constructor\n */\nvjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({\n  /** @constructor */\n  init: function(player, options){\n    // Create pseudo track info\n    // Requires options['kind']\n    options['track'] = {\n      'kind': options['kind'],\n      'player': player,\n      'label': options['kind'] + ' off',\n      'default': false,\n      'mode': 'disabled'\n    };\n    vjs.TextTrackMenuItem.call(this, player, options);\n    this.selected(true);\n  }\n});\n\nvjs.CaptionSettingsMenuItem = vjs.TextTrackMenuItem.extend({\n  init: function(player, options) {\n    options['track'] = {\n      'kind': options['kind'],\n      'player': player,\n      'label': options['kind'] + ' settings',\n      'default': false,\n      mode: 'disabled'\n    };\n\n    vjs.TextTrackMenuItem.call(this, player, options);\n    this.addClass('vjs-texttrack-settings');\n  }\n});\n\nvjs.CaptionSettingsMenuItem.prototype.onClick = function() {\n  this.player().getChild('textTrackSettings').show();\n};\n\n/**\n * The base class for buttons that toggle specific text track types (e.g. subtitles)\n *\n * @constructor\n */\nvjs.TextTrackButton = vjs.MenuButton.extend({\n  /** @constructor */\n  init: function(player, options){\n    var tracks, updateHandler;\n\n    vjs.MenuButton.call(this, player, options);\n\n    tracks = this.player_.textTracks();\n\n    if (this.items.length <= 1) {\n      this.hide();\n    }\n\n    if (!tracks) {\n      return;\n    }\n\n    updateHandler = vjs.bind(this, this.update);\n    tracks.addEventListener('removetrack', updateHandler);\n    tracks.addEventListener('addtrack', updateHandler);\n\n    this.player_.on('dispose', function() {\n      tracks.removeEventListener('removetrack', updateHandler);\n      tracks.removeEventListener('addtrack', updateHandler);\n    });\n  }\n});\n\n// Create a menu item for each text track\nvjs.TextTrackButton.prototype.createItems = function(){\n  var items = [], track, tracks;\n\n  if (this instanceof vjs.CaptionsButton && !(this.player().tech && this.player().tech['featuresNativeTextTracks'])) {\n    items.push(new vjs.CaptionSettingsMenuItem(this.player_, { 'kind': this.kind_ }));\n  }\n\n  // Add an OFF menu item to turn all tracks off\n  items.push(new vjs.OffTextTrackMenuItem(this.player_, { 'kind': this.kind_ }));\n\n  tracks = this.player_.textTracks();\n\n  if (!tracks) {\n    return items;\n  }\n\n  for (var i = 0; i < tracks.length; i++) {\n    track = tracks[i];\n\n    // only add tracks that are of the appropriate kind and have a label\n    if (track['kind'] === this.kind_) {\n      items.push(new vjs.TextTrackMenuItem(this.player_, {\n        'track': track\n      }));\n    }\n  }\n\n  return items;\n};\n\n/**\n * The button component for toggling and selecting captions\n *\n * @constructor\n */\nvjs.CaptionsButton = vjs.TextTrackButton.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.TextTrackButton.call(this, player, options, ready);\n    this.el_.setAttribute('aria-label','Captions Menu');\n  }\n});\nvjs.CaptionsButton.prototype.kind_ = 'captions';\nvjs.CaptionsButton.prototype.buttonText = 'Captions';\nvjs.CaptionsButton.prototype.className = 'vjs-captions-button';\n\nvjs.CaptionsButton.prototype.update = function() {\n  var threshold = 2;\n  vjs.TextTrackButton.prototype.update.call(this);\n\n  // if native, then threshold is 1 because no settings button\n  if (this.player().tech && this.player().tech['featuresNativeTextTracks']) {\n    threshold = 1;\n  }\n\n  if (this.items && this.items.length > threshold) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\n\n/**\n * The button component for toggling and selecting subtitles\n *\n * @constructor\n */\nvjs.SubtitlesButton = vjs.TextTrackButton.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.TextTrackButton.call(this, player, options, ready);\n    this.el_.setAttribute('aria-label','Subtitles Menu');\n  }\n});\nvjs.SubtitlesButton.prototype.kind_ = 'subtitles';\nvjs.SubtitlesButton.prototype.buttonText = 'Subtitles';\nvjs.SubtitlesButton.prototype.className = 'vjs-subtitles-button';\n\n// Chapters act much differently than other text tracks\n// Cues are navigation vs. other tracks of alternative languages\n/**\n * The button component for toggling and selecting chapters\n *\n * @constructor\n */\nvjs.ChaptersButton = vjs.TextTrackButton.extend({\n  /** @constructor */\n  init: function(player, options, ready){\n    vjs.TextTrackButton.call(this, player, options, ready);\n    this.el_.setAttribute('aria-label','Chapters Menu');\n  }\n});\nvjs.ChaptersButton.prototype.kind_ = 'chapters';\nvjs.ChaptersButton.prototype.buttonText = 'Chapters';\nvjs.ChaptersButton.prototype.className = 'vjs-chapters-button';\n\n// Create a menu item for each text track\nvjs.ChaptersButton.prototype.createItems = function(){\n  var items = [], track, tracks;\n\n  tracks = this.player_.textTracks();\n\n  if (!tracks) {\n    return items;\n  }\n\n  for (var i = 0; i < tracks.length; i++) {\n    track = tracks[i];\n    if (track['kind'] === this.kind_) {\n      items.push(new vjs.TextTrackMenuItem(this.player_, {\n        'track': track\n      }));\n    }\n  }\n\n  return items;\n};\n\nvjs.ChaptersButton.prototype.createMenu = function(){\n  var tracks = this.player_.textTracks() || [],\n      i = 0,\n      l = tracks.length,\n      track, chaptersTrack,\n      items = this.items = [];\n\n  for (; i < l; i++) {\n    track = tracks[i];\n    if (track['kind'] == this.kind_) {\n      if (!track.cues) {\n        track['mode'] = 'hidden';\n        /* jshint loopfunc:true */\n        // TODO see if we can figure out a better way of doing this https://github.com/videojs/video.js/issues/1864\n        window.setTimeout(vjs.bind(this, function() {\n          this.createMenu();\n        }), 100);\n        /* jshint loopfunc:false */\n      } else {\n        chaptersTrack = track;\n        break;\n      }\n    }\n  }\n\n  var menu = this.menu;\n  if (menu === undefined) {\n    menu = new vjs.Menu(this.player_);\n    menu.contentEl().appendChild(vjs.createEl('li', {\n      className: 'vjs-menu-title',\n      innerHTML: vjs.capitalize(this.kind_),\n      tabindex: -1\n    }));\n  }\n\n  if (chaptersTrack) {\n    var cues = chaptersTrack['cues'], cue, mi;\n    i = 0;\n    l = cues.length;\n\n    for (; i < l; i++) {\n      cue = cues[i];\n\n      mi = new vjs.ChaptersTrackMenuItem(this.player_, {\n        'track': chaptersTrack,\n        'cue': cue\n      });\n\n      items.push(mi);\n\n      menu.addChild(mi);\n    }\n    this.addChild(menu);\n  }\n\n  if (this.items.length > 0) {\n    this.show();\n  }\n\n  return menu;\n};\n\n\n/**\n * @constructor\n */\nvjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({\n  /** @constructor */\n  init: function(player, options){\n    var track = this.track = options['track'],\n        cue = this.cue = options['cue'],\n        currentTime = player.currentTime();\n\n    // Modify options for parent MenuItem class's init.\n    options['label'] = cue.text;\n    options['selected'] = (cue['startTime'] <= currentTime && currentTime < cue['endTime']);\n    vjs.MenuItem.call(this, player, options);\n\n    track.addEventListener('cuechange', vjs.bind(this, this.update));\n  }\n});\n\nvjs.ChaptersTrackMenuItem.prototype.onClick = function(){\n  vjs.MenuItem.prototype.onClick.call(this);\n  this.player_.currentTime(this.cue.startTime);\n  this.update(this.cue.startTime);\n};\n\nvjs.ChaptersTrackMenuItem.prototype.update = function(){\n  var cue = this.cue,\n      currentTime = this.player_.currentTime();\n\n  // vjs.log(currentTime, cue.startTime);\n  this.selected(cue['startTime'] <= currentTime && currentTime < cue['endTime']);\n};\n})();\n(function() {\n  'use strict';\n\n  vjs.TextTrackSettings = vjs.Component.extend({\n    init: function(player, options) {\n      vjs.Component.call(this, player, options);\n      this.hide();\n\n      vjs.on(this.el().querySelector('.vjs-done-button'), 'click', vjs.bind(this, function() {\n        this.saveSettings();\n        this.hide();\n      }));\n\n      vjs.on(this.el().querySelector('.vjs-default-button'), 'click', vjs.bind(this, function() {\n        this.el().querySelector('.vjs-fg-color > select').selectedIndex = 0;\n        this.el().querySelector('.vjs-bg-color > select').selectedIndex = 0;\n        this.el().querySelector('.window-color > select').selectedIndex = 0;\n        this.el().querySelector('.vjs-text-opacity > select').selectedIndex = 0;\n        this.el().querySelector('.vjs-bg-opacity > select').selectedIndex = 0;\n        this.el().querySelector('.vjs-window-opacity > select').selectedIndex = 0;\n        this.el().querySelector('.vjs-edge-style select').selectedIndex = 0;\n        this.el().querySelector('.vjs-font-family select').selectedIndex = 0;\n        this.el().querySelector('.vjs-font-percent select').selectedIndex = 2;\n        this.updateDisplay();\n      }));\n\n      vjs.on(this.el().querySelector('.vjs-fg-color > select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-bg-color > select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.window-color > select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-text-opacity > select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-bg-opacity > select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-window-opacity > select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-font-percent select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-edge-style select'), 'change', vjs.bind(this, this.updateDisplay));\n      vjs.on(this.el().querySelector('.vjs-font-family select'), 'change', vjs.bind(this, this.updateDisplay));\n\n      if (player.options()['persistTextTrackSettings']) {\n        this.restoreSettings();\n      }\n    }\n  });\n\n  vjs.TextTrackSettings.prototype.createEl = function() {\n    return vjs.Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-caption-settings vjs-modal-overlay',\n      innerHTML: captionOptionsMenuTemplate()\n    });\n  };\n\n  vjs.TextTrackSettings.prototype.getValues = function() {\n    var el, bgOpacity, textOpacity, windowOpacity, textEdge, fontFamily, fgColor, bgColor, windowColor, result, name, fontPercent;\n\n    el = this.el();\n\n    textEdge = getSelectedOptionValue(el.querySelector('.vjs-edge-style select'));\n    fontFamily = getSelectedOptionValue(el.querySelector('.vjs-font-family select'));\n    fgColor = getSelectedOptionValue(el.querySelector('.vjs-fg-color > select'));\n    textOpacity = getSelectedOptionValue(el.querySelector('.vjs-text-opacity > select'));\n    bgColor = getSelectedOptionValue(el.querySelector('.vjs-bg-color > select'));\n    bgOpacity = getSelectedOptionValue(el.querySelector('.vjs-bg-opacity > select'));\n    windowColor = getSelectedOptionValue(el.querySelector('.window-color > select'));\n    windowOpacity = getSelectedOptionValue(el.querySelector('.vjs-window-opacity > select'));\n    fontPercent = window['parseFloat'](getSelectedOptionValue(el.querySelector('.vjs-font-percent > select')));\n\n    result = {\n      'backgroundOpacity': bgOpacity,\n      'textOpacity': textOpacity,\n      'windowOpacity': windowOpacity,\n      'edgeStyle': textEdge,\n      'fontFamily': fontFamily,\n      'color': fgColor,\n      'backgroundColor': bgColor,\n      'windowColor': windowColor,\n      'fontPercent': fontPercent\n    };\n    for (name in result) {\n      if (result[name] === '' || result[name] === 'none' || (name === 'fontPercent' && result[name] === 1.00)) {\n        delete result[name];\n      }\n    }\n    return result;\n  };\n\n  vjs.TextTrackSettings.prototype.setValues = function(values) {\n    var el = this.el(), fontPercent;\n\n    setSelectedOption(el.querySelector('.vjs-edge-style select'), values.edgeStyle);\n    setSelectedOption(el.querySelector('.vjs-font-family select'), values.fontFamily);\n    setSelectedOption(el.querySelector('.vjs-fg-color > select'), values.color);\n    setSelectedOption(el.querySelector('.vjs-text-opacity > select'), values.textOpacity);\n    setSelectedOption(el.querySelector('.vjs-bg-color > select'), values.backgroundColor);\n    setSelectedOption(el.querySelector('.vjs-bg-opacity > select'), values.backgroundOpacity);\n    setSelectedOption(el.querySelector('.window-color > select'), values.windowColor);\n    setSelectedOption(el.querySelector('.vjs-window-opacity > select'), values.windowOpacity);\n\n    fontPercent = values.fontPercent;\n\n    if (fontPercent) {\n      fontPercent = fontPercent.toFixed(2);\n    }\n\n    setSelectedOption(el.querySelector('.vjs-font-percent > select'), fontPercent);\n  };\n\n  vjs.TextTrackSettings.prototype.restoreSettings = function() {\n    var values;\n    try {\n      values = JSON.parse(window.localStorage.getItem('vjs-text-track-settings'));\n    } catch (e) {}\n\n    if (values) {\n      this.setValues(values);\n    }\n  };\n\n  vjs.TextTrackSettings.prototype.saveSettings = function() {\n    var values;\n\n    if (!this.player_.options()['persistTextTrackSettings']) {\n      return;\n    }\n\n    values = this.getValues();\n    try {\n      if (!vjs.isEmpty(values)) {\n        window.localStorage.setItem('vjs-text-track-settings', JSON.stringify(values));\n      } else {\n        window.localStorage.removeItem('vjs-text-track-settings');\n      }\n    } catch (e) {}\n  };\n\n  vjs.TextTrackSettings.prototype.updateDisplay = function() {\n    var ttDisplay = this.player_.getChild('textTrackDisplay');\n    if (ttDisplay) {\n      ttDisplay.updateDisplay();\n    }\n  };\n\n  function getSelectedOptionValue(target) {\n    var selectedOption;\n    // not all browsers support selectedOptions, so, fallback to options\n    if (target.selectedOptions) {\n      selectedOption = target.selectedOptions[0];\n    } else if (target.options) {\n      selectedOption = target.options[target.options.selectedIndex];\n    }\n\n    return selectedOption.value;\n  }\n\n  function setSelectedOption(target, value) {\n    var i, option;\n\n    if (!value) {\n      return;\n    }\n\n    for (i = 0; i < target.options.length; i++) {\n      option = target.options[i];\n      if (option.value === value) {\n        break;\n      }\n    }\n\n    target.selectedIndex = i;\n  }\n\n  function captionOptionsMenuTemplate() {\n    return '<div class=\"vjs-tracksettings\">' +\n        '<div class=\"vjs-tracksettings-colors\">' +\n          '<div class=\"vjs-fg-color vjs-tracksetting\">' +\n              '<label class=\"vjs-label\">Foreground</label>' +\n              '<select>' +\n                '<option value=\"\">---</option>' +\n                '<option value=\"#FFF\">White</option>' +\n                '<option value=\"#000\">Black</option>' +\n                '<option value=\"#F00\">Red</option>' +\n                '<option value=\"#0F0\">Green</option>' +\n                '<option value=\"#00F\">Blue</option>' +\n                '<option value=\"#FF0\">Yellow</option>' +\n                '<option value=\"#F0F\">Magenta</option>' +\n                '<option value=\"#0FF\">Cyan</option>' +\n              '</select>' +\n              '<span class=\"vjs-text-opacity vjs-opacity\">' +\n                '<select>' +\n                  '<option value=\"\">---</option>' +\n                  '<option value=\"1\">Opaque</option>' +\n                  '<option value=\"0.5\">Semi-Opaque</option>' +\n                '</select>' +\n              '</span>' +\n          '</div>' + // vjs-fg-color\n          '<div class=\"vjs-bg-color vjs-tracksetting\">' +\n              '<label class=\"vjs-label\">Background</label>' +\n              '<select>' +\n                '<option value=\"\">---</option>' +\n                '<option value=\"#FFF\">White</option>' +\n                '<option value=\"#000\">Black</option>' +\n                '<option value=\"#F00\">Red</option>' +\n                '<option value=\"#0F0\">Green</option>' +\n                '<option value=\"#00F\">Blue</option>' +\n                '<option value=\"#FF0\">Yellow</option>' +\n                '<option value=\"#F0F\">Magenta</option>' +\n                '<option value=\"#0FF\">Cyan</option>' +\n              '</select>' +\n              '<span class=\"vjs-bg-opacity vjs-opacity\">' +\n                  '<select>' +\n                    '<option value=\"\">---</option>' +\n                    '<option value=\"1\">Opaque</option>' +\n                    '<option value=\"0.5\">Semi-Transparent</option>' +\n                    '<option value=\"0\">Transparent</option>' +\n                  '</select>' +\n              '</span>' +\n          '</div>' + // vjs-bg-color\n          '<div class=\"window-color vjs-tracksetting\">' +\n              '<label class=\"vjs-label\">Window</label>' +\n              '<select>' +\n                '<option value=\"\">---</option>' +\n                '<option value=\"#FFF\">White</option>' +\n                '<option value=\"#000\">Black</option>' +\n                '<option value=\"#F00\">Red</option>' +\n                '<option value=\"#0F0\">Green</option>' +\n                '<option value=\"#00F\">Blue</option>' +\n                '<option value=\"#FF0\">Yellow</option>' +\n                '<option value=\"#F0F\">Magenta</option>' +\n                '<option value=\"#0FF\">Cyan</option>' +\n              '</select>' +\n              '<span class=\"vjs-window-opacity vjs-opacity\">' +\n                  '<select>' +\n                    '<option value=\"\">---</option>' +\n                    '<option value=\"1\">Opaque</option>' +\n                    '<option value=\"0.5\">Semi-Transparent</option>' +\n                    '<option value=\"0\">Transparent</option>' +\n                  '</select>' +\n              '</span>' +\n          '</div>' + // vjs-window-color\n        '</div>' + // vjs-tracksettings\n        '<div class=\"vjs-tracksettings-font\">' +\n          '<div class=\"vjs-font-percent vjs-tracksetting\">' +\n            '<label class=\"vjs-label\">Font Size</label>' +\n            '<select>' +\n              '<option value=\"0.50\">50%</option>' +\n              '<option value=\"0.75\">75%</option>' +\n              '<option value=\"1.00\" selected>100%</option>' +\n              '<option value=\"1.25\">125%</option>' +\n              '<option value=\"1.50\">150%</option>' +\n              '<option value=\"1.75\">175%</option>' +\n              '<option value=\"2.00\">200%</option>' +\n              '<option value=\"3.00\">300%</option>' +\n              '<option value=\"4.00\">400%</option>' +\n            '</select>' +\n          '</div>' + // vjs-font-percent\n          '<div class=\"vjs-edge-style vjs-tracksetting\">' +\n            '<label class=\"vjs-label\">Text Edge Style</label>' +\n            '<select>' +\n              '<option value=\"none\">None</option>' +\n              '<option value=\"raised\">Raised</option>' +\n              '<option value=\"depressed\">Depressed</option>' +\n              '<option value=\"uniform\">Uniform</option>' +\n              '<option value=\"dropshadow\">Dropshadow</option>' +\n            '</select>' +\n          '</div>' + // vjs-edge-style\n          '<div class=\"vjs-font-family vjs-tracksetting\">' +\n            '<label class=\"vjs-label\">Font Family</label>' +\n            '<select>' +\n              '<option value=\"\">Default</option>' +\n              '<option value=\"monospaceSerif\">Monospace Serif</option>' +\n              '<option value=\"proportionalSerif\">Proportional Serif</option>' +\n              '<option value=\"monospaceSansSerif\">Monospace Sans-Serif</option>' +\n              '<option value=\"proportionalSansSerif\">Proportional Sans-Serif</option>' +\n              '<option value=\"casual\">Casual</option>' +\n              '<option value=\"script\">Script</option>' +\n              '<option value=\"small-caps\">Small Caps</option>' +\n            '</select>' +\n          '</div>' + // vjs-font-family\n        '</div>' +\n      '</div>' +\n      '<div class=\"vjs-tracksettings-controls\">' +\n        '<button class=\"vjs-default-button\">Defaults</button>' +\n        '<button class=\"vjs-done-button\">Done</button>' +\n      '</div>';\n  }\n\n})();\n/**\n * @fileoverview Add JSON support\n * @suppress {undefinedVars}\n * (Compiler doesn't like JSON not being declared)\n */\n\n/**\n * Javascript JSON implementation\n * (Parse Method Only)\n * https://github.com/douglascrockford/JSON-js/blob/master/json2.js\n * Only using for parse method when parsing data-setup attribute JSON.\n * @suppress {undefinedVars}\n * @namespace\n * @private\n */\nvjs.JSON;\n\nif (typeof window.JSON !== 'undefined' && typeof window.JSON.parse === 'function') {\n  vjs.JSON = window.JSON;\n\n} else {\n  vjs.JSON = {};\n\n  var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n  /**\n   * parse the json\n   *\n   * @memberof vjs.JSON\n   * @param {String} text The JSON string to parse\n   * @param {Function=} [reviver] Optional function that can transform the results\n   * @return {Object|Array} The parsed JSON\n   */\n  vjs.JSON.parse = function (text, reviver) {\n      var j;\n\n      function walk(holder, key) {\n          var k, v, value = holder[key];\n          if (value && typeof value === 'object') {\n              for (k in value) {\n                  if (Object.prototype.hasOwnProperty.call(value, k)) {\n                      v = walk(value, k);\n                      if (v !== undefined) {\n                          value[k] = v;\n                      } else {\n                          delete value[k];\n                      }\n                  }\n              }\n          }\n          return reviver.call(holder, key, value);\n      }\n      text = String(text);\n      cx.lastIndex = 0;\n      if (cx.test(text)) {\n          text = text.replace(cx, function (a) {\n              return '\\\\u' +\n                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n          });\n      }\n\n      if (/^[\\],:{}\\s]*$/\n              .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                  .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                  .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n          j = eval('(' + text + ')');\n\n          return typeof reviver === 'function' ?\n              walk({'': j}, '') : j;\n      }\n\n      throw new SyntaxError('JSON.parse(): invalid or malformed JSON data');\n  };\n}\n/**\n * @fileoverview Functions for automatically setting up a player\n * based on the data-setup attribute of the video tag\n */\n\n// Automatically set up any tags that have a data-setup attribute\nvjs.autoSetup = function(){\n  var options, mediaEl, player, i, e;\n\n  // One day, when we stop supporting IE8, go back to this, but in the meantime...*hack hack hack*\n  // var vids = Array.prototype.slice.call(document.getElementsByTagName('video'));\n  // var audios = Array.prototype.slice.call(document.getElementsByTagName('audio'));\n  // var mediaEls = vids.concat(audios);\n\n  // Because IE8 doesn't support calling slice on a node list, we need to loop through each list of elements\n  // to build up a new, combined list of elements.\n  var vids = document.getElementsByTagName('video');\n  var audios = document.getElementsByTagName('audio');\n  var mediaEls = [];\n  if (vids && vids.length > 0) {\n    for(i=0, e=vids.length; i<e; i++) {\n      mediaEls.push(vids[i]);\n    }\n  }\n  if (audios && audios.length > 0) {\n    for(i=0, e=audios.length; i<e; i++) {\n      mediaEls.push(audios[i]);\n    }\n  }\n\n  // Check if any media elements exist\n  if (mediaEls && mediaEls.length > 0) {\n\n    for (i=0,e=mediaEls.length; i<e; i++) {\n      mediaEl = mediaEls[i];\n\n      // Check if element exists, has getAttribute func.\n      // IE seems to consider typeof el.getAttribute == 'object' instead of 'function' like expected, at least when loading the player immediately.\n      if (mediaEl && mediaEl.getAttribute) {\n\n        // Make sure this player hasn't already been set up.\n        if (mediaEl['player'] === undefined) {\n          options = mediaEl.getAttribute('data-setup');\n\n          // Check if data-setup attr exists.\n          // We only auto-setup if they've added the data-setup attr.\n          if (options !== null) {\n            // Create new video.js instance.\n            player = videojs(mediaEl);\n          }\n        }\n\n      // If getAttribute isn't defined, we need to wait for the DOM.\n      } else {\n        vjs.autoSetupTimeout(1);\n        break;\n      }\n    }\n\n  // No videos were found, so keep looping unless page is finished loading.\n  } else if (!vjs.windowLoaded) {\n    vjs.autoSetupTimeout(1);\n  }\n};\n\n// Pause to let the DOM keep processing\nvjs.autoSetupTimeout = function(wait){\n  setTimeout(vjs.autoSetup, wait);\n};\n\nif (document.readyState === 'complete') {\n  vjs.windowLoaded = true;\n} else {\n  vjs.one(window, 'load', function(){\n    vjs.windowLoaded = true;\n  });\n}\n\n// Run Auto-load players\n// You have to wait at least once in case this script is loaded after your video in the DOM (weird behavior only with minified version)\nvjs.autoSetupTimeout(1);\n/**\n * the method for registering a video.js plugin\n *\n * @param  {String} name The name of the plugin\n * @param  {Function} init The function that is run when the player inits\n */\nvjs.plugin = function(name, init){\n  vjs.Player.prototype[name] = init;\n};\n\n/* vtt.js - v0.11.11 (https://github.com/mozilla/vtt.js) built on 22-01-2015 */\n\n(function(root) {\n  var vttjs = root.vttjs = {};\n  var cueShim = vttjs.VTTCue;\n  var regionShim = vttjs.VTTRegion;\n  var oldVTTCue = root.VTTCue;\n  var oldVTTRegion = root.VTTRegion;\n\n  vttjs.shim = function() {\n    vttjs.VTTCue = cueShim;\n    vttjs.VTTRegion = regionShim;\n  };\n\n  vttjs.restore = function() {\n    vttjs.VTTCue = oldVTTCue;\n    vttjs.VTTRegion = oldVTTRegion;\n  };\n}(this));\n\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, vttjs) {\n\n  var autoKeyword = \"auto\";\n  var directionSetting = {\n    \"\": true,\n    \"lr\": true,\n    \"rl\": true\n  };\n  var alignSetting = {\n    \"start\": true,\n    \"middle\": true,\n    \"end\": true,\n    \"left\": true,\n    \"right\": true\n  };\n\n  function findDirectionSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var dir = directionSetting[value.toLowerCase()];\n    return dir ? value.toLowerCase() : false;\n  }\n\n  function findAlignSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var align = alignSetting[value.toLowerCase()];\n    return align ? value.toLowerCase() : false;\n  }\n\n  function extend(obj) {\n    var i = 1;\n    for (; i < arguments.length; i++) {\n      var cobj = arguments[i];\n      for (var p in cobj) {\n        obj[p] = cobj[p];\n      }\n    }\n\n    return obj;\n  }\n\n  function VTTCue(startTime, endTime, text) {\n    var cue = this;\n    var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    var baseObj = {};\n\n    if (isIE8) {\n      cue = document.createElement('custom');\n    } else {\n      baseObj.enumerable = true;\n    }\n\n    /**\n     * Shim implementation specific properties. These properties are not in\n     * the spec.\n     */\n\n    // Lets us know when the VTTCue's data has changed in such a way that we need\n    // to recompute its display state. This lets us compute its display state\n    // lazily.\n    cue.hasBeenReset = false;\n\n    /**\n     * VTTCue and TextTrackCue properties\n     * http://dev.w3.org/html5/webvtt/#vttcue-interface\n     */\n\n    var _id = \"\";\n    var _pauseOnExit = false;\n    var _startTime = startTime;\n    var _endTime = endTime;\n    var _text = text;\n    var _region = null;\n    var _vertical = \"\";\n    var _snapToLines = true;\n    var _line = \"auto\";\n    var _lineAlign = \"start\";\n    var _position = 50;\n    var _positionAlign = \"middle\";\n    var _size = 50;\n    var _align = \"middle\";\n\n    Object.defineProperty(cue,\n      \"id\", extend({}, baseObj, {\n        get: function() {\n          return _id;\n        },\n        set: function(value) {\n          _id = \"\" + value;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"pauseOnExit\", extend({}, baseObj, {\n        get: function() {\n          return _pauseOnExit;\n        },\n        set: function(value) {\n          _pauseOnExit = !!value;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"startTime\", extend({}, baseObj, {\n        get: function() {\n          return _startTime;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"Start time must be set to a number.\");\n          }\n          _startTime = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"endTime\", extend({}, baseObj, {\n        get: function() {\n          return _endTime;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"End time must be set to a number.\");\n          }\n          _endTime = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"text\", extend({}, baseObj, {\n        get: function() {\n          return _text;\n        },\n        set: function(value) {\n          _text = \"\" + value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"region\", extend({}, baseObj, {\n        get: function() {\n          return _region;\n        },\n        set: function(value) {\n          _region = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"vertical\", extend({}, baseObj, {\n        get: function() {\n          return _vertical;\n        },\n        set: function(value) {\n          var setting = findDirectionSetting(value);\n          // Have to check for false because the setting an be an empty string.\n          if (setting === false) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _vertical = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"snapToLines\", extend({}, baseObj, {\n        get: function() {\n          return _snapToLines;\n        },\n        set: function(value) {\n          _snapToLines = !!value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"line\", extend({}, baseObj, {\n        get: function() {\n          return _line;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\" && value !== autoKeyword) {\n            throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n          }\n          _line = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"lineAlign\", extend({}, baseObj, {\n        get: function() {\n          return _lineAlign;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _lineAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"position\", extend({}, baseObj, {\n        get: function() {\n          return _position;\n        },\n        set: function(value) {\n          if (value < 0 || value > 100) {\n            throw new Error(\"Position must be between 0 and 100.\");\n          }\n          _position = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"positionAlign\", extend({}, baseObj, {\n        get: function() {\n          return _positionAlign;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _positionAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"size\", extend({}, baseObj, {\n        get: function() {\n          return _size;\n        },\n        set: function(value) {\n          if (value < 0 || value > 100) {\n            throw new Error(\"Size must be between 0 and 100.\");\n          }\n          _size = value;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    Object.defineProperty(cue,\n      \"align\", extend({}, baseObj, {\n        get: function() {\n          return _align;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _align = setting;\n          this.hasBeenReset = true;\n        }\n      }));\n\n    /**\n     * Other <track> spec defined properties\n     */\n\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n    cue.displayState = undefined;\n\n    if (isIE8) {\n      return cue;\n    }\n  }\n\n  /**\n   * VTTCue methods\n   */\n\n  VTTCue.prototype.getCueAsHTML = function() {\n    // Assume WebVTT.convertCueToDOMTree is on the global.\n    return WebVTT.convertCueToDOMTree(window, this.text);\n  };\n\n  root.VTTCue = root.VTTCue || VTTCue;\n  vttjs.VTTCue = VTTCue;\n}(this, (this.vttjs || {})));\n\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, vttjs) {\n\n  var scrollSetting = {\n    \"\": true,\n    \"up\": true,\n  };\n\n  function findScrollSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var scroll = scrollSetting[value.toLowerCase()];\n    return scroll ? value.toLowerCase() : false;\n  }\n\n  function isValidPercentValue(value) {\n    return typeof value === \"number\" && (value >= 0 && value <= 100);\n  }\n\n  // VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\n  function VTTRegion() {\n    var _width = 100;\n    var _lines = 3;\n    var _regionAnchorX = 0;\n    var _regionAnchorY = 100;\n    var _viewportAnchorX = 0;\n    var _viewportAnchorY = 100;\n    var _scroll = \"\";\n\n    Object.defineProperties(this, {\n      \"width\": {\n        enumerable: true,\n        get: function() {\n          return _width;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"Width must be between 0 and 100.\");\n          }\n          _width = value;\n        }\n      },\n      \"lines\": {\n        enumerable: true,\n        get: function() {\n          return _lines;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"Lines must be set to a number.\");\n          }\n          _lines = value;\n        }\n      },\n      \"regionAnchorY\": {\n        enumerable: true,\n        get: function() {\n          return _regionAnchorY;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n          }\n          _regionAnchorY = value;\n        }\n      },\n      \"regionAnchorX\": {\n        enumerable: true,\n        get: function() {\n          return _regionAnchorX;\n        },\n        set: function(value) {\n          if(!isValidPercentValue(value)) {\n            throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n          }\n          _regionAnchorX = value;\n        }\n      },\n      \"viewportAnchorY\": {\n        enumerable: true,\n        get: function() {\n          return _viewportAnchorY;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n          }\n          _viewportAnchorY = value;\n        }\n      },\n      \"viewportAnchorX\": {\n        enumerable: true,\n        get: function() {\n          return _viewportAnchorX;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n          }\n          _viewportAnchorX = value;\n        }\n      },\n      \"scroll\": {\n        enumerable: true,\n        get: function() {\n          return _scroll;\n        },\n        set: function(value) {\n          var setting = findScrollSetting(value);\n          // Have to check for false as an empty string is a legal value.\n          if (setting === false) {\n            throw new SyntaxError(\"An invalid or illegal string was specified.\");\n          }\n          _scroll = setting;\n        }\n      }\n    });\n  }\n\n  root.VTTRegion = root.VTTRegion || VTTRegion;\n  vttjs.VTTRegion = VTTRegion;\n}(this, (this.vttjs || {})));\n\n/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\n\n(function(global) {\n\n  var _objCreate = Object.create || (function() {\n    function F() {}\n    return function(o) {\n      if (arguments.length !== 1) {\n        throw new Error('Object.create shim only accepts one parameter.');\n      }\n      F.prototype = o;\n      return new F();\n    };\n  })();\n\n  // Creates a new ParserError object from an errorData object. The errorData\n  // object should have default code and message properties. The default message\n  // property can be overriden by passing in a message parameter.\n  // See ParsingError.Errors below for acceptable errors.\n  function ParsingError(errorData, message) {\n    this.name = \"ParsingError\";\n    this.code = errorData.code;\n    this.message = message || errorData.message;\n  }\n  ParsingError.prototype = _objCreate(Error.prototype);\n  ParsingError.prototype.constructor = ParsingError;\n\n  // ParsingError metadata for acceptable ParsingErrors.\n  ParsingError.Errors = {\n    BadSignature: {\n      code: 0,\n      message: \"Malformed WebVTT signature.\"\n    },\n    BadTimeStamp: {\n      code: 1,\n      message: \"Malformed time stamp.\"\n    }\n  };\n\n  // Try to parse input as a time stamp.\n  function parseTimeStamp(input) {\n\n    function computeSeconds(h, m, s, f) {\n      return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n    }\n\n    var m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n    if (!m) {\n      return null;\n    }\n\n    if (m[3]) {\n      // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n      return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n    } else if (m[1] > 59) {\n      // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n      // First position is hours as it's over 59.\n      return computeSeconds(m[1], m[2], 0,  m[4]);\n    } else {\n      // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n      return computeSeconds(0, m[1], m[2], m[4]);\n    }\n  }\n\n  // A settings object holds key/value pairs and will ignore anything but the first\n  // assignment to a specific key.\n  function Settings() {\n    this.values = _objCreate(null);\n  }\n\n  Settings.prototype = {\n    // Only accept the first assignment to any key.\n    set: function(k, v) {\n      if (!this.get(k) && v !== \"\") {\n        this.values[k] = v;\n      }\n    },\n    // Return the value for a key, or a default value.\n    // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n    // a number of possible default values as properties where 'defaultKey' is\n    // the key of the property that will be chosen; otherwise it's assumed to be\n    // a single value.\n    get: function(k, dflt, defaultKey) {\n      if (defaultKey) {\n        return this.has(k) ? this.values[k] : dflt[defaultKey];\n      }\n      return this.has(k) ? this.values[k] : dflt;\n    },\n    // Check whether we have a value for a key.\n    has: function(k) {\n      return k in this.values;\n    },\n    // Accept a setting if its one of the given alternatives.\n    alt: function(k, v, a) {\n      for (var n = 0; n < a.length; ++n) {\n        if (v === a[n]) {\n          this.set(k, v);\n          break;\n        }\n      }\n    },\n    // Accept a setting if its a valid (signed) integer.\n    integer: function(k, v) {\n      if (/^-?\\d+$/.test(v)) { // integer\n        this.set(k, parseInt(v, 10));\n      }\n    },\n    // Accept a setting if its a valid percentage.\n    percent: function(k, v) {\n      var m;\n      if ((m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))) {\n        v = parseFloat(v);\n        if (v >= 0 && v <= 100) {\n          this.set(k, v);\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n\n  // Helper function to parse input into groups separated by 'groupDelim', and\n  // interprete each group as a key/value pair separated by 'keyValueDelim'.\n  function parseOptions(input, callback, keyValueDelim, groupDelim) {\n    var groups = groupDelim ? input.split(groupDelim) : [input];\n    for (var i in groups) {\n      if (typeof groups[i] !== \"string\") {\n        continue;\n      }\n      var kv = groups[i].split(keyValueDelim);\n      if (kv.length !== 2) {\n        continue;\n      }\n      var k = kv[0];\n      var v = kv[1];\n      callback(k, v);\n    }\n  }\n\n  function parseCue(input, cue, regionList) {\n    // Remember the original input if we need to throw an error.\n    var oInput = input;\n    // 4.1 WebVTT timestamp\n    function consumeTimeStamp() {\n      var ts = parseTimeStamp(input);\n      if (ts === null) {\n        throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                              \"Malformed timestamp: \" + oInput);\n      }\n      // Remove time stamp from input.\n      input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n      return ts;\n    }\n\n    // 4.4.2 WebVTT cue settings\n    function consumeCueSettings(input, cue) {\n      var settings = new Settings();\n\n      parseOptions(input, function (k, v) {\n        switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n          break;\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n        case \"line\":\n          var vals = v.split(\",\"),\n              vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n          }\n          break;\n        case \"size\":\n          settings.percent(k, v);\n          break;\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"middle\", \"end\", \"left\", \"right\"]);\n          break;\n        }\n      }, /:/, /\\s/);\n\n      // Apply default values for any missing fields.\n      cue.region = settings.get(\"region\", null);\n      cue.vertical = settings.get(\"vertical\", \"\");\n      cue.line = settings.get(\"line\", \"auto\");\n      cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n      cue.snapToLines = settings.get(\"snapToLines\", true);\n      cue.size = settings.get(\"size\", 100);\n      cue.align = settings.get(\"align\", \"middle\");\n      cue.position = settings.get(\"position\", {\n        start: 0,\n        left: 0,\n        middle: 50,\n        end: 100,\n        right: 100\n      }, cue.align);\n      cue.positionAlign = settings.get(\"positionAlign\", {\n        start: \"start\",\n        left: \"start\",\n        middle: \"middle\",\n        end: \"end\",\n        right: \"end\"\n      }, cue.align);\n    }\n\n    function skipWhitespace() {\n      input = input.replace(/^\\s+/, \"\");\n    }\n\n    // 4.1 WebVTT cue timings.\n    skipWhitespace();\n    cue.startTime = consumeTimeStamp();   // (1) collect cue start time\n    skipWhitespace();\n    if (input.substr(0, 3) !== \"--\x3e\") {     // (3) next characters must match \"--\x3e\"\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                             \"Malformed time stamp (time stamps must be separated by '--\x3e'): \" +\n                             oInput);\n    }\n    input = input.substr(3);\n    skipWhitespace();\n    cue.endTime = consumeTimeStamp();     // (5) collect cue end time\n\n    // 4.1 WebVTT cue settings list.\n    skipWhitespace();\n    consumeCueSettings(input, cue);\n  }\n\n  var ESCAPE = {\n    \"&amp;\": \"&\",\n    \"&lt;\": \"<\",\n    \"&gt;\": \">\",\n    \"&lrm;\": \"\\u200e\",\n    \"&rlm;\": \"\\u200f\",\n    \"&nbsp;\": \"\\u00a0\"\n  };\n\n  var TAG_NAME = {\n    c: \"span\",\n    i: \"i\",\n    b: \"b\",\n    u: \"u\",\n    ruby: \"ruby\",\n    rt: \"rt\",\n    v: \"span\",\n    lang: \"span\"\n  };\n\n  var TAG_ANNOTATION = {\n    v: \"title\",\n    lang: \"lang\"\n  };\n\n  var NEEDS_PARENT = {\n    rt: \"ruby\"\n  };\n\n  // Parse content into a document fragment.\n  function parseContent(window, input) {\n    function nextToken() {\n      // Check for end-of-string.\n      if (!input) {\n        return null;\n      }\n\n      // Consume 'n' characters from the input.\n      function consume(result) {\n        input = input.substr(result.length);\n        return result;\n      }\n\n      var m = input.match(/^([^<]*)(<[^>]+>?)?/);\n      // If there is some text before the next tag, return it, otherwise return\n      // the tag.\n      return consume(m[1] ? m[1] : m[2]);\n    }\n\n    // Unescape a string 's'.\n    function unescape1(e) {\n      return ESCAPE[e];\n    }\n    function unescape(s) {\n      while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n        s = s.replace(m[0], unescape1);\n      }\n      return s;\n    }\n\n    function shouldAdd(current, element) {\n      return !NEEDS_PARENT[element.localName] ||\n             NEEDS_PARENT[element.localName] === current.localName;\n    }\n\n    // Create an element for this tag.\n    function createElement(type, annotation) {\n      var tagName = TAG_NAME[type];\n      if (!tagName) {\n        return null;\n      }\n      var element = window.document.createElement(tagName);\n      element.localName = tagName;\n      var name = TAG_ANNOTATION[type];\n      if (name && annotation) {\n        element[name] = annotation.trim();\n      }\n      return element;\n    }\n\n    var rootDiv = window.document.createElement(\"div\"),\n        current = rootDiv,\n        t,\n        tagStack = [];\n\n    while ((t = nextToken()) !== null) {\n      if (t[0] === '<') {\n        if (t[1] === \"/\") {\n          // If the closing tag matches, move back up to the parent node.\n          if (tagStack.length &&\n              tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n            tagStack.pop();\n            current = current.parentNode;\n          }\n          // Otherwise just ignore the end tag.\n          continue;\n        }\n        var ts = parseTimeStamp(t.substr(1, t.length - 2));\n        var node;\n        if (ts) {\n          // Timestamps are lead nodes as well.\n          node = window.document.createProcessingInstruction(\"timestamp\", ts);\n          current.appendChild(node);\n          continue;\n        }\n        var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n        // If we can't parse the tag, skip to the next tag.\n        if (!m) {\n          continue;\n        }\n        // Try to construct an element, and ignore the tag if we couldn't.\n        node = createElement(m[1], m[3]);\n        if (!node) {\n          continue;\n        }\n        // Determine if the tag should be added based on the context of where it\n        // is placed in the cuetext.\n        if (!shouldAdd(current, node)) {\n          continue;\n        }\n        // Set the class list (as a list of classes, separated by space).\n        if (m[2]) {\n          node.className = m[2].substr(1).replace('.', ' ');\n        }\n        // Append the node to the current node, and enter the scope of the new\n        // node.\n        tagStack.push(m[1]);\n        current.appendChild(node);\n        current = node;\n        continue;\n      }\n\n      // Text nodes are leaf nodes.\n      current.appendChild(window.document.createTextNode(unescape(t)));\n    }\n\n    return rootDiv;\n  }\n\n  // This is a list of all the Unicode characters that have a strong\n  // right-to-left category. What this means is that these characters are\n  // written right-to-left for sure. It was generated by pulling all the strong\n  // right-to-left characters out of the Unicode data table. That table can\n  // found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\n  var strongRTLChars = [0x05BE, 0x05C0, 0x05C3, 0x05C6, 0x05D0, 0x05D1,\n      0x05D2, 0x05D3, 0x05D4, 0x05D5, 0x05D6, 0x05D7, 0x05D8, 0x05D9, 0x05DA,\n      0x05DB, 0x05DC, 0x05DD, 0x05DE, 0x05DF, 0x05E0, 0x05E1, 0x05E2, 0x05E3,\n      0x05E4, 0x05E5, 0x05E6, 0x05E7, 0x05E8, 0x05E9, 0x05EA, 0x05F0, 0x05F1,\n      0x05F2, 0x05F3, 0x05F4, 0x0608, 0x060B, 0x060D, 0x061B, 0x061E, 0x061F,\n      0x0620, 0x0621, 0x0622, 0x0623, 0x0624, 0x0625, 0x0626, 0x0627, 0x0628,\n      0x0629, 0x062A, 0x062B, 0x062C, 0x062D, 0x062E, 0x062F, 0x0630, 0x0631,\n      0x0632, 0x0633, 0x0634, 0x0635, 0x0636, 0x0637, 0x0638, 0x0639, 0x063A,\n      0x063B, 0x063C, 0x063D, 0x063E, 0x063F, 0x0640, 0x0641, 0x0642, 0x0643,\n      0x0644, 0x0645, 0x0646, 0x0647, 0x0648, 0x0649, 0x064A, 0x066D, 0x066E,\n      0x066F, 0x0671, 0x0672, 0x0673, 0x0674, 0x0675, 0x0676, 0x0677, 0x0678,\n      0x0679, 0x067A, 0x067B, 0x067C, 0x067D, 0x067E, 0x067F, 0x0680, 0x0681,\n      0x0682, 0x0683, 0x0684, 0x0685, 0x0686, 0x0687, 0x0688, 0x0689, 0x068A,\n      0x068B, 0x068C, 0x068D, 0x068E, 0x068F, 0x0690, 0x0691, 0x0692, 0x0693,\n      0x0694, 0x0695, 0x0696, 0x0697, 0x0698, 0x0699, 0x069A, 0x069B, 0x069C,\n      0x069D, 0x069E, 0x069F, 0x06A0, 0x06A1, 0x06A2, 0x06A3, 0x06A4, 0x06A5,\n      0x06A6, 0x06A7, 0x06A8, 0x06A9, 0x06AA, 0x06AB, 0x06AC, 0x06AD, 0x06AE,\n      0x06AF, 0x06B0, 0x06B1, 0x06B2, 0x06B3, 0x06B4, 0x06B5, 0x06B6, 0x06B7,\n      0x06B8, 0x06B9, 0x06BA, 0x06BB, 0x06BC, 0x06BD, 0x06BE, 0x06BF, 0x06C0,\n      0x06C1, 0x06C2, 0x06C3, 0x06C4, 0x06C5, 0x06C6, 0x06C7, 0x06C8, 0x06C9,\n      0x06CA, 0x06CB, 0x06CC, 0x06CD, 0x06CE, 0x06CF, 0x06D0, 0x06D1, 0x06D2,\n      0x06D3, 0x06D4, 0x06D5, 0x06E5, 0x06E6, 0x06EE, 0x06EF, 0x06FA, 0x06FB,\n      0x06FC, 0x06FD, 0x06FE, 0x06FF, 0x0700, 0x0701, 0x0702, 0x0703, 0x0704,\n      0x0705, 0x0706, 0x0707, 0x0708, 0x0709, 0x070A, 0x070B, 0x070C, 0x070D,\n      0x070F, 0x0710, 0x0712, 0x0713, 0x0714, 0x0715, 0x0716, 0x0717, 0x0718,\n      0x0719, 0x071A, 0x071B, 0x071C, 0x071D, 0x071E, 0x071F, 0x0720, 0x0721,\n      0x0722, 0x0723, 0x0724, 0x0725, 0x0726, 0x0727, 0x0728, 0x0729, 0x072A,\n      0x072B, 0x072C, 0x072D, 0x072E, 0x072F, 0x074D, 0x074E, 0x074F, 0x0750,\n      0x0751, 0x0752, 0x0753, 0x0754, 0x0755, 0x0756, 0x0757, 0x0758, 0x0759,\n      0x075A, 0x075B, 0x075C, 0x075D, 0x075E, 0x075F, 0x0760, 0x0761, 0x0762,\n      0x0763, 0x0764, 0x0765, 0x0766, 0x0767, 0x0768, 0x0769, 0x076A, 0x076B,\n      0x076C, 0x076D, 0x076E, 0x076F, 0x0770, 0x0771, 0x0772, 0x0773, 0x0774,\n      0x0775, 0x0776, 0x0777, 0x0778, 0x0779, 0x077A, 0x077B, 0x077C, 0x077D,\n      0x077E, 0x077F, 0x0780, 0x0781, 0x0782, 0x0783, 0x0784, 0x0785, 0x0786,\n      0x0787, 0x0788, 0x0789, 0x078A, 0x078B, 0x078C, 0x078D, 0x078E, 0x078F,\n      0x0790, 0x0791, 0x0792, 0x0793, 0x0794, 0x0795, 0x0796, 0x0797, 0x0798,\n      0x0799, 0x079A, 0x079B, 0x079C, 0x079D, 0x079E, 0x079F, 0x07A0, 0x07A1,\n      0x07A2, 0x07A3, 0x07A4, 0x07A5, 0x07B1, 0x07C0, 0x07C1, 0x07C2, 0x07C3,\n      0x07C4, 0x07C5, 0x07C6, 0x07C7, 0x07C8, 0x07C9, 0x07CA, 0x07CB, 0x07CC,\n      0x07CD, 0x07CE, 0x07CF, 0x07D0, 0x07D1, 0x07D2, 0x07D3, 0x07D4, 0x07D5,\n      0x07D6, 0x07D7, 0x07D8, 0x07D9, 0x07DA, 0x07DB, 0x07DC, 0x07DD, 0x07DE,\n      0x07DF, 0x07E0, 0x07E1, 0x07E2, 0x07E3, 0x07E4, 0x07E5, 0x07E6, 0x07E7,\n      0x07E8, 0x07E9, 0x07EA, 0x07F4, 0x07F5, 0x07FA, 0x0800, 0x0801, 0x0802,\n      0x0803, 0x0804, 0x0805, 0x0806, 0x0807, 0x0808, 0x0809, 0x080A, 0x080B,\n      0x080C, 0x080D, 0x080E, 0x080F, 0x0810, 0x0811, 0x0812, 0x0813, 0x0814,\n      0x0815, 0x081A, 0x0824, 0x0828, 0x0830, 0x0831, 0x0832, 0x0833, 0x0834,\n      0x0835, 0x0836, 0x0837, 0x0838, 0x0839, 0x083A, 0x083B, 0x083C, 0x083D,\n      0x083E, 0x0840, 0x0841, 0x0842, 0x0843, 0x0844, 0x0845, 0x0846, 0x0847,\n      0x0848, 0x0849, 0x084A, 0x084B, 0x084C, 0x084D, 0x084E, 0x084F, 0x0850,\n      0x0851, 0x0852, 0x0853, 0x0854, 0x0855, 0x0856, 0x0857, 0x0858, 0x085E,\n      0x08A0, 0x08A2, 0x08A3, 0x08A4, 0x08A5, 0x08A6, 0x08A7, 0x08A8, 0x08A9,\n      0x08AA, 0x08AB, 0x08AC, 0x200F, 0xFB1D, 0xFB1F, 0xFB20, 0xFB21, 0xFB22,\n      0xFB23, 0xFB24, 0xFB25, 0xFB26, 0xFB27, 0xFB28, 0xFB2A, 0xFB2B, 0xFB2C,\n      0xFB2D, 0xFB2E, 0xFB2F, 0xFB30, 0xFB31, 0xFB32, 0xFB33, 0xFB34, 0xFB35,\n      0xFB36, 0xFB38, 0xFB39, 0xFB3A, 0xFB3B, 0xFB3C, 0xFB3E, 0xFB40, 0xFB41,\n      0xFB43, 0xFB44, 0xFB46, 0xFB47, 0xFB48, 0xFB49, 0xFB4A, 0xFB4B, 0xFB4C,\n      0xFB4D, 0xFB4E, 0xFB4F, 0xFB50, 0xFB51, 0xFB52, 0xFB53, 0xFB54, 0xFB55,\n      0xFB56, 0xFB57, 0xFB58, 0xFB59, 0xFB5A, 0xFB5B, 0xFB5C, 0xFB5D, 0xFB5E,\n      0xFB5F, 0xFB60, 0xFB61, 0xFB62, 0xFB63, 0xFB64, 0xFB65, 0xFB66, 0xFB67,\n      0xFB68, 0xFB69, 0xFB6A, 0xFB6B, 0xFB6C, 0xFB6D, 0xFB6E, 0xFB6F, 0xFB70,\n      0xFB71, 0xFB72, 0xFB73, 0xFB74, 0xFB75, 0xFB76, 0xFB77, 0xFB78, 0xFB79,\n      0xFB7A, 0xFB7B, 0xFB7C, 0xFB7D, 0xFB7E, 0xFB7F, 0xFB80, 0xFB81, 0xFB82,\n      0xFB83, 0xFB84, 0xFB85, 0xFB86, 0xFB87, 0xFB88, 0xFB89, 0xFB8A, 0xFB8B,\n      0xFB8C, 0xFB8D, 0xFB8E, 0xFB8F, 0xFB90, 0xFB91, 0xFB92, 0xFB93, 0xFB94,\n      0xFB95, 0xFB96, 0xFB97, 0xFB98, 0xFB99, 0xFB9A, 0xFB9B, 0xFB9C, 0xFB9D,\n      0xFB9E, 0xFB9F, 0xFBA0, 0xFBA1, 0xFBA2, 0xFBA3, 0xFBA4, 0xFBA5, 0xFBA6,\n      0xFBA7, 0xFBA8, 0xFBA9, 0xFBAA, 0xFBAB, 0xFBAC, 0xFBAD, 0xFBAE, 0xFBAF,\n      0xFBB0, 0xFBB1, 0xFBB2, 0xFBB3, 0xFBB4, 0xFBB5, 0xFBB6, 0xFBB7, 0xFBB8,\n      0xFBB9, 0xFBBA, 0xFBBB, 0xFBBC, 0xFBBD, 0xFBBE, 0xFBBF, 0xFBC0, 0xFBC1,\n      0xFBD3, 0xFBD4, 0xFBD5, 0xFBD6, 0xFBD7, 0xFBD8, 0xFBD9, 0xFBDA, 0xFBDB,\n      0xFBDC, 0xFBDD, 0xFBDE, 0xFBDF, 0xFBE0, 0xFBE1, 0xFBE2, 0xFBE3, 0xFBE4,\n      0xFBE5, 0xFBE6, 0xFBE7, 0xFBE8, 0xFBE9, 0xFBEA, 0xFBEB, 0xFBEC, 0xFBED,\n      0xFBEE, 0xFBEF, 0xFBF0, 0xFBF1, 0xFBF2, 0xFBF3, 0xFBF4, 0xFBF5, 0xFBF6,\n      0xFBF7, 0xFBF8, 0xFBF9, 0xFBFA, 0xFBFB, 0xFBFC, 0xFBFD, 0xFBFE, 0xFBFF,\n      0xFC00, 0xFC01, 0xFC02, 0xFC03, 0xFC04, 0xFC05, 0xFC06, 0xFC07, 0xFC08,\n      0xFC09, 0xFC0A, 0xFC0B, 0xFC0C, 0xFC0D, 0xFC0E, 0xFC0F, 0xFC10, 0xFC11,\n      0xFC12, 0xFC13, 0xFC14, 0xFC15, 0xFC16, 0xFC17, 0xFC18, 0xFC19, 0xFC1A,\n      0xFC1B, 0xFC1C, 0xFC1D, 0xFC1E, 0xFC1F, 0xFC20, 0xFC21, 0xFC22, 0xFC23,\n      0xFC24, 0xFC25, 0xFC26, 0xFC27, 0xFC28, 0xFC29, 0xFC2A, 0xFC2B, 0xFC2C,\n      0xFC2D, 0xFC2E, 0xFC2F, 0xFC30, 0xFC31, 0xFC32, 0xFC33, 0xFC34, 0xFC35,\n      0xFC36, 0xFC37, 0xFC38, 0xFC39, 0xFC3A, 0xFC3B, 0xFC3C, 0xFC3D, 0xFC3E,\n      0xFC3F, 0xFC40, 0xFC41, 0xFC42, 0xFC43, 0xFC44, 0xFC45, 0xFC46, 0xFC47,\n      0xFC48, 0xFC49, 0xFC4A, 0xFC4B, 0xFC4C, 0xFC4D, 0xFC4E, 0xFC4F, 0xFC50,\n      0xFC51, 0xFC52, 0xFC53, 0xFC54, 0xFC55, 0xFC56, 0xFC57, 0xFC58, 0xFC59,\n      0xFC5A, 0xFC5B, 0xFC5C, 0xFC5D, 0xFC5E, 0xFC5F, 0xFC60, 0xFC61, 0xFC62,\n      0xFC63, 0xFC64, 0xFC65, 0xFC66, 0xFC67, 0xFC68, 0xFC69, 0xFC6A, 0xFC6B,\n      0xFC6C, 0xFC6D, 0xFC6E, 0xFC6F, 0xFC70, 0xFC71, 0xFC72, 0xFC73, 0xFC74,\n      0xFC75, 0xFC76, 0xFC77, 0xFC78, 0xFC79, 0xFC7A, 0xFC7B, 0xFC7C, 0xFC7D,\n      0xFC7E, 0xFC7F, 0xFC80, 0xFC81, 0xFC82, 0xFC83, 0xFC84, 0xFC85, 0xFC86,\n      0xFC87, 0xFC88, 0xFC89, 0xFC8A, 0xFC8B, 0xFC8C, 0xFC8D, 0xFC8E, 0xFC8F,\n      0xFC90, 0xFC91, 0xFC92, 0xFC93, 0xFC94, 0xFC95, 0xFC96, 0xFC97, 0xFC98,\n      0xFC99, 0xFC9A, 0xFC9B, 0xFC9C, 0xFC9D, 0xFC9E, 0xFC9F, 0xFCA0, 0xFCA1,\n      0xFCA2, 0xFCA3, 0xFCA4, 0xFCA5, 0xFCA6, 0xFCA7, 0xFCA8, 0xFCA9, 0xFCAA,\n      0xFCAB, 0xFCAC, 0xFCAD, 0xFCAE, 0xFCAF, 0xFCB0, 0xFCB1, 0xFCB2, 0xFCB3,\n      0xFCB4, 0xFCB5, 0xFCB6, 0xFCB7, 0xFCB8, 0xFCB9, 0xFCBA, 0xFCBB, 0xFCBC,\n      0xFCBD, 0xFCBE, 0xFCBF, 0xFCC0, 0xFCC1, 0xFCC2, 0xFCC3, 0xFCC4, 0xFCC5,\n      0xFCC6, 0xFCC7, 0xFCC8, 0xFCC9, 0xFCCA, 0xFCCB, 0xFCCC, 0xFCCD, 0xFCCE,\n      0xFCCF, 0xFCD0, 0xFCD1, 0xFCD2, 0xFCD3, 0xFCD4, 0xFCD5, 0xFCD6, 0xFCD7,\n      0xFCD8, 0xFCD9, 0xFCDA, 0xFCDB, 0xFCDC, 0xFCDD, 0xFCDE, 0xFCDF, 0xFCE0,\n      0xFCE1, 0xFCE2, 0xFCE3, 0xFCE4, 0xFCE5, 0xFCE6, 0xFCE7, 0xFCE8, 0xFCE9,\n      0xFCEA, 0xFCEB, 0xFCEC, 0xFCED, 0xFCEE, 0xFCEF, 0xFCF0, 0xFCF1, 0xFCF2,\n      0xFCF3, 0xFCF4, 0xFCF5, 0xFCF6, 0xFCF7, 0xFCF8, 0xFCF9, 0xFCFA, 0xFCFB,\n      0xFCFC, 0xFCFD, 0xFCFE, 0xFCFF, 0xFD00, 0xFD01, 0xFD02, 0xFD03, 0xFD04,\n      0xFD05, 0xFD06, 0xFD07, 0xFD08, 0xFD09, 0xFD0A, 0xFD0B, 0xFD0C, 0xFD0D,\n      0xFD0E, 0xFD0F, 0xFD10, 0xFD11, 0xFD12, 0xFD13, 0xFD14, 0xFD15, 0xFD16,\n      0xFD17, 0xFD18, 0xFD19, 0xFD1A, 0xFD1B, 0xFD1C, 0xFD1D, 0xFD1E, 0xFD1F,\n      0xFD20, 0xFD21, 0xFD22, 0xFD23, 0xFD24, 0xFD25, 0xFD26, 0xFD27, 0xFD28,\n      0xFD29, 0xFD2A, 0xFD2B, 0xFD2C, 0xFD2D, 0xFD2E, 0xFD2F, 0xFD30, 0xFD31,\n      0xFD32, 0xFD33, 0xFD34, 0xFD35, 0xFD36, 0xFD37, 0xFD38, 0xFD39, 0xFD3A,\n      0xFD3B, 0xFD3C, 0xFD3D, 0xFD50, 0xFD51, 0xFD52, 0xFD53, 0xFD54, 0xFD55,\n      0xFD56, 0xFD57, 0xFD58, 0xFD59, 0xFD5A, 0xFD5B, 0xFD5C, 0xFD5D, 0xFD5E,\n      0xFD5F, 0xFD60, 0xFD61, 0xFD62, 0xFD63, 0xFD64, 0xFD65, 0xFD66, 0xFD67,\n      0xFD68, 0xFD69, 0xFD6A, 0xFD6B, 0xFD6C, 0xFD6D, 0xFD6E, 0xFD6F, 0xFD70,\n      0xFD71, 0xFD72, 0xFD73, 0xFD74, 0xFD75, 0xFD76, 0xFD77, 0xFD78, 0xFD79,\n      0xFD7A, 0xFD7B, 0xFD7C, 0xFD7D, 0xFD7E, 0xFD7F, 0xFD80, 0xFD81, 0xFD82,\n      0xFD83, 0xFD84, 0xFD85, 0xFD86, 0xFD87, 0xFD88, 0xFD89, 0xFD8A, 0xFD8B,\n      0xFD8C, 0xFD8D, 0xFD8E, 0xFD8F, 0xFD92, 0xFD93, 0xFD94, 0xFD95, 0xFD96,\n      0xFD97, 0xFD98, 0xFD99, 0xFD9A, 0xFD9B, 0xFD9C, 0xFD9D, 0xFD9E, 0xFD9F,\n      0xFDA0, 0xFDA1, 0xFDA2, 0xFDA3, 0xFDA4, 0xFDA5, 0xFDA6, 0xFDA7, 0xFDA8,\n      0xFDA9, 0xFDAA, 0xFDAB, 0xFDAC, 0xFDAD, 0xFDAE, 0xFDAF, 0xFDB0, 0xFDB1,\n      0xFDB2, 0xFDB3, 0xFDB4, 0xFDB5, 0xFDB6, 0xFDB7, 0xFDB8, 0xFDB9, 0xFDBA,\n      0xFDBB, 0xFDBC, 0xFDBD, 0xFDBE, 0xFDBF, 0xFDC0, 0xFDC1, 0xFDC2, 0xFDC3,\n      0xFDC4, 0xFDC5, 0xFDC6, 0xFDC7, 0xFDF0, 0xFDF1, 0xFDF2, 0xFDF3, 0xFDF4,\n      0xFDF5, 0xFDF6, 0xFDF7, 0xFDF8, 0xFDF9, 0xFDFA, 0xFDFB, 0xFDFC, 0xFE70,\n      0xFE71, 0xFE72, 0xFE73, 0xFE74, 0xFE76, 0xFE77, 0xFE78, 0xFE79, 0xFE7A,\n      0xFE7B, 0xFE7C, 0xFE7D, 0xFE7E, 0xFE7F, 0xFE80, 0xFE81, 0xFE82, 0xFE83,\n      0xFE84, 0xFE85, 0xFE86, 0xFE87, 0xFE88, 0xFE89, 0xFE8A, 0xFE8B, 0xFE8C,\n      0xFE8D, 0xFE8E, 0xFE8F, 0xFE90, 0xFE91, 0xFE92, 0xFE93, 0xFE94, 0xFE95,\n      0xFE96, 0xFE97, 0xFE98, 0xFE99, 0xFE9A, 0xFE9B, 0xFE9C, 0xFE9D, 0xFE9E,\n      0xFE9F, 0xFEA0, 0xFEA1, 0xFEA2, 0xFEA3, 0xFEA4, 0xFEA5, 0xFEA6, 0xFEA7,\n      0xFEA8, 0xFEA9, 0xFEAA, 0xFEAB, 0xFEAC, 0xFEAD, 0xFEAE, 0xFEAF, 0xFEB0,\n      0xFEB1, 0xFEB2, 0xFEB3, 0xFEB4, 0xFEB5, 0xFEB6, 0xFEB7, 0xFEB8, 0xFEB9,\n      0xFEBA, 0xFEBB, 0xFEBC, 0xFEBD, 0xFEBE, 0xFEBF, 0xFEC0, 0xFEC1, 0xFEC2,\n      0xFEC3, 0xFEC4, 0xFEC5, 0xFEC6, 0xFEC7, 0xFEC8, 0xFEC9, 0xFECA, 0xFECB,\n      0xFECC, 0xFECD, 0xFECE, 0xFECF, 0xFED0, 0xFED1, 0xFED2, 0xFED3, 0xFED4,\n      0xFED5, 0xFED6, 0xFED7, 0xFED8, 0xFED9, 0xFEDA, 0xFEDB, 0xFEDC, 0xFEDD,\n      0xFEDE, 0xFEDF, 0xFEE0, 0xFEE1, 0xFEE2, 0xFEE3, 0xFEE4, 0xFEE5, 0xFEE6,\n      0xFEE7, 0xFEE8, 0xFEE9, 0xFEEA, 0xFEEB, 0xFEEC, 0xFEED, 0xFEEE, 0xFEEF,\n      0xFEF0, 0xFEF1, 0xFEF2, 0xFEF3, 0xFEF4, 0xFEF5, 0xFEF6, 0xFEF7, 0xFEF8,\n      0xFEF9, 0xFEFA, 0xFEFB, 0xFEFC, 0x10800, 0x10801, 0x10802, 0x10803,\n      0x10804, 0x10805, 0x10808, 0x1080A, 0x1080B, 0x1080C, 0x1080D, 0x1080E,\n      0x1080F, 0x10810, 0x10811, 0x10812, 0x10813, 0x10814, 0x10815, 0x10816,\n      0x10817, 0x10818, 0x10819, 0x1081A, 0x1081B, 0x1081C, 0x1081D, 0x1081E,\n      0x1081F, 0x10820, 0x10821, 0x10822, 0x10823, 0x10824, 0x10825, 0x10826,\n      0x10827, 0x10828, 0x10829, 0x1082A, 0x1082B, 0x1082C, 0x1082D, 0x1082E,\n      0x1082F, 0x10830, 0x10831, 0x10832, 0x10833, 0x10834, 0x10835, 0x10837,\n      0x10838, 0x1083C, 0x1083F, 0x10840, 0x10841, 0x10842, 0x10843, 0x10844,\n      0x10845, 0x10846, 0x10847, 0x10848, 0x10849, 0x1084A, 0x1084B, 0x1084C,\n      0x1084D, 0x1084E, 0x1084F, 0x10850, 0x10851, 0x10852, 0x10853, 0x10854,\n      0x10855, 0x10857, 0x10858, 0x10859, 0x1085A, 0x1085B, 0x1085C, 0x1085D,\n      0x1085E, 0x1085F, 0x10900, 0x10901, 0x10902, 0x10903, 0x10904, 0x10905,\n      0x10906, 0x10907, 0x10908, 0x10909, 0x1090A, 0x1090B, 0x1090C, 0x1090D,\n      0x1090E, 0x1090F, 0x10910, 0x10911, 0x10912, 0x10913, 0x10914, 0x10915,\n      0x10916, 0x10917, 0x10918, 0x10919, 0x1091A, 0x1091B, 0x10920, 0x10921,\n      0x10922, 0x10923, 0x10924, 0x10925, 0x10926, 0x10927, 0x10928, 0x10929,\n      0x1092A, 0x1092B, 0x1092C, 0x1092D, 0x1092E, 0x1092F, 0x10930, 0x10931,\n      0x10932, 0x10933, 0x10934, 0x10935, 0x10936, 0x10937, 0x10938, 0x10939,\n      0x1093F, 0x10980, 0x10981, 0x10982, 0x10983, 0x10984, 0x10985, 0x10986,\n      0x10987, 0x10988, 0x10989, 0x1098A, 0x1098B, 0x1098C, 0x1098D, 0x1098E,\n      0x1098F, 0x10990, 0x10991, 0x10992, 0x10993, 0x10994, 0x10995, 0x10996,\n      0x10997, 0x10998, 0x10999, 0x1099A, 0x1099B, 0x1099C, 0x1099D, 0x1099E,\n      0x1099F, 0x109A0, 0x109A1, 0x109A2, 0x109A3, 0x109A4, 0x109A5, 0x109A6,\n      0x109A7, 0x109A8, 0x109A9, 0x109AA, 0x109AB, 0x109AC, 0x109AD, 0x109AE,\n      0x109AF, 0x109B0, 0x109B1, 0x109B2, 0x109B3, 0x109B4, 0x109B5, 0x109B6,\n      0x109B7, 0x109BE, 0x109BF, 0x10A00, 0x10A10, 0x10A11, 0x10A12, 0x10A13,\n      0x10A15, 0x10A16, 0x10A17, 0x10A19, 0x10A1A, 0x10A1B, 0x10A1C, 0x10A1D,\n      0x10A1E, 0x10A1F, 0x10A20, 0x10A21, 0x10A22, 0x10A23, 0x10A24, 0x10A25,\n      0x10A26, 0x10A27, 0x10A28, 0x10A29, 0x10A2A, 0x10A2B, 0x10A2C, 0x10A2D,\n      0x10A2E, 0x10A2F, 0x10A30, 0x10A31, 0x10A32, 0x10A33, 0x10A40, 0x10A41,\n      0x10A42, 0x10A43, 0x10A44, 0x10A45, 0x10A46, 0x10A47, 0x10A50, 0x10A51,\n      0x10A52, 0x10A53, 0x10A54, 0x10A55, 0x10A56, 0x10A57, 0x10A58, 0x10A60,\n      0x10A61, 0x10A62, 0x10A63, 0x10A64, 0x10A65, 0x10A66, 0x10A67, 0x10A68,\n      0x10A69, 0x10A6A, 0x10A6B, 0x10A6C, 0x10A6D, 0x10A6E, 0x10A6F, 0x10A70,\n      0x10A71, 0x10A72, 0x10A73, 0x10A74, 0x10A75, 0x10A76, 0x10A77, 0x10A78,\n      0x10A79, 0x10A7A, 0x10A7B, 0x10A7C, 0x10A7D, 0x10A7E, 0x10A7F, 0x10B00,\n      0x10B01, 0x10B02, 0x10B03, 0x10B04, 0x10B05, 0x10B06, 0x10B07, 0x10B08,\n      0x10B09, 0x10B0A, 0x10B0B, 0x10B0C, 0x10B0D, 0x10B0E, 0x10B0F, 0x10B10,\n      0x10B11, 0x10B12, 0x10B13, 0x10B14, 0x10B15, 0x10B16, 0x10B17, 0x10B18,\n      0x10B19, 0x10B1A, 0x10B1B, 0x10B1C, 0x10B1D, 0x10B1E, 0x10B1F, 0x10B20,\n      0x10B21, 0x10B22, 0x10B23, 0x10B24, 0x10B25, 0x10B26, 0x10B27, 0x10B28,\n      0x10B29, 0x10B2A, 0x10B2B, 0x10B2C, 0x10B2D, 0x10B2E, 0x10B2F, 0x10B30,\n      0x10B31, 0x10B32, 0x10B33, 0x10B34, 0x10B35, 0x10B40, 0x10B41, 0x10B42,\n      0x10B43, 0x10B44, 0x10B45, 0x10B46, 0x10B47, 0x10B48, 0x10B49, 0x10B4A,\n      0x10B4B, 0x10B4C, 0x10B4D, 0x10B4E, 0x10B4F, 0x10B50, 0x10B51, 0x10B52,\n      0x10B53, 0x10B54, 0x10B55, 0x10B58, 0x10B59, 0x10B5A, 0x10B5B, 0x10B5C,\n      0x10B5D, 0x10B5E, 0x10B5F, 0x10B60, 0x10B61, 0x10B62, 0x10B63, 0x10B64,\n      0x10B65, 0x10B66, 0x10B67, 0x10B68, 0x10B69, 0x10B6A, 0x10B6B, 0x10B6C,\n      0x10B6D, 0x10B6E, 0x10B6F, 0x10B70, 0x10B71, 0x10B72, 0x10B78, 0x10B79,\n      0x10B7A, 0x10B7B, 0x10B7C, 0x10B7D, 0x10B7E, 0x10B7F, 0x10C00, 0x10C01,\n      0x10C02, 0x10C03, 0x10C04, 0x10C05, 0x10C06, 0x10C07, 0x10C08, 0x10C09,\n      0x10C0A, 0x10C0B, 0x10C0C, 0x10C0D, 0x10C0E, 0x10C0F, 0x10C10, 0x10C11,\n      0x10C12, 0x10C13, 0x10C14, 0x10C15, 0x10C16, 0x10C17, 0x10C18, 0x10C19,\n      0x10C1A, 0x10C1B, 0x10C1C, 0x10C1D, 0x10C1E, 0x10C1F, 0x10C20, 0x10C21,\n      0x10C22, 0x10C23, 0x10C24, 0x10C25, 0x10C26, 0x10C27, 0x10C28, 0x10C29,\n      0x10C2A, 0x10C2B, 0x10C2C, 0x10C2D, 0x10C2E, 0x10C2F, 0x10C30, 0x10C31,\n      0x10C32, 0x10C33, 0x10C34, 0x10C35, 0x10C36, 0x10C37, 0x10C38, 0x10C39,\n      0x10C3A, 0x10C3B, 0x10C3C, 0x10C3D, 0x10C3E, 0x10C3F, 0x10C40, 0x10C41,\n      0x10C42, 0x10C43, 0x10C44, 0x10C45, 0x10C46, 0x10C47, 0x10C48, 0x1EE00,\n      0x1EE01, 0x1EE02, 0x1EE03, 0x1EE05, 0x1EE06, 0x1EE07, 0x1EE08, 0x1EE09,\n      0x1EE0A, 0x1EE0B, 0x1EE0C, 0x1EE0D, 0x1EE0E, 0x1EE0F, 0x1EE10, 0x1EE11,\n      0x1EE12, 0x1EE13, 0x1EE14, 0x1EE15, 0x1EE16, 0x1EE17, 0x1EE18, 0x1EE19,\n      0x1EE1A, 0x1EE1B, 0x1EE1C, 0x1EE1D, 0x1EE1E, 0x1EE1F, 0x1EE21, 0x1EE22,\n      0x1EE24, 0x1EE27, 0x1EE29, 0x1EE2A, 0x1EE2B, 0x1EE2C, 0x1EE2D, 0x1EE2E,\n      0x1EE2F, 0x1EE30, 0x1EE31, 0x1EE32, 0x1EE34, 0x1EE35, 0x1EE36, 0x1EE37,\n      0x1EE39, 0x1EE3B, 0x1EE42, 0x1EE47, 0x1EE49, 0x1EE4B, 0x1EE4D, 0x1EE4E,\n      0x1EE4F, 0x1EE51, 0x1EE52, 0x1EE54, 0x1EE57, 0x1EE59, 0x1EE5B, 0x1EE5D,\n      0x1EE5F, 0x1EE61, 0x1EE62, 0x1EE64, 0x1EE67, 0x1EE68, 0x1EE69, 0x1EE6A,\n      0x1EE6C, 0x1EE6D, 0x1EE6E, 0x1EE6F, 0x1EE70, 0x1EE71, 0x1EE72, 0x1EE74,\n      0x1EE75, 0x1EE76, 0x1EE77, 0x1EE79, 0x1EE7A, 0x1EE7B, 0x1EE7C, 0x1EE7E,\n      0x1EE80, 0x1EE81, 0x1EE82, 0x1EE83, 0x1EE84, 0x1EE85, 0x1EE86, 0x1EE87,\n      0x1EE88, 0x1EE89, 0x1EE8B, 0x1EE8C, 0x1EE8D, 0x1EE8E, 0x1EE8F, 0x1EE90,\n      0x1EE91, 0x1EE92, 0x1EE93, 0x1EE94, 0x1EE95, 0x1EE96, 0x1EE97, 0x1EE98,\n      0x1EE99, 0x1EE9A, 0x1EE9B, 0x1EEA1, 0x1EEA2, 0x1EEA3, 0x1EEA5, 0x1EEA6,\n      0x1EEA7, 0x1EEA8, 0x1EEA9, 0x1EEAB, 0x1EEAC, 0x1EEAD, 0x1EEAE, 0x1EEAF,\n      0x1EEB0, 0x1EEB1, 0x1EEB2, 0x1EEB3, 0x1EEB4, 0x1EEB5, 0x1EEB6, 0x1EEB7,\n      0x1EEB8, 0x1EEB9, 0x1EEBA, 0x1EEBB, 0x10FFFD];\n\n  function determineBidi(cueDiv) {\n    var nodeStack = [],\n        text = \"\",\n        charCode;\n\n    if (!cueDiv || !cueDiv.childNodes) {\n      return \"ltr\";\n    }\n\n    function pushNodes(nodeStack, node) {\n      for (var i = node.childNodes.length - 1; i >= 0; i--) {\n        nodeStack.push(node.childNodes[i]);\n      }\n    }\n\n    function nextTextNode(nodeStack) {\n      if (!nodeStack || !nodeStack.length) {\n        return null;\n      }\n\n      var node = nodeStack.pop(),\n          text = node.textContent || node.innerText;\n      if (text) {\n        // TODO: This should match all unicode type B characters (paragraph\n        // separator characters). See issue #115.\n        var m = text.match(/^.*(\\n|\\r)/);\n        if (m) {\n          nodeStack.length = 0;\n          return m[0];\n        }\n        return text;\n      }\n      if (node.tagName === \"ruby\") {\n        return nextTextNode(nodeStack);\n      }\n      if (node.childNodes) {\n        pushNodes(nodeStack, node);\n        return nextTextNode(nodeStack);\n      }\n    }\n\n    pushNodes(nodeStack, cueDiv);\n    while ((text = nextTextNode(nodeStack))) {\n      for (var i = 0; i < text.length; i++) {\n        charCode = text.charCodeAt(i);\n        for (var j = 0; j < strongRTLChars.length; j++) {\n          if (strongRTLChars[j] === charCode) {\n            return \"rtl\";\n          }\n        }\n      }\n    }\n    return \"ltr\";\n  }\n\n  function computeLinePos(cue) {\n    if (typeof cue.line === \"number\" &&\n        (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n      return cue.line;\n    }\n    if (!cue.track || !cue.track.textTrackList ||\n        !cue.track.textTrackList.mediaElement) {\n      return -1;\n    }\n    var track = cue.track,\n        trackList = track.textTrackList,\n        count = 0;\n    for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n      if (trackList[i].mode === \"showing\") {\n        count++;\n      }\n    }\n    return ++count * -1;\n  }\n\n  function StyleBox() {\n  }\n\n  // Apply styles to a div. If there is no div passed then it defaults to the\n  // div on 'this'.\n  StyleBox.prototype.applyStyles = function(styles, div) {\n    div = div || this.div;\n    for (var prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  };\n\n  StyleBox.prototype.formatStyle = function(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  };\n\n  // Constructs the computed display state of the cue (a div). Places the div\n  // into the overlay which should be a block level element (usually a div).\n  function CueStyleBox(window, cue, styleOptions) {\n    var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n    var color = \"rgba(255, 255, 255, 1)\";\n    var backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n\n    if (isIE8) {\n      color = \"rgb(255, 255, 255)\";\n      backgroundColor = \"rgb(0, 0, 0)\";\n    }\n\n    StyleBox.call(this);\n    this.cue = cue;\n\n    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n    // have inline positioning and will function as the cue background box.\n    this.cueDiv = parseContent(window, cue.text);\n    var styles = {\n      color: color,\n      backgroundColor: backgroundColor,\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\"\n    };\n\n    if (!isIE8) {\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n                                               : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                                       : \"vertical-rl\";\n      styles.unicodeBidi = \"plaintext\";\n    }\n    this.applyStyles(styles, this.cueDiv);\n\n    // Create an absolutely positioned div that will be used to position the cue\n    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n    // mirrors of them except \"middle\" which is \"center\" in CSS.\n    this.div = window.document.createElement(\"div\");\n    styles = {\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n\n    if (!isIE8) {\n      styles.direction = determineBidi(this.cueDiv);\n      styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n                                               : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                                       : \"vertical-rl\".\n      stylesunicodeBidi =  \"plaintext\";\n    }\n\n    this.applyStyles(styles);\n\n    this.div.appendChild(this.cueDiv);\n\n    // Calculate the distance from the reference edge of the viewport to the text\n    // position of the cue box. The reference edge will be resolved later when\n    // the box orientation styles are applied.\n    var textPos = 0;\n    switch (cue.positionAlign) {\n    case \"start\":\n      textPos = cue.position;\n      break;\n    case \"middle\":\n      textPos = cue.position - (cue.size / 2);\n      break;\n    case \"end\":\n      textPos = cue.position - cue.size;\n      break;\n    }\n\n    // Horizontal box orientation; textPos is the distance from the left edge of the\n    // area to the left edge of the box and cue.size is the distance extending to\n    // the right from there.\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left:  this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\"),\n      });\n    // Vertical box orientation; textPos is the distance from the top edge of the\n    // area to the top edge of the box and cue.size is the height extending\n    // downwards from there.\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n\n    this.move = function(box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\"),\n      });\n    };\n  }\n  CueStyleBox.prototype = _objCreate(StyleBox.prototype);\n  CueStyleBox.prototype.constructor = CueStyleBox;\n\n  // Represents the co-ordinates of an Element in a way that we can easily\n  // compute things with such as if it overlaps or intersects with another Element.\n  // Can initialize it with either a StyleBox or another BoxPosition.\n  function BoxPosition(obj) {\n    var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n    // was passed in and we need to copy the results of 'getBoundingClientRect'\n    // as the object returned is readonly. All co-ordinate values are in reference\n    // to the viewport origin (top left).\n    var lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n\n      var rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n                  rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      // In certain cases the outter div will be slightly larger then the sum of\n      // the inner div's lines. This could be due to bold text, etc, on some platforms.\n      // In this case we should get the average line height and use that. This will\n      // result in the desired behaviour.\n      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n                 : 0;\n\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || (top + (obj.height || height));\n    this.width = obj.width || width;\n    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n    if (isIE8 && !this.lineHeight) {\n      this.lineHeight = 13;\n    }\n  }\n\n  // Move the box along a particular axis. Optionally pass in an amount to move\n  // the box. If no amount is passed then the default is the line height of the\n  // box.\n  BoxPosition.prototype.move = function(axis, toMove) {\n    toMove = toMove !== undefined ? toMove : this.lineHeight;\n    switch (axis) {\n    case \"+x\":\n      this.left += toMove;\n      this.right += toMove;\n      break;\n    case \"-x\":\n      this.left -= toMove;\n      this.right -= toMove;\n      break;\n    case \"+y\":\n      this.top += toMove;\n      this.bottom += toMove;\n      break;\n    case \"-y\":\n      this.top -= toMove;\n      this.bottom -= toMove;\n      break;\n    }\n  };\n\n  // Check if this box overlaps another box, b2.\n  BoxPosition.prototype.overlaps = function(b2) {\n    return this.left < b2.right &&\n           this.right > b2.left &&\n           this.top < b2.bottom &&\n           this.bottom > b2.top;\n  };\n\n  // Check if this box overlaps any other boxes in boxes.\n  BoxPosition.prototype.overlapsAny = function(boxes) {\n    for (var i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  // Check if this box is within another box.\n  BoxPosition.prototype.within = function(container) {\n    return this.top >= container.top &&\n           this.bottom <= container.bottom &&\n           this.left >= container.left &&\n           this.right <= container.right;\n  };\n\n  // Check if this box is entirely within the container or it is overlapping\n  // on the edge opposite of the axis direction passed. For example, if \"+x\" is\n  // passed and the box is overlapping on the left edge of the container, then\n  // return true.\n  BoxPosition.prototype.overlapsOppositeAxis = function(container, axis) {\n    switch (axis) {\n    case \"+x\":\n      return this.left < container.left;\n    case \"-x\":\n      return this.right > container.right;\n    case \"+y\":\n      return this.top < container.top;\n    case \"-y\":\n      return this.bottom > container.bottom;\n    }\n  };\n\n  // Find the percentage of the area that this box is overlapping with another\n  // box.\n  BoxPosition.prototype.intersectPercentage = function(b2) {\n    var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n        y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n        intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  };\n\n  // Convert the positions from this box to CSS compatible positions using\n  // the reference container's positions. This has to be done because this\n  // box's positions are in reference to the viewport origin, whereas, CSS\n  // values are in referecne to their respective edges.\n  BoxPosition.prototype.toCSSCompatValues = function(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  };\n\n  // Get an object that represents the box's position without anything extra.\n  // Can pass a StyleBox, HTMLElement, or another BoxPositon.\n  BoxPosition.getSimpleBoxPosition = function(obj) {\n    var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n    obj = obj.div ? obj.div.getBoundingClientRect() :\n                  obj.tagName ? obj.getBoundingClientRect() : obj;\n    var ret = {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || (top + (obj.height || height)),\n      width: obj.width || width\n    };\n    return ret;\n  };\n\n  // Move a StyleBox to its specified, or next best, position. The containerBox\n  // is the box that contains the StyleBox, such as a div. boxPositions are\n  // a list of other boxes that the styleBox can't overlap with.\n  function moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n\n    // Find the best position for a cue box, b, on the video. The axis parameter\n    // is a list of axis, the order of which, it will move the box along. For example:\n    // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n    // direction. If it doesn't find a good position for it there it will then move\n    // it along the x axis in the negative direction.\n    function findBestPosition(b, axis) {\n      var bestPosition,\n          specifiedPosition = new BoxPosition(b),\n          percentage = 1; // Highest possible so the first thing we get is better.\n\n      for (var i = 0; i < axis.length; i++) {\n        while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n               (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n          b.move(axis[i]);\n        }\n        // We found a spot where we aren't overlapping anything. This is our\n        // best position.\n        if (b.within(containerBox)) {\n          return b;\n        }\n        var p = b.intersectPercentage(containerBox);\n        // If we're outside the container box less then we were on our last try\n        // then remember this position as the best position.\n        if (percentage > p) {\n          bestPosition = new BoxPosition(b);\n          percentage = p;\n        }\n        // Reset the box position to the specified position.\n        b = new BoxPosition(specifiedPosition);\n      }\n      return bestPosition || specifiedPosition;\n    }\n\n    var boxPosition = new BoxPosition(styleBox),\n        cue = styleBox.cue,\n        linePos = computeLinePos(cue),\n        axis = [];\n\n    // If we have a line number to align the cue to.\n    if (cue.snapToLines) {\n      var size;\n      switch (cue.vertical) {\n      case \"\":\n        axis = [ \"+y\", \"-y\" ];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [ \"+x\", \"-x\" ];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [ \"-x\", \"+x\" ];\n        size = \"width\";\n        break;\n      }\n\n      var step = boxPosition.lineHeight,\n          position = step * Math.round(linePos),\n          maxPosition = containerBox[size] + step,\n          initialAxis = axis[0];\n\n      // If the specified intial position is greater then the max position then\n      // clamp the box to the amount of steps it would take for the box to\n      // reach the max position.\n      if (Math.abs(position) > maxPosition) {\n        position = position < 0 ? -1 : 1;\n        position *= Math.ceil(maxPosition / step) * step;\n      }\n\n      // If computed line position returns negative then line numbers are\n      // relative to the bottom of the video instead of the top. Therefore, we\n      // need to increase our initial position by the length or width of the\n      // video, depending on the writing direction, and reverse our axis directions.\n      if (linePos < 0) {\n        position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n        axis = axis.reverse();\n      }\n\n      // Move the box to the specified position. This may not be its best\n      // position.\n      boxPosition.move(initialAxis, position);\n\n    } else {\n      // If we have a percentage line value for the cue.\n      var calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n      switch (cue.lineAlign) {\n      case \"middle\":\n        linePos -= (calculatedPercentage / 2);\n        break;\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n      }\n\n      // Apply initial line position to the cue box.\n      switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n      }\n\n      axis = [ \"+y\", \"-x\", \"+x\", \"-y\" ];\n\n      // Get the box position again after we've applied the specified positioning\n      // to it.\n      boxPosition = new BoxPosition(styleBox);\n    }\n\n    var bestPosition = findBestPosition(boxPosition, axis);\n    styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n  }\n\n  function WebVTT() {\n    // Nothing\n  }\n\n  // Helper to allow strings to be decoded instead of the default binary utf8 data.\n  WebVTT.StringDecoder = function() {\n    return {\n      decode: function(data) {\n        if (!data) {\n          return \"\";\n        }\n        if (typeof data !== \"string\") {\n          throw new Error(\"Error - expected string data.\");\n        }\n        return decodeURIComponent(encodeURIComponent(data));\n      }\n    };\n  };\n\n  WebVTT.convertCueToDOMTree = function(window, cuetext) {\n    if (!window || !cuetext) {\n      return null;\n    }\n    return parseContent(window, cuetext);\n  };\n\n  var FONT_SIZE_PERCENT = 0.05;\n  var FONT_STYLE = \"sans-serif\";\n  var CUE_BACKGROUND_PADDING = \"1.5%\";\n\n  // Runs the processing model over the cues and regions passed to it.\n  // @param overlay A block level element (usually a div) that the computed cues\n  //                and regions will be placed into.\n  WebVTT.processCues = function(window, cues, overlay) {\n    if (!window || !cues || !overlay) {\n      return null;\n    }\n\n    // Remove all previous children.\n    while (overlay.firstChild) {\n      overlay.removeChild(overlay.firstChild);\n    }\n\n    var paddedOverlay = window.document.createElement(\"div\");\n    paddedOverlay.style.position = \"absolute\";\n    paddedOverlay.style.left = \"0\";\n    paddedOverlay.style.right = \"0\";\n    paddedOverlay.style.top = \"0\";\n    paddedOverlay.style.bottom = \"0\";\n    paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n    overlay.appendChild(paddedOverlay);\n\n    // Determine if we need to compute the display states of the cues. This could\n    // be the case if a cue's state has been changed since the last computation or\n    // if it has not been computed yet.\n    function shouldCompute(cues) {\n      for (var i = 0; i < cues.length; i++) {\n        if (cues[i].hasBeenReset || !cues[i].displayState) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    // We don't need to recompute the cues' display states. Just reuse them.\n    if (!shouldCompute(cues)) {\n      for (var i = 0; i < cues.length; i++) {\n        paddedOverlay.appendChild(cues[i].displayState);\n      }\n      return;\n    }\n\n    var boxPositions = [],\n        containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n        fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n    var styleOptions = {\n      font: fontSize + \"px \" + FONT_STYLE\n    };\n\n    (function() {\n      var styleBox, cue;\n\n      for (var i = 0; i < cues.length; i++) {\n        cue = cues[i];\n\n        // Compute the intial position and styles of the cue div.\n        styleBox = new CueStyleBox(window, cue, styleOptions);\n        paddedOverlay.appendChild(styleBox.div);\n\n        // Move the cue div to it's correct line position.\n        moveBoxToLinePosition(window, styleBox, containerBox, boxPositions);\n\n        // Remember the computed div so that we don't have to recompute it later\n        // if we don't have too.\n        cue.displayState = styleBox.div;\n\n        boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n      }\n    })();\n  };\n\n  WebVTT.Parser = function(window, vttjs, decoder) {\n    if (!decoder) {\n      decoder = vttjs;\n      vttjs = {};\n    }\n    if (!vttjs) {\n      vttjs = {};\n    }\n\n    this.window = window;\n    this.vttjs = vttjs;\n    this.state = \"INITIAL\";\n    this.buffer = \"\";\n    this.decoder = decoder || new TextDecoder(\"utf8\");\n    this.regionList = [];\n  };\n\n  WebVTT.Parser.prototype = {\n    // If the error is a ParsingError then report it to the consumer if\n    // possible. If it's not a ParsingError then throw it like normal.\n    reportOrThrowError: function(e) {\n      if (e instanceof ParsingError) {\n        this.onparsingerror && this.onparsingerror(e);\n      } else {\n        throw e;\n      }\n    },\n    parse: function (data) {\n      var self = this;\n\n      // If there is no data then we won't decode it, but will just try to parse\n      // whatever is in buffer already. This may occur in circumstances, for\n      // example when flush() is called.\n      if (data) {\n        // Try to decode the data that we received.\n        self.buffer += self.decoder.decode(data, {stream: true});\n      }\n\n      function collectNextLine() {\n        var buffer = self.buffer;\n        var pos = 0;\n        while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n          ++pos;\n        }\n        var line = buffer.substr(0, pos);\n        // Advance the buffer early in case we fail below.\n        if (buffer[pos] === '\\r') {\n          ++pos;\n        }\n        if (buffer[pos] === '\\n') {\n          ++pos;\n        }\n        self.buffer = buffer.substr(pos);\n        return line;\n      }\n\n      // 3.4 WebVTT region and WebVTT region settings syntax\n      function parseRegion(input) {\n        var settings = new Settings();\n\n        parseOptions(input, function (k, v) {\n          switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n          case \"width\":\n            settings.percent(k, v);\n            break;\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n            if (xy.length !== 2) {\n              break;\n            }\n            // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n          }\n        }, /=/, /\\s/);\n\n        // Create the region, using default values for any values that were not\n        // specified.\n        if (settings.has(\"id\")) {\n          var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();\n          region.width = settings.get(\"width\", 100);\n          region.lines = settings.get(\"lines\", 3);\n          region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n          region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n          region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n          region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n          region.scroll = settings.get(\"scroll\", \"\");\n          // Register the region.\n          self.onregion && self.onregion(region);\n          // Remember the VTTRegion for later in case we parse any VTTCues that\n          // reference it.\n          self.regionList.push({\n            id: settings.get(\"id\"),\n            region: region\n          });\n        }\n      }\n\n      // 3.2 WebVTT metadata header syntax\n      function parseHeader(input) {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n          case \"Region\":\n            // 3.3 WebVTT region metadata header syntax\n            parseRegion(v);\n            break;\n          }\n        }, /:/);\n      }\n\n      // 5.1 WebVTT file parsing.\n      try {\n        var line;\n        if (self.state === \"INITIAL\") {\n          // We can't start parsing until we have the first line.\n          if (!/\\r\\n|\\n/.test(self.buffer)) {\n            return this;\n          }\n\n          line = collectNextLine();\n\n          var m = line.match(/^WEBVTT([ \\t].*)?$/);\n          if (!m || !m[0]) {\n            throw new ParsingError(ParsingError.Errors.BadSignature);\n          }\n\n          self.state = \"HEADER\";\n        }\n\n        var alreadyCollectedLine = false;\n        while (self.buffer) {\n          // We can't parse a line until we have the full line.\n          if (!/\\r\\n|\\n/.test(self.buffer)) {\n            return this;\n          }\n\n          if (!alreadyCollectedLine) {\n            line = collectNextLine();\n          } else {\n            alreadyCollectedLine = false;\n          }\n\n          switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n            continue;\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            }\n            // 19-29 - Allow any number of line terminators, then initialize new cue values.\n            if (!line) {\n              continue;\n            }\n            self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, \"\");\n            self.state = \"CUE\";\n            // 30-39 - Check if self line contains an optional identifier or timing data.\n            if (line.indexOf(\"--\x3e\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n            // Process line as start of a cue.\n            /*falls through*/\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e);\n              // In case of an error ignore rest of the cue.\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n            self.state = \"CUETEXT\";\n            continue;\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"--\x3e\") !== -1;\n            // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '--\x3e' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n            self.cue.text += line;\n            continue;\n          case \"BADCUE\": // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n            continue;\n          }\n        }\n      } catch (e) {\n        self.reportOrThrowError(e);\n\n        // If we are currently parsing a cue, report what we have.\n        if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n          self.oncue(self.cue);\n        }\n        self.cue = null;\n        // Enter BADWEBVTT state if header was not parsed correctly otherwise\n        // another exception occurred so enter BADCUE state.\n        self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n      }\n      return this;\n    },\n    flush: function () {\n      var self = this;\n      try {\n        // Finish decoding the stream.\n        self.buffer += self.decoder.decode();\n        // Synthesize the end of the current cue or region.\n        if (self.cue || self.state === \"HEADER\") {\n          self.buffer += \"\\n\\n\";\n          self.parse();\n        }\n        // If we've flushed, parsed, and we're still on the INITIAL state then\n        // that means we don't have enough of the stream to parse the first\n        // line.\n        if (self.state === \"INITIAL\") {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n      } catch(e) {\n        self.reportOrThrowError(e);\n      }\n      self.onflush && self.onflush();\n      return this;\n    }\n  };\n\n  global.WebVTT = WebVTT;\n\n}(this, (this.vttjs || {})));\n"},SiEt:function(e,t){e.exports='/*globals $ */\nvar NavDropdown = {\n  init: function() {\n    $(document).on("shown.bs.dropdown", ".dropdown", function () {\n      // calculate the required sizes, spaces\n      var $ul = $(this).children(".dropdown-menu");\n      var $button = $(this).children(".dropdown-toggle");\n      var ulOffset = $ul.offset();\n      // how much space would be left on the top if the dropdown opened that direction\n      var spaceUp = (ulOffset.top - $ul.height()) - $(window).scrollTop();\n      // how much space is left at the bottom\n      var spaceDown = $(window).scrollTop() + $(window).height() - (ulOffset.top + $ul.height());\n      var moveBottom = spaceDown + 50 > 0 && spaceDown < 0;\n      // switch to dropup only if there is no space at the bottom AND there is space at the top, or there isn\'t either but it would be still better fit\n      if (moveBottom) {\n        $(this).addClass("move-bottom");\n      } else if (spaceDown < 0 && (spaceUp >= 0 || $(this).attr(\'id\') === \'user_menu\') || spaceUp > spaceDown) {\n        $(this).addClass("dropup");\n      }\n    })\n\n    $(document).on("hidden.bs.dropdown", ".dropdown", function() {\n      // Reset after close\n      $(this).removeClass("dropup");\n      $(this).removeClass("move-bottom");\n    });\n  }\n};\n\nNavDropdown.init();\n'},SyYf:function(e,t,n){(function(t){e.exports=t["I18n"]=n("0WdF")}).call(this,n("yLpj"))},TCcV:function(e,t,n){var i=n("ZVcv");var r=n("uQCq");e.exports=function e(t,n,o,s){t=i(t);n=~~n;var a=0;if(!o)o=" ";else if(o.length>1)o=o.charAt(0);switch(s){case"right":a=n-t.length;return t+r(o,a);case"both":a=n-t.length;return r(o,Math.ceil(a/2))+t+r(o,Math.floor(a/2));default:a=n-t.length;return r(o,a)+t}}},TD0u:function(e,t){e.exports='/* canvas-toBlob.js\n * A canvas.toBlob() implementation.\n * 2013-12-27\n *\n * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr\n * License: X11/MIT\n *   See https://github.com/eligrey/canvas-toBlob.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */\n\n(function(view) {\n"use strict";\nvar\n    Uint8Array = view.Uint8Array\n  , HTMLCanvasElement = view.HTMLCanvasElement\n  , canvas_proto = HTMLCanvasElement && HTMLCanvasElement.prototype\n  , is_base64_regex = /\\s*;\\s*base64\\s*(?:;|$)/i\n  , to_data_url = "toDataURL"\n  , base64_ranks\n  , decode_base64 = function(base64) {\n    var\n        len = base64.length\n      , buffer = new Uint8Array(len / 4 * 3 | 0)\n      , i = 0\n      , outptr = 0\n      , last = [0, 0]\n      , state = 0\n      , save = 0\n      , rank\n      , code\n      , undef\n    ;\n    while (len--) {\n      code = base64.charCodeAt(i++);\n      rank = base64_ranks[code-43];\n      if (rank !== 255 && rank !== undef) {\n        last[1] = last[0];\n        last[0] = code;\n        save = (save << 6) | rank;\n        state++;\n        if (state === 4) {\n          buffer[outptr++] = save >>> 16;\n          if (last[1] !== 61 /* padding character */) {\n            buffer[outptr++] = save >>> 8;\n          }\n          if (last[0] !== 61 /* padding character */) {\n            buffer[outptr++] = save;\n          }\n          state = 0;\n        }\n      }\n    }\n    // 2/3 chance there\'s going to be some null bytes at the end, but that\n    // doesn\'t really matter with most image formats.\n    // If it somehow matters for you, truncate the buffer up outptr.\n    return buffer;\n  }\n;\nif (Uint8Array) {\n  base64_ranks = new Uint8Array([\n      62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1\n    , -1, -1,  0, -1, -1, -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9\n    , 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25\n    , -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35\n    , 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n  ]);\n}\nif (HTMLCanvasElement && !canvas_proto.toBlob) {\n  canvas_proto.toBlob = function(callback, type /*, ...args*/) {\n      if (!type) {\n      type = "image/png";\n    } if (this.mozGetAsFile) {\n      callback(this.mozGetAsFile("canvas", type));\n      return;\n    } if (this.msToBlob && /^\\s*image\\/png\\s*(?:$|;)/i.test(type)) {\n      callback(this.msToBlob());\n      return;\n    }\n\n    var\n        args = Array.prototype.slice.call(arguments, 1)\n      , dataURI = this[to_data_url].apply(this, args)\n      , header_end = dataURI.indexOf(",")\n      , data = dataURI.substring(header_end + 1)\n      , is_base64 = is_base64_regex.test(dataURI.substring(0, header_end))\n      , blob\n    ;\n    if (Blob.fake) {\n      // no reason to decode a data: URI that\'s just going to become a data URI again\n      blob = new Blob\n      if (is_base64) {\n        blob.encoding = "base64";\n      } else {\n        blob.encoding = "URI";\n      }\n      blob.data = data;\n      blob.size = data.length;\n    } else if (Uint8Array) {\n      if (is_base64) {\n        blob = new Blob([decode_base64(data)], {type: type});\n      } else {\n        blob = new Blob([decodeURIComponent(data)], {type: type});\n      }\n    }\n    callback(blob);\n  };\n\n  if (canvas_proto.toDataURLHD) {\n    canvas_proto.toBlobHD = function() {\n      to_data_url = "toDataURLHD";\n      var blob = this.toBlob();\n      to_data_url = "toDataURL";\n      return blob;\n    }\n  } else {\n    canvas_proto.toBlobHD = canvas_proto.toBlob;\n  }\n}\n}(typeof self !== "undefined" && self || typeof window !== "undefined" && window || this.content || this));\n'},Tzrs:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);if(t.length===0){return""}return t.slice(0,-1)+String.fromCharCode(t.charCodeAt(t.length-1)+n)}},"U/ob":function(e,t,n){n("8rVx")(n("pgU6"))},UDJX:function(e,t,n){var i=n("ZVcv");var r=n("2Muo");e.exports=function e(t,n,o){t=i(t);n=""+n;o=o==null?0:Math.min(r(o),t.length);return t.lastIndexOf(n,o)===o}},USoJ:function(e,t,n){"use strict";var i=function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{ref:"thumbContainer",staticClass:"vy-thumbnail",class:e.extraClasses,attrs:{"data-uuid":e.thumbUuid}},[n("div",{staticClass:"thumbnail-mask",style:"background-image: url('"+e.thumbUrl+"')"},[e.canDelete?n("div",{staticClass:"remove btn btn-danger btn-xs solo_icon"},[n("span",{staticClass:"confirm"},[e._v("\n        Confirm\n      ")]),e._v(" "),n("i",{staticClass:"fal fa-times"})]):e._e(),e._v(" "),e.showPlayButton?n("div",{staticClass:"play-btn",style:"background-color:"+e.playButtonColour},[n("div",{staticClass:"play-btn-size"}),e._v(" "),e._m(0)]):e._e(),e._v(" "),e.hasUploadSpinner?n("div",{staticClass:"spinner"},[n("i",{staticClass:"fal fa-circle-notch fa-spin"})]):e._e(),e._v(" "),e.is360?n("div",{staticClass:"360"},[e._v("\n      360 Video\n    ")]):e._e(),e._v(" "),e.time?n("div",{staticClass:"time"},[e._v("\n      "+e._s(e.time)+"\n    ")]):e._e(),e._v(" "),e.showProgress&&e.videoId&&e.thumbUuid?n("div",{staticClass:"progress-bar progress-bar-striped active",attrs:{id:"vy-thumbnail-polling-"+e.thumbUuid,"data-thumbnail-uuid":e.thumbUuid,"data-video-id":e.videoId}}):e._e(),e._v(" "),e._l(e.flags,(function(t,i){return n("div",{key:i,staticClass:"flags",attrs:{"data-toggle":t.tooltip?"tooltip":null,"data-placement":t.tooltip?"top":null,"data-container":t.tooltip?"body":null,title:t.tooltip?t.tooltip:null}},[t.icon?n("i",{class:"fa "+t.icon}):e._e(),e._v(" "),t.text?n("span",[e._v("\n        "+e._s(t.text)+"\n      ")]):e._e()])}))],2)])};var r=[function(){var e=this;var t=e.$createElement;var n=e._self._c||t;return n("div",{staticClass:"arrow-size"},[n("div",{staticClass:"arrow-size-ratio"}),e._v(" "),n("div",{staticClass:"arrow"})])}];i._withStripped=true;var o={name:"VyThumbnail",props:{thumbUrl:{type:String,required:false,default:""},thumbUuid:{type:String,required:false,default:""},videoId:{type:String,required:false,default:""},width:{type:String,required:false,default:""},height:{type:String,required:false,default:""},showProgress:{type:Boolean,default:true},relatedElement:{type:String,required:false,default:""},ssl:{type:Boolean,default:true},extraClasses:{type:String,required:false,default:""},showSmall:{type:Boolean,default:false},time:{type:String,required:false,default:""},showPlayButton:{type:Boolean,default:false},playButtonColour:{type:String,default:"#000000"},dataTags:{type:Object,required:false,default:()=>{}},flags:{type:Array,required:false,default:()=>[]},is360:{type:Boolean,default:false},hasUploadSpinner:{type:Boolean,default:false},canDelete:{type:Boolean,default:false}},watch:{width(){this.setDimensions()},height(){this.setDimensions()},dataTags:{handler(){this.setDataAttributes()},deep:true}},mounted(){this.setDimensions();this.setDataAttributes();if(this.showProgress&&ThumbnailEncoding){ThumbnailEncoding.init(this.thumbUuid,this.relatedElement)}},methods:{setDimensions(){this.$el.style.width=this.width;this.$el.style.height=this.height},setDataAttributes(){if(!this.dataTags){return}Object.keys(this.$refs.thumbContainer.dataset).forEach((e=>{delete this.$refs.thumbContainer.dataset[e]}));Object.keys(this.dataTags).forEach((e=>{this.$refs.thumbContainer.dataset[e]=this.dataTags[e]}))}}};var s=o;var a=n("vlgO");var l=n("KHd+");var c=Object(l["a"])(s,i,r,false,null,"8084f12a",null);if(false){var u}c.options.__file="app/assets/components/vy-thumbnail.vue";var d=t["a"]=c.exports},Uv0W:function(e,t){e.exports="/*! noUiSlider - 7.0.2 - 2014-09-06 17:28:53 */\n\n(function(){\n\n  'use strict';\n\nvar\n/** @const */ FormatOptions = [\n  'decimals',\n  'thousand',\n  'mark',\n  'prefix',\n  'postfix',\n  'encoder',\n  'decoder',\n  'negativeBefore',\n  'negative',\n  'edit',\n  'undo'\n];\n\n// General\n\n  // Reverse a string\n  function strReverse ( a ) {\n    return a.split('').reverse().join('');\n  }\n\n  // Check if a string starts with a specified prefix.\n  function strStartsWith ( input, match ) {\n    return input.substring(0, match.length) === match;\n  }\n\n  // Check is a string ends in a specified postfix.\n  function strEndsWith ( input, match ) {\n    return input.slice(-1 * match.length) === match;\n  }\n\n  // Throw an error if formatting options are incompatible.\n  function throwEqualError( F, a, b ) {\n    if ( (F[a] || F[b]) && (F[a] === F[b]) ) {\n      throw new Error(a);\n    }\n  }\n\n  // Check if a number is finite and not NaN\n  function isValidNumber ( input ) {\n    return typeof input === 'number' && isFinite( input );\n  }\n\n  // Provide rounding-accurate toFixed method.\n  function toFixed ( value, decimals ) {\n    var scale = Math.pow(10, decimals);\n    return ( Math.round(value * scale) / scale).toFixed( decimals );\n  }\n\n\n// Formatting\n\n  // Accept a number as input, output formatted string.\n  function formatTo ( decimals, thousand, mark, prefix, postfix, encoder, decoder, negativeBefore, negative, edit, undo, input ) {\n\n    var originalInput = input, inputIsNegative, inputPieces, inputBase, inputDecimals = '', output = '';\n\n    // Apply user encoder to the input.\n    // Expected outcome: number.\n    if ( encoder ) {\n      input = encoder(input);\n    }\n\n    // Stop if no valid number was provided, the number is infinite or NaN.\n    if ( !isValidNumber(input) ) {\n      return false;\n    }\n\n    // Rounding away decimals might cause a value of -0\n    // when using very small ranges. Remove those cases.\n    if ( decimals && parseFloat(input.toFixed(decimals)) === 0 ) {\n      input = 0;\n    }\n\n    // Formatting is done on absolute numbers,\n    // decorated by an optional negative symbol.\n    if ( input < 0 ) {\n      inputIsNegative = true;\n      input = Math.abs(input);\n    }\n\n    // Reduce the number of decimals to the specified option.\n    if ( decimals !== false ) {\n      input = toFixed( input, decimals );\n    }\n\n    // Transform the number into a string, so it can be split.\n    input = input.toString();\n\n    // Break the number on the decimal separator.\n    if ( input.indexOf('.') !== -1 ) {\n      inputPieces = input.split('.');\n\n      inputBase = inputPieces[0];\n\n      if ( mark ) {\n        inputDecimals = mark + inputPieces[1];\n      }\n\n    } else {\n\n    // If it isn't split, the entire number will do.\n      inputBase = input;\n    }\n\n    // Group numbers in sets of three.\n    if ( thousand ) {\n      inputBase = strReverse(inputBase).match(/.{1,3}/g);\n      inputBase = strReverse(inputBase.join( strReverse( thousand ) ));\n    }\n\n    // If the number is negative, prefix with negation symbol.\n    if ( inputIsNegative && negativeBefore ) {\n      output += negativeBefore;\n    }\n\n    // Prefix the number\n    if ( prefix ) {\n      output += prefix;\n    }\n\n    // Normal negative option comes after the prefix. Defaults to '-'.\n    if ( inputIsNegative && negative ) {\n      output += negative;\n    }\n\n    // Append the actual number.\n    output += inputBase;\n    output += inputDecimals;\n\n    // Apply the postfix.\n    if ( postfix ) {\n      output += postfix;\n    }\n\n    // Run the output through a user-specified post-formatter.\n    if ( edit ) {\n      output = edit ( output, originalInput );\n    }\n\n    // All done.\n    return output;\n  }\n\n  // Accept a sting as input, output decoded number.\n  function formatFrom ( decimals, thousand, mark, prefix, postfix, encoder, decoder, negativeBefore, negative, edit, undo, input ) {\n\n    var originalInput = input, inputIsNegative, output = '';\n\n    // User defined pre-decoder. Result must be a non empty string.\n    if ( undo ) {\n      input = undo(input);\n    }\n\n    // Test the input. Can't be empty.\n    if ( !input || typeof input !== 'string' ) {\n      return false;\n    }\n\n    // If the string starts with the negativeBefore value: remove it.\n    // Remember is was there, the number is negative.\n    if ( negativeBefore && strStartsWith(input, negativeBefore) ) {\n      input = input.replace(negativeBefore, '');\n      inputIsNegative = true;\n    }\n\n    // Repeat the same procedure for the prefix.\n    if ( prefix && strStartsWith(input, prefix) ) {\n      input = input.replace(prefix, '');\n    }\n\n    // And again for negative.\n    if ( negative && strStartsWith(input, negative) ) {\n      input = input.replace(negative, '');\n      inputIsNegative = true;\n    }\n\n    // Remove the postfix.\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice\n    if ( postfix && strEndsWith(input, postfix) ) {\n      input = input.slice(0, -1 * postfix.length);\n    }\n\n    // Remove the thousand grouping.\n    if ( thousand ) {\n      input = input.split(thousand).join('');\n    }\n\n    // Set the decimal separator back to period.\n    if ( mark ) {\n      input = input.replace(mark, '.');\n    }\n\n    // Prepend the negative symbol.\n    if ( inputIsNegative ) {\n      output += '-';\n    }\n\n    // Add the number\n    output += input;\n\n    // Trim all non-numeric characters (allow '.' and '-');\n    output = output.replace(/[^0-9\\.\\-.]/g, '');\n\n    // The value contains no parse-able number.\n    if ( output === '' ) {\n      return false;\n    }\n\n    // Covert to number.\n    output = Number(output);\n\n    // Run the user-specified post-decoder.\n    if ( decoder ) {\n      output = decoder(output);\n    }\n\n    // Check is the output is valid, otherwise: return false.\n    if ( !isValidNumber(output) ) {\n      return false;\n    }\n\n    return output;\n  }\n\n\n// Framework\n\n  // Validate formatting options\n  function validate ( inputOptions ) {\n\n    var i, optionName, optionValue,\n      filteredOptions = {};\n\n    for ( i = 0; i < FormatOptions.length; i+=1 ) {\n\n      optionName = FormatOptions[i];\n      optionValue = inputOptions[optionName];\n\n      if ( optionValue === undefined ) {\n\n        // Only default if negativeBefore isn't set.\n        if ( optionName === 'negative' && !filteredOptions.negativeBefore ) {\n          filteredOptions[optionName] = '-';\n        // Don't set a default for mark when 'thousand' is set.\n        } else if ( optionName === 'mark' && filteredOptions.thousand !== '.' ) {\n          filteredOptions[optionName] = '.';\n        } else {\n          filteredOptions[optionName] = false;\n        }\n\n      // Floating points in JS are stable up to 7 decimals.\n      } else if ( optionName === 'decimals' ) {\n        if ( optionValue >= 0 && optionValue < 8 ) {\n          filteredOptions[optionName] = optionValue;\n        } else {\n          throw new Error(optionName);\n        }\n\n      // These options, when provided, must be functions.\n      } else if ( optionName === 'encoder' || optionName === 'decoder' || optionName === 'edit' || optionName === 'undo' ) {\n        if ( typeof optionValue === 'function' ) {\n          filteredOptions[optionName] = optionValue;\n        } else {\n          throw new Error(optionName);\n        }\n\n      // Other options are strings.\n      } else {\n\n        if ( typeof optionValue === 'string' ) {\n          filteredOptions[optionName] = optionValue;\n        } else {\n          throw new Error(optionName);\n        }\n      }\n    }\n\n    // Some values can't be extracted from a\n    // string if certain combinations are present.\n    throwEqualError(filteredOptions, 'mark', 'thousand');\n    throwEqualError(filteredOptions, 'prefix', 'negative');\n    throwEqualError(filteredOptions, 'prefix', 'negativeBefore');\n\n    return filteredOptions;\n  }\n\n  // Pass all options as function arguments\n  function passAll ( options, method, input ) {\n    var i, args = [];\n\n    // Add all options in order of FormatOptions\n    for ( i = 0; i < FormatOptions.length; i+=1 ) {\n      args.push(options[FormatOptions[i]]);\n    }\n\n    // Append the input, then call the method, presenting all\n    // options as arguments.\n    args.push(input);\n    return method.apply('', args);\n  }\n\n  /** @constructor */\n  function wNumb ( options ) {\n\n    if ( !(this instanceof wNumb) ) {\n      return new wNumb ( options );\n    }\n\n    if ( typeof options !== \"object\" ) {\n      return;\n    }\n\n    options = validate(options);\n\n    // Call 'formatTo' with proper arguments.\n    this.to = function ( input ) {\n      return passAll(options, formatTo, input);\n    };\n\n    // Call 'formatFrom' with proper arguments.\n    this.from = function ( input ) {\n      return passAll(options, formatFrom, input);\n    };\n  }\n\n  /** @export */\n  window.wNumb = wNumb;\n\n}());\n\n/*jslint browser: true */\n/*jslint white: true */\n\n(function( $ ){\n\n  'use strict';\n\n// Helpers\n\n  // Test in an object is an instance of jQuery or Zepto.\n  function isInstance ( a ) {\n    return a instanceof $ || ( $.zepto && $.zepto.isZ(a) );\n  }\n\n\n// Link types\n\n  function fromPrefix ( target, method ) {\n\n    // If target is a string, a new hidden input will be created.\n    if ( typeof target === 'string' && target.indexOf('-inline-') === 0 ) {\n\n      // By default, use the 'html' method.\n      this.method = method || 'html';\n\n      // Use jQuery to create the element\n      this.target = this.el = $( target.replace('-inline-', '') || '<div/>' );\n\n      return true;\n    }\n  }\n\n  function fromString ( target ) {\n\n    // If the string doesn't begin with '-', which is reserved, add a new hidden input.\n    if ( typeof target === 'string' && target.indexOf('-') !== 0 ) {\n\n      this.method = 'val';\n\n      var element = document.createElement('input');\n        element.name = target;\n        element.type = 'hidden';\n      this.target = this.el = $(element);\n\n      return true;\n    }\n  }\n\n  function fromFunction ( target ) {\n\n    // The target can also be a function, which will be called.\n    if ( typeof target === 'function' ) {\n      this.target = false;\n      this.method = target;\n\n      return true;\n    }\n  }\n\n  function fromInstance ( target, method ) {\n\n    if ( isInstance( target ) && !method ) {\n\n    // If a jQuery/Zepto input element is provided, but no method is set,\n    // the element can assume it needs to respond to 'change'...\n      if ( target.is('input, select, textarea') ) {\n\n        // Default to .val if this is an input element.\n        this.method = 'val';\n\n        // Fire the API changehandler when the target changes.\n        this.target = target.on('change.liblink', this.changeHandler);\n\n      } else {\n\n        this.target = target;\n\n        // If no method is set, and we are not auto-binding an input, default to 'html'.\n        this.method = 'html';\n      }\n\n      return true;\n    }\n  }\n\n  function fromInstanceMethod ( target, method ) {\n\n    // The method must exist on the element.\n    if ( isInstance( target ) &&\n      (typeof method === 'function' ||\n        (typeof method === 'string' && target[method]))\n    ) {\n      this.method = method;\n      this.target = target;\n\n      return true;\n    }\n  }\n\nvar\n/** @const */\n  creationFunctions = [fromPrefix, fromString, fromFunction, fromInstance, fromInstanceMethod];\n\n\n// Link Instance\n\n/** @constructor */\n  function Link ( target, method, format ) {\n\n    var that = this, valid = false;\n\n    // Forward calls within scope.\n    this.changeHandler = function ( changeEvent ) {\n      var decodedValue = that.formatInstance.from( $(this).val() );\n\n      // If the value is invalid, stop this event, as well as it's propagation.\n      if ( decodedValue === false || isNaN(decodedValue) ) {\n\n        // Reset the value.\n        $(this).val(that.lastSetValue);\n        return false;\n      }\n\n      that.changeHandlerMethod.call( '', changeEvent, decodedValue );\n    };\n\n    // See if this Link needs individual targets based on its usage.\n    // If so, return the element that needs to be copied by the\n    // implementing interface.\n    // Default the element to false.\n    this.el = false;\n\n    // Store the formatter, or use the default.\n    this.formatInstance = format;\n\n    // Try all Link types.\n    /*jslint unparam: true*/\n    $.each(creationFunctions, function(i, fn){\n      valid = fn.call(that, target, method);\n      return !valid;\n    });\n    /*jslint unparam: false*/\n\n    // Nothing matched, throw error.\n    if ( !valid ) {\n      throw new RangeError(\"(Link) Invalid Link.\");\n    }\n  }\n\n  // Provides external items with the object value.\n  Link.prototype.set = function ( value ) {\n\n    // Ignore the value, so only the passed-on arguments remain.\n    var args = Array.prototype.slice.call( arguments ),\n      additionalArgs = args.slice(1);\n\n    // Store some values. The actual, numerical value,\n    // the formatted value and the parameters for use in 'resetValue'.\n    // Slice additionalArgs to break the relation.\n    this.lastSetValue = this.formatInstance.to( value );\n\n    // Prepend the value to the function arguments.\n    additionalArgs.unshift(\n      this.lastSetValue\n    );\n\n    // When target is undefined, the target was a function.\n    // In that case, provided the object as the calling scope.\n    // Branch between writing to a function or an object.\n    ( typeof this.method === 'function' ?\n      this.method :\n      this.target[ this.method ] ).apply( this.target, additionalArgs );\n  };\n\n\n// Developer API\n\n/** @constructor */\n  function LinkAPI ( origin ) {\n    this.items = [];\n    this.elements = [];\n    this.origin = origin;\n  }\n\n  LinkAPI.prototype.push = function( item, element ) {\n    this.items.push(item);\n\n    // Prevent 'false' elements\n    if ( element ) {\n      this.elements.push(element);\n    }\n  };\n\n  LinkAPI.prototype.reconfirm = function ( flag ) {\n    var i;\n    for ( i = 0; i < this.elements.length; i += 1 ) {\n      this.origin.LinkConfirm(flag, this.elements[i]);\n    }\n  };\n\n  LinkAPI.prototype.remove = function ( flag ) {\n    var i;\n    for ( i = 0; i < this.items.length; i += 1 ) {\n      this.items[i].target.off('.liblink');\n    }\n    for ( i = 0; i < this.elements.length; i += 1 ) {\n      this.elements[i].remove();\n    }\n  };\n\n  LinkAPI.prototype.change = function ( value ) {\n\n    if ( this.origin.LinkIsEmitting ) {\n      return false;\n    }\n\n    this.origin.LinkIsEmitting = true;\n\n    var args = Array.prototype.slice.call( arguments, 1 ), i;\n    args.unshift( value );\n\n    // Write values to serialization Links.\n    // Convert the value to the correct relative representation.\n    for ( i = 0; i < this.items.length; i += 1 ) {\n      this.items[i].set.apply(this.items[i], args);\n    }\n\n    this.origin.LinkIsEmitting = false;\n  };\n\n\n// jQuery plugin\n\n  function binder ( flag, target, method, format ){\n\n    if ( flag === 0 ) {\n      flag = this.LinkDefaultFlag;\n    }\n\n    // Create a list of API's (if it didn't exist yet);\n    if ( !this.linkAPI ) {\n      this.linkAPI = {};\n    }\n\n    // Add an API point.\n    if ( !this.linkAPI[flag] ) {\n      this.linkAPI[flag] = new LinkAPI(this);\n    }\n\n    var linkInstance = new Link ( target, method, format || this.LinkDefaultFormatter );\n\n    // Default the calling scope to the linked object.\n    if ( !linkInstance.target ) {\n      linkInstance.target = $(this);\n    }\n\n    // If the Link requires creation of a new element,\n    // Pass the element and request confirmation to get the changehandler.\n    // Set the method to be called when a Link changes.\n    linkInstance.changeHandlerMethod = this.LinkConfirm( flag, linkInstance.el );\n\n    // Store the linkInstance in the flagged list.\n    this.linkAPI[flag].push( linkInstance, linkInstance.el );\n\n    // Now that Link have been connected, request an update.\n    this.LinkUpdate( flag );\n  }\n\n  /** @export */\n  $.fn.Link = function( flag ){\n\n    var that = this;\n\n    // Delete all linkAPI\n    if ( flag === false ) {\n\n      return that.each(function(){\n\n        // .Link(false) can be called on elements without Links.\n        // When that happens, the objects can't be looped.\n        if ( !this.linkAPI ) {\n          return;\n        }\n\n        $.map(this.linkAPI, function(api){\n          api.remove();\n        });\n\n        delete this.linkAPI;\n      });\n    }\n\n    if ( flag === undefined ) {\n\n      flag = 0;\n\n    } else if ( typeof flag !== 'string') {\n\n      throw new Error(\"Flag must be string.\");\n    }\n\n    return {\n      to: function( a, b, c ){\n        return that.each(function(){\n          binder.call(this, flag, a, b, c);\n        });\n      }\n    };\n  };\n\n}( window.jQuery || window.Zepto ));\n\n/*jslint browser: true */\n/*jslint white: true */\n\n(function( $ ){\n\n  'use strict';\n\n\n  // Removes duplicates from an array.\n  function unique(array) {\n    return $.grep(array, function(el, index) {\n      return index === $.inArray(el, array);\n    });\n  }\n\n  // Round a value to the closest 'to'.\n  function closest ( value, to ) {\n    return Math.round(value / to) * to;\n  }\n\n  // Checks whether a value is numerical.\n  function isNumeric ( a ) {\n    return typeof a === 'number' && !isNaN( a ) && isFinite( a );\n  }\n\n  // Rounds a number to 7 supported decimals.\n  function accurateNumber( number ) {\n    var p = Math.pow(10, 7);\n    return Number((Math.round(number*p)/p).toFixed(7));\n  }\n\n  // Sets a class and removes it after [duration] ms.\n  function addClassFor ( element, className, duration ) {\n    element.addClass(className);\n    setTimeout(function(){\n      element.removeClass(className);\n    }, duration);\n  }\n\n  // Limits a value to 0 - 100\n  function limit ( a ) {\n    return Math.max(Math.min(a, 100), 0);\n  }\n\n  // Wraps a variable as an array, if it isn't one yet.\n  function asArray ( a ) {\n    return $.isArray(a) ? a : [a];\n  }\n\n\n  var\n  // Cache the document selector;\n  /** @const */\n  doc = $(document),\n  // Make a backup of the original jQuery/Zepto .val() method.\n  /** @const */\n  $val = $.fn.val,\n  // Namespace for binding and unbinding slider events;\n  /** @const */\n  namespace = '.nui',\n  // Determine the events to bind. IE11 implements pointerEvents without\n  // a prefix, which breaks compatibility with the IE10 implementation.\n  /** @const */\n  actions = window.navigator.pointerEnabled ? {\n    start: 'pointerdown',\n    move: 'pointermove',\n    end: 'pointerup'\n  } : window.navigator.msPointerEnabled ? {\n    start: 'MSPointerDown',\n    move: 'MSPointerMove',\n    end: 'MSPointerUp'\n  } : {\n    start: 'mousedown touchstart',\n    move: 'mousemove touchmove',\n    end: 'mouseup touchend'\n  },\n  // Re-usable list of classes;\n  /** @const */\n  Classes = [\n/*  0 */  'noUi-target'\n/*  1 */ ,'noUi-base'\n/*  2 */ ,'noUi-origin'\n/*  3 */ ,'noUi-handle'\n/*  4 */ ,'noUi-horizontal'\n/*  5 */ ,'noUi-vertical'\n/*  6 */ ,'noUi-background'\n/*  7 */ ,'noUi-connect'\n/*  8 */ ,'noUi-ltr'\n/*  9 */ ,'noUi-rtl'\n/* 10 */ ,'noUi-dragable'\n/* 11 */ ,''\n/* 12 */ ,'noUi-state-drag'\n/* 13 */ ,''\n/* 14 */ ,'noUi-state-tap'\n/* 15 */ ,'noUi-active'\n/* 16 */ ,''\n/* 17 */ ,'noUi-stacking'\n  ];\n\n\n// Value calculation\n\n  // Determine the size of a sub-range in relation to a full range.\n  function subRangeRatio ( pa, pb ) {\n    return (100 / (pb - pa));\n  }\n\n  // (percentage) How many percent is this value of this range?\n  function fromPercentage ( range, value ) {\n    return (value * 100) / ( range[1] - range[0] );\n  }\n\n  // (percentage) Where is this value on this range?\n  function toPercentage ( range, value ) {\n    return fromPercentage( range, range[0] < 0 ?\n      value + Math.abs(range[0]) :\n        value - range[0] );\n  }\n\n  // (value) How much is this percentage on this range?\n  function isPercentage ( range, value ) {\n    return ((value * ( range[1] - range[0] )) / 100) + range[0];\n  }\n\n\n// Range conversion\n\n  function getJ ( value, arr ) {\n\n    var j = 1;\n\n    while ( value >= arr[j] ){\n      j += 1;\n    }\n\n    return j;\n  }\n\n  // (percentage) Input a value, find where, on a scale of 0-100, it applies.\n  function toStepping ( xVal, xPct, value ) {\n\n    if ( value >= xVal.slice(-1)[0] ){\n      return 100;\n    }\n\n    var j = getJ( value, xVal ), va, vb, pa, pb;\n\n    va = xVal[j-1];\n    vb = xVal[j];\n    pa = xPct[j-1];\n    pb = xPct[j];\n\n    return pa + (toPercentage([va, vb], value) / subRangeRatio (pa, pb));\n  }\n\n  // (value) Input a percentage, find where it is on the specified range.\n  function fromStepping ( xVal, xPct, value ) {\n\n    // There is no range group that fits 100\n    if ( value >= 100 ){\n      return xVal.slice(-1)[0];\n    }\n\n    var j = getJ( value, xPct ), va, vb, pa, pb;\n\n    va = xVal[j-1];\n    vb = xVal[j];\n    pa = xPct[j-1];\n    pb = xPct[j];\n\n    return isPercentage([va, vb], (value - pa) * subRangeRatio (pa, pb));\n  }\n\n  // (percentage) Get the step that applies at a certain value.\n  function getStep ( xPct, xSteps, snap, value ) {\n\n    if ( value === 100 ) {\n      return value;\n    }\n\n    var j = getJ( value, xPct ), a, b;\n\n    // If 'snap' is set, steps are used as fixed points on the slider.\n    if ( snap ) {\n\n      a = xPct[j-1];\n      b = xPct[j];\n\n      // Find the closest position, a or b.\n      if ((value - a) > ((b-a)/2)){\n        return b;\n      }\n\n      return a;\n    }\n\n    if ( !xSteps[j-1] ){\n      return value;\n    }\n\n    return xPct[j-1] + closest(\n      value - xPct[j-1],\n      xSteps[j-1]\n    );\n  }\n\n\n// Entry parsing\n\n  function handleEntryPoint ( index, value, that ) {\n\n    var percentage;\n\n    // Wrap numerical input in an array.\n    if ( typeof value === \"number\" ) {\n      value = [value];\n    }\n\n    // Reject any invalid input, by testing whether value is an array.\n    if ( Object.prototype.toString.call( value ) !== '[object Array]' ){\n      throw new Error(\"noUiSlider: 'range' contains invalid value.\");\n    }\n\n    // Covert min/max syntax to 0 and 100.\n    if ( index === 'min' ) {\n      percentage = 0;\n    } else if ( index === 'max' ) {\n      percentage = 100;\n    } else {\n      percentage = parseFloat( index );\n    }\n\n    // Check for correct input.\n    if ( !isNumeric( percentage ) || !isNumeric( value[0] ) ) {\n      throw new Error(\"noUiSlider: 'range' value isn't numeric.\");\n    }\n\n    // Store values.\n    that.xPct.push( percentage );\n    that.xVal.push( value[0] );\n\n    // NaN will evaluate to false too, but to keep\n    // logging clear, set step explicitly. Make sure\n    // not to override the 'step' setting with false.\n    if ( !percentage ) {\n      if ( !isNaN( value[1] ) ) {\n        that.xSteps[0] = value[1];\n      }\n    } else {\n      that.xSteps.push( isNaN(value[1]) ? false : value[1] );\n    }\n  }\n\n  function handleStepPoint ( i, n, that ) {\n\n    // Ignore 'false' stepping.\n    if ( !n ) {\n      return true;\n    }\n\n    // Factor to range ratio\n    that.xSteps[i] = fromPercentage([\n       that.xVal[i]\n      ,that.xVal[i+1]\n    ], n) / subRangeRatio (\n      that.xPct[i],\n      that.xPct[i+1] );\n  }\n\n\n// Interface\n\n  // The interface to Spectrum handles all direction-based\n  // conversions, so the above values are unaware.\n\n  function Spectrum ( entry, snap, direction, singleStep ) {\n\n    this.xPct = [];\n    this.xVal = [];\n    this.xSteps = [ singleStep || false ];\n    this.xNumSteps = [ false ];\n\n    this.snap = snap;\n    this.direction = direction;\n\n    var that = this, index;\n\n    // Loop all entries.\n    for ( index in entry ) {\n      if ( entry.hasOwnProperty(index) ) {\n        handleEntryPoint(index, entry[index], that);\n      }\n    }\n\n    // Store the actual step values.\n    that.xNumSteps = that.xSteps.slice(0);\n\n    for ( index in that.xNumSteps ) {\n      if ( that.xNumSteps.hasOwnProperty(index) ) {\n        handleStepPoint(Number(index), that.xNumSteps[index], that);\n      }\n    }\n  }\n\n  Spectrum.prototype.getMargin = function ( value ) {\n    return this.xPct.length === 2 ? fromPercentage(this.xVal, value) : false;\n  };\n\n  Spectrum.prototype.toStepping = function ( value ) {\n\n    value = toStepping( this.xVal, this.xPct, value );\n\n    // Invert the value if this is a right-to-left slider.\n    if ( this.direction ) {\n      value = 100 - value;\n    }\n\n    return value;\n  };\n\n  Spectrum.prototype.fromStepping = function ( value ) {\n\n    // Invert the value if this is a right-to-left slider.\n    if ( this.direction ) {\n      value = 100 - value;\n    }\n\n    return accurateNumber(fromStepping( this.xVal, this.xPct, value ));\n  };\n\n  Spectrum.prototype.getStep = function ( value ) {\n\n    // Find the proper step for rtl sliders by search in inverse direction.\n    // Fixes issue #262.\n    if ( this.direction ) {\n      value = 100 - value;\n    }\n\n    value = getStep(this.xPct, this.xSteps, this.snap, value );\n\n    if ( this.direction ) {\n      value = 100 - value;\n    }\n\n    return value;\n  };\n\n  Spectrum.prototype.getApplicableStep = function ( value ) {\n\n    // If the value is 100%, return the negative step twice.\n    var j = getJ(value, this.xPct), offset = value === 100 ? 2 : 1;\n    return [this.xNumSteps[j-2], this.xVal[j-offset], this.xNumSteps[j-offset]];\n  };\n\n  // Outside testing\n  Spectrum.prototype.convert = function ( value ) {\n    return this.getStep(this.toStepping(value));\n  };\n\n/*  Every input option is tested and parsed. This'll prevent\n  endless validation in internal methods. These tests are\n  structured with an item for every option available. An\n  option can be marked as required by setting the 'r' flag.\n  The testing function is provided with three arguments:\n    - The provided value for the option;\n    - A reference to the options object;\n    - The name for the option;\n\n  The testing function returns false when an error is detected,\n  or true when everything is OK. It can also modify the option\n  object, to make sure all values can be correctly looped elsewhere. */\n\n  /** @const */\n  var defaultFormatter = { 'to': function( value ){\n    return value.toFixed(2);\n  }, 'from': Number };\n\n  function testStep ( parsed, entry ) {\n\n    if ( !isNumeric( entry ) ) {\n      throw new Error(\"noUiSlider: 'step' is not numeric.\");\n    }\n\n    // The step option can still be used to set stepping\n    // for linear sliders. Overwritten if set in 'range'.\n    parsed.singleStep = entry;\n  }\n\n  function testRange ( parsed, entry ) {\n\n    // Filter incorrect input.\n    if ( typeof entry !== 'object' || $.isArray(entry) ) {\n      throw new Error(\"noUiSlider: 'range' is not an object.\");\n    }\n\n    // Catch missing start or end.\n    if ( entry.min === undefined || entry.max === undefined ) {\n      throw new Error(\"noUiSlider: Missing 'min' or 'max' in 'range'.\");\n    }\n\n    parsed.spectrum = new Spectrum(entry, parsed.snap, parsed.dir, parsed.singleStep);\n  }\n\n  function testStart ( parsed, entry ) {\n\n    entry = asArray(entry);\n\n    // Validate input. Values aren't tested, as the public .val method\n    // will always provide a valid location.\n    if ( !$.isArray( entry ) || !entry.length || entry.length > 2 ) {\n      throw new Error(\"noUiSlider: 'start' option is incorrect.\");\n    }\n\n    // Store the number of handles.\n    parsed.handles = entry.length;\n\n    // When the slider is initialized, the .val method will\n    // be called with the start options.\n    parsed.start = entry;\n  }\n\n  function testSnap ( parsed, entry ) {\n\n    // Enforce 100% stepping within subranges.\n    parsed.snap = entry;\n\n    if ( typeof entry !== 'boolean' ){\n      throw new Error(\"noUiSlider: 'snap' option must be a boolean.\");\n    }\n  }\n\n  function testAnimate ( parsed, entry ) {\n\n    // Enforce 100% stepping within subranges.\n    parsed.animate = entry;\n\n    if ( typeof entry !== 'boolean' ){\n      throw new Error(\"noUiSlider: 'animate' option must be a boolean.\");\n    }\n  }\n\n  function testConnect ( parsed, entry ) {\n\n    if ( entry === 'lower' && parsed.handles === 1 ) {\n      parsed.connect = 1;\n    } else if ( entry === 'upper' && parsed.handles === 1 ) {\n      parsed.connect = 2;\n    } else if ( entry === true && parsed.handles === 2 ) {\n      parsed.connect = 3;\n    } else if ( entry === false ) {\n      parsed.connect = 0;\n    } else {\n      throw new Error(\"noUiSlider: 'connect' option doesn't match handle count.\");\n    }\n  }\n\n  function testOrientation ( parsed, entry ) {\n\n    // Set orientation to an a numerical value for easy\n    // array selection.\n    switch ( entry ){\n      case 'horizontal':\n      parsed.ort = 0;\n      break;\n      case 'vertical':\n      parsed.ort = 1;\n      break;\n      default:\n      throw new Error(\"noUiSlider: 'orientation' option is invalid.\");\n    }\n  }\n\n  function testMargin ( parsed, entry ) {\n\n    if ( !isNumeric(entry) ){\n      throw new Error(\"noUiSlider: 'margin' option must be numeric.\");\n    }\n\n    parsed.margin = parsed.spectrum.getMargin(entry);\n\n    if ( !parsed.margin ) {\n      throw new Error(\"noUiSlider: 'margin' option is only supported on linear sliders.\");\n    }\n  }\n\n  function testLimit ( parsed, entry ) {\n\n    if ( !isNumeric(entry) ){\n      throw new Error(\"noUiSlider: 'limit' option must be numeric.\");\n    }\n\n    parsed.limit = parsed.spectrum.getMargin(entry);\n\n    if ( !parsed.limit ) {\n      throw new Error(\"noUiSlider: 'limit' option is only supported on linear sliders.\");\n    }\n  }\n\n  function testDirection ( parsed, entry ) {\n\n    // Set direction as a numerical value for easy parsing.\n    // Invert connection for RTL sliders, so that the proper\n    // handles get the connect/background classes.\n    switch ( entry ) {\n      case 'ltr':\n      parsed.dir = 0;\n      break;\n      case 'rtl':\n      parsed.dir = 1;\n      parsed.connect = [0,2,1,3][parsed.connect];\n      break;\n      default:\n      throw new Error(\"noUiSlider: 'direction' option was not recognized.\");\n    }\n  }\n\n  function testBehaviour ( parsed, entry ) {\n\n    // Make sure the input is a string.\n    if ( typeof entry !== 'string' ) {\n      throw new Error(\"noUiSlider: 'behaviour' must be a string containing options.\");\n    }\n\n    // Check if the string contains any keywords.\n    // None are required.\n    var tap = entry.indexOf('tap') >= 0,\n      drag = entry.indexOf('drag') >= 0,\n      fixed = entry.indexOf('fixed') >= 0,\n      snap = entry.indexOf('snap') >= 0;\n\n    parsed.events = {\n      tap: tap || snap,\n      drag: drag,\n      fixed: fixed,\n      snap: snap\n    };\n  }\n\n  function testFormat ( parsed, entry ) {\n\n    parsed.format = entry;\n\n    // Any object with a to and from method is supported.\n    if ( typeof entry.to === 'function' && typeof entry.from === 'function' ) {\n      return true;\n    }\n\n    throw new Error( \"noUiSlider: 'format' requires 'to' and 'from' methods.\");\n  }\n\n  // Test all developer settings and parse to assumption-safe values.\n  function testOptions ( options ) {\n\n    var parsed = {\n      margin: 0,\n      limit: 0,\n      animate: true,\n      format: defaultFormatter\n    }, tests;\n\n    // Tests are executed in the order they are presented here.\n    tests = {\n      'step': { r: false, t: testStep },\n      'start': { r: true, t: testStart },\n      'connect': { r: true, t: testConnect },\n      'direction': { r: true, t: testDirection },\n      'snap': { r: false, t: testSnap },\n      'animate': { r: false, t: testAnimate },\n      'range': { r: true, t: testRange },\n      'orientation': { r: false, t: testOrientation },\n      'margin': { r: false, t: testMargin },\n      'limit': { r: false, t: testLimit },\n      'behaviour': { r: true, t: testBehaviour },\n      'format': { r: false, t: testFormat }\n    };\n\n    // Set defaults where applicable.\n    options = $.extend({\n      'connect': false,\n      'direction': 'ltr',\n      'behaviour': 'tap',\n      'orientation': 'horizontal'\n    }, options);\n\n    // Run all options through a testing mechanism to ensure correct\n    // input. It should be noted that options might get modified to\n    // be handled properly. E.g. wrapping integers in arrays.\n    $.each( tests, function( name, test ){\n\n      // If the option isn't set, but it is required, throw an error.\n      if ( options[name] === undefined ) {\n\n        if ( test.r ) {\n          throw new Error(\"noUiSlider: '\" + name + \"' is required.\");\n        }\n\n        return true;\n      }\n\n      test.t( parsed, options[name] );\n    });\n\n    // Pre-define the styles.\n    parsed.style = parsed.ort ? 'top' : 'left';\n\n    return parsed;\n  }\n\n// Class handling\n\n  // Delimit proposed values for handle positions.\n  function getPositions ( a, b, delimit ) {\n\n    // Add movement to current position.\n    var c = a + b[0], d = a + b[1];\n\n    // Only alter the other position on drag,\n    // not on standard sliding.\n    if ( delimit ) {\n      if ( c < 0 ) {\n        d += Math.abs(c);\n      }\n      if ( d > 100 ) {\n        c -= ( d - 100 );\n      }\n\n      // Limit values to 0 and 100.\n      return [limit(c), limit(d)];\n    }\n\n    return [c,d];\n  }\n\n\n// Event handling\n\n  // Provide a clean event with standardized offset values.\n  function fixEvent ( e ) {\n\n    // Prevent scrolling and panning on touch events, while\n    // attempting to slide. The tap event also depends on this.\n    e.preventDefault();\n\n    // Filter the event to register the type, which can be\n    // touch, mouse or pointer. Offset changes need to be\n    // made on an event specific basis.\n    var  touch = e.type.indexOf('touch') === 0\n      ,mouse = e.type.indexOf('mouse') === 0\n      ,pointer = e.type.indexOf('pointer') === 0\n      ,x,y, event = e;\n\n    // IE10 implemented pointer events with a prefix;\n    if ( e.type.indexOf('MSPointer') === 0 ) {\n      pointer = true;\n    }\n\n    // Get the originalEvent, if the event has been wrapped\n    // by jQuery. Zepto doesn't wrap the event.\n    if ( e.originalEvent ) {\n      e = e.originalEvent;\n    }\n\n    if ( touch ) {\n      // noUiSlider supports one movement at a time,\n      // so we can select the first 'changedTouch'.\n      x = e.changedTouches[0].pageX;\n      y = e.changedTouches[0].pageY;\n    }\n\n    if ( mouse || pointer ) {\n\n      // Polyfill the pageXOffset and pageYOffset\n      // variables for IE7 and IE8;\n      if( !pointer && window.pageXOffset === undefined ){\n        window.pageXOffset = document.documentElement.scrollLeft;\n        window.pageYOffset = document.documentElement.scrollTop;\n      }\n\n      x = e.clientX + window.pageXOffset;\n      y = e.clientY + window.pageYOffset;\n    }\n\n    event.points = [x, y];\n    event.cursor = mouse;\n\n    return event;\n  }\n\n\n// DOM additions\n\n  // Append a handle to the base.\n  function addHandle ( direction, index ) {\n\n    var handle = $('<div><div/></div>').addClass( Classes[2] ),\n      additions = [ '-lower', '-upper' ];\n\n    if ( direction ) {\n      additions.reverse();\n    }\n\n    handle.children().addClass(\n      Classes[3] + \" \" + Classes[3]+additions[index]\n    );\n\n    return handle;\n  }\n\n  // Add the proper connection classes.\n  function addConnection ( connect, target, handles ) {\n\n    // Apply the required connection classes to the elements\n    // that need them. Some classes are made up for several\n    // segments listed in the class list, to allow easy\n    // renaming and provide a minor compression benefit.\n    switch ( connect ) {\n      case 1: target.addClass( Classes[7] );\n          handles[0].addClass( Classes[6] );\n          break;\n      case 3: handles[1].addClass( Classes[6] );\n          /* falls through */\n      case 2: handles[0].addClass( Classes[7] );\n          /* falls through */\n      case 0: target.addClass(Classes[6]);\n          break;\n    }\n  }\n\n  // Add handles to the slider base.\n  function addHandles ( nrHandles, direction, base ) {\n\n    var index, handles = [];\n\n    // Append handles.\n    for ( index = 0; index < nrHandles; index += 1 ) {\n\n      // Keep a list of all added handles.\n      handles.push( addHandle( direction, index ).appendTo(base) );\n    }\n\n    return handles;\n  }\n\n  // Initialize a single slider.\n  function addSlider ( direction, orientation, target ) {\n\n    // Apply classes and data to the target.\n    target.addClass([\n      Classes[0],\n      Classes[8 + direction],\n      Classes[4 + orientation]\n    ].join(' '));\n\n    return $('<div/>').appendTo(target).addClass( Classes[1] );\n  }\n\nfunction closure ( target, options, originalOptions ){\n\n// Internal variables\n\n  // All variables local to 'closure' are marked $.\n  var $Target = $(target),\n    $Locations = [-1, -1],\n    $Base,\n    $Handles,\n    $Spectrum = options.spectrum,\n    $Values = [],\n  // libLink. For rtl sliders, 'lower' and 'upper' should not be inverted\n  // for one-handle sliders, so trim 'upper' it that case.\n    triggerPos = ['lower', 'upper'].slice(0, options.handles);\n\n  // Invert the libLink connection for rtl sliders.\n  if ( options.dir ) {\n    triggerPos.reverse();\n  }\n\n// Helpers\n\n  // Shorthand for base dimensions.\n  function baseSize ( ) {\n    return $Base[['width', 'height'][options.ort]]();\n  }\n\n  // External event handling\n  function fireEvents ( events ) {\n\n    // Use the external api to get the values.\n    // Wrap the values in an array, as .trigger takes\n    // only one additional argument.\n    var index, values = [ $Target.val() ];\n\n    for ( index = 0; index < events.length; index += 1 ){\n      $Target.trigger(events[index], values);\n    }\n  }\n\n  // Returns the input array, respecting the slider direction configuration.\n  function inSliderOrder ( values ) {\n\n    // If only one handle is used, return a single value.\n    if ( values.length === 1 ){\n      return values[0];\n    }\n\n    if ( options.dir ) {\n      return values.reverse();\n    }\n\n    return values;\n  }\n\n// libLink integration\n\n  // Create a new function which calls .val on input change.\n  function createChangeHandler ( trigger ) {\n    return function ( ignore, value ){\n      // Determine which array position to 'null' based on 'trigger'.\n      $Target.val( [ trigger ? null : value, trigger ? value : null ], true );\n    };\n  }\n\n  // Called by libLink when it wants a set of links updated.\n  function linkUpdate ( flag ) {\n\n    var trigger = $.inArray(flag, triggerPos);\n\n    // The API might not have been set yet.\n    if ( $Target[0].linkAPI && $Target[0].linkAPI[flag] ) {\n      $Target[0].linkAPI[flag].change(\n        $Values[trigger],\n        $Handles[trigger].children(),\n        $Target\n      );\n    }\n  }\n\n  // Called by libLink to append an element to the slider.\n  function linkConfirm ( flag, element ) {\n\n    // Find the trigger for the passed flag.\n    var trigger = $.inArray(flag, triggerPos);\n\n    // If set, append the element to the handle it belongs to.\n    if ( element ) {\n      element.appendTo( $Handles[trigger].children() );\n    }\n\n    // The public API is reversed for rtl sliders, so the changeHandler\n    // should not be aware of the inverted trigger positions.\n    if ( options.dir ) {\n      trigger = trigger === 1 ? 0 : 1;\n    }\n\n    return createChangeHandler( trigger );\n  }\n\n  // Place elements back on the slider.\n  function reAppendLink ( ) {\n\n    var i, flag;\n\n    // The API keeps a list of elements: we can re-append them on rebuild.\n    for ( i = 0; i < triggerPos.length; i += 1 ) {\n      if ( this.linkAPI && this.linkAPI[(flag = triggerPos[i])] ) {\n        this.linkAPI[flag].reconfirm(flag);\n      }\n    }\n  }\n\n  target.LinkUpdate = linkUpdate;\n  target.LinkConfirm = linkConfirm;\n  target.LinkDefaultFormatter = options.format;\n  target.LinkDefaultFlag = 'lower';\n\n  target.reappend = reAppendLink;\n\n\n  // Handler for attaching events trough a proxy.\n  function attach ( events, element, callback, data ) {\n\n    // This function can be used to 'filter' events to the slider.\n\n    // Add the noUiSlider namespace to all events.\n    events = events.replace( /\\s/g, namespace + ' ' ) + namespace;\n\n    // Bind a closure on the target.\n    return element.on( events, function( e ){\n\n      // jQuery and Zepto (1) handle unset attributes differently,\n      // but always falsy; #208\n      if ( !!$Target.attr('disabled') ) {\n        return false;\n      }\n\n      // Stop if an active 'tap' transition is taking place.\n      if ( $Target.hasClass( Classes[14] ) ) {\n        return false;\n      }\n\n      e = fixEvent(e);\n      e.calcPoint = e.points[ options.ort ];\n\n      // Call the event handler with the event [ and additional data ].\n      callback ( e, data );\n    });\n  }\n\n  // Handle movement on document for handle and range drag.\n  function move ( event, data ) {\n\n    var handles = data.handles || $Handles, positions, state = false,\n      proposal = ((event.calcPoint - data.start) * 100) / baseSize(),\n      h = handles[0][0] !== $Handles[0][0] ? 1 : 0;\n\n    // Calculate relative positions for the handles.\n    positions = getPositions( proposal, data.positions, handles.length > 1);\n\n    state = setHandle ( handles[0], positions[h], handles.length === 1 );\n\n    if ( handles.length > 1 ) {\n      state = setHandle ( handles[1], positions[h?0:1], false ) || state;\n    }\n\n    // Fire the 'slide' event if any handle moved.\n    if ( state ) {\n      fireEvents(['slide']);\n    }\n  }\n\n  // Unbind move events on document, call callbacks.\n  function end ( event ) {\n\n    // The handle is no longer active, so remove the class.\n    $('.' + Classes[15]).removeClass(Classes[15]);\n\n    // Remove cursor styles and text-selection events bound to the body.\n    if ( event.cursor ) {\n      $('body').css('cursor', '').off( namespace );\n    }\n\n    // Unbind the move and end events, which are added on 'start'.\n    doc.off( namespace );\n\n    // Remove dragging class.\n    $Target.removeClass(Classes[12]);\n\n    // Fire the change and set events.\n    fireEvents(['set', 'change']);\n  }\n\n  // Bind move events on document.\n  function start ( event, data ) {\n\n    // Mark the handle as 'active' so it can be styled.\n    if( data.handles.length === 1 ) {\n      data.handles[0].children().addClass(Classes[15]);\n    }\n\n    // A drag should never propagate up to the 'tap' event.\n    event.stopPropagation();\n\n    // Attach the move event.\n    attach ( actions.move, doc, move, {\n      start: event.calcPoint,\n      handles: data.handles,\n      positions: [\n        $Locations[0],\n        $Locations[$Handles.length - 1]\n      ]\n    });\n\n    // Unbind all movement when the drag ends.\n    attach ( actions.end, doc, end, null );\n\n    // Text selection isn't an issue on touch devices,\n    // so adding cursor styles can be skipped.\n    if ( event.cursor ) {\n\n      // Prevent the 'I' cursor and extend the range-drag cursor.\n      $('body').css('cursor', $(event.target).css('cursor'));\n\n      // Mark the target with a dragging state.\n      if ( $Handles.length > 1 ) {\n        $Target.addClass(Classes[12]);\n      }\n\n      // Prevent text selection when dragging the handles.\n      $('body').on('selectstart' + namespace, false);\n    }\n  }\n\n  // Move closest handle to tapped location.\n  function tap ( event ) {\n\n    var location = event.calcPoint, total = 0, to;\n\n    // The tap event shouldn't propagate up and cause 'edge' to run.\n    event.stopPropagation();\n\n    // Add up the handle offsets.\n    $.each( $Handles, function(){\n      total += this.offset()[ options.style ];\n    });\n\n    // Find the handle closest to the tapped position.\n    total = ( location < total/2 || $Handles.length === 1 ) ? 0 : 1;\n\n    location -= $Base.offset()[ options.style ];\n\n    // Calculate the new position.\n    to = ( location * 100 ) / baseSize();\n\n    if ( !options.events.snap ) {\n      // Flag the slider as it is now in a transitional state.\n      // Transition takes 300 ms, so re-enable the slider afterwards.\n      addClassFor( $Target, Classes[14], 300 );\n    }\n\n    // Find the closest handle and calculate the tapped point.\n    // The set handle to the new position.\n    setHandle( $Handles[total], to );\n\n    fireEvents(['slide', 'set', 'change']);\n\n    if ( options.events.snap ) {\n      start(event, { handles: [$Handles[total]] });\n    }\n  }\n\n  // Attach events to several slider parts.\n  function events ( behaviour ) {\n\n    var i, drag;\n\n    // Attach the standard drag event to the handles.\n    if ( !behaviour.fixed ) {\n\n      for ( i = 0; i < $Handles.length; i += 1 ) {\n\n        // These events are only bound to the visual handle\n        // element, not the 'real' origin element.\n        attach ( actions.start, $Handles[i].children(), start, {\n          handles: [ $Handles[i] ]\n        });\n      }\n    }\n\n    // Attach the tap event to the slider base.\n    if ( behaviour.tap ) {\n\n      attach ( actions.start, $Base, tap, {\n        handles: $Handles\n      });\n    }\n\n    // Make the range dragable.\n    if ( behaviour.drag ){\n\n      drag = $Base.find( '.' + Classes[7] ).addClass( Classes[10] );\n\n      // When the range is fixed, the entire range can\n      // be dragged by the handles. The handle in the first\n      // origin will propagate the start event upward,\n      // but it needs to be bound manually on the other.\n      if ( behaviour.fixed ) {\n        drag = drag.add($Base.children().not( drag ).children());\n      }\n\n      attach ( actions.start, drag, start, {\n        handles: $Handles\n      });\n    }\n  }\n\n\n  // Test suggested values and apply margin, step.\n  function setHandle ( handle, to, noLimitOption ) {\n\n    var trigger = handle[0] !== $Handles[0][0] ? 1 : 0,\n      lowerMargin = $Locations[0] + options.margin,\n      upperMargin = $Locations[1] - options.margin,\n      lowerLimit = $Locations[0] + options.limit,\n      upperLimit = $Locations[1] - options.limit;\n\n    // For sliders with multiple handles,\n    // limit movement to the other handle.\n    // Apply the margin option by adding it to the handle positions.\n    if ( $Handles.length > 1 ) {\n      to = trigger ? Math.max( to, lowerMargin ) : Math.min( to, upperMargin );\n    }\n\n    // The limit option has the opposite effect, limiting handles to a\n    // maximum distance from another. Limit must be > 0, as otherwise\n    // handles would be unmoveable. 'noLimitOption' is set to 'false'\n    // for the .val() method, except for pass 4/4.\n    if ( noLimitOption !== false && options.limit && $Handles.length > 1 ) {\n      to = trigger ? Math.min ( to, lowerLimit ) : Math.max( to, upperLimit );\n    }\n\n    // Handle the step option.\n    to = $Spectrum.getStep( to );\n\n    // Limit to 0/100 for .val input, trim anything beyond 7 digits, as\n    // JavaScript has some issues in its floating point implementation.\n    to = limit(parseFloat(to.toFixed(7)));\n\n    // Return false if handle can't move.\n    if ( to === $Locations[trigger] ) {\n      return false;\n    }\n\n    // Set the handle to the new position.\n    handle.css( options.style, to + '%' );\n\n    // Set the width of the range bar\n    if ( $Handles.length === 2 ) {\n      var width = 0;\n      if ( handle.is(':first-child') ) {\n        width = upperLimit - to;\n      } else {\n        width = to - lowerLimit;\n      }\n\n      $Handles[0].css('width', width + '%');\n    }\n\n    // Force proper handle stacking\n    if ( handle.is(':first-child') ) {\n      handle.toggleClass(Classes[17], to > 50 );\n    }\n\n    // Update locations.\n    $Locations[trigger] = to;\n\n    // Convert the value to the slider stepping/range.\n    $Values[trigger] = $Spectrum.fromStepping( to );\n\n    linkUpdate(triggerPos[trigger]);\n\n    return true;\n  }\n\n  // Loop values from value method and apply them.\n  function setValues ( count, values ) {\n\n    var i, trigger, to;\n\n    // With the limit option, we'll need another limiting pass.\n    if ( options.limit ) {\n      count += 1;\n    }\n\n    // If there are multiple handles to be set run the setting\n    // mechanism twice for the first handle, to make sure it\n    // can be bounced of the second one properly.\n    for ( i = 0; i < count; i += 1 ) {\n\n      trigger = i%2;\n\n      // Get the current argument from the array.\n      to = values[trigger];\n\n      // Setting with null indicates an 'ignore'.\n      // Inputting 'false' is invalid.\n      if ( to !== null && to !== false ) {\n\n        // If a formatted number was passed, attemt to decode it.\n        if ( typeof to === 'number' ) {\n          to = String(to);\n        }\n\n        to = options.format.from( to );\n\n        // Request an update for all links if the value was invalid.\n        // Do so too if setting the handle fails.\n        if ( to === false || isNaN(to) || setHandle( $Handles[trigger], $Spectrum.toStepping( to ), i === (3 - options.dir) ) === false ) {\n\n          linkUpdate(triggerPos[trigger]);\n        }\n      }\n    }\n  }\n\n  // Set the slider value.\n  function valueSet ( input ) {\n\n    // LibLink: don't accept new values when currently emitting changes.\n    if ( $Target[0].LinkIsEmitting ) {\n      return this;\n    }\n\n    var count, values = asArray( input );\n\n    // The RTL settings is implemented by reversing the front-end,\n    // internal mechanisms are the same.\n    if ( options.dir && options.handles > 1 ) {\n      values.reverse();\n    }\n\n    // Animation is optional.\n    // Make sure the initial values where set before using animated\n    // placement. (no report, unit testing);\n    if ( options.animate && $Locations[0] !== -1 ) {\n      addClassFor( $Target, Classes[14], 300 );\n    }\n\n    // Determine how often to set the handles.\n    count = $Handles.length > 1 ? 3 : 1;\n\n    if ( values.length === 1 ) {\n      count = 1;\n    }\n\n    setValues ( count, values );\n\n    // Fire the 'set' event. As of noUiSlider 7,\n    // this is no longer optional.\n    fireEvents(['set']);\n\n    return this;\n  }\n\n  // Get the slider value.\n  function valueGet ( ) {\n\n    var i, retour = [];\n\n    // Get the value from all handles.\n    for ( i = 0; i < options.handles; i += 1 ){\n      retour[i] = options.format.to( $Values[i] );\n    }\n\n    return inSliderOrder( retour );\n  }\n\n  // Destroy the slider and unbind all events.\n  function destroyTarget ( ) {\n\n    // Unbind events on the slider, remove all classes and child elements.\n    $(this).off(namespace)\n      .removeClass(Classes.join(' '))\n      .empty();\n\n    delete this.LinkUpdate;\n    delete this.LinkConfirm;\n    delete this.LinkDefaultFormatter;\n    delete this.LinkDefaultFlag;\n    delete this.reappend;\n    delete this.vGet;\n    delete this.vSet;\n    delete this.getCurrentStep;\n    delete this.getInfo;\n    delete this.destroy;\n\n    // Return the original options from the closure.\n    return originalOptions;\n  }\n\n  // Get the current step size for the slider.\n  function getCurrentStep ( ) {\n\n    // Check all locations, map them to their stepping point.\n    // Get the step point, then find it in the input list.\n    var retour = $.map($Locations, function( location, index ){\n\n      var step = $Spectrum.getApplicableStep( location ),\n        value = $Values[index],\n        increment = step[2],\n        decrement = (value - step[2]) >= step[1] ? step[2] : step[0];\n\n      return [[decrement, increment]];\n    });\n\n    // Return values in the proper order.\n    return inSliderOrder( retour );\n  }\n\n  // Get the original set of options.\n  function getOriginalOptions ( ) {\n    return originalOptions;\n  }\n\n\n// Initialize slider\n\n  // Throw an error if the slider was already initialized.\n  if ( $Target.hasClass(Classes[0]) ) {\n    throw new Error('Slider was already initialized.');\n  }\n\n  // Create the base element, initialise HTML and set classes.\n  // Add handles and links.\n  $Base = addSlider( options.dir, options.ort, $Target );\n  $Handles = addHandles( options.handles, options.dir, $Base );\n\n  // Set the connect classes.\n  addConnection ( options.connect, $Target, $Handles );\n\n  // Attach user events.\n  events( options.events );\n\n// Methods\n\n  target.vSet = valueSet;\n  target.vGet = valueGet;\n  target.destroy = destroyTarget;\n\n  target.getCurrentStep = getCurrentStep;\n  target.getOriginalOptions = getOriginalOptions;\n\n  target.getInfo = function(){\n    return [\n      $Spectrum,\n      options.style,\n      options.ort\n    ];\n  };\n\n  // Use the public value method to set the start values.\n  $Target.val( options.start );\n\n}\n\n\n  // Run the standard initializer\n  function initialize ( originalOptions ) {\n\n    // Throw error if group is empty.\n    if ( !this.length ){\n      throw new Error(\"noUiSlider: Can't initialize slider on empty selection.\");\n    }\n\n    // Test the options once, not for every slider.\n    var options = testOptions( originalOptions, this );\n\n    // Loop all items, and provide a new closed-scope environment.\n    return this.each(function(){\n      closure(this, options, originalOptions);\n    });\n  }\n\n  // Destroy the slider, then re-enter initialization.\n  function rebuild ( options ) {\n\n    return this.each(function(){\n\n      // The rebuild flag can be used if the slider wasn't initialized yet.\n      if ( !this.destroy ) {\n        $(this).noUiSlider( options );\n        return;\n      }\n\n      // Get the current values from the slider,\n      // including the initialization options.\n      var values = $(this).val(), originalOptions = this.destroy(),\n\n        // Extend the previous options with the newly provided ones.\n        newOptions = $.extend( {}, originalOptions, options );\n\n      // Run the standard initializer.\n      $(this).noUiSlider( newOptions );\n\n      // Place Link elements back.\n      this.reappend();\n\n      // If the start option hasn't changed,\n      // reset the previous values.\n      if ( originalOptions.start === newOptions.start ) {\n        $(this).val(values);\n      }\n    });\n  }\n\n  // Access the internal getting and setting methods based on argument count.\n  function value ( ) {\n    return this[0][ !arguments.length ? 'vGet' : 'vSet' ].apply(this[0], arguments);\n  }\n\n  // Override the .val() method. Test every element. Is it a slider? Go to\n  // the slider value handling. No? Use the standard method.\n  // Note how $.fn.val expects 'this' to be an instance of $. For convenience,\n  // the above 'value' function does too.\n  $.fn.val = function ( ) {\n\n    // this === instanceof $\n\n    function valMethod( a ){\n      return a.hasClass(Classes[0]) ? value : $val;\n    }\n\n    var args = arguments,\n      first = $(this[0]);\n\n    if ( !arguments.length ) {\n      return valMethod(first).call(first);\n    }\n\n    // Return the set so it remains chainable\n    return this.each(function(){\n      valMethod($(this)).apply($(this), args);\n    });\n  };\n\n// Extend jQuery/Zepto with the noUiSlider method.\n  $.fn.noUiSlider = function ( options, rebuildFlag ) {\n\n    switch ( options ) {\n      case 'step': return this[0].getCurrentStep();\n      case 'options': return this[0].getOriginalOptions();\n    }\n\n    return ( rebuildFlag ? rebuild : initialize ).call(this, options);\n  };\n\n  function getGroup ( $Spectrum, mode, values, stepped ) {\n\n    // Use the range.\n    if ( mode === 'range' || mode === 'steps' ) {\n      return $Spectrum.xVal;\n    }\n\n    if ( mode === 'count' ) {\n\n      // Divide 0 - 100 in 'count' parts.\n      var spread = ( 100 / (values-1) ), v, i = 0;\n      values = [];\n\n      // List these parts and have them handled as 'positions'.\n      while ((v=i++*spread) <= 100 ) {\n        values.push(v);\n      }\n\n      mode = 'positions';\n    }\n\n    if ( mode === 'positions' ) {\n\n      // Map all percentages to on-range values.\n      return $.map(values, function( value ){\n        return $Spectrum.fromStepping( stepped ? $Spectrum.getStep( value ) : value );\n      });\n    }\n\n    if ( mode === 'values' ) {\n\n      // If the value must be stepped, it needs to be converted to a percentage first.\n      if ( stepped ) {\n\n        return $.map(values, function( value ){\n\n          // Convert to percentage, apply step, return to value.\n          return $Spectrum.fromStepping( $Spectrum.getStep( $Spectrum.toStepping( value ) ) );\n        });\n\n      }\n\n      // Otherwise, we can simply use the values.\n      return values;\n    }\n  }\n\n  function generateSpread ( $Spectrum, density, mode, group ) {\n\n    var originalSpectrumDirection = $Spectrum.direction,\n      indexes = {},\n      firstInRange = $Spectrum.xVal[0],\n      lastInRange = $Spectrum.xVal[$Spectrum.xVal.length-1],\n      ignoreFirst = false,\n      ignoreLast = false,\n      prevPct = 0;\n\n    // This function loops the spectrum in an ltr linear fashion,\n    // while the toStepping method is direction aware. Trick it into\n    // believing it is ltr.\n    $Spectrum.direction = 0;\n\n    // Create a copy of the group, sort it and filter away all duplicates.\n    group = unique(group.slice().sort(function(a, b){ return a - b; }));\n\n    // Make sure the range starts with the first element.\n    if ( group[0] !== firstInRange ) {\n      group.unshift(firstInRange);\n      ignoreFirst = true;\n    }\n\n    // Likewise for the last one.\n    if ( group[group.length - 1] !== lastInRange ) {\n      group.push(lastInRange);\n      ignoreLast = true;\n    }\n\n    $.each(group, function ( index ) {\n\n      // Get the current step and the lower + upper positions.\n      var step, i, q,\n        low = group[index],\n        high = group[index+1],\n        newPct, pctDifference, pctPos, type,\n        steps, realSteps, stepsize;\n\n      // When using 'steps' mode, use the provided steps.\n      // Otherwise, we'll step on to the next subrange.\n      if ( mode === 'steps' ) {\n        step = $Spectrum.xNumSteps[ index ];\n      }\n\n      // Default to a 'full' step.\n      if ( !step ) {\n        step = high-low;\n      }\n\n      // Low can be 0, so test for false. If high is undefined,\n      // we are at the last subrange. Index 0 is already handled.\n      if ( low === false || high === undefined ) {\n        return;\n      }\n\n      // Find all steps in the subrange.\n      for ( i = low; i <= high; i += step ) {\n\n        // Get the percentage value for the current step,\n        // calculate the size for the subrange.\n        newPct = $Spectrum.toStepping( i );\n        pctDifference = newPct - prevPct;\n\n        steps = pctDifference / density;\n        realSteps = Math.round(steps);\n\n        // This ratio represents the ammount of percentage-space a point indicates.\n        // For a density 1 the points/percentage = 1. For density 2, that percentage needs to be re-devided.\n        // Round the percentage offset to an even number, then divide by two\n        // to spread the offset on both sides of the range.\n        stepsize = pctDifference/realSteps;\n\n        // Divide all points evenly, adding the correct number to this subrange.\n        // Run up to <= so that 100% gets a point, event if ignoreLast is set.\n        for ( q = 1; q <= realSteps; q += 1 ) {\n\n          // The ratio between the rounded value and the actual size might be ~1% off.\n          // Correct the percentage offset by the number of points\n          // per subrange. density = 1 will result in 100 points on the\n          // full range, 2 for 50, 4 for 25, etc.\n          pctPos = prevPct + ( q * stepsize );\n          indexes[pctPos.toFixed(5)] = ['x', 0];\n        }\n\n        // Determine the point type.\n        type = ($.inArray(i, group) > -1) ? 1 : ( mode === 'steps' ? 2 : 0 );\n\n        // Enforce the 'ignoreFirst' option by overwriting the type for 0.\n        if ( !index && ignoreFirst && !low ) {\n          type = 0;\n        }\n\n        if ( !(i === high && ignoreLast)) {\n          // Mark the 'type' of this point. 0 = plain, 1 = real value, 2 = step value.\n          indexes[newPct.toFixed(5)] = [i, type];\n        }\n\n        // Update the percentage count.\n        prevPct = newPct;\n      }\n    });\n\n    // Reset the spectrum.\n    $Spectrum.direction = originalSpectrumDirection;\n\n    return indexes;\n  }\n\n  function addMarking ( CSSstyle, orientation, direction, spread, filterFunc, formatter ) {\n\n    var style = ['horizontal', 'vertical'][orientation],\n      element = $('<div/>');\n\n    element.addClass('noUi-pips noUi-pips-'+style);\n\n    function getSize( type, value ){\n      return [ '-normal', '-large', '-sub' ][(type&&filterFunc) ? filterFunc(value, type) : type];\n    }\n    function getTags( offset, source, values ) {\n      return 'class=\"' + source + ' ' +\n        source + '-' + style + ' ' +\n        source + getSize(values[1], values[0]) +\n        '\" style=\"' + CSSstyle + ': ' + offset + '%\"';\n    }\n    function addSpread ( offset, values ){\n\n      if ( direction ) {\n        offset = 100 - offset;\n      }\n\n      // Add a marker for every point\n      element.append('<div '+getTags(offset, 'noUi-marker', values)+'></div>');\n\n      // Values are only appended for points marked '1' or '2'.\n      if ( values[1] ) {\n        element.append('<div '+getTags(offset, 'noUi-value', values)+'>' + formatter.to(values[0]) + '</div>');\n      }\n    }\n\n    // Append all points.\n    $.each(spread, addSpread);\n\n    return element;\n  }\n\n  $.fn.noUiSlider_pips = function ( grid ) {\n\n  var mode = grid.mode,\n    density = grid.density || 1,\n    filter = grid.filter || false,\n    values = grid.values || false,\n    format = grid.format || {\n      to: Math.round\n    },\n    stepped = grid.stepped || false;\n\n    return this.each(function(){\n\n    var info = this.getInfo(),\n      group = getGroup( info[0], mode, values, stepped ),\n      spread = generateSpread( info[0], density, mode, group );\n\n      return $(this).append(addMarking(\n        info[1],\n        info[2],\n        info[0].direction,\n        spread,\n        filter,\n        format\n      ));\n    });\n  };\n\n}( window.jQuery || window.Zepto ));\n"},V3KQ:function(e,t,n){var i=n("ZVcv");e.exports=function e(t){return i(t).toLowerCase().replace(/(?:^|\s|-)\S/g,(function(e){return e.toUpperCase()}))}},V4GC:function(e,t,n){var i=n("Pg24");e.exports=function e(t){return i(t).replace(/\s\s+/g," ")}},WK29:function(e,t,n){var i=n("TCcV");e.exports=function e(t,n,r){return i(t,n,r,"right")}},XGeE:function(e,t,n){var i=n("ZVcv");var r=n("2Muo");e.exports=function e(t,n,o){t=i(t);n=""+n;if(typeof o=="undefined"){o=t.length-n.length}else{o=Math.min(r(o),t.length)-n.length}return o>=0&&t.indexOf(n,o)===o}},XWDE:function(e,t){e.exports=function e(t,n){return[n,t,n].join("")}},"Y+UX":function(e,t,n){n("8rVx")(n("Uv0W"))},Y9tD:function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this._wrapped=e}i.VERSION="3.3.4";i.isBlank=n("FE+q");i.stripTags=n("YQZ+");i.capitalize=n("Mf+4");i.decapitalize=n("bzoM");i.chop=n("o3ow");i.trim=n("Pg24");i.clean=n("V4GC");i.cleanDiacritics=n("nQG2");i.count=n("j2oK");i.chars=n("qjYJ");i.swapCase=n("fxsx");i.escapeHTML=n("cj12");i.unescapeHTML=n("e6ie");i.splice=n("7kpE");i.insert=n("xhNq");i.replaceAll=n("NG1q");i.include=n("HHgY");i.join=n("Lwn5");i.lines=n("Djcv");i.dedent=n("fBPz");i.reverse=n("Cqhv");i.startsWith=n("UDJX");i.endsWith=n("XGeE");i.pred=n("EYlN");i.succ=n("BDL0");i.titleize=n("V3KQ");i.camelize=n("fiAs");i.underscored=n("tacv");i.dasherize=n("mi91");i.classify=n("nYbb");i.humanize=n("MlvY");i.ltrim=n("JNEV");i.rtrim=n("OR4l");i.truncate=n("HfAZ");i.prune=n("gtSw");i.words=n("SJgG");i.pad=n("TCcV");i.lpad=n("ehx3");i.rpad=n("WK29");i.lrpad=n("nGj7");i.sprintf=n("9u9v");i.vsprintf=n("aeOi");i.toNumber=n("j58d");i.numberFormat=n("bmSX");i.strRight=n("sLcg");i.strRightBack=n("fyQl");i.strLeft=n("0oRM");i.strLeftBack=n("Kxbi");i.toSentence=n("CjW/");i.toSentenceSerial=n("OAT0");i.slugify=n("Jxvl");i.surround=n("XWDE");i.quote=n("lTTE");i.unquote=n("AsHD");i.repeat=n("unVg");i.naturalCmp=n("aCIS");i.levenshtein=n("EV28");i.toBoolean=n("IIMq");i.exports=n("q5HP");i.escapeRegExp=n("qqu+");i.wrap=n("iWWh");i.map=n("ZzUg");i.strip=i.trim;i.lstrip=i.ltrim;i.rstrip=i.rtrim;i.center=i.lrpad;i.rjust=i.lpad;i.ljust=i.rpad;i.contains=i.include;i.q=i.quote;i.toBool=i.toBoolean;i.camelcase=i.camelize;i.mapChars=i.map;i.prototype={value:function e(){return this._wrapped}};function r(e,t){if(typeof t!=="function")return;i.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments));var n=t.apply(null,e);return typeof n==="string"?new i(n):n}}for(var o in i)r(o,i[o]);r("tap",(function e(t,n){return n(t)}));function s(e){r(e,(function(t){var n=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,n)}))}var a=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var l in a)s(a[l]);e.exports=i},YNIi:function(e,t,n){(function(t){e.exports=t["Bloodhound"]=n("JnoB")}).call(this,n("yLpj"))},"YQZ+":function(e,t,n){var i=n("ZVcv");e.exports=function e(t){return i(t).replace(/<\/?[^>]+>/g,"")}},YRyP:function(e,t,n){"use strict";e.exports=n("0xFr")},YUyz:function(e,t,n){"use strict";n.r(t);var i=n("9bj1");var r=n.n(i);var o=n("/Su4");var a=n.n(o);var l=n("YRyP");var c=n.n(l);var u=n("a22a");var d=n.n(u);var p=n("tP1i");var h=n.n(p);var f=n("ni/U");var m=n.n(f);var g=n("ObbC");var v=n.n(g);var y=n("vY/v");var b=n.n(y);var x=n("kzbB");var w=n.n(x);var k=n("hXJ3");var C=n.n(k);var S=n("wXWI");var T=n.n(S);var E=n("3Jg+");var q=n.n(E);var j=n("Y+UX");var P=n.n(j);var F=n("IJph");var A=n.n(F);var I=n("NFUD");var D=n.n(I);var O=n("VSY+");var B=n.n(O);var $=n("dABf");var R=n.n($);var M=n("DPhY");var L=n.n(M);var N=n("73xv");var U=n.n(N);var H=n("voXZ");var z=n.n(H);var V=n("s1fb");var W=n.n(V);var Y=n("SyYf");var G=n.n(Y);var K=n("O2Hw");var Q=n.n(K);var X=n("F/lw");var J=n.n(X);var Z=n("hWfI");var ee=n.n(Z);var te=n("dlqx");var ne=n.n(te);var ie=n("6MXy");var re=n.n(ie);var oe=n("RoM/");var se=n.n(oe);var ae=n("RPI+");var le=n.n(ae);var ce=n("gffu");var ue=n.n(ce);var de=n("H+5m");var pe=n.n(de);var he=n("myWJ");var fe=n.n(he);var me=n("YNIi");var ge=n.n(me);var ve=n("JEAp");var ye=n.n(ve);var be=n("eMd7");var _e=n.n(be);var xe=n("AZ59");var we=n.n(xe);var ke=n("Qy7k");var Ce=n("ksZG");var Se=n.n(Ce);var Te=n("P3S6");var Ee=n.n(Te);var qe=n("D19G");var je=n.n(qe);var Pe=n("1BID");var Fe=n.n(Pe);var Ae=n("1I5f");var Ie=n.n(Ae);var De=n("tNUG");var Oe=n.n(De);var Be=n("yTrO");var $e=n.n(Be);var Re=n("xHD0");var Me=n.n(Re);var Le=n("kbX8");var Ne=n.n(Le);var Ue=n("Z0ce");var He=n.n(Ue);var ze=n("ORmb");var Ve=n.n(ze);var We=n("z127");var Ye=n.n(We);var Ge=n("yQ2E");var Ke=n.n(Ge);var Qe=n("4k9y");var Xe=n.n(Qe);var Je=n("8sX0");var Ze=n.n(Je);var et=n("74Lb");var tt=n.n(et);var nt=n("/pCv");var it=n.n(nt);var rt=n("luxY");var ot=n.n(rt);var st=n("BxwS");var at=n.n(st);var lt=n("0X7h");var ct=n.n(lt);var ut=n("9pS/");var dt=n.n(ut);var pt=n("F99g");var ht=n.n(pt);var ft=n("U/ob");var mt=n.n(ft);var gt=n("m/bU");var vt=n.n(gt);var yt=n("8EDg");var bt=n("xa7f");var _t=n.n(bt);window.saveAs=ve["saveAs"];window.escapeHtml=ke["a"];window.thumbnailComponent=yt["a"];_.mixin(s.exports());_.templateSettings={interpolate:/\{\{=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g};moment.updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"less than a minute",m:"less than a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});I18n.defaultLocale="en";I18n.fallbacks=true;I18n.translations={en:_t.a.en,folders:_t.a.folders}},Z0ce:function(e,t,n){n("8rVx")(n("shmF"))},ZVcv:function(e,t){e.exports=function e(t){if(t==null)return"";return""+t}},ZzUg:function(e,t,n){var i=n("ZVcv");e.exports=function(e,t){e=i(e);if(e.length===0||typeof t!=="function")return e;return e.replace(/./g,t)}},a22a:function(e,t,n){n("8rVx")(n("5uzk"))},aCIS:function(e,t){e.exports=function e(t,n){if(t==n)return 0;if(!t)return-1;if(!n)return 1;var i=/(\.\d+|\d+|\D+)/g,r=String(t).match(i),o=String(n).match(i),s=Math.min(r.length,o.length);for(var a=0;a<s;a++){var l=r[a],c=o[a];if(l!==c){var u=+l;var d=+c;if(u===u&&d===d){return u>d?1:-1}return l<c?-1:1}}if(r.length!=o.length)return r.length-o.length;return t<n?-1:1}},aeOi:function(e,t,n){var i=n("t9FE");e.exports=i(n("4Z/T").vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},bmSX:function(e,t){e.exports=function e(t,n,i,r){if(isNaN(t)||t==null)return"";t=t.toFixed(~~n);r=typeof r=="string"?r:",";var o=t.split("."),s=o[0],a=o[1]?(i||".")+o[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+a}},bzoM:function(e,t,n){var i=n("ZVcv");e.exports=function e(t){t=i(t);return t.charAt(0).toLowerCase()+t.slice(1)}},cj12:function(e,t,n){var i=n("ZVcv");var r=n("QANi");var o="[";for(var s in r){o+=s}o+="]";var a=new RegExp(o,"g");e.exports=function e(t){return i(t).replace(a,(function(e){return"&"+r[e]+";"}))}},dABf:function(e,t,n){var i,r,o;(function(s,a){if(true){!(r=[n("EVdn")],i=a,o=typeof i==="function"?i.apply(t,r):i,o!==undefined&&(e.exports=o))}else{var l}})(this,(function(e){"use strict";var t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var s=t.default||window.jQuery||window.$;var a=function(){function e(t){var n=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};r(this,e);this.$element=s(t);this.options=s.extend({},s.fn.bootstrapSwitch.defaults,this._getElementOptions(),i);this.prevOptions={};this.$wrapper=s("<div>",{class:function e(){var t=[];t.push(n.options.state?"on":"off");if(n.options.size){t.push(n.options.size)}if(n.options.disabled){t.push("disabled")}if(n.options.readonly){t.push("readonly")}if(n.options.indeterminate){t.push("indeterminate")}if(n.options.inverse){t.push("inverse")}if(n.$element.attr("id")){t.push("id-"+n.$element.attr("id"))}return t.map(n._getClass.bind(n)).concat([n.options.baseClass],n._getClasses(n.options.wrapperClass)).join(" ")}});this.$container=s("<div>",{class:this._getClass("container")});this.$on=s("<span>",{html:this.options.onText,class:this._getClass("handle-on")+" "+this._getClass(this.options.onColor)});this.$off=s("<span>",{html:this.options.offText,class:this._getClass("handle-off")+" "+this._getClass(this.options.offColor)});this.$label=s("<span>",{html:this.options.labelText,class:this._getClass("label")});this.$element.on("init.bootstrapSwitch",this.options.onInit.bind(this,t));this.$element.on("switchChange.bootstrapSwitch",(function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++){i[r]=arguments[r]}if(n.options.onSwitchChange.apply(t,i)===false){if(n.$element.is(":radio")){s('[name="'+n.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",true)}else{n.$element.trigger("previousState.bootstrapSwitch",true)}}}));this.$container=this.$element.wrap(this.$container).parent();this.$wrapper=this.$container.wrap(this.$wrapper).parent();this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off);if(this.options.indeterminate){this.$element.prop("indeterminate",true)}this._init();this._elementHandlers();this._handleHandlers();this._labelHandlers();this._formHandler();this._externalLabelHandler();this.$element.trigger("init.bootstrapSwitch",this.options.state)}o(e,[{key:"setPrevOptions",value:function e(){this.prevOptions=i({},this.options)}},{key:"state",value:function e(t,n){if(typeof t==="undefined"){return this.options.state}if(this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")){return this.$element}if(this.$element.is(":radio")){s('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch")}else{this.$element.trigger("setPreviousOptions.bootstrapSwitch")}if(this.options.indeterminate){this.indeterminate(false)}this.$element.prop("checked",Boolean(t)).trigger("change.bootstrapSwitch",n);return this.$element}},{key:"toggleState",value:function e(t){if(this.options.disabled||this.options.readonly){return this.$element}if(this.options.indeterminate){this.indeterminate(false);return this.state(true)}else{return this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)}}},{key:"size",value:function e(t){if(typeof t==="undefined"){return this.options.size}if(this.options.size!=null){this.$wrapper.removeClass(this._getClass(this.options.size))}if(t){this.$wrapper.addClass(this._getClass(t))}this._width();this._containerPosition();this.options.size=t;return this.$element}},{key:"animate",value:function e(t){if(typeof t==="undefined"){return this.options.animate}if(this.options.animate===Boolean(t)){return this.$element}return this.toggleAnimate()}},{key:"toggleAnimate",value:function e(){this.options.animate=!this.options.animate;this.$wrapper.toggleClass(this._getClass("animate"));return this.$element}},{key:"disabled",value:function e(t){if(typeof t==="undefined"){return this.options.disabled}if(this.options.disabled===Boolean(t)){return this.$element}return this.toggleDisabled()}},{key:"toggleDisabled",value:function e(){this.options.disabled=!this.options.disabled;this.$element.prop("disabled",this.options.disabled);this.$wrapper.toggleClass(this._getClass("disabled"));return this.$element}},{key:"readonly",value:function e(t){if(typeof t==="undefined"){return this.options.readonly}if(this.options.readonly===Boolean(t)){return this.$element}return this.toggleReadonly()}},{key:"toggleReadonly",value:function e(){this.options.readonly=!this.options.readonly;this.$element.prop("readonly",this.options.readonly);this.$wrapper.toggleClass(this._getClass("readonly"));return this.$element}},{key:"indeterminate",value:function e(t){if(typeof t==="undefined"){return this.options.indeterminate}if(this.options.indeterminate===Boolean(t)){return this.$element}return this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function e(){this.options.indeterminate=!this.options.indeterminate;this.$element.prop("indeterminate",this.options.indeterminate);this.$wrapper.toggleClass(this._getClass("indeterminate"));this._containerPosition();return this.$element}},{key:"inverse",value:function e(t){if(typeof t==="undefined"){return this.options.inverse}if(this.options.inverse===Boolean(t)){return this.$element}return this.toggleInverse()}},{key:"toggleInverse",value:function e(){this.$wrapper.toggleClass(this._getClass("inverse"));var t=this.$on.clone(true);var n=this.$off.clone(true);this.$on.replaceWith(n);this.$off.replaceWith(t);this.$on=n;this.$off=t;this.options.inverse=!this.options.inverse;return this.$element}},{key:"onColor",value:function e(t){if(typeof t==="undefined"){return this.options.onColor}if(this.options.onColor){this.$on.removeClass(this._getClass(this.options.onColor))}this.$on.addClass(this._getClass(t));this.options.onColor=t;return this.$element}},{key:"offColor",value:function e(t){if(typeof t==="undefined"){return this.options.offColor}if(this.options.offColor){this.$off.removeClass(this._getClass(this.options.offColor))}this.$off.addClass(this._getClass(t));this.options.offColor=t;return this.$element}},{key:"onText",value:function e(t){if(typeof t==="undefined"){return this.options.onText}this.$on.html(t);this._width();this._containerPosition();this.options.onText=t;return this.$element}},{key:"offText",value:function e(t){if(typeof t==="undefined"){return this.options.offText}this.$off.html(t);this._width();this._containerPosition();this.options.offText=t;return this.$element}},{key:"labelText",value:function e(t){if(typeof t==="undefined"){return this.options.labelText}this.$label.html(t);this._width();this.options.labelText=t;return this.$element}},{key:"handleWidth",value:function e(t){if(typeof t==="undefined"){return this.options.handleWidth}this.options.handleWidth=t;this._width();this._containerPosition();return this.$element}},{key:"labelWidth",value:function e(t){if(typeof t==="undefined"){return this.options.labelWidth}this.options.labelWidth=t;this._width();this._containerPosition();return this.$element}},{key:"baseClass",value:function e(t){return this.options.baseClass}},{key:"wrapperClass",value:function e(t){if(typeof t==="undefined"){return this.options.wrapperClass}if(!t){t=s.fn.bootstrapSwitch.defaults.wrapperClass}this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" "));this.$wrapper.addClass(this._getClasses(t).join(" "));this.options.wrapperClass=t;return this.$element}},{key:"radioAllOff",value:function e(t){if(typeof t==="undefined"){return this.options.radioAllOff}var n=Boolean(t);if(this.options.radioAllOff===n){return this.$element}this.options.radioAllOff=n;return this.$element}},{key:"onInit",value:function e(t){if(typeof t==="undefined"){return this.options.onInit}if(!t){t=s.fn.bootstrapSwitch.defaults.onInit}this.options.onInit=t;return this.$element}},{key:"onSwitchChange",value:function e(t){if(typeof t==="undefined"){return this.options.onSwitchChange}if(!t){t=s.fn.bootstrapSwitch.defaults.onSwitchChange}this.options.onSwitchChange=t;return this.$element}},{key:"destroy",value:function e(){var t=this.$element.closest("form");if(t.length){t.off("reset.bootstrapSwitch").removeData("bootstrap-switch")}this.$container.children().not(this.$element).remove();this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch");return this.$element}},{key:"_getElementOptions",value:function e(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}},{key:"_width",value:function e(){var t=this;var n=this.$on.add(this.$off).add(this.$label).css("width","");var i=this.options.handleWidth==="auto"?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;n.width(i);this.$label.width((function(e,n){if(t.options.labelWidth!=="auto"){return t.options.labelWidth}if(n<i){return i}return n}));this._handleWidth=this.$on.outerWidth();this._labelWidth=this.$label.outerWidth();this.$container.width(this._handleWidth*2+this._labelWidth);return this.$wrapper.width(this._handleWidth+this._labelWidth)}},{key:"_containerPosition",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.options.state;var i=arguments[1];this.$container.css("margin-left",(function(){var e=[0,"-"+t._handleWidth+"px"];if(t.options.indeterminate){return"-"+t._handleWidth/2+"px"}if(n){if(t.options.inverse){return e[1]}else{return e[0]}}else{if(t.options.inverse){return e[0]}else{return e[1]}}}))}},{key:"_init",value:function e(){var t=this;var n=function e(){t.setPrevOptions();t._width();t._containerPosition();setTimeout((function(){if(t.options.animate){return t.$wrapper.addClass(t._getClass("animate"))}}),50)};if(this.$wrapper.is(":visible")){n();return}var i=window.setInterval((function(){if(t.$wrapper.is(":visible")){n();return window.clearInterval(i)}}),50)}},{key:"_elementHandlers",value:function e(){var t=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":this.setPrevOptions.bind(this),"previousState.bootstrapSwitch":function e(){t.options=t.prevOptions;if(t.options.indeterminate){t.$wrapper.addClass(t._getClass("indeterminate"))}t.$element.prop("checked",t.options.state).trigger("change.bootstrapSwitch",true)},"change.bootstrapSwitch":function e(n,i){n.preventDefault();n.stopImmediatePropagation();var r=t.$element.is(":checked");t._containerPosition(r);if(r===t.options.state){return}t.options.state=r;t.$wrapper.toggleClass(t._getClass("off")).toggleClass(t._getClass("on"));if(!i){if(t.$element.is(":radio")){s('[name="'+t.$element.attr("name")+'"]').not(t.$element).prop("checked",false).trigger("change.bootstrapSwitch",true)}t.$element.trigger("switchChange.bootstrapSwitch",[r])}},"focus.bootstrapSwitch":function e(n){n.preventDefault();t.$wrapper.addClass(t._getClass("focused"))},"blur.bootstrapSwitch":function e(n){n.preventDefault();t.$wrapper.removeClass(t._getClass("focused"))},"keydown.bootstrapSwitch":function e(n){if(!n.which||t.options.disabled||t.options.readonly){return}if(n.which===37||n.which===39){n.preventDefault();n.stopImmediatePropagation();t.state(n.which===39)}}})}},{key:"_handleHandlers",value:function e(){var t=this;this.$on.on("click.bootstrapSwitch",(function(e){e.preventDefault();e.stopPropagation();t.state(false);return t.$element.trigger("focus.bootstrapSwitch")}));return this.$off.on("click.bootstrapSwitch",(function(e){e.preventDefault();e.stopPropagation();t.state(true);return t.$element.trigger("focus.bootstrapSwitch")}))}},{key:"_labelHandlers",value:function e(){var t=this;var n={click:function e(t){t.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function e(n){if(t._dragStart||t.options.disabled||t.options.readonly){return}n.preventDefault();n.stopPropagation();t._dragStart=(n.pageX||n.originalEvent.touches[0].pageX)-parseInt(t.$container.css("margin-left"),10);if(t.options.animate){t.$wrapper.removeClass(t._getClass("animate"))}t.$element.trigger("focus.bootstrapSwitch")},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function e(n){if(t._dragStart==null){return}var i=(n.pageX||n.originalEvent.touches[0].pageX)-t._dragStart;n.preventDefault();if(i<-t._handleWidth||i>0){return}t._dragEnd=i;t.$container.css("margin-left",t._dragEnd+"px")},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function e(n){if(!t._dragStart){return}n.preventDefault();if(t.options.animate){t.$wrapper.addClass(t._getClass("animate"))}if(t._dragEnd){var i=t._dragEnd>-(t._handleWidth/2);t._dragEnd=false;t.state(t.options.inverse?!i:i)}else{t.state(!t.options.state)}t._dragStart=false},"mouseleave.bootstrapSwitch":function e(){t.$label.trigger("mouseup.bootstrapSwitch")}};this.$label.on(n)}},{key:"_externalLabelHandler",value:function e(){var t=this;var n=this.$element.closest("label");n.on("click",(function(e){e.preventDefault();e.stopImmediatePropagation();if(e.target===n[0]){t.toggleState()}}))}},{key:"_formHandler",value:function e(){var t=this.$element.closest("form");if(t.data("bootstrap-switch")){return}t.on("reset.bootstrapSwitch",(function(){window.setTimeout((function(){t.find("input").filter((function(){return s(this).data("bootstrap-switch")})).each((function(){return s(this).bootstrapSwitch("state",this.checked)}))}),1)})).data("bootstrap-switch",true)}},{key:"_getClass",value:function e(t){return this.options.baseClass+"-"+t}},{key:"_getClasses",value:function e(t){if(!s.isArray(t)){return[this._getClass(t)]}return t.map(this._getClass.bind(this))}}]);return e}();s.fn.bootstrapSwitch=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}function r(t,i){var r=s(i);var o=r.data("bootstrap-switch");var l=o||new a(i,e);if(!o){r.data("bootstrap-switch",l)}if(typeof e==="string"){return l[e].apply(l,n)}return t}return Array.prototype.reduce.call(this,r,this)};s.fn.bootstrapSwitch.Constructor=a;s.fn.bootstrapSwitch.defaults={state:true,size:null,animate:true,disabled:false,readonly:false,indeterminate:false,inverse:false,radioAllOff:false,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function e(){},onSwitchChange:function e(){}}}))},dlqx:function(e,t,n){n("8rVx")(n("SKDj"))},e6ie:function(e,t,n){var i=n("ZVcv");var r=n("zRKy");e.exports=function e(t){return i(t).replace(/\&([^;]{1,10});/g,(function(e,t){var n;if(t in r){return r[t]}else if(n=t.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(n[1],16))}else if(n=t.match(/^#(\d+)$/)){return String.fromCharCode(~~n[1])}else{return e}}))}},eMd7:function(e,t,n){(function(){n("8rVx")(n("TD0u"))}).call(window)},ehx3:function(e,t,n){var i=n("TCcV");e.exports=function e(t,n,r){return i(t,n,r)}},fBPz:function(e,t,n){var i=n("ZVcv");function r(e){var t=e.match(/^[\s\\t]*/gm);var n=t[0].length;for(var i=1;i<t.length;i++){n=Math.min(t[i].length,n)}return n}e.exports=function e(t,n){t=i(t);var o=r(t);var s;if(o===0)return t;if(typeof n==="string"){s=new RegExp("^"+n,"gm")}else{s=new RegExp("^[ \\t]{"+o+"}","gm")}return t.replace(s,"")}},fK6f:function(e,t){e.exports='function AccessManagerTagSetup(existing_whitelisted) {\n  existing_whitelisted = JSON.parse(existing_whitelisted.replace(/&quot;/g,\'"\'));\n\n  var TagCollection = new TagSet.init({});\n  TagCollection.setup({\n    $input_container: $("#input-tags"),\n    $tag_field_container: $("#valid-tags"),\n    preset_tags: existing_whitelisted,\n    max_characters: 50,\n    max_tag_set_characters: 65535,\n    input_placeholder_string: "Add New Domains",\n    tag_appearance: {\n      postfix: "<div class=\'remove-button\'>x</div>",\n      hidden_inputs: true,\n      hidden_input_name: "player[access_manager][whitelisted_domains][]"\n    },\n    sorting_options: {\n      alphabetical_sort: true\n    },\n    validator_options: {\n      alphanumeric_tags_only: false,\n      custom_validators: {\n        validateDomain: function(tag_value, tag_set, options) {\n          var matched = tag_value.match(/^((([a-z]|[0-9]|\\-)+)\\.)+([a-z])+$/i);\n          if(matched === null || matched[0] !== tag_value) {\n            return { error: \'Text is not a valid domain\' };\n          }\n\n          return true;\n        }\n      }\n    },\n    onAdd: function(tag_model) {\n      self.$("div[data-tag-id=\'" + tag_model.id + "\'] .remove-button").click(function() {\n        TagCollection.removeTag(tag_model);\n      });\n    },\n    onValidationSuccess: function(tag_model) {\n      $("#error-box").removeClass(\'alert-warning\');\n      $("#error-box").addClass(\'display-none\');\n    },\n    onValidationFailure: function(error) {\n      $("#error-box").removeClass(\'display-none\');\n      $("#error-box").html(error.error).addClass(\'alert-warning\');\n    },\n    hideErrors: function() {\n      $("#error-box").removeClass(\'alert-warning\');\n      $("#error-box").addClass(\'display-none\');\n    }\n  });\n}\n'},fiAs:function(e,t,n){var i=n("Pg24");var r=n("bzoM");e.exports=function e(t,n){t=i(t).replace(/[-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));if(n===true){return r(t)}else{return t}}},fxsx:function(e,t,n){var i=n("ZVcv");e.exports=function e(t){return i(t).replace(/\S/g,(function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()}))}},fyQl:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);n=i(n);var r=!n?-1:t.lastIndexOf(n);return~r?t.slice(r+n.length,t.length):t}},gtSw:function(e,t,n){var i=n("ZVcv");var r=n("OR4l");e.exports=function e(t,n,o){t=i(t);n=~~n;o=o!=null?String(o):"...";if(t.length<=n)return t;var s=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},a=t.slice(0,n+1).replace(/.(?=\W*\w*$)/g,s);if(a.slice(a.length-2).match(/\w\w/))a=a.replace(/\s*\S+$/,"");else a=r(a.slice(0,a.length-1));return(a+o).length>t.length?t:t.slice(0,a.length)+o}},hWfI:function(e,t,n){(function(){(function(e,t){function i(e){var t="";e=parseInt(e,10);if(!e||e<1){return t}while(e){t+="0";e-=1}return t}function r(e,t,n){if(e==null){e=""}e=""+e;return(n?e:"")+i(t-e.length)+(n?"":e)}function o(e){return Object.prototype.toString.call(e)==="[object Array]"}function s(e){return Object.prototype.toString.call(e)==="[object Object]"}function a(e,t){var n=e.length;while(n-=1){if(t(e[n])){return e[n]}}}function l(e,t){var n=0,i=e.length,r;if(typeof t!=="function"){r=t;t=function(e){return e===r}}while(n<i){if(t(e[n])){return e[n]}n+=1}}function c(e,t){var n=0,i=e.length;if(!e||!i){return}while(n<i){if(t(e[n],n)===false){return}n+=1}}function u(e,t){var n=0,i=e.length,r=[];if(!e||!i){return r}while(n<i){r[n]=t(e[n],n);n+=1}return r}function d(e,t){return u(e,(function(e){return e[t]}))}function p(e){var t=[];c(e,(function(e){if(e){t.push(e)}}));return t}function h(e){var t=[];c(e,(function(e){if(!l(t,e)){t.push(e)}}));return t}function f(e,t){var n=[];c(e,(function(e){c(t,(function(t){if(e===t){n.push(e)}}))}));return h(n)}function m(e,t){var n=[];c(e,(function(i,r){if(!t(i)){n=e.slice(r);return false}}));return n}function g(e,t){var n=e.slice().reverse();return m(n,t).reverse()}function v(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e}var y;if(true){try{y=n("wd/R")}catch(e){}}if(!y&&e.moment){y=e.moment}if(!y){throw"Moment Duration Format cannot find Moment.js"}y.duration.fn.format=function(){var e,t,n,a,b,_,x,w=[].slice.call(arguments),k=v({},this.format.defaults),C=y.duration(this);k.duration=this;c(w,(function(e){if(typeof e==="string"||typeof e==="function"){k.template=e;return}if(typeof e==="number"){k.precision=e;return}if(s(e)){v(k,e)}}));n=k.types=o(k.types)?k.types:k.types.split(" ");if(typeof k.template==="function"){k.template=k.template.apply(k)}e=new RegExp(u(n,(function(e){return k[e].source})).join("|"),"g");a=function(e){return l(n,(function(t){return k[t].test(e)}))};t=u(k.template.match(e),(function(e,t){var n=a(e),i=e.length;return{index:t,length:i,token:n==="escape"?e.replace(k.escape,"$1"):e,type:n==="escape"||n==="general"?null:n}}),this);b=f(n,h(p(d(t,"type"))));if(!b.length){return d(t,"token").join("")}c(b,(function(e,n){var i,r,o,s,a;i=C.as(e);r=i>0?Math.floor(i):Math.ceil(i);o=i-r;s=n+1===b.length;a=!n;c(t,(function(t){if(t.type===e){v(t,{value:i,wholeValue:r,decimalValue:o,isLeast:s,isMost:a});if(a){if(k.forceLength==null&&t.length>1){k.forceLength=true}}}}));C.subtract(r,e)}));if(k.trim){t=(k.trim==="left"?m:g)(t,(function(e){return!(e.isLeast||e.type!=null&&e.wholeValue)}))}_=false;if(k.trim==="right"){t.reverse()}t=u(t,(function(e){var t,n;if(!e.type){return e.token}if(e.isLeast&&k.precision<0){t=(Math.floor(e.wholeValue*Math.pow(10,k.precision))*Math.pow(10,-k.precision)).toString()}else{t=e.wholeValue.toString()}t=t.replace(/^\-/,"");if(e.length>1&&(_||e.isMost||k.forceLength)){t=r(t,e.length)}if(e.isLeast&&k.precision>0){n=e.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/);switch(n.length){case 1:t+="."+r(n[0],k.precision,true).slice(0,k.precision);break;case 2:t+="."+r(n[1],k.precision,true).slice(0,k.precision);break;case 3:t+="."+r(i(+n[2]-1)+(n[0]||"0")+n[1],k.precision,true).slice(0,k.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}}if(e.isMost&&e.value<0){t="-"+t}_=true;return t}));if(k.trim==="right"){t.reverse()}return t.join("")};y.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var e=this.types,t=this.duration,n=a(e,(function(e){return t._data[e]}));switch(n){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}})(this)}).call(window)},hXJ3:function(e,t,n){n("8rVx")(n("F7n+"))},iWWh:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);n=n||{};var r=n.width||75;var o=n.seperator||"\n";var s=n.cut||false;var a=n.preserveSpaces||false;var l=n.trailingSpaces||false;var c;if(r<=0){return t}else if(!s){var u=t.split(" ");var d=0;c="";while(u.length>0){if(1+u[0].length+d>r){if(d>0){if(a){c+=" ";d++}else if(l){while(d<r){c+=" ";d++}}c+=o;d=0}}if(d>0){c+=" ";d++}c+=u[0];d+=u[0].length;u.shift()}if(l){while(d<r){c+=" ";d++}}return c}else{var p=0;c="";while(p<t.length){if(p%r==0&&p>0){c+=o}c+=t.charAt(p);p++}if(l){while(p%r>0){c+=" ";p++}}return c}}},j2oK:function(e,t,n){var i=n("ZVcv");e.exports=function(e,t){e=i(e);t=i(t);if(e.length===0||t.length===0)return 0;return e.split(t).length-1}},j58d:function(e,t){e.exports=function e(t,n){if(t==null)return 0;var i=Math.pow(10,isFinite(n)?n:0);return Math.round(t*i)/i}},jv9P:function(e,t){e.exports='/*\n * ******************************************************************************\n *  jquery.mb.components\n *  file: jquery.mb.browser.min.js\n *\n *  Copyright (c) 2001-2013. Matteo Bicocchi (Pupunzi);\n *  Open lab srl, Firenze - Italy\n *  email: matteo@open-lab.com\n *  site: \thttp://pupunzi.com\n *  blog:\thttp://pupunzi.open-lab.com\n * \thttp://open-lab.com\n *\n *  Licences: MIT, GPL\n *  http://www.opensource.org/licenses/mit-license.php\n *  http://www.gnu.org/licenses/gpl.html\n *\n *  last modified: 17/01/13 0.12\n *  *****************************************************************************\n */\n(function(){if(!jQuery.browser){jQuery.browser={};jQuery.browser.mozilla=!1;jQuery.browser.webkit=!1;jQuery.browser.opera=!1;jQuery.browser.msie=!1;var a=navigator.userAgent;jQuery.browser.name=navigator.appName;jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion);jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var c,b;if(-1!=(b=a.indexOf("Opera"))){if(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=a.substring(b+6),-1!=(b=a.indexOf("Version")))jQuery.browser.fullVersion=\na.substring(b+8)}else if(-1!=(b=a.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=a.substring(b+5);else if(-1!=(b=a.indexOf("Chrome")))jQuery.browser.webkit=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=a.substring(b+7);else if(-1!=(b=a.indexOf("Safari"))){if(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=a.substring(b+7),-1!=(b=a.indexOf("Version")))jQuery.browser.fullVersion=a.substring(b+\n8)}else if(-1!=(b=a.indexOf("Firefox")))jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=a.substring(b+8);else if((c=a.lastIndexOf(" ")+1)<(b=a.lastIndexOf("/")))jQuery.browser.name=a.substring(c,b),jQuery.browser.fullVersion=a.substring(b+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName);if(-1!=(a=jQuery.browser.fullVersion.indexOf(";")))jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,\na);if(-1!=(a=jQuery.browser.fullVersion.indexOf(" ")))jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,a);jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10);isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10));jQuery.browser.version=jQuery.browser.majorVersion}})(jQuery);'},kbX8:function(e,t,n){n("8rVx")(n("A1hn"))},ksZG:function(e,t,n){n("8rVx")(n("ClBP"))},kzbB:function(e,t,n){n("8rVx")(n("jv9P"))},lD5I:function(e,t){e.exports="/* global videojs, YT */\n/* jshint browser: true */\n\n// This is a modified version of this plugin, it is pending a merge into the general youtube plugin source\n// PR found here: https://github.com/eXon/videojs-youtube/pull/258\n\n(function() {\n  /**\n   * @fileoverview YouTube Media Controller - Wrapper for YouTube Media API\n   */\n\n  /**\n   * YouTube Media Controller - Wrapper for YouTube Media API\n   * @param {videojs.Player|Object} player\n   * @param {Object=} options\n   * @param {Function=} ready\n   * @constructor\n   */\n\n  function addEventListener(element, event, cb) {\n    if(!element.addEventListener) {\n      element.attachEvent(event, cb);\n    } else {\n      element.addEventListener(event, cb, true);\n    }\n  }\n\n  videojs.Youtube = videojs.MediaTechController.extend({\n    /** @constructor */\n    init: function(player, options, ready) {\n      // Save this for internal usage\n      this.player_ = player;\n\n      // No event is triggering this for YouTube\n      this['featuresProgressEvents'] = false;\n      this['featuresTimeupdateEvents'] = false;\n      // Enable rate changes\n      this['featuresPlaybackRate'] = true;\n\n      videojs.MediaTechController.call(this, player, options, ready);\n\n      this.isIos = /(iPad|iPhone|iPod)/g.test( navigator.userAgent );\n      this.isAndroid = /(Android)/g.test( navigator.userAgent );\n      //used to prevent play events on IOS7 and Android > 4.2 until the user has clicked the player\n      this.playVideoIsAllowed = !(this.isIos || this.isAndroid);\n\n      // autoplay is disabled for mobile\n      if (this.isIos || this.isAndroid) {\n        this.player_.options()['autoplay'] = false;\n      }\n\n      // Copy the JavaScript options if they exists\n      if(typeof options['source'] !== 'undefined') {\n        for(var key in options['source']) {\n          if(options['source'].hasOwnProperty(key)) {\n            player.options()[key] = options['source'][key];\n          }\n        }\n      }\n\n      this.userQuality = videojs.Youtube.convertQualityName(player.options()['quality']);\n\n      this.playerEl_ = player.el();\n      this.playerEl_.className += ' vjs-youtube';\n\n      // Create the Quality button\n      this.qualityButton = document.createElement('div');\n      this.qualityButton.setAttribute('class', 'vjs-quality-button vjs-menu-button vjs-control');\n      this.qualityButton.setAttribute('tabindex', 0);\n\n      var qualityContent = document.createElement('div');\n      qualityContent.setAttribute('class', 'vjs-control-content');\n      this.qualityButton.appendChild(qualityContent);\n\n      this.qualityTitle = document.createElement('span');\n      this.qualityTitle.setAttribute('class', 'vjs-control-text');\n      qualityContent.appendChild(this.qualityTitle);\n\n      if(player.options()['quality'] !== 'undefined') {\n        setInnerText(this.qualityTitle, player.options()['quality'] || 'auto');\n      }\n\n      var qualityMenu = document.createElement('div');\n      qualityMenu.setAttribute('class', 'vjs-menu');\n      qualityContent.appendChild(qualityMenu);\n\n      this.qualityMenuContent = document.createElement('ul');\n      this.qualityMenuContent.setAttribute('class', 'vjs-menu-content');\n      qualityMenu.appendChild(this.qualityMenuContent);\n\n      this.id_ = this.player_.id() + '_youtube_api';\n\n      this.el_ = videojs.Component.prototype.createEl('iframe', {\n        id: this.id_,\n        className: 'vjs-tech',\n        scrolling: 'no',\n        marginWidth: 0,\n        marginHeight: 0,\n        frameBorder: 0\n      });\n\n      this.el_.setAttribute('allowFullScreen', '');\n\n      this.playerEl_.insertBefore(this.el_, this.playerEl_.firstChild);\n\n      if(/MSIE (\\d+\\.\\d+);/.test(navigator.userAgent)) {\n        var ieVersion = Number(RegExp.$1);\n        this.addIframeBlocker(ieVersion);\n      } else if(!/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent)) {\n        // the pointer-events: none block the mobile player\n        this.el_.className += ' onDesktop';\n        this.addIframeBlocker();\n      }\n\n      this.parseSrc(player.options()['src']);\n\n      this.playOnReady = this.player_.options()['autoplay'] && this.playVideoIsAllowed;\n      this.forceHTML5 = !!(\n        typeof this.player_.options()['forceHTML5'] === 'undefined' ||\n          this.player_.options()['forceHTML5'] === true\n        );\n\n      this.updateIframeSrc();\n\n      var self = this;\n\n      player.ready(function() {\n        if (self.player_.options()['controls']) {\n          var controlBar = self.playerEl_.querySelectorAll('.vjs-control-bar')[0];\n          if (controlBar) {\n            controlBar.appendChild(self.qualityButton);\n          }\n        }\n\n        if(self.playOnReady && !self.player_.options()['ytcontrols']) {\n          if(typeof self.player_.loadingSpinner !== 'undefined') {\n            self.player_.loadingSpinner.show();\n          }\n          if(typeof self.player_.bigPlayButton !== 'undefined') {\n            self.player_.bigPlayButton.hide();\n          }\n        }\n\n        player.trigger('loadstart');\n      });\n\n      this.on('dispose', function() {\n        if(this.ytplayer) {\n          this.ytplayer.destroy();\n        }\n\n        if(!this.player_.options()['ytcontrols']) {\n          this.player_.off('waiting', this.bindedWaiting);\n        }\n\n        // Remove the poster\n        this.playerEl_.querySelectorAll('.vjs-poster')[0].style.backgroundImage = 'none';\n\n        // If still connected to the DOM, remove it.\n        if(this.el_.parentNode) {\n          this.el_.parentNode.removeChild(this.el_);\n        }\n\n        // Get rid of the created DOM elements\n        if (this.qualityButton.parentNode) {\n          this.qualityButton.parentNode.removeChild(this.qualityButton);\n        }\n\n        if(typeof this.player_.loadingSpinner !== 'undefined') {\n          this.player_.loadingSpinner.hide();\n        }\n        if(typeof this.player_.bigPlayButton !== 'undefined') {\n          this.player_.bigPlayButton.hide();\n        }\n\n        if(this.iframeblocker) {\n          this.playerEl_.removeChild(this.iframeblocker);\n        }\n      });\n    }\n  });\n\n  videojs.Youtube.prototype.updateIframeSrc = function() {\n    var params = {\n      enablejsapi: 1,\n      /*jshint -W106 */\n      iv_load_policy: 3,\n      /*jshint +W106 */\n      playerapiid: this.id(),\n      disablekb: 1,\n      wmode: 'transparent',\n      controls: (this.player_.options()['ytcontrols']) ? 1 : 0,\n      fs: (this.player_.options()['hideYtFullScreenControls']) ? 0 : 1,\n      html5: (this.player_.options()['forceHTML5']) ? 1 : null,\n      playsinline: (this.player_.options()['playsInline']) ? 1 : 0,\n      showinfo: 0,\n      rel: 0,\n      autoplay: (this.playOnReady) ? 1 : 0,\n      loop: (this.player_.options()['loop']) ? 1 : 0,\n      list: this.playlistId,\n      vq: this.userQuality,\n      origin: window.location.protocol + '//' + window.location.host\n    };\n\n    var isLocalProtocol = window.location.protocol === 'file:' || window.location.protocol === 'app:';\n\n    // When running with no Web server, we can't specify the origin or it will break the YouTube API messages\n    if(isLocalProtocol) {\n      delete params.origin;\n    }\n\n    // Delete unset properties\n    for(var prop in params) {\n      if(params.hasOwnProperty(prop) &&\n        ( typeof params[ prop ] === 'undefined' || params[ prop ] === null )\n        ) {\n        delete params[ prop ];\n      }\n    }\n    var self = this;\n\n    if(!this.videoId && !this.playlistId) {\n      this.el_.src = 'about:blank';\n      setTimeout(function() {\n        self.triggerReady();\n      }, 500);\n    } else {\n      this.el_.src = 'https://www.youtube.com/embed/' +\n                     (this.videoId || 'videoseries') + '?' + videojs.Youtube.makeQueryString(params);\n\n      if(this.player_.options()['ytcontrols']) {\n        // Disable the video.js controls if we use the YouTube controls\n        this.player_.controls(false);\n      } else if(this.videoId && (typeof this.player_.poster() === 'undefined' || this.player_.poster().length === 0)) {\n        // Wait here because the tech is still null in constructor\n        setTimeout(function() {\n          self.player_.poster('https://img.youtube.com/vi/' + self.videoId + '/0.jpg');\n        }, 100);\n      }\n\n      this.bindedWaiting = function() {\n        self.onWaiting();\n      };\n\n      this.player_.on('waiting', this.bindedWaiting);\n\n      if(videojs.Youtube.apiReady) {\n        this.loadYoutube();\n      } else {\n        // Add to the queue because the YouTube API is not ready\n        videojs.Youtube.loadingQueue.push(this);\n\n        // Load the YouTube API if it is the first YouTube video\n        if(!videojs.Youtube.apiLoading) {\n          var tag = document.createElement('script');\n          tag.onerror = function(e) {\n            self.onError(e);\n          };\n          tag.src = 'https://www.youtube.com/iframe_api';\n          var firstScriptTag = document.getElementsByTagName('script')[0];\n          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n          videojs.Youtube.apiLoading = true;\n        }\n      }\n    }\n  };\n\n  videojs.Youtube.prototype.onWaiting = function(/*e*/) {\n    // Make sure to hide the play button while the spinner is there\n    if(typeof this.player_.bigPlayButton !== 'undefined') {\n      this.player_.bigPlayButton.hide();\n    }\n  };\n\n  videojs.Youtube.prototype.addIframeBlocker = function(ieVersion) {\n    this.iframeblocker = videojs.Component.prototype.createEl('div');\n\n    this.iframeblocker.className = 'iframeblocker';\n\n    this.iframeblocker.style.position = 'absolute';\n    this.iframeblocker.style.left = 0;\n    this.iframeblocker.style.right = 0;\n    this.iframeblocker.style.top = 0;\n    this.iframeblocker.style.bottom = 0;\n\n    // Odd quirk for IE8 (doesn't support rgba)\n    if(ieVersion && ieVersion < 9) {\n      this.iframeblocker.style.opacity = 0.01;\n    } else {\n      this.iframeblocker.style.background = 'rgba(255, 255, 255, 0.01)';\n    }\n\n    var self = this;\n    addEventListener(this.iframeblocker, 'mousemove', function(e) {\n      if(!self.player_.userActive()) {\n        self.player_.userActive(true);\n      }\n\n      e.stopPropagation();\n      e.preventDefault();\n    });\n\n    addEventListener(this.iframeblocker, 'click', function(/*e*/) {\n      if(self.paused()) {\n        self.play();\n      } else {\n        self.pause();\n      }\n    });\n\n    this.playerEl_.insertBefore(this.iframeblocker, this.el_.nextSibling);\n  };\n\n  videojs.Youtube.prototype.parseSrc = function(src) {\n    this.srcVal = src;\n\n    if(src) {\n      // Regex to parse the video ID\n      var regId = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n      var match = src.match(regId);\n\n      if(match && match[2].length === 11) {\n        this.videoId = match[2];\n      } else {\n        this.videoId = null;\n      }\n\n      // Regex to parse the playlist ID\n      var regPlaylist = /[?&]list=([^#\\&\\?]+)/;\n      match = src.match(regPlaylist);\n\n      if(match !== null && match.length > 1) {\n        this.playlistId = match[1];\n      } else {\n        // Make sure their is no playlist\n        if(this.playlistId) {\n          delete this.playlistId;\n        }\n      }\n\n      // Parse video quality option\n      var regVideoQuality = /[?&]vq=([^#\\&\\?]+)/;\n      match = src.match(regVideoQuality);\n\n      if(match !== null && match.length > 1) {\n        this.userQuality = match[1];\n        videojs.Youtube.appendQualityLabel(self.qualityTitle, this.userQuality);\n      }\n    }\n  };\n\n  videojs.Youtube.prototype.src = function(src) {\n    if(typeof src !== 'undefined') {\n      this.parseSrc(src);\n\n      if(this.el_.src === 'about:blank') {\n        this.updateIframeSrc();\n        return;\n      }\n\n      delete this.defaultQuality;\n\n      if(this.videoId !== null) {\n        if(this.player_.options()['autoplay'] && this.playVideoIsAllowed) {\n          this.ytplayer.loadVideoById({\n            videoId: this.videoId,\n            suggestedQuality: this.userQuality\n          });\n        } else {\n          this.ytplayer.cueVideoById({\n            videoId: this.videoId,\n            suggestedQuality: this.userQuality\n          });\n        }\n\n        // Update the poster\n        this.playerEl_.querySelectorAll('.vjs-poster')[0].style.backgroundImage =\n          'url(https://img.youtube.com/vi/' + this.videoId + '/0.jpg)';\n        this.player_.poster('https://img.youtube.com/vi/' + this.videoId + '/0.jpg');\n      }\n      /* else Invalid URL */\n    }\n\n    return this.srcVal;\n  };\n\n  videojs.Youtube.prototype.load = function() {\n  };\n\n  videojs.Youtube.prototype.play = function() {\n    if(this.videoId !== null) {\n\n      // Make sure to not display the spinner for mobile\n      if(!this.player_.options()['ytcontrols']) {\n        // Display the spinner until the video is playing by YouTube\n        this.player_.trigger('waiting');\n      }\n\n      if(this.isReady_) {\n        // Sync the player volume with YouTube\n        this.ytplayer.setVolume(this.player_.volume() * 100);\n\n        if(this.volumeVal > 0) {\n          this.ytplayer.unMute();\n        } else {\n          this.ytplayer.mute();\n        }\n\n        if(this.playVideoIsAllowed) {\n          this.ytplayer.playVideo();\n        }\n      } else {\n        this.playOnReady = true;\n      }\n    }\n  };\n\n  videojs.Youtube.prototype.pause = function() {\n    if(this.ytplayer) {\n      this.ytplayer.pauseVideo();\n    }\n  };\n  videojs.Youtube.prototype.paused = function() {\n    return (this.ytplayer) ?\n      (this.lastState !== YT.PlayerState.PLAYING && this.lastState !== YT.PlayerState.BUFFERING)\n      : true;\n  };\n  videojs.Youtube.prototype.currentTime = function() {\n    return (this.ytplayer && this.ytplayer.getCurrentTime) ? this.ytplayer.getCurrentTime() : 0;\n  };\n  videojs.Youtube.prototype.setCurrentTime = function(seconds) {\n    this.ytplayer.seekTo(seconds, true);\n    this.player_.trigger('timeupdate');\n    this.player_.trigger('seeking');\n    this.isSeeking = true;\n  };\n  videojs.Youtube.prototype.playbackRate = function() {\n    return (this.ytplayer && this.ytplayer.getPlaybackRate) ? this.ytplayer.getPlaybackRate() : 1.0;\n  };\n  videojs.Youtube.prototype.setPlaybackRate = function(suggestedRate) {\n    if (this.ytplayer && this.ytplayer.setPlaybackRate) {\n      this.ytplayer.setPlaybackRate(suggestedRate);\n      var self = this;\n      setTimeout(function () {\n        self.player_.trigger('ratechange');\n      }, 100);\n    }\n  };\n  videojs.Youtube.prototype.duration = function() {\n    return (this.ytplayer && this.ytplayer.getDuration) ? this.ytplayer.getDuration() : 0;\n  };\n  videojs.Youtube.prototype.currentSrc = function() {\n    return this.srcVal;\n  };\n  videojs.Youtube.prototype.ended = function() {\n    return (this.ytplayer) ? (this.lastState === YT.PlayerState.ENDED) : false;\n  };\n\n  videojs.Youtube.prototype.volume = function() {\n    if(this.ytplayer && isNaN(this.volumeVal)) {\n      this.volumeVal = this.ytplayer.getVolume() / 100.0;\n      this.volumeVal = (isNaN(this.volumeVal)) ? 1 : this.volumeVal;\n      this.player_.volume(this.volumeVal);\n    }\n\n    return this.volumeVal;\n  };\n\n  videojs.Youtube.prototype.setVolume = function(percentAsDecimal) {\n    if(typeof(percentAsDecimal) !== 'undefined' && percentAsDecimal !== this.volumeVal) {\n      this.ytplayer.setVolume(percentAsDecimal * 100.0);\n      this.volumeVal = percentAsDecimal;\n      this.player_.trigger('volumechange');\n    }\n  };\n\n  videojs.Youtube.prototype.muted = function() {\n    return this.mutedVal;\n  };\n  videojs.Youtube.prototype.setMuted = function(muted) {\n    if(muted) {\n      this.storedVolume = this.volumeVal;\n      this.ytplayer.mute();\n      this.player_.volume(0);\n    } else {\n      this.ytplayer.unMute();\n      this.player_.volume(this.storedVolume);\n    }\n\n    this.mutedVal = muted;\n\n    this.player_.trigger('volumechange');\n  };\n\n  videojs.Youtube.prototype.buffered = function() {\n    if(this.ytplayer && this.ytplayer.getVideoBytesLoaded) {\n      var loadedBytes = this.ytplayer.getVideoBytesLoaded();\n      var totalBytes = this.ytplayer.getVideoBytesTotal();\n      if(!loadedBytes || !totalBytes) {\n        return 0;\n      }\n\n      var duration = this.ytplayer.getDuration();\n      var secondsBuffered = (loadedBytes / totalBytes) * duration;\n      var secondsOffset = (this.ytplayer.getVideoStartBytes() / totalBytes) * duration;\n\n      return videojs.createTimeRange(secondsOffset, secondsOffset + secondsBuffered);\n    } else {\n      return videojs.createTimeRange(0, 0);\n    }\n  };\n\n  videojs.Youtube.prototype.supportsFullScreen = function() {\n    if (typeof this.el_.webkitEnterFullScreen === 'function') {\n\n        // Seems to be broken in Chromium/Chrome && Safari in Leopard\n        if (/Android/.test(videojs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)) {\n            return true;\n        }\n    }\n    return false;\n  };\n\n  // YouTube is supported on all platforms\n  videojs.Youtube.isSupported = function() {\n    return true;\n  };\n\n  // You can use video/youtube as a media in your HTML5 video to specify the source\n  videojs.Youtube.canPlaySource = function(srcObj) {\n    return (srcObj.type === 'video/youtube');\n  };\n\n  // Always can control the volume\n  videojs.Youtube.canControlVolume = function() {\n    return true;\n  };\n\n  ////////////////////////////// YouTube specific functions //////////////////////////////\n\n  // All videos created before YouTube API is loaded\n  videojs.Youtube.loadingQueue = [];\n\n  // Create the YouTube player\n  videojs.Youtube.prototype.loadYoutube = function() {\n    var self = this;\n    this.ytplayer = new YT.Player(this.id_, {\n      events: {\n        onReady: function(e) {\n          e.target.vjsTech.onReady();\n          self.player_.trigger('ratechange');\n        },\n        onStateChange: function(e) {\n          e.target.vjsTech.onStateChange(e.data);\n        },\n        onPlaybackQualityChange: function(e) {\n          e.target.vjsTech.onPlaybackQualityChange(e.data);\n        },\n        onError: function(e) {\n          e.target.vjsTech.onError(e.data);\n        }\n      }\n    });\n\n    this.ytplayer.vjsTech = this;\n  };\n\n  // Transform a JavaScript object into URL params\n  videojs.Youtube.makeQueryString = function(args) {\n    var array = ['modestbranding=1'];\n    for(var key in args) {\n      if(args.hasOwnProperty(key)) {\n        array.push(key + '=' + args[key]);\n      }\n    }\n\n    return array.join('&');\n  };\n\n  // Called when YouTube API is ready to be used\n  window.onYouTubeIframeAPIReady = function() {\n    var yt;\n    while((yt = videojs.Youtube.loadingQueue.shift())) {\n      yt.loadYoutube();\n    }\n    videojs.Youtube.loadingQueue = [];\n    videojs.Youtube.apiReady = true;\n  };\n\n  videojs.Youtube.prototype.onReady = function() {\n    this.isReady_ = true;\n    this.triggerReady();\n\n    this.player_.trigger('loadedmetadata');\n\n    // The duration is loaded so we might as well fire off the timeupdate and duration events\n    // this allows for the duration of the video (timeremaining) to be displayed if styled\n    // to show the control bar initially. This gives the user the ability to see how long the video\n    // is before clicking play\n    this.player_.trigger('durationchange');\n    this.player_.trigger('timeupdate');\n\n    // Let the player take care of itself as soon as the YouTube is ready\n    // The loading spinner while waiting for the tech would be impossible otherwise\n    if (typeof this.player_.loadingSpinner !== 'undefined' && !this.isIos && !this.isAndroid) {\n      this.player_.loadingSpinner.hide();\n    }\n\n    if(this.player_.options()['muted']) {\n      this.setMuted(true);\n    }\n\n    // Set the poster of the first video of the playlist if not specified\n    if (!this.videoId && this.playlistId) {\n      this.videoId = this.ytplayer.getPlaylist()[0];\n      this.player_.poster('https://img.youtube.com/vi/' + this.videoId + '/0.jpg');\n    }\n\n    // Play ASAP if they clicked play before it's ready\n    if(this.playOnReady) {\n      this.playOnReady = false;\n      this.play();\n    }\n  };\n\n  videojs.Youtube.prototype.updateQualities = function() {\n\n    function setupEventListener(el) {\n      addEventListener(el, 'click', function() {\n        var quality = this.getAttribute('data-val');\n        self.ytplayer.setPlaybackQuality(quality);\n\n        self.userQuality = quality;\n        videojs.Youtube.appendQualityLabel(self.qualityTitle, quality);\n\n        var selected = self.qualityMenuContent.querySelector('.vjs-selected');\n        if(selected) {\n          videojs.Youtube.removeClass(selected, 'vjs-selected');\n        }\n\n        videojs.Youtube.addClass(this, 'vjs-selected');\n      });\n    }\n\n    var qualities = this.ytplayer.getAvailableQualityLevels();\n    var self = this;\n\n    if(qualities.indexOf(this.userQuality) < 0) {\n      videojs.Youtube.appendQualityLabel(self.qualityTitle, this.defaultQuality);\n    }\n\n    if(qualities.length === 0) {\n      this.qualityButton.style.display = 'none';\n    } else {\n      this.qualityButton.style.display = '';\n\n      while(this.qualityMenuContent.hasChildNodes()) {\n        this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);\n      }\n\n      for(var i = 0; i < qualities.length; ++i) {\n        var el = document.createElement('li');\n        el.setAttribute('class', 'vjs-menu-item');\n        el.setAttribute('data-val', qualities[i]);\n        videojs.Youtube.appendQualityLabel(el, qualities[i]);\n        if(qualities[i] === this.quality) {\n          videojs.Youtube.addClass(el, 'vjs-selected');\n        }\n        setupEventListener(el);\n\n        this.qualityMenuContent.appendChild(el);\n      }\n    }\n  };\n\n  videojs.Youtube.prototype.onStateChange = function(state) {\n    if(state !== this.lastState) {\n      switch(state) {\n        case -1:\n          this.player_.trigger('durationchange');\n          break;\n\n        case YT.PlayerState.ENDED:\n          var stopPlaying = true;\n\n          // Stop the playlist when it is starting over\n          if (this.playlistId && !this.player_.options()['loop']) {\n            stopPlaying = this.ytplayer.getPlaylistIndex() === 0;\n          }\n\n          if (stopPlaying) {\n            // Replace YouTube play button by our own\n            if(!this.player_.options()['ytcontrols']) {\n              this.playerEl_.querySelectorAll('.vjs-poster')[0].style.display = 'block';\n              if(typeof this.player_.bigPlayButton !== 'undefined') {\n                this.player_.bigPlayButton.show();\n              }\n            }\n\n            this.player_.trigger('ended');\n          }\n          break;\n\n        case YT.PlayerState.PLAYING:\n          this.playerEl_.querySelectorAll('.vjs-poster')[0].style.display = 'none';\n\n          this.playVideoIsAllowed = true;\n          this.updateQualities();\n          this.player_.trigger('timeupdate');\n          this.player_.trigger('durationchange');\n          this.player_.trigger('playing');\n          this.player_.trigger('play');\n\n          if (this.isSeeking) {\n            this.player_.trigger('seeked');\n            this.isSeeking = false;\n          }\n          break;\n\n        case YT.PlayerState.PAUSED:\n          this.player_.trigger('pause');\n          break;\n\n        case YT.PlayerState.BUFFERING:\n          this.player_.trigger('timeupdate');\n\n          // Make sure to not display the spinner for mobile\n          if(!this.player_.options()['ytcontrols']) {\n            this.player_.trigger('waiting');\n          }\n          break;\n\n        case YT.PlayerState.CUED:\n          break;\n      }\n\n      this.lastState = state;\n    }\n  };\n\n  videojs.Youtube.convertQualityName = function(name) {\n    switch(name) {\n      case '144p':\n        return 'tiny';\n\n      case '240p':\n        return 'small';\n\n      case '360p':\n        return 'medium';\n\n      case '480p':\n        return 'large';\n\n      case '720p':\n        return 'hd720';\n\n      case '1080p':\n        return 'hd1080';\n\n      case '1440p':\n        return 'hd1440';\n\n      case '2160p':\n        return 'hd2160';\n    }\n\n    return 'auto';\n  };\n\n  videojs.Youtube.parseQualityName = function(name) {\n    switch(name) {\n      case 'tiny':\n        return '144p';\n\n      case 'small':\n        return '240p';\n\n      case 'medium':\n        return '360p';\n\n      case 'large':\n        return '480p';\n\n      case 'hd720':\n        return '720p';\n\n      case 'hd1080':\n        return '1080p';\n\n      case 'hd1440':\n        return '1440p';\n\n      case 'hd2160':\n        return '2160p';\n    }\n\n    return 'auto';\n  };\n\n  videojs.Youtube.appendQualityLabel = function(element, quality) {\n    setInnerText(element, videojs.Youtube.parseQualityName(quality));\n\n    var label = document.createElement('span');\n    label.setAttribute('class', 'vjs-hd-label');\n\n    switch(quality) {\n      case 'hd720':\n      case 'hd1080':\n      case 'hd1440':\n        setInnerText(label, 'HD');\n        element.appendChild(label);\n        break;\n\n      case 'hd2160':\n        setInnerText(label, '4K');\n        element.appendChild(label);\n        break;\n    }\n  };\n\n  videojs.Youtube.prototype.onPlaybackQualityChange = function(quality) {\n    if(typeof this.defaultQuality === 'undefined') {\n      this.defaultQuality = quality;\n\n      if(typeof this.userQuality !== 'undefined') {\n        return;\n      }\n    }\n\n    this.quality = quality;\n    videojs.Youtube.appendQualityLabel(this.qualityTitle, quality);\n\n    switch(quality) {\n      case 'medium':\n        this.player_.videoWidth = 480;\n        this.player_.videoHeight = 360;\n        break;\n\n      case 'large':\n        this.player_.videoWidth = 640;\n        this.player_.videoHeight = 480;\n        break;\n\n      case 'hd720':\n        this.player_.videoWidth = 960;\n        this.player_.videoHeight = 720;\n        break;\n\n      case 'hd1080':\n        this.player_.videoWidth = 1440;\n        this.player_.videoHeight = 1080;\n        break;\n\n      case 'highres':\n        this.player_.videoWidth = 1920;\n        this.player_.videoHeight = 1080;\n        break;\n\n      case 'small':\n        this.player_.videoWidth = 320;\n        this.player_.videoHeight = 240;\n        break;\n\n      case 'tiny':\n        this.player_.videoWidth = 144;\n        this.player_.videoHeight = 108;\n        break;\n\n      default:\n        this.player_.videoWidth = 0;\n        this.player_.videoHeight = 0;\n        break;\n    }\n\n    this.player_.trigger('ratechange');\n  };\n\n  videojs.Youtube.prototype.onError = function(error) {\n    this.player_.error(error);\n  };\n\n  /**\n   * Add a CSS class name to an element\n   * @param {Element} element    Element to add class name to\n   * @param {String} classToAdd Classname to add\n   */\n  videojs.Youtube.addClass = function(element, classToAdd) {\n    if((' ' + element.className + ' ').indexOf(' ' + classToAdd + ' ') === -1) {\n      element.className = element.className === '' ? classToAdd : element.className + ' ' + classToAdd;\n    }\n  };\n\n  /**\n   * Remove a CSS class name from an element\n   * @param {Element} element    Element to remove from class name\n   * @param {String} classToRemove Classname to remove\n   */\n  videojs.Youtube.removeClass = function(element, classToRemove) {\n    var classNames, i;\n\n    if(element.className.indexOf(classToRemove) === -1) {\n      return;\n    }\n\n    classNames = element.className.split(' ');\n\n    // no arr.indexOf in ie8, and we don't want to add a big shim\n    for(i = classNames.length - 1; i >= 0; i--) {\n      if(classNames[i] === classToRemove) {\n        classNames.splice(i, 1);\n      }\n    }\n\n    element.className = classNames.join(' ');\n  };\n\n  // Cross-browsers support (IE8 wink wink)\n  function setInnerText(element, text) {\n    if(typeof element === 'undefined') {\n      return false;\n    }\n\n    var textProperty = ('innerText' in element) ? 'innerText' : 'textContent';\n\n    try {\n      element[textProperty] = text;\n    } catch(anException) {\n      //IE<9 FIX\n      element.setAttribute('innerText', text);\n    }\n  }\n\n\n  // Stretch the YouTube poster\n  var style = document.createElement('style');\n  var def = ' ' +\n    '.vjs-youtube .vjs-poster { background-size: 100%!important; }' +\n    '.vjs-youtube .vjs-poster, ' +\n    '.vjs-youtube .vjs-loading-spinner, ' +\n    '.vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }' +\n    '.vjs-youtube.vjs-user-active .iframeblocker { display: none; }' +\n    '.vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }' +\n    '.vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }';\n\n  style.setAttribute('type', 'text/css');\n  document.getElementsByTagName('head')[0].appendChild(style);\n\n  if(style.styleSheet) {\n    style.styleSheet.cssText = def;\n  } else {\n    style.appendChild(document.createTextNode(def));\n  }\n\n  // IE8 fix for indexOf\n  if(!Array.prototype.indexOf) {\n    Array.prototype.indexOf = function(elt /*, from*/) {\n      var len = this.length >>> 0; // jshint ignore:line\n\n      var from = Number(arguments[1]) || 0;\n      from = (from < 0) ?\n        Math.ceil(from)\n        : Math.floor(from);\n      if(from < 0) {\n        from += len;\n      }\n\n      for(; from < len; from++) {\n        if(from in this && this[from] === elt) {\n          return from;\n        }\n      }\n      return -1;\n    };\n  }\n})();\n"},lTTE:function(e,t,n){var i=n("XWDE");e.exports=function e(t,n){return i(t,n||'"')}},luxY:function(e,t,n){n("8rVx")(n("fK6f"))},"m/bU":function(e,t,n){n("8rVx")(n("80Tu"))},m3UK:function(e,t){e.exports='var NpsSurveys = {\n  init: function() {\n    var $npsSurvey = $("#nps-survey");\n    $npsSurvey.toggle();\n\n    $(".nps-survey-box").click(function(e) {\n      $npsSurvey.find(".pagination > li.active").removeClass("active");\n      $(this).parent("li").addClass("active");\n      $("#user-score").val($(this).attr(\'data\'));\n    });\n\n    $("#nps-survey-form").submit(function(event) {\n      $npsSurvey.find("h5").text("Thank you for the feedback!");\n      $("#nps-survey-form").remove();\n      setTimeout(function() {\n        $npsSurvey.slideUp(300);\n      }, 2000);\n    });\n\n    $(\'#nps-survey-form #cancel-nps\').click(function(e) {\n      e.preventDefault();\n      $.ajax({\n        type: "POST",\n        url: "/organizations/" + currentOrganizationID() + "/nps_surveys",\n        data: { cancelled: true,\n          nps_survey: {\n            user_score: null, user_comment: null\n          }\n        },\n        success: function(result) {\n          $npsSurvey.slideUp(300);\n        },\n        error: function(result) {\n          $npsSurvey.slideUp(300);\n        }\n      })\n    });\n  }\n};\n'},mO1O:function(e,t){e.exports='/*\n *  colourBrightness.js\n *\n *  Copyright 2013, Jamie Brittain - http://jamiebrittain.com\n *  Released under the WTFPL license\n *  http://sam.zoy.org/wtfpl/\n *\n *  Github:  http://github.com/jamiebrittain/colourBrightness.js\n *  Version: 1.2\n */\n!function(a){a.fn.colourBrightness=function(){var a,b,c,d,e=this.css("background-color");e.match(/^rgb/)?(e=e.match(/rgb\\(([^)]+)\\)/)[1],e=e.split(/ *, */).map(Number),a=e[0],b=e[1],c=e[2]):"#"==e[0]&&7==e.length?(a=parseInt(e.slice(1,3),16),b=parseInt(e.slice(3,5),16),c=parseInt(e.slice(5,7),16)):"#"==e[0]&&4==e.length&&(a=parseInt(e[1]+e[1],16),b=parseInt(e[2]+e[2],16),c=parseInt(e[3]+e[3],16)),d=(299*a+587*b+114*c)/1e3,125>d?this.removeClass("light").addClass("dark"):this.removeClass("dark").addClass("light")}}(jQuery);\n'},mi91:function(e,t,n){var i=n("Pg24");e.exports=function e(t){return i(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},nGj7:function(e,t,n){var i=n("TCcV");e.exports=function e(t,n,r){return i(t,n,r,"both")}},nQG2:function(e,t,n){var i=n("ZVcv");var r="",o="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";r+=r.toUpperCase();o+=o.toUpperCase();o=o.split("");r+="";o.push("ss");e.exports=function e(t){return i(t).replace(/.{1}/g,(function(e){var t=r.indexOf(e);return t===-1?e:o[t]}))}},nYbb:function(e,t,n){var i=n("Mf+4");var r=n("fiAs");var o=n("ZVcv");e.exports=function e(t){t=o(t);return i(r(t.replace(/[\W_]/g," ")).replace(/\s/g,""))}},nfCO:function(e,t){e.exports='var PlayerPicker = {\n  context: null,\n  context_type: null,\n  players_path: null,\n  tags_path: null,\n\n  init: function () {\n    this.picker_modal = $("#picker-modal");\n    this.open_picker_btns = $(".js-open-picker");\n\n    this.modal_title = this.picker_modal.find(".modal-title");\n\n    this.selected_players_list = $("#selected-players .players-list");\n    this.selected_player_count = $("#selected-player-count");\n    this.no_selected_players_notice = $("#no-players-selected");\n\n    this.available_players = this.picker_modal.find("#available-players");\n    this.available_players_list = this.available_players.find(".players-list");\n    this.available_players_count = this.available_players.find("#available-player-count");\n    this.add_player_btn = this.available_players.find(".js-add-player")\n    this.no_available_players_notice = this.available_players.find("#no-players-available");\n    this.player_search_indicator = this.available_players.find("#player-search-indicator");\n    this.player_search_container = this.available_players.find("#player-search");\n    this.player_search_text_input = this.available_players.find("#player-search-query");\n    this.player_search_form = this.player_search_container.find("#search-form");\n    this.large_search_notice = this.available_players.find("#large-search-notice");\n\n    this.available_tags = this.picker_modal.find("#available-tags");\n    this.available_tags_list = this.available_tags.find(".tags-list");\n    this.selected_tags = this.picker_modal.find("#selected-tags");\n    this.selected_tags_list = this.selected_tags.find(".tags-list");\n\n    this.tmplPlayer = $(\'#tmpl-player\').html();\n    this.tmplTag = $(\'#tmpl-tag\').html();\n    this.bindUIActions();\n  },\n\n  bindUIActions: function () {\n    // Picker modal and edit buttons\n    this.picker_modal.on(\'hidden.bs.modal\', function (e) {\n      PlayerPicker.available_players_list.empty();\n      PlayerPicker.available_players_list.css("height", "auto");\n      PlayerPicker.player_search_text_input.val(\'\');\n      PlayerPicker.large_search_notice.removeClass("in");\n      PlayerPicker.selected_players_list.empty();\n      PlayerPicker.updateSelectedPlayerCounts();\n      PlayerPicker.updateAvailablePlayerCounts();\n      PlayerPicker.selected_players_list.isotope("destroy");\n      PlayerPicker.picker_modal.find("#selected-players-indicator").addClass("in");\n    });\n    this.open_picker_btns.on("click", function() {\n      PlayerPicker.openPicker($(this));\n    });\n\n    // Add / Remove Player/Tag Buttons\n    this.available_players_list.on("ajax:success", ".js-add-player", function(e, data, status, xhr) {\n      PlayerPicker.picker_modal.trigger(\'add-player\', data);\n      PlayerPicker.addPlayer($(this), data);\n    }).on(\'ajax:error\', function(e, xhr, status, error) {\n      alert("There was an error adding this player");\n    });\n    this.selected_players_list.on("ajax:success", ".js-remove-player", function(e, data, status, xhr) {\n      PlayerPicker.picker_modal.trigger(\'remove-player\', data);\n      PlayerPicker.removePlayer($(this));\n    }).on(\'ajax:error\', function(e, xhr, status, error) {\n      alert("There was an error removing this player");\n    });\n    this.available_tags_list.on("ajax:success", ".js-add-tag", function(e, data, status, xhr) {\n      PlayerPicker.picker_modal.trigger(\'add-tag\', data);\n      PlayerPicker.addTag($(this));\n    }).on(\'ajax:error\', function(e, xhr, status, error) {\n      alert("There was an error adding this tag");\n    });\n    this.selected_tags_list.on("ajax:success", ".js-remove-tag", function(e, data, status, xhr) {\n      PlayerPicker.picker_modal.trigger(\'remove-tag\', data);\n      PlayerPicker.removeTag($(this));\n    }).on(\'ajax:error\', function(e, xhr, status, error) {\n      alert("There was an error removing this tag");\n    });\n\n    // Player Search\n    this.player_search_form.on(\'ajax:send\', function(e, data, status, xhr) {\n      if (PlayerPicker.available_players_list.data(\'isotope\')) {\n        PlayerPicker.available_players_list.isotope("destroy");\n      }\n      PlayerPicker.toggleSearchIndicator();\n    })\n    .on(\'ajax:success\', function(e, data, status, xhr) {\n      PlayerPicker.updateAvailablePlayers(jQuery.parseJSON(xhr.responseText));\n      PlayerPicker.toggleSearchIndicator();\n      PlayerPicker.updateAvailablePlayerCounts();\n    })\n    .on(\'ajax:error\', function(e, xhr, status, error) {\n      PlayerPicker.toggleSearchIndicator();\n    });\n  },\n\n  openPicker: function (open_picker_btn) {\n    PlayerPicker.context = open_picker_btn.closest(".player-picker-context");\n    PlayerPicker.context_type = PlayerPicker.context.data().contextType;\n    PlayerPicker.tags_path = PlayerPicker.context.data().pickerRootPath + \'/tags\';\n    PlayerPicker.players_path = PlayerPicker.context.data().pickerRootPath + \'/players\';\n    PlayerPicker.api_path = PlayerPicker.context.data().pickerApiPath;\n\n    PlayerPicker.picker_modal.modal();\n    PlayerPicker.fetchSelectedPlayers();\n    PlayerPicker.getDefaultPlayers();\n\n    switch(PlayerPicker.context_type) {\n      case \'selection\':\n        PlayerPicker.modal_title.html(\'Select Players\');\n        PlayerPicker.available_players.addClass("in");\n        PlayerPicker.available_tags.removeClass("in");\n        PlayerPicker.selected_tags.removeClass("in");\n        break;\n      case \'tags\':\n        PlayerPicker.modal_title.html(\'Select Tags\');\n        PlayerPicker.available_tags.addClass("in");\n        PlayerPicker.selected_tags.addClass("in");\n        PlayerPicker.available_players.removeClass("in");\n        PlayerPicker.fetchAvailableTags(PlayerPicker.tags_path);\n        PlayerPicker.fetchSelectedTags(PlayerPicker.tags_path);\n        break;\n    }\n  },\n\n  fetchSelectedPlayers: function () {\n    var indicator = PlayerPicker.picker_modal.find("#selected-players-indicator");\n    indicator.addClass("in");\n\n    vidyardAjax({\n      type: \'GET\',\n      dataType: \'json\',\n      url: PlayerPicker.players_path,\n      success: function (data) {\n        indicator.removeClass("in");\n        PlayerPicker.updateSelectedPlayers(data);\n        PlayerPicker.updateSelectedPlayerCounts();\n      },\n      error: function () {\n        alert("There was an error loading players.");\n        PlayerPicker.picker_modal.modal("hide");\n      }\n    });\n  },\n\n  updateSelectedPlayers: function (results) {\n    var compiledPickerPlayerTmpl = _.template(PlayerPicker.tmplPlayer)({\n      players: results,\n      context: PlayerPicker.context\n    });\n    PlayerPicker.selected_players_list.html(compiledPickerPlayerTmpl);\n\n    // Init isotope on newly created items\n    PlayerPicker.selected_players_list.isotope({\n      itemSelector: \'.player\',\n      layoutMode: \'fitRows\',\n      transitionDuration: \'0.2s\'\n    });\n    PlayerPicker.selected_players_list.isotope(\'on\', \'removeComplete\', function(isoInstance, removedItems) {\n      PlayerPicker.updateSelectedPlayerCounts();\n    });\n  },\n\n  updateSelectedPlayerCounts: function () {\n    var selected_player_count = PlayerPicker.selected_players_list.children().length;\n    PlayerPicker.selected_player_count.html(selected_player_count + " Players");\n    PlayerPicker.selected_player_ids = $.map(PlayerPicker.selected_players_list.find(".player"), function(p) { return $(p).data().id; });\n\n    if (selected_player_count === 0) {\n      PlayerPicker.no_selected_players_notice.addClass("in");\n    } else {\n      PlayerPicker.no_selected_players_notice.removeClass("in");\n    }\n  },\n\n  updateAvailablePlayers: function (search_results) {\n    // Don\'t show results that are already in the selected players list\n    var filtered_results = _.filter(search_results.players, function(p){\n      return !_.contains(PlayerPicker.selected_player_ids, p.id);\n    });\n    var compiledPickerPlayerTmpl = _.template(PlayerPicker.tmplPlayer)({\n      players: filtered_results,\n      context: PlayerPicker.context\n    });\n    PlayerPicker.available_players_list.html(compiledPickerPlayerTmpl);\n\n    PlayerPicker.available_players_list.isotope({\n      itemSelector: \'.player\',\n      layoutMode: \'vertical\',\n      vertical: {\n        horizontalAlignment: 0.5,\n      },\n      transitionDuration: \'0.2s\'\n    });\n    PlayerPicker.available_players_list.isotope(\'on\', \'removeComplete\', function(isoInstance, removedItems) {\n      PlayerPicker.updateAvailablePlayerCounts();\n    });\n  },\n\n  addPlayer: function (add_player_btn, player) {\n    var compiledPickerPlayerTmpl = _.template(PlayerPicker.tmplPlayer)({\n      players: [player],\n      context: PlayerPicker.context\n    });\n\n    PlayerPicker.selected_players_list.isotope(\'insert\', $(compiledPickerPlayerTmpl)).isotope(\'layout\');\n    PlayerPicker.available_players_list.isotope(\'remove\', add_player_btn.closest(".player")).isotope(\'layout\');\n    PlayerPicker.updateAvailablePlayerCounts();\n    PlayerPicker.updateSelectedPlayerCounts();\n  },\n\n  removePlayer: function (remove_player_btn) {\n    var player = remove_player_btn.closest(".player");\n    PlayerPicker.selected_players_list.isotope(\'remove\', player).isotope(\'layout\');\n  },\n\n  addTag: function (add_tag_btn) {\n    $.rails.enableElement(add_tag_btn);\n    var tag = add_tag_btn.closest(".tag");\n    PlayerPicker.selected_tags_list.isotope(\'insert\', tag.clone(true)).isotope(\'layout\');\n    PlayerPicker.available_tags_list.isotope(\'remove\', tag).isotope(\'layout\');\n    PlayerPicker.fetchSelectedPlayers();\n  },\n\n  removeTag: function (remove_tag_btn) {\n    $.rails.enableElement(remove_tag_btn);\n    var tag = remove_tag_btn.closest(".tag");\n    var new_tag = tag.clone(true);\n    PlayerPicker.available_tags_list.isotope(\'insert\', tag.clone(true)).isotope(\'layout\');\n    PlayerPicker.selected_tags_list.isotope(\'remove\', tag).isotope(\'layout\');\n    PlayerPicker.fetchSelectedPlayers();\n  },\n\n  toggleSearchIndicator: function () {\n    PlayerPicker.available_players_count.toggleClass("in");\n    PlayerPicker.player_search_container.find("*").toggleClass("disabled");\n    PlayerPicker.player_search_indicator.toggleClass("in");\n    PlayerPicker.available_players_list.toggleClass("in");\n  },\n\n  fetchAvailableTags: function () {\n    vidyardAjax({\n      type: \'GET\',\n      dataType: \'json\',\n      url: PlayerPicker.tags_path,\n      success: function (data) {\n        PlayerPicker.updateAvailableTags(data);\n      },\n      error: function () {\n        alert("There was an error loading tags");\n        PlayerPicker.picker_modal.modal("hide");\n      }\n    });\n  },\n\n  updateAvailableTags: function (results) {\n    var compiledPickerTagTmpl = _.template(PlayerPicker.tmplTag)({\n      tags: results.unselected_tags,\n      context: PlayerPicker.context\n    });\n    PlayerPicker.available_tags_list.html(compiledPickerTagTmpl);\n\n    if (PlayerPicker.available_tags_list.data(\'isotope\')) {\n      PlayerPicker.available_tags_list.isotope("destroy");\n    }\n\n    PlayerPicker.available_tags_list.isotope({\n      itemSelector: \'.tag\',\n      layoutMode: \'vertical\',\n      vertical: {\n        horizontalAlignment: 0.5,\n      },\n      transitionDuration: \'0.2s\'\n    });\n  },\n\n  fetchSelectedTags: function () {\n    vidyardAjax({\n      type: \'GET\',\n      dataType: \'json\',\n      url: PlayerPicker.tags_path,\n      success: function (data) {\n        PlayerPicker.updateSelectedTags(data);\n      },\n      error: function () {\n        alert("There was an error loading tags");\n        PlayerPicker.picker_modal.modal("hide");\n      }\n    });\n  },\n\n  updateSelectedTags: function (results) {\n    var compiledPickerTagTmpl = _.template(PlayerPicker.tmplTag)({\n      tags: results.selected_tags,\n      context: PlayerPicker.context\n    });\n    PlayerPicker.selected_tags_list.html(compiledPickerTagTmpl);\n\n    if (PlayerPicker.selected_tags_list.data(\'isotope\')) {\n      PlayerPicker.selected_tags_list.isotope("destroy");\n    }\n\n    PlayerPicker.selected_tags_list.isotope({\n      itemSelector: \'.tag\',\n      layoutMode: \'masonry\',\n      vertical: {\n        horizontalAlignment: 0.5,\n      },\n      transitionDuration: \'0.2s\'\n    });\n  },\n\n  updateAvailablePlayerCounts: function () {\n    var available_player_count = PlayerPicker.available_players_list.children().length;\n\n    if (available_player_count === 0) {\n      PlayerPicker.no_available_players_notice.addClass("in");\n      PlayerPicker.available_players_count.removeClass("in").html("");\n    } else {\n      PlayerPicker.no_available_players_notice.removeClass("in");\n      PlayerPicker.available_players_count.addClass("in").html(available_player_count + " Players Found");\n    }\n\n    if (available_player_count >= 100) {\n      PlayerPicker.large_search_notice.addClass("in");\n    } else {\n      PlayerPicker.large_search_notice.removeClass("in");\n    }\n  },\n\n  getDefaultPlayers: function() {\n    if (PlayerPicker.available_players_list.data(\'isotope\')) {\n      PlayerPicker.available_players_list.isotope("destroy");\n    };\n\n    PlayerPicker.toggleSearchIndicator();\n\n    vidyardAjax({\n      type: \'GET\',\n      dataType: \'json\',\n      url: PlayerPicker.api_path,\n      data: {\n        per_page: 100,\n        page: 1,\n        include_subgroups: true,\n        query: ""\n      },\n      success: function (data) {\n        PlayerPicker.toggleSearchIndicator();\n        PlayerPicker.updateAvailablePlayers(data);\n        PlayerPicker.updateAvailablePlayerCounts();\n      },\n      error: function () {\n        PlayerPicker.toggleSearchIndicator();\n        bootbox.alert({\n          message: "There was an error loading your players.",\n          title: "Error",\n          className: "warning-dialog",\n          backdrop: true\n        });\n      }\n    });\n  }\n};\n'},"ni/U":function(e,t){var n=function(){"use strict";function e(e,t,n){if(n===undefined){return e&&e.h5s&&e.h5s.data&&e.h5s.data[t]}else{e.h5s=e.h5s||{};e.h5s.data=e.h5s.data||{};e.h5s.data[t]=n}}function t(e){if(e.h5s){delete e.h5s.data}}function n(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)){throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.")}if(typeof t!=="string"){return Array.from(e)}return Array.from(e).filter((function(e){return e.nodeType===1&&e.matches(t)}))}var i=new Map;var r=function(){function e(){this._config=new Map;this._placeholder=undefined;this._data=new Map}Object.defineProperty(e.prototype,"config",{get:function(){var e={};this._config.forEach((function(t,n){e[n]=t}));return e},set:function(e){if(typeof e!=="object"){throw new Error("You must provide a valid configuration object to the config setter.")}var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:true,configurable:true});e.prototype.setConfig=function(e,t){if(!this._config.has(e)){throw new Error("Trying to set invalid configuration item: "+e)}this._config.set(e,t)};e.prototype.getConfig=function(e){if(!this._config.has(e)){throw new Error("Invalid configuration item requested: "+e)}return this._config.get(e)};Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&e!==null){throw new Error("A placeholder must be an html element or null.")}this._placeholder=e},enumerable:true,configurable:true});e.prototype.setData=function(e,t){if(typeof e!=="string"){throw new Error("The key must be a string.")}this._data.set(e,t)};e.prototype.getData=function(e){if(typeof e!=="string"){throw new Error("The key must be a string.")}return this._data.get(e)};e.prototype.deleteData=function(e){if(typeof e!=="string"){throw new Error("The key must be a string.")}return this._data.delete(e)};return e}();function o(e){if(!(e instanceof HTMLElement)){throw new Error("Please provide a sortable to the store function.")}if(!i.has(e)){i.set(e,new r)}return i.get(e)}function s(e,t,n){if(e instanceof Array){for(var i=0;i<e.length;++i){s(e[i],t,n)}return}e.addEventListener(t,n);o(e).setData("event"+t,n)}function a(e,t){if(e instanceof Array){for(var n=0;n<e.length;++n){a(e[n],t)}return}e.removeEventListener(t,o(e).getData("event"+t));o(e).deleteData("event"+t)}function l(e,t,n){if(e instanceof Array){for(var i=0;i<e.length;++i){l(e[i],t,n)}return}e.setAttribute(t,n)}function c(e,t){if(e instanceof Array){for(var n=0;n<e.length;++n){c(e[n],t)}return}e.removeAttribute(t)}function u(e){if(!e.parentElement||e.getClientRects().length===0){throw new Error("target element must be part of the dom")}var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}}function d(e,t){if(t===void 0){t=0}var n;return function(){var i=[];for(var r=0;r<arguments.length;r++){i[r-0]=arguments[r]}clearTimeout(n);n=setTimeout((function(){e.apply(void 0,i)}),t)}}function p(e,t){if(!(e instanceof HTMLElement)||!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)){throw new Error("You must provide an element and a list of elements.")}return Array.from(t).indexOf(e)}function h(e){if(!(e instanceof HTMLElement)){throw new Error("Element is not a node element.")}return e.parentNode!==null}var f=function(e,t,n){if(!(e instanceof HTMLElement)||!(e.parentElement instanceof HTMLElement)){throw new Error("target and element must be a node")}e.parentElement.insertBefore(t,n==="before"?e:e.nextElementSibling)};var m=function(e,t){return f(e,t,"before")};var g=function(e,t){return f(e,t,"after")};function v(t,i,r){if(i===void 0){i=function(e,t){return e}}if(r===void 0){r=function(e){return e}}if(!(t instanceof HTMLElement)||!t.isSortable===true){throw new Error("You need to provide a sortableContainer to be serialized.")}if(typeof i!=="function"||typeof r!=="function"){throw new Error("You need to provide a valid serializer for items and the container.")}var o=e(t,"opts");var s=o.items;var a=n(t.children,s);var l=a.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:p(e,a)}}));var c={node:t,itemCount:l.length};return{container:r(c),items:l.map((function(e){return i(e,t)}))}}function y(e,t,n){if(n===void 0){n="sortable-placeholder"}if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid element as a sortable.")}if(!(t instanceof HTMLElement)&&t!==undefined){throw new Error("You must provide a valid element as a placeholder or set ot to undefined.")}if(t===undefined){if(["UL","OL"].includes(e.tagName)){t=document.createElement("li")}else if(["TABLE","TBODY"].includes(e.tagName)){t=document.createElement("tr");t.innerHTML='<td colspan="100"></td>'}else{t=document.createElement("div")}}if(typeof n==="string"){(i=t.classList).add.apply(i,n.split(" "))}return t;var i}function b(e){if(!(e instanceof HTMLElement)){throw new Error("You must provide a valid dom element")}var t=window.getComputedStyle(e);return["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))}function _(e,t){if(!(e instanceof Array)){throw new Error("You must provide a Array of HTMLElements to be filtered.")}if(typeof t!=="string"){return e}return e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))}function x(e){return e.composedPath&&e.composedPath()[0]||e.target}var w=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}};function k(e,t,n){if(!(e instanceof Event)){throw new Error("setDragImage requires a DragEvent as the first argument.")}if(!(t instanceof HTMLElement)){throw new Error("setDragImage requires the dragged element as the second argument.")}if(!n){n=w}if(e.dataTransfer&&e.dataTransfer.setDragImage){var i=u(t);var r=n(t,i,e);if(!(r.element instanceof HTMLElement)||typeof r.posX!=="number"||typeof r.posY!=="number"){throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].")}e.dataTransfer.effectAllowed="copyMove";e.dataTransfer.setData("text/plain",x(e).id);e.dataTransfer.setDragImage(r.element,r.posX,r.posY)}}function C(e,t){if(e.isSortable===true){var n=o(e).getConfig("acceptFrom");if(n!==null&&n!==false&&typeof n!=="string"){throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.')}if(n!==null){return n!==false&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0}if(e===t){return true}if(o(e).getConfig("connectWith")!==undefined&&o(e).getConfig("connectWith")!==null){return o(e).getConfig("connectWith")===o(t).getConfig("connectWith")}}return false}var S={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:false,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:false,debounce:0,throttleTime:100,maxItems:0,itemSerializer:undefined,containerSerializer:undefined,customDragImage:null};function T(e,t){var n=this;if(t===void 0){t=250}if(typeof e!=="function"){throw new Error("You must provide a function as the first argument for throttle.")}if(typeof t!=="number"){throw new Error("You must provide a number as the second argument for throttle.")}var i=null;return function(){var r=[];for(var o=0;o<arguments.length;o++){r[o-0]=arguments[o]}var s=Date.now();if(i===null||s-i>=t){i=s;e.apply(n,r)}}}function E(e,t){if(typeof o(e).getConfig("hoverClass")==="string"){var i=o(e).getConfig("hoverClass").split(" ");if(t===true){s(e,"mousemove",T((function(t){if(t.buttons===0){n(e.children,o(e).getConfig("items")).forEach((function(e){if(e!==t.target){(n=e.classList).remove.apply(n,i)}else{(r=e.classList).add.apply(r,i)}var n,r}))}}),o(e).getConfig("throttleTime")));s(e,"mouseleave",(function(){n(e.children,o(e).getConfig("items")).forEach((function(e){(t=e.classList).remove.apply(t,i);var t}))}))}else{a(e,"mousemove");a(e,"mouseleave")}}}var q;var j;var P;var F;var A;var I;var D;var O;var B=function(e){a(e,"dragstart");a(e,"dragend");a(e,"dragover");a(e,"dragenter");a(e,"drop");a(e,"mouseenter");a(e,"mouseleave")};var $=function(e,t){var n=e;if(o(t).getConfig("copy")===true){n=e.cloneNode(true);l(n,"aria-copied","true");e.parentElement.appendChild(n);n.style.display="none";n.oldDisplay=e.style.display}return n};var R=function(e){t(e);c(e,"aria-dropeffect")};var M=function(e){c(e,"aria-grabbed");c(e,"aria-copied");c(e,"draggable");c(e,"role")};function L(e,t){if(t.composedPath){return t.composedPath().find((function(e){return e.isSortable}))}while(e.isSortable!==true){e=e.parentElement}return e}function N(t,i){var r=e(t,"opts");var o=n(t.children,r.items);var s=o.filter((function(e){return e.contains(i)||e.shadowRoot&&e.shadowRoot.contains(i)}));return s.length>0?s[0]:i}var U=function(t){var i=e(t,"opts")||{};var r=n(t.children,i.items);var o=_(r,i.handle);a(t,"dragover");a(t,"dragenter");a(t,"drop");R(t);a(o,"mousedown");B(r);M(r)};var H=function(t){var i=e(t,"opts");var r=n(t.children,i.items);var o=_(r,i.handle);l(t,"aria-dropeffect","move");e(t,"_disabled","false");l(o,"draggable","true");if(i.disableIEFix===false){var a=(document||window.document).createElement("span");if(typeof a.dragDrop==="function"){s(o,"mousedown",(function(){if(r.indexOf(this)!==-1){this.dragDrop()}else{var e=this.parentElement;while(r.indexOf(e)===-1){e=e.parentElement}e.dragDrop()}}))}}};var z=function(t){var i=e(t,"opts");var r=n(t.children,i.items);var o=_(r,i.handle);l(t,"aria-dropeffect","none");e(t,"_disabled","true");l(o,"draggable","false");a(o,"mousedown")};var V=function(t){var i=e(t,"opts");var r=n(t.children,i.items);var o=_(r,i.handle);e(t,"_disabled","false");B(r);a(o,"mousedown");a(t,"dragover");a(t,"dragenter");a(t,"drop")};function W(t,r){var a=String(r);r=r||{};if(typeof t==="string"){t=document.querySelectorAll(t)}if(t instanceof HTMLElement){t=[t]}t=Array.prototype.slice.call(t);if(/serialize/.test(a)){return t.map((function(t){var n=e(t,"opts");return v(t,n.itemSerializer,n.containerSerializer)}))}t.forEach((function(t){if(/enable|disable|destroy/.test(a)){return W[a](t)}["connectWith","disableIEFix"].forEach((function(e){if(r.hasOwnProperty(e)&&r[e]!==null){console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')}}));r=Object.assign({},S,o(t).config,r);o(t).config=r;e(t,"opts",r);t.isSortable=true;V(t);var c=n(t.children,r.items);var f;if(r.placeholder!==null&&r.placeholder!==undefined){var v=document.createElement(t.tagName);if(r.placeholder instanceof HTMLElement){v.appendChild(r.placeholder)}else{v.innerHTML=r.placeholder}f=v.children[0]}o(t).placeholder=y(t,f,r.placeholderClass);e(t,"items",r.items);if(r.acceptFrom){e(t,"acceptFrom",r.acceptFrom)}else if(r.connectWith){e(t,"connectWith",r.connectWith)}H(t);l(c,"role","option");l(c,"aria-grabbed","false");E(t,true);s(t,"dragstart",(function(e){var t=x(e);if(t.isSortable===true){return}e.stopImmediatePropagation();if(r.handle&&!t.matches(r.handle)||t.getAttribute("draggable")==="false"){return}var i=L(t,e);var o=N(i,t);I=n(i.children,r.items);F=I.indexOf(o);A=p(o,i.children);P=i;k(e,o,r.customDragImage);j=b(o);o.classList.add(r.draggingClass);q=$(o,i);l(q,"aria-grabbed","true");i.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:A,index:F,container:P},item:q,originalTarget:t}}))}));s(t,"dragenter",(function(i){var r=x(i);var s=L(r,i);if(s&&s!==D){O=n(s.children,e(s,"items")).filter((function(e){return e!==o(t).placeholder}));s.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:A,index:F,container:P},destination:{container:s,itemsBeforeUpdate:O},item:q,originalTarget:r}}))}D=s}));s(t,"dragend",(function(n){if(!q){return}q.classList.remove(r.draggingClass);l(q,"aria-grabbed","false");if(q.getAttribute("aria-copied")==="true"&&e(q,"dropped")!=="true"){q.remove()}q.style.display=q.oldDisplay;delete q.oldDisplay;var o=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(h)[0];if(o){o.remove()}t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:A,index:F,container:P},item:q}}));D=null;q=null;j=null}));s(t,"drop",(function(s){if(!C(t,q.parentElement)){return}s.preventDefault();s.stopPropagation();e(q,"dropped","true");var a=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(h)[0];g(a,q);a.remove();t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:A,index:F,container:P},item:q}}));var l=o(t).placeholder;var c=n(P.children,r.items).filter((function(e){return e!==l}));var u=this.isSortable===true?this:this.parentElement;var d=n(u.children,e(u,"items")).filter((function(e){return e!==l}));var f=p(q,Array.from(q.parentElement.children).filter((function(e){return e!==l})));var m=p(q,d);if(A!==f||P!==u){t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:A,index:F,container:P,itemsBeforeUpdate:I,items:c},destination:{index:m,elementIndex:f,container:u,itemsBeforeUpdate:O,items:d},item:q}}))}}));var _=d((function(e,t,s){if(!q){return}if(r.forcePlaceholderSize){o(e).placeholder.style.height=j+"px"}if(Array.from(e.children).indexOf(t)>-1){var a=b(t);var l=p(o(e).placeholder,t.parentElement.children);var c=p(t,t.parentElement.children);if(a>j){var d=a-j;var h=u(t).top;if(l<c&&s<h){return}if(l>c&&s>h+a-d){return}}if(q.oldDisplay===undefined){q.oldDisplay=q.style.display}if(q.style.display!=="none"){q.style.display="none"}var f=false;try{var v=u(t).top+t.offsetHeight/2;f=s>=v}catch(e){f=l<c}if(f){g(t,o(e).placeholder)}else{m(t,o(e).placeholder)}Array.from(i.values()).filter((function(e){return e.placeholder!==undefined})).forEach((function(t){if(t.placeholder!==o(e).placeholder){t.placeholder.remove()}}))}else{var y=Array.from(i.values()).filter((function(e){return e.placeholder!==undefined})).map((function(e){return e.placeholder}));if(y.indexOf(t)===-1&&e===t&&!n(t.children,r.items).length){y.forEach((function(e){return e.remove()}));t.appendChild(o(e).placeholder)}}}),r.debounce);var w=function(t){var i=t.target;var r=i.isSortable===true?i:L(i,t);i=N(r,i);if(!q||!C(r,q.parentElement)||e(r,"_disabled")==="true"){return}var s=e(r,"opts");if(parseInt(s.maxItems)&&n(r.children,e(r,"items")).length>=parseInt(s.maxItems)&&q.parentElement!==r){return}t.preventDefault();t.stopPropagation();t.dataTransfer.dropEffect=o(r).getConfig("copy")===true?"copy":"move";_(r,i,t.pageY)};s(c.concat(t),"dragover",w);s(c.concat(t),"dragenter",w)}));return t}W.destroy=function(e){U(e)};W.enable=function(e){H(e)};W.disable=function(e){z(e)};return W}()},o3ow:function(e,t){e.exports=function e(t,n){if(t==null)return[];t=String(t);n=~~n;return n>0?t.match(new RegExp(".{1,"+n+"}","g")):[t]}},pgU6:function(e,t){e.exports="var UploadedVideosManager = {\n  editVideo: function($editFields) {\n    \"use strict\";\n    $editFields.siblings('.video_edit_access_codes').slideUp();\n    $editFields.slideDown();\n  },\n  cancelEditVideo: function($editFields) {\n    \"use strict\";\n    $editFields.slideUp();\n  },\n  showVideoEditContainerIfHasErrors: function() {\n    \"use strict\";\n    // Show video if there is an error\n    var $nonEmptyAlert = $(\".alert.alert-danger:parent\");\n    if ($nonEmptyAlert.length > 0 && $nonEmptyAlert.text().trim().length > 0) {\n      var $videoEditContainer = $nonEmptyAlert.closest(\".video_edit_fields, .video_edit_access_codes\");\n      if ($videoEditContainer.is('.video_edit_fields')) {\n        UploadedVideosManager.editVideo($videoEditContainer);\n      } else if ($videoEditContainer.is('.video_edit_access_codes')) {\n        UploadedVideosManager.editAccessCodes($videoEditContainer);\n      }\n    }\n  },\n  editAccessCodes: function($editAccessCodes) {\n    \"use strict\";\n    $editAccessCodes.siblings('.video_edit_fields').slideUp();\n    $editAccessCodes.slideDown();\n  },\n  cancelEditAccessCodes: function($editAccessCodes) {\n    \"use strict\";\n    $editAccessCodes.slideUp();\n  },\n  setupListeners: function() {\n    \"use strict\";\n\n    $(\".btn.video_edit_button, .btn.video_access_codes_edit_button, .btn.upload_more_files_button\").each(function() {\n      var $btn = $(this);\n      $btn.tooltip({title: $(this).text(), placement: 'left', trigger: 'manual', container: 'body'});\n      $btn.hover(function() {\n        if ($(this).children().length > 0 && $(this).children(':visible').text() === \"\") {\n          $(this).tooltip('show');\n        }\n      }, function() {\n        $(this).tooltip('hide');\n      });\n    });\n\n    $(\".video_edit_container .video_edit_button\").click(function() {\n      var $editFields = $(this).closest(\".video_edit_container\").find(\".video_edit_fields\");\n      if ($editFields.is(':visible')) {\n        UploadedVideosManager.cancelEditVideo($editFields);\n      } else {\n        UploadedVideosManager.editVideo($editFields);\n      }\n    });\n\n    $(\".video_edit_container .video_access_codes_edit_button\").click(function() {\n      var $editFields = $(this).closest(\".video_edit_container\").find(\".video_edit_access_codes\");\n      if ($editFields.is(':visible')) {\n        UploadedVideosManager.cancelEditAccessCodes($editFields);\n      } else {\n        UploadedVideosManager.editAccessCodes($editFields);\n      }\n    });\n\n    $(\".video_edit_container .video_save_changes\").click(function() {\n      var $current_video_fields = $(this).closest('.video_edit_container').find('.video_edit_fields');\n      var video_id = $(this).parents(\".video_edit_container\").data('video_id');\n      var player_uuid = $(this).parents(\".video_edit_container\").data('player_uuid');\n      var $errorMessage = $(\"#video_edit_container_\" + video_id).find('.video_edit_fields .video_error_message');\n\n      var updated_video_data = {\n        id: video_id\n      };\n      if (can_edit_attribute.name) {\n        updated_video_data.name = $current_video_fields.find('.edit_video_name').val();\n      }\n      if (can_edit_attribute.description) {\n        updated_video_data.description = $current_video_fields.find('.edit_video_description').val();\n      }\n\n      $.ajax({\n        url: '/uploader_widget/' + player_uuid + '/update_uploaded_video.json',\n        type: 'patch',\n        headers: {'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')},\n        data: {\n          secret: secret,\n          uploader_uuid: uploader_uuid,\n          video: updated_video_data\n        },\n        success: function(data) {\n          var $edit_container = $(\"#video_edit_container_\" + updated_video_data.id);\n          $edit_container.find('.video_edit_fields').hide();\n          var video_name = data.name;\n          if (video_name.length > 40) {\n            video_name = video_name.slice(0, 37) + \"...\";\n          }\n          $edit_container.find('.video_name a').html(video_name);\n\n          $current_video_fields.find('.edit_video_name').val(data.name);\n          $current_video_fields.find('.edit_video_description').val(data.description);\n          $errorMessage.hide();\n        },\n        error: function(data) {\n          $errorMessage.html(\"<ul><li>You can no longer edit this video</li></ul>\").show();\n        }\n      });\n    });\n\n    $(\"#enable_access_manager\").change(function () {\n      $(this).closest(\".video_edit_container\").find(\"#access_manager_form\").slideToggle();\n    });\n  },\n  initThumbnailUploader: function() {\n    $(\".thumbnail-uploader\").each(function(index) {\n      var newUploader = Uploader.create($(this), {\n        template: \"thumbnail-uploader-tmpl\",\n        validation: Uploader.imageValidation()\n      });\n      $(newUploader).on(\"complete\", function(event, id, name, responseJSON, xhr) {\n        var videoId = $(this).data(\"videoId\");\n        var updateSplashPath = $(this).data(\"updateSplashPath\");\n        var key = newUploader.fineUploader('getKey', id);\n        UploadedVideosManager.handleCompletedUpload(key, videoId, updateSplashPath);\n      });\n    });\n  },\n\n  handleCompletedUpload: function(uploadUrl, videoId, updateSplashPath) {\n    var $errorMessage = $(\"#video_edit_container_\" + videoId).find('.thumbnail_error_message');\n    $.ajax({\n      url: updateSplashPath,\n      type: 'patch',\n      headers: {'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')},\n      data: {\n        secret: secret,\n        uploader_uuid: uploader_uuid,\n        video: {\n          id: videoId\n        },\n        upload_url: uploadUrl\n      },\n      success: function (response) {\n        $errorMessage.hide();\n        // Show new thumbnails\n        $(\"#video_edit_container_\" + videoId).find('img.video_thumbnail').attr('src', response.url);\n        // Reloading the page forces the path variable for the custom thumbnail to generate a new path, which avoids having multiple thumbnails using the same path.\n        location.reload();\n      },\n      error: function (response) {\n        var data = $.parseJSON(response.responseText);\n        $errorMessage.html(\"<ul><li>\" + data.error + \"</li></ul>\").show();\n      }\n    });\n  },\n\n  notifyParent: function() {\n    if (parent.postMessage) {\n      var msg = { \"name\":\"vidyard:uploader:complete\", \"data\":[] };\n\n      $('.video_edit_container').each(function(){\n        var $this = $(this);\n        msg.data.push({\n          \"video_id\": $this.data('video_id'),\n          \"player_uuid\": $this.data('player_uuid')\n        });\n      });\n\n      parent.postMessage(JSON.stringify(msg), '*');\n    }\n  },\n\n  setupSavePopup: function() {\n    if (SavePopup !== undefined) {\n      this.popup = SavePopup.create('#security_access_form');\n    }\n  },\n\n  init: function() {\n    UploadedVideosManager.showVideoEditContainerIfHasErrors();\n    UploadedVideosManager.setupListeners();\n    UploadedVideosManager.initThumbnailUploader();\n    UploadedVideosManager.notifyParent();\n    this.setupSavePopup();\n  }\n};\n"},q5HP:function(e,t){e.exports=function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse|join|map|wrap)$/))continue;e[t]=this[t]}return e}},qC07:function(e,t){e.exports='videojs.addLanguage("fr",{\n "Play": "Lecture",\n "Pause": "Pause",\n "Current Time": "Temps actuel",\n "Duration Time": "Dure",\n "Remaining Time": "Temps restant",\n "Stream Type": "Type de flux",\n "LIVE": "EN DIRECT",\n "Loaded": "Charg",\n "Progress": "Progression",\n "Fullscreen": "Plein cran",\n "Non-Fullscreen": "Fentr",\n "Mute": "Sourdine",\n "Unmuted": "Son activ",\n "Playback Rate": "Vitesse de lecture",\n "Subtitles": "Sous-titres",\n "subtitles off": "Sous-titres dsactivs",\n "Captions": "Sous-titres",\n "captions off": "Sous-titres dsactivs",\n "Chapters": "Chapitres",\n "You aborted the video playback": "Vous avez interrompu la lecture de la vido.",\n "A network error caused the video download to fail part-way.": "Une erreur de rseau a interrompu le tlchargement de la vido.",\n "The video could not be loaded, either because the server or network failed or because the format is not supported.": "Cette vido n\'a pas pu tre charge, soit parce que le serveur ou le rseau a chou ou parce que le format n\'est pas reconnu.",\n "The video playback was aborted due to a corruption problem or because the video used features your browser did not support.": "La lecture de la vido a t interrompue  cause d\'un problme de corruption ou parce que la vido utilise des fonctionnalits non prises en charge par votre navigateur.",\n "No compatible source was found for this video.": "Aucune source compatible n\'a t trouve pour cette vido."\n});\n'},qjYJ:function(e,t,n){var i=n("ZVcv");e.exports=function e(t){return i(t).split("")}},"qqu+":function(e,t,n){var i=n("ZVcv");e.exports=function e(t){return i(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},s1fb:function(e,t,n){(function(t){e.exports=t["s"]=n("Y9tD")}).call(this,n("yLpj"))},sLcg:function(e,t,n){var i=n("ZVcv");e.exports=function e(t,n){t=i(t);n=i(n);var r=!n?-1:t.indexOf(n);return~r?t.slice(r+n.length,t.length):t}},shmF:function(e,t){e.exports="/*global $, _, moment, bootbox */\n\nvar Uploader = {\n\n  displayTicks: 0,\n  maxProgressSamples: [15, 10, 7],\n  maxImageSize: 1024 * 1024 * 3,\n\n  create: function(el, options) {\n\n    var defaultOptions = {\n      request: {\n        endpoint: el.data(\"s3Url\"),\n        accessKey: el.data(\"s3AccessKey\")\n      },\n      signature: {\n        endpoint: el.data('signingUrl') || '/api/v1.1/upload/signed_request',\n        version: el.data('signingUrl') ? (el.data('signingVersion') || 2) : 4,\n      },\n      chunking: {\n        enabled: true\n      },\n      resume: {\n        enabled: true\n      },\n      retry: {\n        enableAuto: true,\n        maxAutoAttempts: 10\n      },\n      iframeSupport: {\n        localBlankPagePath: \"/blank.html\"\n      },\n      multiple: typeof el.data(\"multiple\") === 'undefined' ? true : el.data(\"multiple\"),\n      objectProperties: {\n        key: function(fileId) {\n          return Uploader.key(el, fileId);\n        },\n        friendlyName: function(fileId) {\n          var filename = el.fineUploader('getName', fileId);\n          var friendly = Uploader.friendlyName(filename);\n          return friendly;\n        }\n      },\n      text: {\n        formatProgress: \"{percent}% of {total_size}\"\n      },\n      template: el.data(\"templateId\") || (el.attr(\"id\") + \"-tmpl\"),\n      validation: Uploader.videoValidation(el.data(\"sizeLimit\"), el.data(\"itemLimit\"), el.data(\"allowAudio\")),\n      uploadSuccess: {},\n      showMessage: function(message) {\n        bootbox.alert({\n          message: message,\n          title: \"Error\",\n          className: \"warning-dialog\"\n        });\n      }\n    };\n\n    // Success URL is optional so only include it if provided\n    if (el.data(\"successUrl\")) {\n      defaultOptions.uploadSuccess.endpoint = el.data(\"successUrl\");\n    }\n\n    // Include the CSRF token if it exists on the page\n    if ($('meta[name=\"csrf-token\"]').length) {\n      defaultOptions.uploadSuccess.customHeaders = {\n        'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n      };\n    }\n\n    // If a validation was passed, ignore the default option\n    if (options && options.validation) {\n      defaultOptions.validation = {};\n    }\n\n    // Extend defaultOptions with provided param to override HTML data values\n    defaultOptions = $.extend(true, defaultOptions, options);\n    el.fineUploaderS3(defaultOptions);\n\n    // Add some default UI actions to the event handlers that can apply to most templates.\n    el.on(\"statusChange\", function(event, id, oldStatus, newStatus) {\n      // Remove the animation on the paused upload progress bar\n      if (newStatus == \"paused\" || oldStatus == \"paused\") {\n        el.find('.qq-file-id-' + id + ' .progress').toggleClass('progress-striped');\n      }\n\n      el.find('.qq-file-id-' + id + ' .clock').hide();\n    });\n\n    el.on(\"upload\", function (event, id, name) {\n      if ($('#wizard-360-video').hasClass('active')) {\n        el.fineUploaderS3('setUploadSuccessEndpoint', (el.data(\"successUrl\") + '?is_360=true'));\n      }\n      // Remove the dropzone when files have started uploading\n      el.find('.dropzone').addClass(\"compact\");\n      // Add a spinner to indicate progress\n      el.find('.total-progress-spinner').addClass(\"active fa-spin\");\n    });\n\n    el.on(\"allComplete\", function(event, succeeded, failed) {\n      // If none of the uploads have failed then show the dropzone again and remove spinner\n      if (failed.length === 0) {\n        el.find('.dropzone').removeClass(\"compact\");\n        el.find('.total-progress-spinner').removeClass(\"active fa-spin\").addClass(\"complete\");\n      }\n    });\n\n    el.on(\"cancel\", function(event, id, name) {\n      // If an upload has been cancelled check if there are any others uploading before showing the dropzone.\n      // Note: getInProgress will return the currently cancelled download as well, which is why we're checking for 1 download\n      if (el.fineUploader('getInProgress') <= 1) {\n        el.find('.dropzone').removeClass(\"compact\");\n      }\n    });\n\n    el.on(\"progress\", function(event, id, name, uploadedBytes, totalBytes) {\n      var progressStatus = el.find('.qq-file-id-' + id + ' .time-remaining .estimate');\n\n      if (uploadedBytes >= totalBytes) {\n        progressStatus.text('Complete');\n        return;\n      }\n\n      Uploader.saveProgress(id, uploadedBytes, totalBytes);\n\n      if (Uploader.displayTicks < 20) {\n        ++Uploader.displayTicks;\n        return;\n      }\n\n      Uploader.displayTicks = 0;\n\n      var remainingInSeconds = Uploader.remainingTimeInSeconds(id);\n\n      if (remainingInSeconds) {\n        var remaining = moment.duration(remainingInSeconds, 'seconds').humanize();\n        progressStatus.text(remaining);\n      }\n    });\n\n    return el;\n  },\n\n  progressTicks: 0,\n\n  saveProgress: function(id, uploadedBytes, totalBytes) {\n    if (!Uploader.progress) {\n      Uploader.progress = {};\n    }\n\n    if (!Uploader.progress[id]) {\n      Uploader.progress[id] = { totalBytes: totalBytes, uploaded: [] };\n    }\n\n    var progress = Uploader.progress[id];\n\n    // reduce the sampling rate\n    if (Uploader.progressTicks < 4) {\n      ++Uploader.progressTicks;\n      return;\n    }\n\n    Uploader.progressTicks = 0;\n\n    var latest = {\n      uploadedBytes: uploadedBytes,\n      timeInMs: Date.now(),\n      remaining: []\n    };\n\n    previous = _.last(progress.uploaded);\n\n    latest.remaining.push(Uploader.estimateRemaining(previous, latest, totalBytes));\n\n    // run triple running mean to try for a better approximation of completion time\n    // https://climategrog.wordpress.com/2013/05/19/triple-running-mean-filters/\n    _.each(Uploader.maxProgressSamples, function(sample_size, index) {\n      var samples = _.chain(progress.uploaded)\n        .map(function(uploaded) {\n          return uploaded.remaining[index];\n        })\n        .compact()\n        .value();\n\n      var last = _.last(progress.uploaded);\n\n      var previousMean = last ? last.remaining[index + 1] : null;\n\n      var mean = Uploader.mean(samples, latest.remaining[index], previousMean, sample_size);\n\n      latest.remaining.push(mean);\n    });\n\n    progress.uploaded.push(latest);\n\n    if (progress.uploaded.length > Uploader.maxProgressSamples[0]) {\n      progress.uploaded.shift();\n    }\n  },\n\n  // calculate the mean using the current + latest samples.  Use a recursive\n  // calculation if there is a previous mean value to start from.\n  mean: function(samples, latest, previousMean, size) {\n    if (!samples || !latest ||\n      (samples.length < (size - 1))) {\n      return null;\n    }\n\n    var latestMean = 0;\n\n    if (previousMean) {\n      latestMean = previousMean + ((latest - _.first(samples)) / samples.length);\n    } else {\n      var total = _.reduce(samples, function(memo, data) {\n        return memo + data;\n      }, latest);\n\n      latestMean = total / (samples.length + 1);\n    }\n\n    return Math.floor(latestMean + 0.5);\n  },\n\n  remainingTimeInSeconds: function(id) {\n    var progress = Uploader.progress[id];\n\n    if (!progress || !progress.uploaded.length) {\n      return null;\n    }\n\n    var lastProgress = _.last(progress.uploaded);\n\n    return _.last(lastProgress.remaining);\n  },\n\n  estimateRemaining: function(previousProgress, currentProgress, totalBytes) {\n    if (!previousProgress || !currentProgress) { return null; }\n\n    if (currentProgress.uploadedBytes < previousProgress.uploadedBytes) { return null; }\n\n    var progressBytes = currentProgress.uploadedBytes - previousProgress.uploadedBytes;\n\n    var elapsedInMs = currentProgress.timeInMs - previousProgress.timeInMs;\n\n    var remainingBytes = totalBytes - currentProgress.uploadedBytes;\n\n    var remainingTimeInMs = (remainingBytes / progressBytes) * elapsedInMs;\n\n    return Math.floor((remainingTimeInMs / 1000) + 0.5);\n  },\n\n  key: function(el, fileId) {\n    var filename = el.fineUploader('getName', fileId);\n    var uuid = el.fineUploader('getUuid', fileId);\n    var ext = filename.substr(filename.lastIndexOf('.') + 1);\n    // Ensure that the video name is 100 characters or less\n    el.fineUploader('setName', fileId, Uploader.friendlyName(filename).substr(0, 100) + '.' + ext);\n    return (el.data(\"s3Folder\") || \"uploads\") + '/' + uuid + '.' + ext;\n  },\n\n  friendlyName: function(filename) {\n    return filename.substr(0, filename.lastIndexOf('.'));\n  },\n\n  videoValidation: function(sizeLimit, itemLimit, allowAudio) {\n    // Safari has issues with using MIME types with Fineuploader, so we'll use file extensions in all desktop browsers instead.\n    var acceptFiles = [\n      '.3g2', '.3gp', '.3gp2', '.3gpp', '.3gpp2', '.asf', '.avi', '.f4v', '.flv', '.highwinds',\n      '.m4v', '.mkv', '.mov', '.mp4', '.mpeg', '.mpg', '.ogv', '.ogx', '.ogg', '.rm', '.webm', '.wmv'\n    ];\n\n    if (allowAudio) {\n      acceptFiles.push('.mp3', '.wav', '.aiff', '.aif', '.wma', '.m4a', '.flac')\n    }\n\n    var allowedExtensions = [];\n    _.each(acceptFiles, function(str) {\n      allowedExtensions.push(str.substring(1));\n    });\n\n    if (browser.isPlatform('mobile')) {\n      // If we don't use MIME types on mobile devices, UX suffers. They'll be given the option of taking pictures and files won't be sorted by video.\n      acceptFiles = [\n        'video/*', 'video/3gpp', 'video/3gpp2', 'video/mp4', 'video/ogg', 'video/x-flv', 'video/x-m4v'\n      ];\n\n      if (allowAudio) {\n        acceptFiles.push('audio/mpeg', 'audio/wav', 'audio/aiff', 'audio/x-ms-wma', 'audio/mp4', 'audio/ogg', 'audio/flac')\n      }\n    }\n\n    return {\n      acceptFiles: acceptFiles,\n      allowedExtensions: allowedExtensions,\n      sizeLimit: (sizeLimit || 16106127360),\n      itemLimit: itemLimit || 0\n    };\n  },\n\n  imageValidation: function(sizeLimit) {\n    return {\n      acceptFiles: ['image/*'],\n      allowedExtensions: ['jpg', 'jpeg', 'jpe', 'jif', 'jfif', 'jfi', 'png', 'gif'],\n      sizeLimit: (sizeLimit || Uploader.maxImageSize)\n    };\n  },\n\n  captionValidation: function(sizeLimit) {\n    return {\n      acceptFiles: ['.srt', '.vtt'],\n      allowedExtensions: ['srt', 'vtt'],\n      sizeLimit: (sizeLimit || 1024000)\n    };\n  },\n\n  csvValidation: function(sizeLimit) {\n    return {\n      acceptFiles: ['.csv'],\n      allowedExtensions: ['csv'],\n      sizeLimit: (sizeLimit || 1024000)\n    };\n  },\n\n  faviconValidation: function(sizeLimit) {\n    return {\n      acceptFiles: ['image/x-icon', 'image/vnd.microsoft.icon'],\n      allowedExtensions: ['ico', 'x-icon', 'vnd.microsoft.icon'],\n      sizeLimit: (sizeLimit || Uploader.maxImageSize)\n    };\n  }\n};\n"},t3ps:function(e,t){e.exports="function tagFieldSetup (existing_tags, form_base_type) {\n  var parsedTags = existing_tags.replace(/&quot;/g,'\"').replace(/\\\\&#39;/g,'\\'');\n  existing_tags = JSON.parse(parsedTags);\n  var TagCollection = new TagSet.init();\n\n  TagCollection.setup({\n    $input_container: $(\"#input-tags\"),\n    $tag_field_container: $(\"#valid-tags\"),\n    preset_tags: existing_tags,\n    max_characters: 100,\n    validator_options: {\n      alphanumeric_tags_only: false,\n    },\n    invalid_characters: ['<', '>'],\n    show_suggestions: true,\n    tagSuggestionsURL: \"/api/v1/tags/names?query=%QUERY\",\n    tag_appearance: {\n      postfix: \"<div class='remove-button'>x</div>\",\n      hidden_inputs: true,\n      hidden_input_name: form_base_type + \"[tags][]\"\n    },\n    sorting_options: {\n      alphabetical_sort: true\n    },\n    onAdd: function(tag_model) {\n      this.$tag_field_container.closest('form').trigger('rescan.areYouSure');\n      self.$(\"div[data-tag-id='\" + tag_model.id + \"']\").click(function() {\n        TagCollection.removeTag(tag_model);\n      });\n\n      $('#empty-tags').remove();\n    },\n    onRemove: function(tag_model) {\n      this.$tag_field_container.closest('form').trigger('rescan.areYouSure');\n\n      if (TagCollection.isEmpty()) {\n        this.$tag_field_container.closest('form').append(\"<input type='hidden' id='empty-tags' name='\" + form_base_type + \"[tags]\" + \"' value='[]'>\");\n      }\n    },\n    onValidationSuccess: function(tag_model) {\n      $(\"#error-box\").removeClass('alert-warning');\n      $(\"#error-box\").addClass('display-none');\n    },\n    onValidationFailure: function(error) {\n      $(\"#error-box\").removeClass('display-none');\n      $(\"#error-box\").html(error.error).addClass('alert-warning');\n    },\n    hideErrors: function() {\n      $(\"#error-box\").removeClass('alert-warning');\n      $(\"#error-box\").addClass('display-none');\n    }\n  });\n}\n"},t9FE:function(e,t,n){(function(t){e.exports=n;function n(e,t){if(i("noDeprecation")){return e}var n=false;function r(){if(!n){if(i("throwDeprecation")){throw new Error(t)}else if(i("traceDeprecation")){console.trace(t)}else{console.warn(t)}n=true}return e.apply(this,arguments)}return r}function i(e){try{if(!t.localStorage)return false}catch(e){return false}var n=t.localStorage[e];if(null==n)return false;return String(n).toLowerCase()==="true"}}).call(this,n("yLpj"))},tNUG:function(e,t,n){n("8rVx")(n("RX5K"))},tP1i:function(e,t,n){var i,r;var o,s,a;var i,l;var c,u,d;var i,p;var i,h,f;var i,m;var i,h,g;var i,h,v;var i,h,y;var i,h,b;var i,h,_;var i,h,x;var i,r;(function(o,s){if(true){!(i=[n("EVdn")],r=function(e){return s(o,e)}.apply(t,i),r!==undefined&&(e.exports=r))}else{}})(window,(function e(t,n){"use strict";var i=Array.prototype.slice;var r=t.console;var o=typeof r=="undefined"?function(){}:function(e){r.error(e)};function s(e,r,s){s=s||n||t.jQuery;if(!s){return}if(!r.prototype.option){r.prototype.option=function(e){if(!s.isPlainObject(e)){return}this.options=s.extend(true,this.options,e)}}s.fn[e]=function(e){if(typeof e=="string"){var t=i.call(arguments,1);return l(this,e,t)}c(this,e);return this};function l(t,n,i){var r;var a="$()."+e+'("'+n+'")';t.each((function(t,l){var c=s.data(l,e);if(!c){o(e+" not initialized. Cannot call methods, i.e. "+a);return}var u=c[n];if(!u||n.charAt(0)=="_"){o(a+" is not a valid method");return}var d=u.apply(c,i);r=r===undefined?d:r}));return r!==undefined?r:t}function c(t,n){t.each((function(t,i){var o=s.data(i,e);if(o){o.option(n);o._init()}else{o=new r(i,n);s.data(i,e,o)}}))}a(s)}function a(e){if(!e||e&&e.bridget){return}e.bridget=s}a(n||t.jQuery);return s}));(function(e,t){if(true){!(s=t,a={id:"ev-emitter/ev-emitter",exports:{},loaded:false},o=typeof s==="function"?s.call(a.exports,n,a.exports,a):s,a.loaded=true,o===undefined&&(o=a.exports))}else{}})(typeof window!="undefined"?window:this,(function(){function e(){}var t=e.prototype;t.on=function(e,t){if(!e||!t){return}var n=this._events=this._events||{};var i=n[e]=n[e]||[];if(i.indexOf(t)==-1){i.push(t)}return this};t.once=function(e,t){if(!e||!t){return}this.on(e,t);var n=this._onceEvents=this._onceEvents||{};var i=n[e]=n[e]||{};i[t]=true;return this};t.off=function(e,t){var n=this._events&&this._events[e];if(!n||!n.length){return}var i=n.indexOf(t);if(i!=-1){n.splice(i,1)}return this};t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(!n||!n.length){return}var i=0;var r=n[i];t=t||[];var o=this._onceEvents&&this._onceEvents[e];while(r){var s=o&&o[r];if(s){this.off(e,r);delete o[r]}r.apply(this,t);i+=s?0:1;r=n[i]}return this};return e}));(function(e,n){"use strict";if(true){!(i=[],l=function(){return n()}.apply(t,i))}else{}})(window,(function e(){"use strict";function t(e){var t=parseFloat(e);var n=e.indexOf("%")==-1&&!isNaN(t);return n&&t}function n(){}var i=typeof console=="undefined"?n:function(e){console.error(e)};var r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];var o=r.length;function s(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0;t<o;t++){var n=r[t];e[n]=0}return e}function a(e){var t=getComputedStyle(e);if(!t){i("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? "+"See http://bit.ly/getsizebug1")}return t}var l=false;var c;function u(){if(l){return}l=true;var e=document.createElement("div");e.style.width="200px";e.style.padding="1px 2px 3px 4px";e.style.borderStyle="solid";e.style.borderWidth="1px 2px 3px 4px";e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var i=a(e);d.isBoxSizeOuter=c=t(i.width)==200;n.removeChild(e)}function d(e){u();if(typeof e=="string"){e=document.querySelector(e)}if(!e||typeof e!="object"||!e.nodeType){return}var n=a(e);if(n.display=="none"){return s()}var i={};i.width=e.offsetWidth;i.height=e.offsetHeight;var l=i.isBorderBox=n.boxSizing=="border-box";for(var d=0;d<o;d++){var p=r[d];var h=n[p];var f=parseFloat(h);i[p]=!isNaN(f)?f:0}var m=i.paddingLeft+i.paddingRight;var g=i.paddingTop+i.paddingBottom;var v=i.marginLeft+i.marginRight;var y=i.marginTop+i.marginBottom;var b=i.borderLeftWidth+i.borderRightWidth;var _=i.borderTopWidth+i.borderBottomWidth;var x=l&&c;var w=t(n.width);if(w!==false){i.width=w+(x?0:m+b)}var k=t(n.height);if(k!==false){i.height=k+(x?0:g+_)}i.innerWidth=i.width-(m+b);i.innerHeight=i.height-(g+_);i.outerWidth=i.width+v;i.outerHeight=i.height+y;return i}return d}));(function(e,t){"use strict";if(true){!(u=t,d={id:"desandro-matches-selector/matches-selector",exports:{},loaded:false},c=typeof u==="function"?u.call(d.exports,n,d.exports,d):u,d.loaded=true,c===undefined&&(c=d.exports))}else{}})(window,(function e(){"use strict";var t=function(){var e=Element.prototype;if(e.matches){return"matches"}if(e.matchesSelector){return"matchesSelector"}var t=["webkit","moz","ms","o"];for(var n=0;n<t.length;n++){var i=t[n];var r=i+"MatchesSelector";if(e[r]){return r}}}();return function e(n,i){return n[t](i)}}));(function(e,n){if(true){!(i=[c],p=function(t){return n(e,t)}.apply(t,i))}else{}})(window,(function e(t,n){var i={};i.extend=function(e,t){for(var n in t){e[n]=t[n]}return e};i.modulo=function(e,t){return(e%t+t)%t};i.makeArray=function(e){var t=[];if(Array.isArray(e)){t=e}else if(e&&typeof e.length=="number"){for(var n=0;n<e.length;n++){t.push(e[n])}}else{t.push(e)}return t};i.removeFrom=function(e,t){var n=e.indexOf(t);if(n!=-1){e.splice(n,1)}};i.getParent=function(e,t){while(e!=document.body){e=e.parentNode;if(n(e,t)){return e}}};i.getQueryElement=function(e){if(typeof e=="string"){return document.querySelector(e)}return e};i.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};i.filterFindElements=function(e,t){e=i.makeArray(e);var r=[];e.forEach((function(e){if(!(e instanceof HTMLElement)){return}if(!t){r.push(e);return}if(n(e,t)){r.push(e)}var i=e.querySelectorAll(t);for(var o=0;o<i.length;o++){r.push(i[o])}}));return r};i.debounceMethod=function(e,t,n){var i=e.prototype[t];var r=t+"Timeout";e.prototype[t]=function(){var e=this[r];if(e){clearTimeout(e)}var t=arguments;var o=this;this[r]=setTimeout((function(){i.apply(o,t);delete o[r]}),n||100)}};i.docReady=function(e){var t=document.readyState;if(t=="complete"||t=="interactive"){setTimeout(e)}else{document.addEventListener("DOMContentLoaded",e)}};i.toDashed=function(e){return e.replace(/(.)([A-Z])/g,(function(e,t,n){return t+"-"+n})).toLowerCase()};var r=t.console;i.htmlInit=function(e,n){i.docReady((function(){var o=i.toDashed(n);var s="data-"+o;var a=document.querySelectorAll("["+s+"]");var l=document.querySelectorAll(".js-"+o);var c=i.makeArray(a).concat(i.makeArray(l));var u=s+"-options";var d=t.jQuery;c.forEach((function(t){var i=t.getAttribute(s)||t.getAttribute(u);var o;try{o=i&&JSON.parse(i)}catch(e){if(r){r.error("Error parsing "+s+" on "+t.className+": "+e)}return}var a=new e(t,o);if(d){d.data(t,n,a)}}))}))};return i}));(function(e,n){if(true){!(i=[o,l],h=n,f=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t,n){"use strict";function i(e){for(var t in e){return false}t=null;return true}var r=document.documentElement.style;var o=typeof r.transition=="string"?"transition":"WebkitTransition";var s=typeof r.transform=="string"?"transform":"WebkitTransform";var a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o];var l={transform:s,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"};function c(e,t){if(!e){return}this.element=e;this.layout=t;this.position={x:0,y:0};this._create()}var u=c.prototype=Object.create(t.prototype);u.constructor=c;u._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};u.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};u.getSize=function(){this.size=n(this.element)};u.css=function(e){var t=this.element.style;for(var n in e){var i=l[n]||n;t[i]=e[n]}};u.getPosition=function(){var e=getComputedStyle(this.element);var t=this.layout._getOption("originLeft");var n=this.layout._getOption("originTop");var i=e[t?"left":"right"];var r=e[n?"top":"bottom"];var o=this.layout.size;var s=i.indexOf("%")!=-1?parseFloat(i)/100*o.width:parseInt(i,10);var a=r.indexOf("%")!=-1?parseFloat(r)/100*o.height:parseInt(r,10);s=isNaN(s)?0:s;a=isNaN(a)?0:a;s-=t?o.paddingLeft:o.paddingRight;a-=n?o.paddingTop:o.paddingBottom;this.position.x=s;this.position.y=a};u.layoutPosition=function(){var e=this.layout.size;var t={};var n=this.layout._getOption("originLeft");var i=this.layout._getOption("originTop");var r=n?"paddingLeft":"paddingRight";var o=n?"left":"right";var s=n?"right":"left";var a=this.position.x+e[r];t[o]=this.getXValue(a);t[s]="";var l=i?"paddingTop":"paddingBottom";var c=i?"top":"bottom";var u=i?"bottom":"top";var d=this.position.y+e[l];t[c]=this.getYValue(d);t[u]="";this.css(t);this.emitEvent("layout",[this])};u.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"};u.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"};u._transitionTo=function(e,t){this.getPosition();var n=this.position.x;var i=this.position.y;var r=parseInt(e,10);var o=parseInt(t,10);var s=r===this.position.x&&o===this.position.y;this.setPosition(e,t);if(s&&!this.isTransitioning){this.layoutPosition();return}var a=e-n;var l=t-i;var c={};c.transform=this.getTranslate(a,l);this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true})};u.getTranslate=function(e,t){var n=this.layout._getOption("originLeft");var i=this.layout._getOption("originTop");e=n?e:-e;t=i?t:-t;return"translate3d("+e+"px, "+t+"px, 0)"};u.goTo=function(e,t){this.setPosition(e,t);this.layoutPosition()};u.moveTo=u._transitionTo;u.setPosition=function(e,t){this.position.x=parseInt(e,10);this.position.y=parseInt(t,10)};u._nonTransition=function(e){this.css(e.to);if(e.isCleaning){this._removeStyles(e.to)}for(var t in e.onTransitionEnd){e.onTransitionEnd[t].call(this)}};u.transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t=this._transn;for(var n in e.onTransitionEnd){t.onEnd[n]=e.onTransitionEnd[n]}for(n in e.to){t.ingProperties[n]=true;if(e.isCleaning){t.clean[n]=true}}if(e.from){this.css(e.from);var i=this.element.offsetHeight;i=null}this.enableTransition(e.to);this.css(e.to);this.isTransitioning=true};function d(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}var p="opacity,"+d(s);u.enableTransition=function(){if(this.isTransitioning){return}var e=this.layout.options.transitionDuration;e=typeof e=="number"?e+"ms":e;this.css({transitionProperty:p,transitionDuration:e,transitionDelay:this.staggerDelay||0});this.element.addEventListener(a,this,false)};u.onwebkitTransitionEnd=function(e){this.ontransitionend(e)};u.onotransitionend=function(e){this.ontransitionend(e)};var h={"-webkit-transform":"transform"};u.ontransitionend=function(e){if(e.target!==this.element){return}var t=this._transn;var n=h[e.propertyName]||e.propertyName;delete t.ingProperties[n];if(i(t.ingProperties)){this.disableTransition()}if(n in t.clean){this.element.style[e.propertyName]="";delete t.clean[n]}if(n in t.onEnd){var r=t.onEnd[n];r.call(this);delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])};u.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(a,this,false);this.isTransitioning=false};u._removeStyles=function(e){var t={};for(var n in e){t[n]=""}this.css(t)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};u.removeTransitionStyles=function(){this.css(f)};u.stagger=function(e){e=isNaN(e)?0:e;this.staggerDelay=e+"ms"};u.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:""});this.emitEvent("remove",[this])};u.remove=function(){if(!o||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",(function(){this.removeElem()}));this.hide()};u.reveal=function(){delete this.isHidden;this.css({display:""});var e=this.layout.options;var t={};var n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:true,onTransitionEnd:t})};u.onRevealTransitionEnd=function(){if(!this.isHidden){this.emitEvent("reveal")}};u.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity){return"opacity"}for(var n in t){return n}};u.hide=function(){this.isHidden=true;this.css({display:""});var e=this.layout.options;var t={};var n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:true,onTransitionEnd:t})};u.onHideTransitionEnd=function(){if(this.isHidden){this.css({display:"none"});this.emitEvent("hide")}};u.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return c}));(function(e,n){"use strict";if(true){!(i=[o,l,p,f],m=function(t,i,r,o){return n(e,t,i,r,o)}.apply(t,i))}else{}})(window,(function e(t,n,i,r,o){"use strict";var s=t.console;var a=t.jQuery;var l=function(){};var c=0;var u={};function d(e,t){var n=r.getQueryElement(e);if(!n){if(s){s.error("Bad element for "+this.constructor.namespace+": "+(n||e))}return}this.element=n;if(a){this.$element=a(this.element)}this.options=r.extend({},this.constructor.defaults);this.option(t);var i=++c;this.element.outlayerGUID=i;u[i]=this;this._create();var o=this._getOption("initLayout");if(o){this.layout()}}d.namespace="outlayer";d.Item=o;d.defaults={containerStyle:{position:"relative"},initLayout:true,originLeft:true,originTop:true,resize:true,resizeContainer:true,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=d.prototype;r.extend(p,n.prototype);p.option=function(e){r.extend(this.options,e)};p._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&this.options[t]!==undefined?this.options[t]:this.options[e]};d.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"};p._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);r.extend(this.element.style,this.options.containerStyle);var e=this._getOption("resize");if(e){this.bindResize()}};p.reloadItems=function(){this.items=this._itemize(this.element.children)};p._itemize=function(e){var t=this._filterFindItemElements(e);var n=this.constructor.Item;var i=[];for(var r=0;r<t.length;r++){var o=t[r];var s=new n(o,this);i.push(s)}return i};p._filterFindItemElements=function(e){return r.filterFindElements(e,this.options.itemSelector)};p.getItemElements=function(){return this.items.map((function(e){return e.element}))};p.layout=function(){this._resetLayout();this._manageStamps();var e=this._getOption("layoutInstant");var t=e!==undefined?e:!this._isLayoutInited;this.layoutItems(this.items,t);this._isLayoutInited=true};p._init=p.layout;p._resetLayout=function(){this.getSize()};p.getSize=function(){this.size=i(this.element)};p._getMeasurement=function(e,t){var n=this.options[e];var r;if(!n){this[e]=0}else{if(typeof n=="string"){r=this.element.querySelector(n)}else if(n instanceof HTMLElement){r=n}this[e]=r?i(r)[t]:n}};p.layoutItems=function(e,t){e=this._getItemsForLayout(e);this._layoutItems(e,t);this._postLayout()};p._getItemsForLayout=function(e){return e.filter((function(e){return!e.isIgnored}))};p._layoutItems=function(e,t){this._emitCompleteOnItems("layout",e);if(!e||!e.length){return}var n=[];e.forEach((function(e){var i=this._getItemLayoutPosition(e);i.item=e;i.isInstant=t||e.isLayoutInstant;n.push(i)}),this);this._processLayoutQueue(n)};p._getItemLayoutPosition=function(){return{x:0,y:0}};p._processLayoutQueue=function(e){this.updateStagger();e.forEach((function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)}),this)};p.updateStagger=function(){var e=this.options.stagger;if(e===null||e===undefined){this.stagger=0;return}this.stagger=m(e);return this.stagger};p._positionItem=function(e,t,n,i,r){if(i){e.goTo(t,n)}else{e.stagger(r*this.stagger);e.moveTo(t,n)}};p._postLayout=function(){this.resizeContainer()};p.resizeContainer=function(){var e=this._getOption("resizeContainer");if(!e){return}var t=this._getContainerSize();if(t){this._setContainerMeasure(t.width,true);this._setContainerMeasure(t.height,false)}};p._getContainerSize=l;p._setContainerMeasure=function(e,t){if(e===undefined){return}var n=this.size;if(n.isBorderBox){e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth}e=Math.max(e,0);this.element.style[t?"width":"height"]=e+"px"};p._emitCompleteOnItems=function(e,t){var n=this;function i(){n.dispatchEvent(e+"Complete",null,[t])}var r=t.length;if(!t||!r){i();return}var o=0;function s(){o++;if(o==r){i()}}t.forEach((function(t){t.once(e,s)}))};p.dispatchEvent=function(e,t,n){var i=t?[t].concat(n):n;this.emitEvent(e,i);if(a){this.$element=this.$element||a(this.element);if(t){var r=a.Event(t);r.type=e;this.$element.trigger(r,n)}else{this.$element.trigger(e,n)}}};p.ignore=function(e){var t=this.getItem(e);if(t){t.isIgnored=true}};p.unignore=function(e){var t=this.getItem(e);if(t){delete t.isIgnored}};p.stamp=function(e){e=this._find(e);if(!e){return}this.stamps=this.stamps.concat(e);e.forEach(this.ignore,this)};p.unstamp=function(e){e=this._find(e);if(!e){return}e.forEach((function(e){r.removeFrom(this.stamps,e);this.unignore(e)}),this)};p._find=function(e){if(!e){return}if(typeof e=="string"){e=this.element.querySelectorAll(e)}e=r.makeArray(e);return e};p._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();this.stamps.forEach(this._manageStamp,this)};p._getBoundingRect=function(){var e=this.element.getBoundingClientRect();var t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}};p._manageStamp=l;p._getElementOffset=function(e){var t=e.getBoundingClientRect();var n=this._boundingRect;var r=i(e);var o={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return o};p.handleEvent=r.handleEvent;p.bindResize=function(){t.addEventListener("resize",this);this.isResizeBound=true};p.unbindResize=function(){t.removeEventListener("resize",this);this.isResizeBound=false};p.onresize=function(){this.resize()};r.debounceMethod(d,"onresize",100);p.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}this.layout()};p.needsResizeLayout=function(){var e=i(this.element);var t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth};p.addItems=function(e){var t=this._itemize(e);if(t.length){this.items=this.items.concat(t)}return t};p.appended=function(e){var t=this.addItems(e);if(!t.length){return}this.layoutItems(t,true);this.reveal(t)};p.prepended=function(e){var t=this._itemize(e);if(!t.length){return}var n=this.items.slice(0);this.items=t.concat(n);this._resetLayout();this._manageStamps();this.layoutItems(t,true);this.reveal(t);this.layoutItems(n)};p.reveal=function(e){this._emitCompleteOnItems("reveal",e);if(!e||!e.length){return}var t=this.updateStagger();e.forEach((function(e,n){e.stagger(n*t);e.reveal()}))};p.hide=function(e){this._emitCompleteOnItems("hide",e);if(!e||!e.length){return}var t=this.updateStagger();e.forEach((function(e,n){e.stagger(n*t);e.hide()}))};p.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)};p.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)};p.getItem=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.element==e){return n}}};p.getItems=function(e){e=r.makeArray(e);var t=[];e.forEach((function(e){var n=this.getItem(e);if(n){t.push(n)}}),this);return t};p.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t);if(!t||!t.length){return}t.forEach((function(e){e.remove();r.removeFrom(this.items,e)}),this)};p.destroy=function(){var e=this.element.style;e.height="";e.position="";e.width="";this.items.forEach((function(e){e.destroy()}));this.unbindResize();var t=this.element.outlayerGUID;delete u[t];delete this.element.outlayerGUID;if(a){a.removeData(this.element,this.constructor.namespace)}};d.data=function(e){e=r.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&u[t]};d.create=function(e,t){var n=h(d);n.defaults=r.extend({},d.defaults);r.extend(n.defaults,t);n.compatOptions=r.extend({},d.compatOptions);n.namespace=e;n.data=d.data;n.Item=h(o);r.htmlInit(n,e);if(a&&a.bridget){a.bridget(e,n)}return n};function h(e){function t(){e.apply(this,arguments)}t.prototype=Object.create(e.prototype);t.prototype.constructor=t;return t}var f={ms:1,s:1e3};function m(e){if(typeof e=="number"){return e}var t=e.match(/(^\d*\.?\d*)(\w*)/);var n=t&&t[1];var i=t&&t[2];if(!n.length){return 0}n=parseFloat(n);var r=f[i]||1;return n*r}d.Item=o;return d}));(function(e,n){if(true){!(i=[m],h=n,g=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t){"use strict";function n(){t.Item.apply(this,arguments)}var i=n.prototype=Object.create(t.Item.prototype);var r=i._create;i._create=function(){this.id=this.layout.itemGUID++;r.call(this);this.sortData={}};i.updateSortData=function(){if(this.isIgnored){return}this.sortData.id=this.id;this.sortData["original-order"]=this.id;this.sortData.random=Math.random();var e=this.layout.options.getSortData;var t=this.layout._sorters;for(var n in e){var i=t[n];this.sortData[n]=i(this.element,this)}};var o=i.destroy;i.destroy=function(){o.apply(this,arguments);this.css({display:""})};return n}));(function(e,n){if(true){!(i=[l,m],h=n,v=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t,n){"use strict";function i(e){this.isotope=e;if(e){this.options=e.options[this.namespace];this.element=e.element;this.items=e.filteredItems;this.size=e.size}}var r=i.prototype;var o=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];o.forEach((function(e){r[e]=function(){return n.prototype[e].apply(this.isotope,arguments)}}));r.needsVerticalResizeLayout=function(){var e=t(this.isotope.element);var n=this.isotope.size&&e;return n&&e.innerHeight!=this.isotope.size.innerHeight};r._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)};r.getColumnWidth=function(){this.getSegmentSize("column","Width")};r.getRowHeight=function(){this.getSegmentSize("row","Height")};r.getSegmentSize=function(e,t){var n=e+t;var i="outer"+t;this._getMeasurement(n,i);if(this[n]){return}var r=this.getFirstItemSize();this[n]=r&&r[i]||this.isotope.size["inner"+t]};r.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)};r.layout=function(){this.isotope.layout.apply(this.isotope,arguments)};r.getSize=function(){this.isotope.getSize();this.size=this.isotope.size};i.modes={};i.create=function(e,t){function n(){i.apply(this,arguments)}n.prototype=Object.create(r);n.prototype.constructor=n;if(t){n.options=t}n.prototype.namespace=e;i.modes[e]=n;return n};return i}));(function(e,n){if(true){!(i=[m,l],h=n,y=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t,n){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";i.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();this.colYs=[];for(var e=0;e<this.cols;e++){this.colYs.push(0)}this.maxY=0};i.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var e=this.items[0];var t=e&&e.element;this.columnWidth=t&&n(t).outerWidth||this.containerWidth}var i=this.columnWidth+=this.gutter;var r=this.containerWidth+this.gutter;var o=r/i;var s=i-r%i;var a=s&&s<1?"round":"floor";o=Math[a](o);this.cols=Math.max(o,1)};i.prototype.getContainerWidth=function(){var e=this._getOption("fitWidth");var t=e?this.element.parentNode:this.element;var i=n(t);this.containerWidth=i&&i.innerWidth};i.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth;var n=t&&t<1?"round":"ceil";var i=Math[n](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);var r=this._getColGroup(i);var o=Math.min.apply(Math,r);var s=r.indexOf(o);var a={x:this.columnWidth*s,y:o};var l=o+e.size.outerHeight;var c=this.cols+1-r.length;for(var u=0;u<c;u++){this.colYs[s+u]=l}return a};i.prototype._getColGroup=function(e){if(e<2){return this.colYs}var t=[];var n=this.cols+1-e;for(var i=0;i<n;i++){var r=this.colYs.slice(i,i+e);t[i]=Math.max.apply(Math,r)}return t};i.prototype._manageStamp=function(e){var t=n(e);var i=this._getElementOffset(e);var r=this._getOption("originLeft");var o=r?i.left:i.right;var s=o+t.outerWidth;var a=Math.floor(o/this.columnWidth);a=Math.max(0,a);var l=Math.floor(s/this.columnWidth);l-=s%this.columnWidth?0:1;l=Math.min(this.cols-1,l);var c=this._getOption("originTop");var u=(c?i.top:i.bottom)+t.outerHeight;for(var d=a;d<=l;d++){this.colYs[d]=Math.max(u,this.colYs[d])}};i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};if(this._getOption("fitWidth")){e.width=this._getContainerFitWidth()}return e};i.prototype._getContainerFitWidth=function(){var e=0;var t=this.cols;while(--t){if(this.colYs[t]!==0){break}e++}return(this.cols-e)*this.columnWidth-this.gutter};i.prototype.needsResizeLayout=function(){var e=this.containerWidth;this.getContainerWidth();return e!=this.containerWidth};return i}));(function(e,n){if(true){!(i=[v,y],h=n,b=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t,n){"use strict";var i=t.create("masonry");var r=i.prototype;var o={_getElementOffset:true,layout:true,_getMeasurement:true};for(var s in n.prototype){if(!o[s]){r[s]=n.prototype[s]}}var a=r.measureColumns;r.measureColumns=function(){this.items=this.isotope.filteredItems;a.call(this)};var l=r._getOption;r._getOption=function(e){if(e=="fitWidth"){return this.options.isFitWidth!==undefined?this.options.isFitWidth:this.options.fitWidth}return l.apply(this.isotope,arguments)};return i}));(function(e,n){if(true){!(i=[v],h=n,_=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t){"use strict";var n=t.create("fitRows");var i=n.prototype;i._resetLayout=function(){this.x=0;this.y=0;this.maxY=0;this._getMeasurement("gutter","outerWidth")};i._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth+this.gutter;var n=this.isotope.size.innerWidth+this.gutter;if(this.x!==0&&t+this.x>n){this.x=0;this.y=this.maxY}var i={x:this.x,y:this.y};this.maxY=Math.max(this.maxY,this.y+e.size.outerHeight);this.x+=t;return i};i._getContainerSize=function(){return{height:this.maxY}};return n}));(function(e,n){if(true){!(i=[v],h=n,x=typeof h==="function"?h.apply(t,i):h)}else{}})(window,(function e(t){"use strict";var n=t.create("vertical",{horizontalAlignment:0});var i=n.prototype;i._resetLayout=function(){this.y=0};i._getItemLayoutPosition=function(e){e.getSize();var t=(this.isotope.size.innerWidth-e.size.outerWidth)*this.options.horizontalAlignment;var n=this.y;this.y+=e.size.outerHeight;return{x:t,y:n}};i._getContainerSize=function(){return{height:this.y}};return n}));(function(n,o){if(true){!(i=[m,l,c,p,g,v,b,_,x],r=function(e,t,i,r,s,a){return o(n,e,t,i,r,s,a)}.apply(t,i),r!==undefined&&(e.exports=r))}else{}})(window,(function e(t,n,i,r,o,s,a){var l=t.jQuery;var c=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/g,"")};var u=n.create("isotope",{layoutMode:"masonry",isJQueryFiltering:true,sortAscending:true});u.Item=s;u.LayoutMode=a;var d=u.prototype;d._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();n.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=["original-order"];for(var e in a.modes){this._initLayoutMode(e)}};d.reloadItems=function(){this.itemGUID=0;n.prototype.reloadItems.call(this)};d._itemize=function(){var e=n.prototype._itemize.apply(this,arguments);for(var t=0;t<e.length;t++){var i=e[t];i.id=this.itemGUID++}this._updateItemsSortData(e);return e};d._initLayoutMode=function(e){var t=a.modes[e];var n=this.options[e]||{};this.options[e]=t.options?o.extend(t.options,n):n;this.modes[e]=new t(this)};d.layout=function(){if(!this._isLayoutInited&&this._getOption("initLayout")){this.arrange();return}this._layout()};d._layout=function(){var e=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,e);this._isLayoutInited=true};d.arrange=function(e){this.option(e);this._getIsInstant();var t=this._filter(this.items);this.filteredItems=t.matches;this._bindArrangeComplete();if(this._isInstant){this._noTransition(this._hideReveal,[t])}else{this._hideReveal(t)}this._sort();this._layout()};d._init=d.arrange;d._hideReveal=function(e){this.reveal(e.needReveal);this.hide(e.needHide)};d._getIsInstant=function(){var e=this._getOption("layoutInstant");var t=e!==undefined?e:!this._isLayoutInited;this._isInstant=t;return t};d._bindArrangeComplete=function(){var e,t,n;var i=this;function r(){if(e&&t&&n){i.dispatchEvent("arrangeComplete",null,[i.filteredItems])}}this.once("layoutComplete",(function(){e=true;r()}));this.once("hideComplete",(function(){t=true;r()}));this.once("revealComplete",(function(){n=true;r()}))};d._filter=function(e){var t=this.options.filter;t=t||"*";var n=[];var i=[];var r=[];var o=this._getFilterTest(t);for(var s=0;s<e.length;s++){var a=e[s];if(a.isIgnored){continue}var l=o(a);if(l){n.push(a)}if(l&&a.isHidden){i.push(a)}else if(!l&&!a.isHidden){r.push(a)}}return{matches:n,needReveal:i,needHide:r}};d._getFilterTest=function(e){if(l&&this.options.isJQueryFiltering){return function(t){return l(t.element).is(e)}}if(typeof e=="function"){return function(t){return e(t.element)}}return function(t){return r(t.element,e)}};d.updateSortData=function(e){var t;if(e){e=o.makeArray(e);t=this.getItems(e)}else{t=this.items}this._getSorters();this._updateItemsSortData(t)};d._getSorters=function(){var e=this.options.getSortData;for(var t in e){var n=e[t];this._sorters[t]=p(n)}};d._updateItemsSortData=function(e){var t=e&&e.length;for(var n=0;t&&n<t;n++){var i=e[n];i.updateSortData()}};var p=function(){function e(e){if(typeof e!="string"){return e}var n=c(e).split(" ");var i=n[0];var r=i.match(/^\[(.+)\]$/);var o=r&&r[1];var s=t(o,i);var a=u.sortDataParsers[n[1]];e=a?function(e){return e&&a(s(e))}:function(e){return e&&s(e)};return e}function t(e,t){if(e){return function t(n){return n.getAttribute(e)}}return function e(n){var i=n.querySelector(t);return i&&i.textContent}}return e}();u.sortDataParsers={parseInt:function(e){return parseInt(e,10)},parseFloat:function(e){return parseFloat(e)}};d._sort=function(){var e=this.options.sortBy;if(!e){return}var t=[].concat.apply(e,this.sortHistory);var n=h(t,this.options.sortAscending);this.filteredItems.sort(n);if(e!=this.sortHistory[0]){this.sortHistory.unshift(e)}};function h(e,t){return function n(i,r){for(var o=0;o<e.length;o++){var s=e[o];var a=i.sortData[s];var l=r.sortData[s];if(a>l||a<l){var c=t[s]!==undefined?t[s]:t;var u=c?1:-1;return(a>l?1:-1)*u}}return 0}}d._mode=function(){var e=this.options.layoutMode;var t=this.modes[e];if(!t){throw new Error("No layout mode: "+e)}t.options=this.options[e];return t};d._resetLayout=function(){n.prototype._resetLayout.call(this);this._mode()._resetLayout()};d._getItemLayoutPosition=function(e){return this._mode()._getItemLayoutPosition(e)};d._manageStamp=function(e){this._mode()._manageStamp(e)};d._getContainerSize=function(){return this._mode()._getContainerSize()};d.needsResizeLayout=function(){return this._mode().needsResizeLayout()};d.appended=function(e){var t=this.addItems(e);if(!t.length){return}var n=this._filterRevealAdded(t);this.filteredItems=this.filteredItems.concat(n)};d.prepended=function(e){var t=this._itemize(e);if(!t.length){return}this._resetLayout();this._manageStamps();var n=this._filterRevealAdded(t);this.layoutItems(this.filteredItems);this.filteredItems=n.concat(this.filteredItems);this.items=t.concat(this.items)};d._filterRevealAdded=function(e){var t=this._filter(e);this.hide(t.needHide);this.reveal(t.matches);this.layoutItems(t.matches,true);return t.matches};d.insert=function(e){var t=this.addItems(e);if(!t.length){return}var n,i;var r=t.length;for(n=0;n<r;n++){i=t[n];this.element.appendChild(i.element)}var o=this._filter(t).matches;for(n=0;n<r;n++){t[n].isLayoutInstant=true}this.arrange();for(n=0;n<r;n++){delete t[n].isLayoutInstant}this.reveal(o)};var f=d.remove;d.remove=function(e){e=o.makeArray(e);var t=this.getItems(e);f.call(this,e);var n=t&&t.length;for(var i=0;n&&i<n;i++){var r=t[i];o.removeFrom(this.filteredItems,r)}};d.shuffle=function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.sortData.random=Math.random()}this.options.sortBy="random";this._sort();this._layout()};d._noTransition=function(e,t){var n=this.options.transitionDuration;this.options.transitionDuration=0;var i=e.apply(this,t);this.options.transitionDuration=n;return i};d.getFilteredItemElements=function(){return this.filteredItems.map((function(e){return e.element}))};return u}))},tacv:function(e,t,n){var i=n("Pg24");e.exports=function e(t){return i(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},tvbo:function(e,t){e.exports="/*global $, _, bowser */\n// Place your application-specific JavaScript functions and classes here\n\nfunction isUrl(url) {\n  var anchor = document.createElement('a');\n  anchor.href = url;\n  return anchor.host && anchor.host != window.location.host;\n}\n\nfunction isEmailValid(email) {\n  return new RegExp(Constants.VALID_EMAIL_REGEX).test(email || \"\");\n}\n\n// based on this StackOverflow question\n// http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction generateUuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n    return v.toString(16);\n  });\n}\n\nfunction formatDates(selector) {\n  \"use strict\";\n\n  $(selector).each(function (index, value) {\n    var inner = value.innerHTML;\n    // if the text is a number convert to date\n    if (/^\\d+$/.test(inner)) {\n      var date = new Date(parseInt(inner, 10));\n      value.innerHTML = date.toLocaleTimeString() + ' ' + date.toDateString();\n    }\n  });\n}\n\n// Wraps the standard jQuery ajax function to add a function to redirect on 401 error due to being logged out\n// All ajax requests used in the dashboard should use this function to standardize the logout process\n// and catch the logout error response appropriately\n// This function simply overwrites any existing 401 error handlers\n// Also adds retries on failed attempts, error callbacks will only be fired once out of retries\nfunction vidyardAjax(settings) {\n  \"use strict\";\n\n  // Which error status codes should we NOT retry on (ie we know for sure that retrying wont solve the problem)\n  settings.statusCodeBlacklist = settings.statusCodeBlacklist || [401];\n  // How many tries are you willing to give this operation, 1 is standard no-retries\n  settings.maxAttempts = settings.maxAttempts || 1;\n  // In ms how long do you wait between retries, default 1 second\n  settings.retryInterval = settings.retryInterval || 1000;\n  // Can have a function fire on each retry, by gives you jqXHR, textStatus, errorThrown\n  settings.onRetryCallback = settings.onRetryCallback || null;\n  // Current count of attempts\n  settings._attempts = 0;\n\n  var errorCallback = settings.hasOwnProperty('error') ? settings.error : null;\n\n  var retryCallback = function(jqXHR, textStatus, errorThrown) {\n    if (++this._attempts < this.maxAttempts && $.inArray(jqXHR.status, this.statusCodeBlacklist) === -1) {\n      if (typeof this.onRetryCallback === \"function\") {\n        this.onRetryCallback(jqXHR, textStatus, errorThrown);\n      }\n\n      // Retry the request\n      var thisAjax = this;\n      setTimeout(function() {\n        $.ajax(thisAjax);\n      }, thisAjax.retryInterval);\n    } else {\n      // Fire the error callback after we have done all the required attempts\n      if (typeof errorCallback === \"function\") {\n        // If 504 timeout response, set responseJSON so that error handlers don't break everywhere\n        if (jqXHR.status == 504 && !jqXHR.responseJSON) {\n          jqXHR.responseJSON = {\n            name: \"Oops! We can't tell if your request succeeded. Please refresh this page to confirm.\"\n          }\n        }\n        errorCallback(jqXHR, textStatus, errorThrown);\n      }\n    }\n  };\n\n  settings.error = retryCallback;\n\n  // Setup redirect logic for 401 status codes\n  var loginRedirect = function (jqXHR) {\n    var responseMessage = jqXHR.responseJSON ? jqXHR.responseJSON.error : jqXHR.responseText;\n    if (responseMessage) {\n      alert(responseMessage);\n    } else {\n      alert(\"You have been logged out of the system.\\n\\nWe are now redirecting you to the login screen.\");\n      window.location.reload(true);\n    }\n  };\n\n  if (settings.statusCode) {\n    settings.statusCode[\"401\"] = loginRedirect;\n  } else {\n    settings.statusCode = {\n      \"401\": loginRedirect\n    };\n  }\n\n  return $.ajax(settings);\n}\n\nfunction pad(number, length) {\n  \"use strict\";\n  var str = String(number);\n  while (str.length < length) {\n    str = '0' + str;\n  }\n  return str;\n}\n\nfunction SetIFrameBody(iframe, html) {\n  'use strict';\n  var doc = document,\n    domainSrc,\n    jsIframe = iframe[0];\n\n  try {\n    jsIframe.contentWindow.document.open();\n  } catch (e) {\n    domainSrc = 'javascript:var d=document.open();d.domain=\"' + doc.domain + '\";';\n    jsIframe.src = domainSrc + 'void(0);';\n  }\n  try {\n    var d = jsIframe.contentWindow.document;\n    d.write(html);\n    d.close();\n  } catch (e2) {\n    jsIframe.src = domainSrc + 'd.write(\"' + html.replace(/\"/g, '\\\\\"') + '\");d.close();';\n  }\n  return iframe;\n};\n\n// Takes an array of intervals sorted by interval start. Each interval should be an\n// array in the format [x, y] where x is the start and y is the end of the interval.\n// The result unions the intervals so that it contains only intervals that do not overlap\n// ie. [[1,4], [2,7], [9,12]] would become [[1,7], [9,12]]\nfunction UnionIntervals(sortedIntervals) {\n  'use strict';\n  var prevInterval = null;\n  var results = [];\n  _.each(sortedIntervals, function (interval) {\n    if (!prevInterval || prevInterval[1] < interval[0]) {\n      if (prevInterval) {\n        results.push(prevInterval);\n      }\n      prevInterval = [interval[0], interval[1]];\n    } else if (interval[1] > prevInterval[1]) {\n      prevInterval[1] = interval[1];\n    }\n\n  });\n  if (prevInterval) {\n    results.push(prevInterval);\n  }\n\n  return results;\n}\n\n// Get back a JSON object representing the current page's query string\nvar ParseQueryString = function() {\n  var queryString = window.location.search;\n  var parsedParams = {};\n\n  queryString.replace(\n    new RegExp(\"([^?=&]+)(=([^&]*))?\", \"g\"),\n    function (_, key, _a, value) {\n      // Check if this is an array-formatted query string key/value\n\n      // Basically, do we have array brackets and are they at the end of the\n      // key?\n      if (key.indexOf(']') === key.length - 1 && key.indexOf('[') === key.length - 2) {\n        key = key.substring(0, key.indexOf('['));\n        if (!parsedParams[key]) {\n          parsedParams[key] = [value];\n        } else {\n          parsedParams[key].push(value);\n        }\n      } else {\n        parsedParams[key] = value;\n      }\n    }\n  );\n\n  return parsedParams;\n};\n\nvar EscapeForRegex = function(value) {\n  return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n}\n\nfunction base64toBlob(base64Data, contentType) {\n  contentType = contentType || '';\n  var sliceSize = 1024;\n  var byteCharacters = atob(base64Data);\n  var bytesLength = byteCharacters.length;\n  var slicesCount = Math.ceil(bytesLength / sliceSize);\n  var byteArrays = new Array(slicesCount);\n\n  for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n    var begin = sliceIndex * sliceSize;\n    var end = Math.min(begin + sliceSize, bytesLength);\n\n    var bytes = new Array(end - begin);\n    for (var offset = begin, i = 0 ; offset < end; ++i, ++offset) {\n      bytes[i] = byteCharacters[offset].charCodeAt(0);\n    }\n    byteArrays[sliceIndex] = new Uint8Array(bytes);\n  }\n\n  return new Blob(byteArrays, { type: contentType });\n}\n\nfunction getUniqueID() {\n  // https://gist.github.com/gordonbrander/2230317\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\nvar showVYSuccessAlert = function (msg) {\n  $('#header_success').removeClass('collapse').find('.message').html(msg);\n  $('#header_notice').addClass('collapse');\n  $('#header_error').addClass('collapse');\n};\n\nvar showVYNoticeAlert = function (msg) {\n  $('#header_success').addClass('collapse');\n  $('#header_notice').removeClass('collapse').find('.message').html(msg);\n  $('#header_error').addClass('collapse');\n};\n\nvar showVYErrorAlert = function (msg) {\n  $('#header_success').addClass('collapse');\n  $('#header_notice').addClass('collapse');\n  $('#header_error').removeClass('collapse').find('.message').html(msg);\n};\n\nfunction showVYConfirmationDialog(options) {\n  function checkCallback(cb) {\n    return typeof cb === 'function' ? cb : function() { return true; };\n  }\n\n  options = options || {};\n\n  options.onConfirm = checkCallback(options.onConfirm);\n  options.onCancel = checkCallback(options.onCancel);\n\n  options.title = options.title || 'Are you sure?';\n  options.confirmLabel = options.confirmLabel || 'Confirm';\n  options.processingLabel = options.processingLabel || 'Processing';\n\n  if (options.showProcessing === undefined || options.showProcessing === null) {\n    options.showProcessing = true;\n  }\n\n  bootbox.dialog({\n    title: options.title,\n    message: options.message,\n    className: 'warning-dialog',\n    onEscape: true,\n    closeButton: false,\n    buttons: {\n      cancel: {\n        label: \"Cancel\",\n        className: 'btn-default',\n        callback: options.onCancel\n      },\n      confirm: {\n        label: options.confirmLabel,\n        className: \"btn-danger\",\n        callback: function(e) {\n          if (options.showProcessing) {\n            var target = $(e.target);\n            target.html('<i class=\"fal fa-circle-notch fa-spin\"></i>' + options.processingLabel);\n            target.attr('disabled', 'disabled');\n\n            var other = $(this).find('.btn-default');\n            other.attr('disabled', 'disabled');\n          }\n\n          return options.onConfirm(e);\n        }\n      }\n    }\n  });\n}\n\nfunction currentOrganizationID() {\n  return $('body').data('organizationId');\n}\n\nvar browser = bowser.getParser(window.navigator.userAgent);\n"},uQCq:function(e,t){e.exports=function e(t,n){if(n<1)return"";var i="";while(n>0){if(n&1)i+=t;n>>=1,t+=t}return i}},unVg:function(e,t,n){var i=n("ZVcv");var r=n("uQCq");e.exports=function e(t,n,o){t=i(t);n=~~n;if(o==null)return r(t,n);for(var e=[];n>0;e[--n]=t){}return e.join(o)}},"vY/v":function(e,t,n){n("8rVx")(n("Arg3"))},vlgO:function(e,t,n){"use strict";var i=n("8BLG");var r=n.n(i);var o=r.a},"wFd/":function(e,t){e.exports="$(function() {\n  // VIDYARD CHANGE: Added in the data callback\n  vjs.Flash['onEvent'] = function(swfID, eventName, data){\n    var player = vjs.el(swfID)['player'];\n    player.trigger({\n      type: eventName,\n      data: data\n    });\n  };\n});\n"},wXWI:function(e,t,n){n("8rVx")(n("KVgF"))},we2A:function(e,t){e.exports="if (!window.console) {\n  console = {\n    log: function() {},\n    debug: function() {},\n    info: function() {},\n    warn: function() {},\n    error: function() {}\n  };\n}\n"},xHD0:function(e,t,n){n("8rVx")(n("1rIv"))},xa7f:function(e,t){e.exports.en={errors:{messages:{expired:"has expired, please request a new one",not_found:"not found",already_confirmed:"was already confirmed, please try signing in",not_locked:"was not locked",not_saved:{one:"1 error prohibited this %{resource} from being saved:",other:"The following errors prohibited this %{resource} from being saved:"}}},devise:{failure:{already_authenticated:"You are already signed in.",unauthenticated:"You have been logged out of the system.",unconfirmed:"You have to confirm your account before continuing.",locked:"Your account is locked.",invalid:"Invalid email or password.",invalid_token:"Invalid authentication token.",timeout:"Your session expired, please sign in again to continue.",inactive:"Your account was not activated yet."},sessions:{signed_in:"Signed in successfully.",signed_out:"Signed out successfully."},hub_sessions:{signed_in:"Signed in successfully.",signed_out:"Signed out successfully."},passwords:{send_instructions:"You will receive an email with instructions about how to reset your password in a few minutes.",updated:"Your password was changed successfully. You are now signed in."},confirmations:{send_instructions:"You will receive an email with instructions about how to confirm your account in a few minutes.",confirmed:"Your account was successfully confirmed. You are now signed in."},registrations:{signed_up:"Welcome! You have signed up successfully. An email has been sent to verify your email address.",signed_up_but_unconfirmed:"A message with a confirmation link has been sent to your email address. Please open the link to activate your account.",signed_up_but_inactive:"You have signed up successfully. However, we could not sign you in because your account is not yet activated.",signed_up_but_locked:"You have signed up successfully. However, we could not sign you in because your account is locked.",updated:"You updated your account successfully.",destroyed:"Bye! Your account was successfully cancelled. We hope to see you again soon.",invalid:"Error: Invalid email or passwords do not match."},unlocks:{send_instructions:"You will receive an email with instructions about how to unlock your account in a few minutes.",unlocked:"Your account was successfully unlocked. You are now signed in."},omniauth_callbacks:{success:"Successfully authorized from %{kind} account.",failure:'Could not authorize you from %{kind} because "%{reason}".'},mailer:{confirmation_instructions:{subject:"Confirmation instructions"},reset_password_instructions:{subject:"Reset password instructions"},unlock_instructions:{subject:"Unlock Instructions"},invitation_instructions:{subject:"Vidyard is launching! Early Access and Discount Inside"}},invitations:{send_instructions:"An invitation email has been sent to %{email}.",invitation_token_invalid:"The invitation token provided is expired!  Try signing up again",updated:"Your password was set successfully. You are now signed in.",no_invitations_remaining:"No invitations remaining"}},Account:"Parent Group",account:"parent group",an_organization:"an organization",Group:"Group",group:"group",Groups:"Groups",groups:"groups",Organization:"Organization",organization:"organization",Organization_Name:"Organization Name",Organizations:"Organizations",organizations:"organizations",Parent:"Parent",parent:"parent",Parent_organization:"Parent Organization",parent_organization:"parent organization",role:"role",Sub_group:"Sub-Group",sub_group:"sub-Group",Sub_groups:"Sub-Groups",Join:"Join",Result:{one:"Result",other:"Results"},features:{parent_account:{description:"",descriptions:{short:"Use parent groups and sub groups to better organize video content, users and analytics.",long:"For organizations with many teams creating and managing video assets, parent accounts help to organize content, users and analytics. A parent group is the overarching group for your organization, and sub-groups are sub-accounts that live within the parent group for your organizations Vidyard account.",bullet_points:["Organize your Vidyard group into a parent group with one or more subgroups","Access to subgroups can be independently controlled (can have their own set of users)","Videos and players analytics are captured separately from other subgroups.","Segregate content by whatever makes sense for you business (business unit, geography, content type, etc.)"]}},custom_roles:{description:"",descriptions:{short:"Create new user roles and set specific access levels and permissions.",long:"An extension of the groups and users features available in Vidyard is the ability to set custom roles. The Custom Roles features provides permission to create new roles and change the access level of the role. By editing the permissions associated you can specify whether a role has access to perform certain actions.",bullet_points:["Player settings: Create and edit players,\n    push to YouTube, push to Facebook, etc..","Features: View analytics center,\n    view billing details, edit integrations, download video, etc. ","Users & Group: View groups,\n    create roles and invite users"]}},access_codes:{description:"Allows you to specify an access code that a user must know in order to view the Player",descriptions:{short:"Protect sensitive videos by requiring an access code before playback.",long:"Protect video content intended only for specific audiences by adding a player access code. With a player access code, the viewer has to enter the exact code before the video will begin to play.",bullet_points:["Create one or multiple access codes to gain entry to a player","Limit access to videos intended for use within your organization","Restrict access to work-in-progress video content by limiting access to a small group of reviewers","Provide access to exclusive or premium video content to paid subscribers","Set expiry dates on access codes limit the number of times a particular access code can be used"]}},request_player_access:{description:"",descriptions:{short:"Secure players by requiring viewers to request access before viewing.",long:"Control access to players by requiring viewers to enter the email and request permission from a designated request manager.  Each request is sent to the appropriate manager who can approve or deny access directly from the request email or from the Vidyard Dashboard. Upon approval, the viewer receives a link to the player allowing them to watch the video.",bullet_points:["Choose request managers from any Vidyard user within the organziation","Option to set a custom allow or deny response message","Flexiblity to automatically accept access code requests from specific domains"]}},bsp:{description:"",descriptions:{short:"Publish and distribute videos with full control over the viewer's journey and your brand.",long:"Sharing pages are a great way to publish and distribute your video content publicly, or privately while maintaining control over the viewer's journey and your brand. Sharing pages can be customized with your logo and colour or tailored through your own custom HTML and CSS.",bullet_points:["Option to fully brand sharing pages to match the look and feel of your website","Optionally allow viewers to comment on videos","Data on video engagement are pulled back into Vidyard automatically","Can be configured at parent and child group levels"]}},ip_restriction:{description:"Secures content by IP range of the user requesting access,\n    this is great for internal hubs and videos",descriptions:{short:"Control who can watch video content based on IP ranges.",long:"Using whitelisted IP ranges, you can prevent visitors outside of the specified IP blocks from watching your Vidyard players. Whitelists can be applied at both the organizational level with Group-level IP whitelists (affecting all players), and at the player level with Player-level IP whitelists (affecting each individual player).",bullet_points:["Restrict viewership to internal audiences.","Ban users from viewing your content.","Incrementally control the release of content to specific blocks of viewers."]}}}};e.exports.folders={Account:"Account",account:"accont",an_organization:"a folder",Group:"Folder",group:"folder",Groups:"Folders",groups:"folders",Organization:"Folder",organization:"folder",Organization_Name:"Folder Name",Organizations:"Folders",organizations:"folders",Parent:"Account",parent:"account",Parent_organization:"Account",parent_organization:"account",role:"team",Sub_group:"Folder",sub_group:"folder",Sub_groups:"Folders",Join:"Open",features:{parent_account:{description:"",descriptions:{short:"Use folders to better organize video content, users and analytics.",long:"For organizations with many teams creating and managing video assets, folders help to organize content, users and analytics. An account is the overarching folder for your organization, and sub-folders live within your Vidyard account.",bullet_points:["Organize your Vidyard group into a parent group with one or more subgroups","Access to subgroups can be independently controlled (can have their own set of users)","Videos and players analytics are captured separately from other subgroups.","Segregate content by whatever makes sense for you business (business unit, geography, content type, etc.)"]}},custom_roles:{description:"",descriptions:{short:"Create new user roles and set specific access levels and permissions.",long:"An extension of the groups and users features available in Vidyard is the ability to set custom roles. The Custom Roles features provides permission to create new roles and change the access level of the role. By editing the permissions associated you can specify whether a role has access to perform certain actions.",bullet_points:["Player settings: Create and edit players,\n    push to YouTube, push to Facebook, etc..","Features: View analytics center,\n    view billing details, edit integrations, download video, etc. ","Users & Group: View groups,\n    create roles and invite users"]}},access_codes:{description:"Allows you to specify an access code that a user must know in order to view the Player",descriptions:{short:"Protect sensitive videos by requiring an access code before playback.",long:"Protect video content intended only for specific audiences by adding a player access code. With a player access code, the viewer has to enter the exact code before the video will begin to play.",bullet_points:["Create one or multiple access codes to gain entry to a player","Limit access to videos intended for use within your account","Restrict access to work-in-progress video content by limiting access to a small group of reviewers","Provide access to exclusive or premium video content to paid subscribers","Set expiry dates on access codes limit the number of times a particular access code can be used"]}},request_player_access:{description:"",descriptions:{short:"Secure players by requiring viewers to request access before viewing.",long:"Control access to players by requiring viewers to enter the email and request permission from a designated request manager.  Each request is sent to the appropriate manager who can approve or deny access directly from the request email or from the Vidyard Dashboard. Upon approval, the viewer receives a link to the player allowing them to watch the video.",bullet_points:["Choose request managers from any Vidyard user within the account","Option to set a custom allow or deny response message","Flexiblity to automatically accept access code requests from specific domains"]}},bsp:{description:"",descriptions:{short:"Publish and distribute videos with full control over the viewer's journey and your brand.",long:"Sharing pages are a great way to publish and distribute your video content publicly, or privately while maintaining control over the viewer's journey and your brand. Sharing pages can be customized with your logo and colour or tailored through your own custom HTML and CSS.",bullet_points:["Option to fully brand sharing pages to match the look and feel of your website","Optionally allow viewers to comment on videos","Data on video engagement are pulled back into Vidyard automatically","Can be configured for any folder"]}},ip_restriction:{description:"Secures content by IP range of the user requesting access,\n    this is great for internal hubs and videos",descriptions:{short:"Control who can watch video content based on IP ranges.",long:"Using whitelisted IP ranges, you can prevent visitors outside of the specified IP blocks from watching your Vidyard players. Whitelists can be applied at both the account level with Folder-level IP whitelists (affecting all players), and at the player level with Player-level IP whitelists (affecting each individual player).",bullet_points:["Restrict viewership to internal audiences.","Ban users from viewing your content.","Incrementally control the release of content to specific blocks of viewers."]}}}}},xhNq:function(e,t,n){var i=n("7kpE");e.exports=function e(t,n,r){return i(t,n,0,r)}},yQ2E:function(e,t,n){n("8rVx")(n("wFd/"))},yTrO:function(e,t,n){n("8rVx")(n("nfCO"))},yg6D:function(e,t){e.exports="/**\n *\n * Color picker\n * Author: Stefan Petre www.eyecon.ro\n *\n * Dual licensed under the MIT and GPL licenses\n *\n */\nvar test_move;\nvar test_down;\n\n(function ($) {\n\tvar ColorPicker = function () {\n\t\tvar\n\t\t\tids = {},\n\t\t\tinAction,\n\t\t\tcharMin = 65,\n\t\t\tvisible,\n\t\t\ttpl = '<div class=\"colorpicker\"><div class=\"colorpicker_color\"><div><div></div></div></div><div class=\"colorpicker_hue\"><div></div></div><div class=\"colorpicker_new_color\"></div><div class=\"colorpicker_current_color\"></div><div class=\"colorpicker_hex\"><input type=\"text\" maxlength=\"6\" size=\"6\" /></div><div class=\"colorpicker_rgb_r colorpicker_field\"><input type=\"text\" maxlength=\"3\" size=\"3\" /><span></span></div><div class=\"colorpicker_rgb_g colorpicker_field\"><input type=\"text\" maxlength=\"3\" size=\"3\" /><span></span></div><div class=\"colorpicker_rgb_b colorpicker_field\"><input type=\"text\" maxlength=\"3\" size=\"3\" /><span></span></div><div class=\"colorpicker_hsb_h colorpicker_field\"><input type=\"text\" maxlength=\"3\" size=\"3\" /><span></span></div><div class=\"colorpicker_hsb_s colorpicker_field\"><input type=\"text\" maxlength=\"3\" size=\"3\" /><span></span></div><div class=\"colorpicker_hsb_b colorpicker_field\"><input type=\"text\" maxlength=\"3\" size=\"3\" /><span></span></div><div class=\"colorpicker_submit\"></div></div>',\n\t\t\tdefaults = {\n\t\t\t\teventName: 'click',\n\t\t\t\tonShow: function () {},\n\t\t\t\tonBeforeShow: function(){},\n\t\t\t\tonHide: function () {},\n\t\t\t\tonChange: function () {},\n\t\t\t\tonSubmit: function () {},\n\t\t\t\tcolor: 'ff0000',\n\t\t\t\tlivePreview: true,\n\t\t\t\tflat: false\n\t\t\t},\n\t\t\tfillRGBFields = function  (hsb, cal) {\n\t\t\t\tvar rgb = HSBToRGB(hsb);\n\t\t\t\t$(cal).data('colorpicker').fields\n\t\t\t\t\t.eq(1).val(rgb.r).end()\n\t\t\t\t\t.eq(2).val(rgb.g).end()\n\t\t\t\t\t.eq(3).val(rgb.b).end();\n\t\t\t},\n\t\t\tfillHSBFields = function  (hsb, cal) {\n\t\t\t\t$(cal).data('colorpicker').fields\n\t\t\t\t\t.eq(4).val(hsb.h).end()\n\t\t\t\t\t.eq(5).val(hsb.s).end()\n\t\t\t\t\t.eq(6).val(hsb.b).end();\n\t\t\t},\n\t\t\tfillHexFields = function (hsb, cal) {\n\t\t\t\t$(cal).data('colorpicker').fields\n\t\t\t\t\t.eq(0).val(HSBToHex(hsb)).end();\n\t\t\t},\n\t\t\tsetSelector = function (hsb, cal) {\n\t\t\t\t$(cal).data('colorpicker').selector.css('backgroundColor', '#' + HSBToHex({h: hsb.h, s: 100, b: 100}));\n\t\t\t\t$(cal).data('colorpicker').selectorIndic.css({\n\t\t\t\t\tleft: parseInt(150 * hsb.s/100, 10),\n\t\t\t\t\ttop: parseInt(150 * (100-hsb.b)/100, 10)\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetHue = function (hsb, cal) {\n\t\t\t\t$(cal).data('colorpicker').hue.css('top', parseInt(150 - 150 * hsb.h/360, 10));\n\t\t\t},\n\t\t\tsetCurrentColor = function (hsb, cal) {\n\t\t\t\t$(cal).data('colorpicker').currentColor.css('backgroundColor', '#' + HSBToHex(hsb));\n\t\t\t},\n\t\t\tsetNewColor = function (hsb, cal) {\n\t\t\t\t$(cal).data('colorpicker').newColor.css('backgroundColor', '#' + HSBToHex(hsb));\n\t\t\t},\n\t\t\tkeyDown = function (ev) {\n\t\t\t\tvar pressedKey = ev.charCode || ev.keyCode || -1;\n\t\t\t\tif ((pressedKey > charMin && pressedKey <= 90) || pressedKey == 32) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar cal = $(this).parent().parent();\n\t\t\t\tif (cal.data('colorpicker').livePreview === true) {\n\t\t\t\t\tchange.apply(this);\n\t\t\t\t}\n\t\t\t},\n\t\t\tchange = function (ev) {\n\t\t\t\tvar cal = $(this).parent().parent(), col;\n\t\t\t\tif (this.parentNode.className.indexOf('_hex') > 0) {\n\t\t\t\t\tcal.data('colorpicker').color = col = HexToHSB(fixHex(this.value));\n\t\t\t\t} else if (this.parentNode.className.indexOf('_hsb') > 0) {\n\t\t\t\t\tcal.data('colorpicker').color = col = fixHSB({\n\t\t\t\t\t\th: parseInt(cal.data('colorpicker').fields.eq(4).val(), 10),\n\t\t\t\t\t\ts: parseInt(cal.data('colorpicker').fields.eq(5).val(), 10),\n\t\t\t\t\t\tb: parseInt(cal.data('colorpicker').fields.eq(6).val(), 10)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcal.data('colorpicker').color = col = RGBToHSB(fixRGB({\n\t\t\t\t\t\tr: parseInt(cal.data('colorpicker').fields.eq(1).val(), 10),\n\t\t\t\t\t\tg: parseInt(cal.data('colorpicker').fields.eq(2).val(), 10),\n\t\t\t\t\t\tb: parseInt(cal.data('colorpicker').fields.eq(3).val(), 10)\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tif (ev) {\n\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t}\n\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t\tcal.data('colorpicker').onChange.apply(cal, [col, HSBToHex(col), HSBToRGB(col)]);\n\t\t\t},\n\t\t\tblur = function (ev) {\n\t\t\t\tvar cal = $(this).parent().parent();\n\t\t\t\tcal.data('colorpicker').fields.parent().removeClass('colorpicker_focus');\n\t\t\t},\n\t\t\tfocus = function () {\n\t\t\t\tcharMin = this.parentNode.className.indexOf('_hex') > 0 ? 70 : 65;\n\t\t\t\t$(this).parent().parent().data('colorpicker').fields.parent().removeClass('colorpicker_focus');\n\t\t\t\t$(this).parent().addClass('colorpicker_focus');\n\t\t\t},\n\t\t\tdownIncrement = function (ev) {\n\t\t\t\tvar field = $(this).parent().find('input').focus();\n\t\t\t\tvar current = {\n\t\t\t\t\tel: $(this).parent().addClass('colorpicker_slider'),\n\t\t\t\t\tmax: this.parentNode.className.indexOf('_hsb_h') > 0 ? 360 : (this.parentNode.className.indexOf('_hsb') > 0 ? 100 : 255),\n\t\t\t\t\ty: ev.pageY,\n\t\t\t\t\tfield: field,\n\t\t\t\t\tval: parseInt(field.val(), 10),\n\t\t\t\t\tpreview: $(this).parent().parent().data('colorpicker').livePreview\n\t\t\t\t};\n\t\t\t\t$(this).closest('body').on('mouseup', current, upIncrement);\n\t\t\t\t$(this).closest('body').on('mousemove', current, moveIncrement);\n\t\t\t},\n\t\t\tmoveIncrement = function (ev) {\n\t\t\t\tev.data.field.val(Math.max(0, Math.min(ev.data.max, parseInt(ev.data.val + ev.pageY - ev.data.y, 10))));\n\t\t\t\tif (ev.data.preview) {\n\t\t\t\t\tchange.apply(ev.data.field.get(0), [true]);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupIncrement = function (ev) {\n\t\t\t\tchange.apply(ev.data.field.get(0), [true]);\n\t\t\t\tev.data.el.removeClass('colorpicker_slider').find('input').focus();\n\t\t\t\t$(this).closest('body').off('mouseup', upIncrement);\n\t\t\t\t$(this).closest('body').off('mousemove', moveIncrement);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tdownHue = function (ev) {\n\t\t\t\tvar current = {\n\t\t\t\t\tcal: $(this).parent(),\n\t\t\t\t\ty: $(this).offset().top\n\t\t\t\t};\n\t\t\t\tcurrent.preview = current.cal.data('colorpicker').livePreview;\n\t\t\t\t$(this).closest('body').on('mouseup', current, upHue);\n\t\t\t\t$(this).closest('body').on('mousemove', current, moveHue);\n\n        var new_ev = ev;\n        new_ev.data = current;\n        moveHue(new_ev);\n\t\t\t},\n\t\t\tmoveHue = function (ev) {\n\t\t\t\tchange.apply(\n\t\t\t\t\tev.data.cal.data('colorpicker')\n\t\t\t\t\t\t.fields\n\t\t\t\t\t\t.eq(4)\n\t\t\t\t\t\t.val(parseInt(360*(150 - Math.max(0,Math.min(150,(ev.pageY - ev.data.y))))/150, 10))\n\t\t\t\t\t\t.get(0),\n\t\t\t\t\t[ev.data.preview]\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupHue = function (ev) {\n\t\t\t\tfillRGBFields(ev.data.cal.data('colorpicker').color, ev.data.cal.get(0));\n\t\t\t\tfillHexFields(ev.data.cal.data('colorpicker').color, ev.data.cal.get(0));\n\t\t\t\t$(this).closest('body').off('mouseup', upHue);\n\t\t\t\t$(this).closest('body').off('mousemove', moveHue);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tdownSelector = function (ev) {\n\t\t\t\tvar current = {\n\t\t\t\t\tcal: $(this).parent(),\n\t\t\t\t\tpos: $(this).offset()\n\t\t\t\t};\n\t\t\t\tcurrent.preview = current.cal.data('colorpicker').livePreview;\n\t\t\t\t$(this).closest('body').on('mouseup', current, upSelector);\n\t\t\t\t$(this).closest('body').on('mousemove', current, moveSelector);\n\n        var new_ev = ev;\n        new_ev.data = current;\n        moveSelector(new_ev);\n\t\t\t},\n\t\t\tmoveSelector = function (ev) {\n\t\t\t\tchange.apply(\n\t\t\t\t\tev.data.cal.data('colorpicker')\n\t\t\t\t\t\t.fields\n\t\t\t\t\t\t.eq(6)\n\t\t\t\t\t\t.val(parseInt(100*(150 - Math.max(0,Math.min(150,(ev.pageY - ev.data.pos.top))))/150, 10))\n\t\t\t\t\t\t.end()\n\t\t\t\t\t\t.eq(5)\n\t\t\t\t\t\t.val(parseInt(100*(Math.max(0,Math.min(150,(ev.pageX - ev.data.pos.left))))/150, 10))\n\t\t\t\t\t\t.get(0),\n\t\t\t\t\t[ev.data.preview]\n        );\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tupSelector = function (ev) {\n\t\t\t\tfillRGBFields(ev.data.cal.data('colorpicker').color, ev.data.cal.get(0));\n\t\t\t\tfillHexFields(ev.data.cal.data('colorpicker').color, ev.data.cal.get(0));\n\t\t\t\t$(this).closest('body').off('mouseup', upSelector);\n\t\t\t\t$(this).closest('body').off('mousemove', moveSelector);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tenterSubmit = function (ev) {\n\t\t\t\t$(this).addClass('colorpicker_focus');\n\t\t\t},\n\t\t\tleaveSubmit = function (ev) {\n\t\t\t\t$(this).removeClass('colorpicker_focus');\n\t\t\t},\n\t\t\tclickSubmit = function (ev) {\n\t\t\t\tvar cal = $(this).parent();\n\t\t\t\tvar col = cal.data('colorpicker').color;\n\t\t\t\tcal.data('colorpicker').origColor = col;\n\t\t\t\tsetCurrentColor(col, cal.get(0));\n\t\t\t\tcal.data('colorpicker').onSubmit(col, HSBToHex(col), HSBToRGB(col), cal.data('colorpicker').el);\n\t\t\t},\n\t\t\tshow = function (ev) {\n\t\t\t\tvar cal = $(this).closest('body').find('#' + $(this).data('colorpickerId'));\n\t\t\t\tcal.data('colorpicker').onBeforeShow.apply(this, [cal.get(0)]);\n\t\t\t\tvar pos = $(this).offset();\n\t\t\t\tvar viewPort = getViewport();\n\t\t\t\tvar top = pos.top + this.offsetHeight;\n\t\t\t\tvar left = pos.left;\n\t\t\t\tif (top + 176 > viewPort.t + viewPort.h) {\n\t\t\t\t\ttop -= this.offsetHeight + 176;\n\t\t\t\t}\n\t\t\t\tif (left + 356 > viewPort.l + viewPort.w) {\n\t\t\t\t\tleft -= 356;\n\t\t\t\t}\n\t\t\t\tcal.css({left: left + 'px', top: top + 'px'});\n\t\t\t\tif (cal.data('colorpicker').onShow.apply(this, [cal.get(0)]) != false) {\n\t\t\t\t\tcal.show();\n\t\t\t\t}\n\t\t\t\t$(this).closest('body').on('mousedown', {cal: cal}, hide);\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\thide = function (ev) {\n\t\t\t\tif (!isChildOf(ev.data.cal.get(0), ev.target, ev.data.cal.get(0))) {\n\t\t\t\t\tif (ev.data.cal.data('colorpicker').onHide.apply(this, [ev.data.cal.get(0)]) != false) {\n\t\t\t\t\t\tev.data.cal.hide();\n\t\t\t\t\t}\n\t\t\t\t\t$(this).closest('body').off('mousedown', hide);\n\t\t\t\t}\n\t\t\t},\n\t\t\tisChildOf = function(parentEl, el, container) {\n\t\t\t\tif (parentEl == el) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (parentEl.contains) {\n\t\t\t\t\treturn parentEl.contains(el);\n\t\t\t\t}\n\t\t\t\tif ( parentEl.compareDocumentPosition ) {\n\t\t\t\t\treturn !!(parentEl.compareDocumentPosition(el) & 16);\n\t\t\t\t}\n\t\t\t\tvar prEl = el.parentNode;\n\t\t\t\twhile(prEl && prEl != container) {\n\t\t\t\t\tif (prEl == parentEl)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tprEl = prEl.parentNode;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tgetViewport = function () {\n\t\t\t\tvar m = document.compatMode == 'CSS1Compat';\n\t\t\t\treturn {\n\t\t\t\t\tl : window.pageXOffset || (m ? document.documentElement.scrollLeft : document.body.scrollLeft),\n\t\t\t\t\tt : window.pageYOffset || (m ? document.documentElement.scrollTop : document.body.scrollTop),\n\t\t\t\t\tw : window.innerWidth || (m ? document.documentElement.clientWidth : document.body.clientWidth),\n\t\t\t\t\th : window.innerHeight || (m ? document.documentElement.clientHeight : document.body.clientHeight)\n\t\t\t\t};\n\t\t\t},\n\t\t\tfixHSB = function (hsb) {\n\t\t\t\treturn {\n\t\t\t\t\th: Math.min(360, Math.max(0, hsb.h)),\n\t\t\t\t\ts: Math.min(100, Math.max(0, hsb.s)),\n\t\t\t\t\tb: Math.min(100, Math.max(0, hsb.b))\n\t\t\t\t};\n\t\t\t},\n\t\t\tfixRGB = function (rgb) {\n\t\t\t\treturn {\n\t\t\t\t\tr: Math.min(255, Math.max(0, rgb.r)),\n\t\t\t\t\tg: Math.min(255, Math.max(0, rgb.g)),\n\t\t\t\t\tb: Math.min(255, Math.max(0, rgb.b))\n\t\t\t\t};\n\t\t\t},\n\t\t\tfixHex = function (hex) {\n\t\t\t\tvar len = 6 - hex.length;\n\t\t\t\tif (len > 0) {\n\t\t\t\t\tvar o = [];\n\t\t\t\t\tfor (var i=0; i<len; i++) {\n\t\t\t\t\t\to.push('0');\n\t\t\t\t\t}\n\t\t\t\t\to.push(hex);\n\t\t\t\t\thex = o.join('');\n\t\t\t\t}\n\t\t\t\treturn hex;\n\t\t\t},\n\t\t\tHexToRGB = function (hex) {\n\t\t\t\tvar hex = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\n\t\t\t\treturn {r: hex >> 16, g: (hex & 0x00FF00) >> 8, b: (hex & 0x0000FF)};\n\t\t\t},\n\t\t\tHexToHSB = function (hex) {\n\t\t\t\treturn RGBToHSB(HexToRGB(hex));\n\t\t\t},\n\t\t\tRGBToHSB = function (rgb) {\n\t\t\t\tvar hsb = {\n\t\t\t\t\th: 0,\n\t\t\t\t\ts: 0,\n\t\t\t\t\tb: 0\n\t\t\t\t};\n\t\t\t\tvar min = Math.min(rgb.r, rgb.g, rgb.b);\n\t\t\t\tvar max = Math.max(rgb.r, rgb.g, rgb.b);\n\t\t\t\tvar delta = max - min;\n\t\t\t\thsb.b = max;\n\t\t\t\tif (max != 0) {\n\n\t\t\t\t}\n\t\t\t\thsb.s = max != 0 ? 255 * delta / max : 0;\n\t\t\t\tif (hsb.s != 0) {\n\t\t\t\t\tif (rgb.r == max) {\n\t\t\t\t\t\thsb.h = (rgb.g - rgb.b) / delta;\n\t\t\t\t\t} else if (rgb.g == max) {\n\t\t\t\t\t\thsb.h = 2 + (rgb.b - rgb.r) / delta;\n\t\t\t\t\t} else {\n\t\t\t\t\t\thsb.h = 4 + (rgb.r - rgb.g) / delta;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\thsb.h = -1;\n\t\t\t\t}\n\t\t\t\thsb.h *= 60;\n\t\t\t\tif (hsb.h < 0) {\n\t\t\t\t\thsb.h += 360;\n\t\t\t\t}\n\t\t\t\thsb.s *= 100/255;\n\t\t\t\thsb.b *= 100/255;\n\t\t\t\treturn hsb;\n\t\t\t},\n\t\t\tHSBToRGB = function (hsb) {\n\t\t\t\tvar rgb = {};\n\t\t\t\tvar h = Math.round(hsb.h);\n\t\t\t\tvar s = Math.round(hsb.s*255/100);\n\t\t\t\tvar v = Math.round(hsb.b*255/100);\n\t\t\t\tif(s == 0) {\n\t\t\t\t\trgb.r = rgb.g = rgb.b = v;\n\t\t\t\t} else {\n\t\t\t\t\tvar t1 = v;\n\t\t\t\t\tvar t2 = (255-s)*v/255;\n\t\t\t\t\tvar t3 = (t1-t2)*(h%60)/60;\n\t\t\t\t\tif(h==360) h = 0;\n\t\t\t\t\tif(h<60) {rgb.r=t1;\trgb.b=t2; rgb.g=t2+t3}\n\t\t\t\t\telse if(h<120) {rgb.g=t1; rgb.b=t2;\trgb.r=t1-t3}\n\t\t\t\t\telse if(h<180) {rgb.g=t1; rgb.r=t2;\trgb.b=t2+t3}\n\t\t\t\t\telse if(h<240) {rgb.b=t1; rgb.r=t2;\trgb.g=t1-t3}\n\t\t\t\t\telse if(h<300) {rgb.b=t1; rgb.g=t2;\trgb.r=t2+t3}\n\t\t\t\t\telse if(h<360) {rgb.r=t1; rgb.g=t2;\trgb.b=t1-t3}\n\t\t\t\t\telse {rgb.r=0; rgb.g=0;\trgb.b=0}\n\t\t\t\t}\n\t\t\t\treturn {r:Math.round(rgb.r), g:Math.round(rgb.g), b:Math.round(rgb.b)};\n\t\t\t},\n\t\t\tRGBToHex = function (rgb) {\n\t\t\t\tvar hex = [\n\t\t\t\t\trgb.r.toString(16),\n\t\t\t\t\trgb.g.toString(16),\n\t\t\t\t\trgb.b.toString(16)\n\t\t\t\t];\n\t\t\t\t$.each(hex, function (nr, val) {\n\t\t\t\t\tif (val.length == 1) {\n\t\t\t\t\t\thex[nr] = '0' + val;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn hex.join('');\n\t\t\t},\n\t\t\tHSBToHex = function (hsb) {\n\t\t\t\treturn RGBToHex(HSBToRGB(hsb));\n\t\t\t},\n\t\t\trestoreOriginal = function () {\n\t\t\t\tvar cal = $(this).parent();\n\t\t\t\tvar col = cal.data('colorpicker').origColor;\n\t\t\t\tcal.data('colorpicker').color = col;\n\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t};\n\t\treturn {\n\t\t\tinit: function (opt) {\n\t\t\t\topt = $.extend({}, defaults, opt||{});\n\t\t\t\tif (typeof opt.color == 'string') {\n\t\t\t\t\topt.color = HexToHSB(opt.color);\n\t\t\t\t} else if (opt.color.r != undefined && opt.color.g != undefined && opt.color.b != undefined) {\n\t\t\t\t\topt.color = RGBToHSB(opt.color);\n\t\t\t\t} else if (opt.color.h != undefined && opt.color.s != undefined && opt.color.b != undefined) {\n\t\t\t\t\topt.color = fixHSB(opt.color);\n\t\t\t\t} else {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\treturn this.each(function () {\n\t\t\t\t\tif (!$(this).data('colorpickerId')) {\n\t\t\t\t\t\tvar options = $.extend({}, opt);\n\t\t\t\t\t\toptions.origColor = opt.color;\n\t\t\t\t\t\tvar id = 'collorpicker_' + parseInt(Math.random() * 1000);\n\t\t\t\t\t\t$(this).data('colorpickerId', id);\n\t\t\t\t\t\tvar cal = $(tpl).attr('id', id);\n\t\t\t\t\t\tif (options.flat) {\n\t\t\t\t\t\t\tcal.appendTo(this).show();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcal.appendTo($(this).closest('body'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions.fields = cal\n\t\t\t\t\t\t\t\t\t\t\t.find('input')\n\t\t\t\t\t\t\t\t\t\t\t\t.on('keyup', keyDown)\n\t\t\t\t\t\t\t\t\t\t\t\t.on('change', change)\n\t\t\t\t\t\t\t\t\t\t\t\t.on('blur', blur)\n\t\t\t\t\t\t\t\t\t\t\t\t.on('focus', focus);\n\t\t\t\t\t\tcal\n\t\t\t\t\t\t\t.find('span').on('mousedown', downIncrement).end()\n\t\t\t\t\t\t\t.find('>div.colorpicker_current_color').on('click', restoreOriginal);\n\t\t\t\t\t\toptions.selector = cal.find('div.colorpicker_color').on('mousedown', downSelector);\n\t\t\t\t\t\toptions.selectorIndic = options.selector.find('div div');\n\t\t\t\t\t\toptions.el = this;\n\t\t\t\t\t\toptions.hue = cal.find('div.colorpicker_hue div');\n\t\t\t\t\t\tcal.find('div.colorpicker_hue').on('mousedown', downHue);\n\t\t\t\t\t\toptions.newColor = cal.find('div.colorpicker_new_color');\n\t\t\t\t\t\toptions.currentColor = cal.find('div.colorpicker_current_color');\n\t\t\t\t\t\tcal.data('colorpicker', options);\n\t\t\t\t\t\tcal.find('div.colorpicker_submit')\n\t\t\t\t\t\t\t.on('mouseenter', enterSubmit)\n\t\t\t\t\t\t\t.on('mouseleave', leaveSubmit)\n\t\t\t\t\t\t\t.on('click', clickSubmit);\n\t\t\t\t\t\tfillRGBFields(options.color, cal.get(0));\n\t\t\t\t\t\tfillHSBFields(options.color, cal.get(0));\n\t\t\t\t\t\tfillHexFields(options.color, cal.get(0));\n\t\t\t\t\t\tsetHue(options.color, cal.get(0));\n\t\t\t\t\t\tsetSelector(options.color, cal.get(0));\n\t\t\t\t\t\tsetCurrentColor(options.color, cal.get(0));\n\t\t\t\t\t\tsetNewColor(options.color, cal.get(0));\n\t\t\t\t\t\tif (options.flat) {\n\t\t\t\t\t\t\tcal.css({\n\t\t\t\t\t\t\t\tposition: 'relative',\n\t\t\t\t\t\t\t\tdisplay: 'block'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(this).on(options.eventName, show);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowPicker: function() {\n\t\t\t\treturn this.each( function () {\n\t\t\t\t\tif ($(this).data('colorpickerId')) {\n\t\t\t\t\t\tshow.apply(this);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thidePicker: function() {\n\t\t\t\treturn this.each( function () {\n\t\t\t\t\tif ($(this).data('colorpickerId')) {\n\t\t\t\t\t\t$('#' + $(this).data('colorpickerId')).hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetColor: function(col) {\n\t\t\t\tif (typeof col == 'string') {\n\t\t\t\t\tcol = HexToHSB(col);\n\t\t\t\t} else if (col.r != undefined && col.g != undefined && col.b != undefined) {\n\t\t\t\t\tcol = RGBToHSB(col);\n\t\t\t\t} else if (col.h != undefined && col.s != undefined && col.b != undefined) {\n\t\t\t\t\tcol = fixHSB(col);\n\t\t\t\t} else {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\treturn this.each(function(){\n\t\t\t\t\tif ($(this).data('colorpickerId')) {\n\t\t\t\t\t\tvar cal = $('#' + $(this).data('colorpickerId'));\n\t\t\t\t\t\tcal.data('colorpicker').color = col;\n\t\t\t\t\t\tcal.data('colorpicker').origColor = col;\n\t\t\t\t\t\tfillRGBFields(col, cal.get(0));\n\t\t\t\t\t\tfillHSBFields(col, cal.get(0));\n\t\t\t\t\t\tfillHexFields(col, cal.get(0));\n\t\t\t\t\t\tsetHue(col, cal.get(0));\n\t\t\t\t\t\tsetSelector(col, cal.get(0));\n\t\t\t\t\t\tsetCurrentColor(col, cal.get(0));\n\t\t\t\t\t\tsetNewColor(col, cal.get(0));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}();\n\t$.fn.extend({\n\t\tColorPicker: ColorPicker.init,\n\t\tColorPickerHide: ColorPicker.hidePicker,\n\t\tColorPickerShow: ColorPicker.showPicker,\n\t\tColorPickerSetColor: ColorPicker.setColor\n\t});\n})(jQuery)\n"},z127:function(e,t,n){n("8rVx")(n("zNUh"))},zNUh:function(e,t){e.exports="/*global $, bootbox */\nvar BootBoxConfirmation = {\n  init: function (filter) {\n    // Nested function so this can be called multiple times for different dialogs\n    (function () {\n      // Inspired by: https://github.com/ifad/data-confirm-modal/\n      var confirmed = false;\n\n      $(document).on('confirm', filter || 'a[data-confirm]', function () {\n        // Exit early if already confirmed to avoid re-processing\n        // This should not happen normally since the buttons are disabled\n        if (confirmed) {\n          return confirmed;\n        }\n\n        var original = $.rails.confirm;\n        var reset = function () {\n          $.rails.confirm = original;\n        };\n\n        $.rails.confirm = function () {\n          return confirmed;\n        };\n\n        var link = $(this);\n\n        var options = {\n          message:          link.data('confirm'),\n          title:            link.data('title'),\n          confirmLabel:     link.data('confirm-button'),\n          processingLabel:  link.data('confirm-processing'),\n\n          onConfirm: function(e) {\n            confirmed = true;\n            link[0].click(); // This action only works on the DOM element itself for anchor tags\n            reset();\n            return false;\n          },\n\n          onCancel: function() {\n            reset();\n            return true;\n          }\n        };\n\n        showVYConfirmationDialog(options);\n\n        return confirmed;\n      });\n    })();\n  }\n};\n\n"},zRKy:function(e,t){var n={nbsp:" ",cent:"",pound:"",yen:"",euro:"",copy:"",reg:"",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};e.exports=n},"zo2/":function(e,t){e.exports='/*global $, widget_uuid */\nvar UploaderWidgetEdit = {\n  widgetDomain: (function () {\n    "use strict";\n    return \'https://\' + document.domain + \'/uploader_widgets/\';\n  }()),\n\n  bindUIActions: function() {\n    "use strict";\n    SavePopup.create(\'#edit-uploader-widget-form\');\n\n    var self = this;\n    var $inputs = $(\'.edit_uploader_widget input[type="checkbox"]\');\n\n    $inputs.bootstrapSwitch({\n      size: \'mini\'\n    }).on("change", function () {\n      self.updateEmbedCodes();\n    });\n\n    $("#save-btn").click(function(){\n      var data = {\n        tags: []\n      };\n      $("#valid-tags .content-container").each(function() {\n        data.tags.push({\n          name: $(this).text()\n        });\n      });\n    });\n\n    $(".edit_uploader_widget input[type=text]").on("keyup", function () {\n      self.updateEmbedCodes();\n    });\n\n    $("#show_domain_checkbox").on("switchChange.bootstrapSwitch change", function () {\n      if ($(this).is(":checked")) {\n        $("#domain_restriction_options").slideDown(250);\n        $("#share_options").slideUp(250);\n      } else {\n        $("#domain_restriction_options").slideUp(250);\n        $("#share_options").slideDown(250);\n        $("#uploader_widget_whitelisted_embed_domain").val("");\n      }\n    });\n\n    $("#uploader_widget_can_upload_video, #uploader_widget_can_record_video").on("switchChange.bootstrapSwitch change", function () {\n      var other =  $(\'#uploader_widget_can_\' + (($(this).prop("id").match(/record/)) ? \'upload\' : \'record\') + \'_video\');\n      if (!$(this).is(":checked") && !other.is(":checked")) {\n          $(this).click();\n          $("#upload_record_error").slideDown(250);\n      }\n      else {\n        $("#upload_record_error").slideUp(250);\n      }\n    });\n\n    $("#uploader_widget_multiple_uploads").on("switchChange.bootstrapSwitch change", function () {\n      if ($(this).is(":checked")) {\n        $("#uploader_widget_create_single_player").closest(\'.checkbox\').slideDown(250);\n      } else {\n        var $singlePlayerCheckbox = $("#uploader_widget_create_single_player");\n        $singlePlayerCheckbox.closest(\'.checkbox\').slideUp(250);\n        $singlePlayerCheckbox.bootstrapSwitch(\'state\', false);\n      }\n    });\n  },\n\n  updateEmbedCodes: function () {\n    "use strict";\n    var width = escapeHtml($(\'#uploader_widget_width\').val());\n    var height = escapeHtml($(\'#uploader_widget_height\').val());\n    var webhook_url = $("#uploader_widget_webhook_url").val();\n    var url = this.widgetDomain + widget_uuid;\n\n    var link_text = escapeHtml($(\'#link_text\').val());\n\n    var link_embed_code = "<input type=\\"button\\" onclick=\\"javascript:window.open(".concat("\'", url, "\', ",\n      "\'_blank\', ",\n      "\'width=", width, ", height=", height, ", resizable=yes, scrollbars=yes, menubar=yes\'",\n      ")\\" ",\n      "value=\\"", link_text, "\\" />");\n\n    var preview_embed_code = "<input type=\\"button\\" onclick=\\"javascript:window.open(".concat(\n      "\'", url, "?webhook_url=", encodeURIComponent(webhook_url), "\', ",\n      "\'_blank\', ",\n      "\'width=", width, ", height=", height, ", resizable=yes, scrollbars=yes, menubar=yes\'",\n      ")\\" ",\n      "value=\\"", link_text, "\\" />");\n\n    $(\'#preview\').html(preview_embed_code);\n    $(\'#popout-code\').val(link_embed_code);\n    $(\'#iframe-code\').val(\'<iframe frameborder="0" marginwidth="0" marginheight="0" src="\' + url + \'" width="\' + width + \'" height="\' + height + \'"></iframe>\');\n    $(\'#uploader-url\').val(url);\n  },\n\n  setupTooltips: function () {\n    "use strict";\n    var contentString = "We will automatically match www.example.com, example.com variations and http, https variations. Any Subdomains will be matched if you enter *.example.com<br/>";\n    $("#embedquestion").tooltip({html: true, title: contentString});\n    var webhookcontent = "A webhook URL is the web address our API will use to send information about a video upload that has occurred when using this uploader widget for use on your own (or another) website.<br />";\n    $("#webhookquestion").tooltip({html: true, title: webhookcontent});\n  },\n\n  init: function () {\n    "use strict";\n    this.updateEmbedCodes();\n    this.setupTooltips();\n\n    if ($("#show_domain_checkbox").is(":checked")) {\n      $("#domain_restriction_options").show();\n      $("#share_options").hide();\n    } else {\n      $("#domain_restriction_options").hide();\n      $("#share_options").show();\n    }\n\n    if ($("#uploader_widget_whitelisted_embed_domain").val() !== "") {\n      $("#show_domain_checkbox").attr("checked", true);\n      $("#domain_restriction_options").show();\n      $("#share_options").hide();\n    }\n\n    this.bindUIActions();\n  }\n};\n'}},[[2,"runtime","vendors","common"]]]);